define("mw.noop",function(){return{}});
/**
 * @license
 * Lo-Dash 2.4.1 (Custom Build) lodash.com/license | Underscore.js 1.5.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./dist/lodash.js`
 */
;(function(){function n(n,t,e){e=(e||0)-1;for(var r=n?n.length:0;++e<r;)if(n[e]===t)return e;return-1}function t(t,e){var r=typeof e;if(t=t.l,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?e:m+e;return t=(t=t[r])&&t[u],"object"==r?t&&-1<n(t,e)?0:-1:t?0:-1}function e(n){var t=this.l,e=typeof n;if("boolean"==e||null==n)t[n]=true;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?n:m+n,t=t[e]||(t[e]={});"object"==e?(t[r]||(t[r]=[])).push(n):t[r]=true
}}function r(n){return n.charCodeAt(0)}function u(n,t){for(var e=n.m,r=t.m,u=-1,o=e.length;++u<o;){var i=e[u],a=r[u];if(i!==a){if(i>a||typeof i=="undefined")return 1;if(i<a||typeof a=="undefined")return-1}}return n.n-t.n}function o(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],i=n[r-1];if(u&&typeof u=="object"&&o&&typeof o=="object"&&i&&typeof i=="object")return false;for(u=f(),u["false"]=u["null"]=u["true"]=u.undefined=false,o=f(),o.k=n,o.l=u,o.push=e;++t<r;)o.push(n[t]);return o}function i(n){return"\\"+U[n]
}function a(){return h.pop()||[]}function f(){return g.pop()||{k:null,l:null,m:null,"false":false,n:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,o:null}}function l(n){n.length=0,h.length<_&&h.push(n)}function c(n){var t=n.l;t&&c(t),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,g.length<_&&g.push(n)}function p(n,t,e){t||(t=0),typeof e=="undefined"&&(e=n?n.length:0);var r=-1;e=e-t||0;for(var u=Array(0>e?0:e);++r<e;)u[r]=n[t+r];return u}function s(e){function h(n,t,e){if(!n||!V[typeof n])return n;
t=t&&typeof e=="undefined"?t:tt(t,e,3);for(var r=-1,u=V[typeof n]&&Fe(n),o=u?u.length:0;++r<o&&(e=u[r],false!==t(n[e],e,n)););return n}function g(n,t,e){var r;if(!n||!V[typeof n])return n;t=t&&typeof e=="undefined"?t:tt(t,e,3);for(r in n)if(false===t(n[r],r,n))break;return n}function _(n,t,e){var r,u=n,o=u;if(!u)return o;for(var i=arguments,a=0,f=typeof e=="number"?2:i.length;++a<f;)if((u=i[a])&&V[typeof u])for(var l=-1,c=V[typeof u]&&Fe(u),p=c?c.length:0;++l<p;)r=c[l],"undefined"==typeof o[r]&&(o[r]=u[r]);
return o}function U(n,t,e){var r,u=n,o=u;if(!u)return o;var i=arguments,a=0,f=typeof e=="number"?2:i.length;if(3<f&&"function"==typeof i[f-2])var l=tt(i[--f-1],i[f--],2);else 2<f&&"function"==typeof i[f-1]&&(l=i[--f]);for(;++a<f;)if((u=i[a])&&V[typeof u])for(var c=-1,p=V[typeof u]&&Fe(u),s=p?p.length:0;++c<s;)r=p[c],o[r]=l?l(o[r],u[r]):u[r];return o}function H(n){var t,e=[];if(!n||!V[typeof n])return e;for(t in n)me.call(n,t)&&e.push(t);return e}function J(n){return n&&typeof n=="object"&&!Te(n)&&me.call(n,"__wrapped__")?n:new Q(n)
}function Q(n,t){this.__chain__=!!t,this.__wrapped__=n}function X(n){function t(){if(r){var n=p(r);be.apply(n,arguments)}if(this instanceof t){var o=nt(e.prototype),n=e.apply(o,n||arguments);return wt(n)?n:o}return e.apply(u,n||arguments)}var e=n[0],r=n[2],u=n[4];return $e(t,n),t}function Z(n,t,e,r,u){if(e){var o=e(n);if(typeof o!="undefined")return o}if(!wt(n))return n;var i=ce.call(n);if(!K[i])return n;var f=Ae[i];switch(i){case T:case F:return new f(+n);case W:case P:return new f(n);case z:return o=f(n.source,C.exec(n)),o.lastIndex=n.lastIndex,o
}if(i=Te(n),t){var c=!r;r||(r=a()),u||(u=a());for(var s=r.length;s--;)if(r[s]==n)return u[s];o=i?f(n.length):{}}else o=i?p(n):U({},n);return i&&(me.call(n,"index")&&(o.index=n.index),me.call(n,"input")&&(o.input=n.input)),t?(r.push(n),u.push(o),(i?St:h)(n,function(n,i){o[i]=Z(n,t,e,r,u)}),c&&(l(r),l(u)),o):o}function nt(n){return wt(n)?ke(n):{}}function tt(n,t,e){if(typeof n!="function")return Ut;if(typeof t=="undefined"||!("prototype"in n))return n;var r=n.__bindData__;if(typeof r=="undefined"&&(De.funcNames&&(r=!n.name),r=r||!De.funcDecomp,!r)){var u=ge.call(n);
De.funcNames||(r=!O.test(u)),r||(r=E.test(u),$e(n,r))}if(false===r||true!==r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,u){return n.call(t,e,r,u)};case 4:return function(e,r,u,o){return n.call(t,e,r,u,o)}}return Mt(n,t)}function et(n){function t(){var n=f?i:this;if(u){var h=p(u);be.apply(h,arguments)}return(o||c)&&(h||(h=p(arguments)),o&&be.apply(h,o),c&&h.length<a)?(r|=16,et([e,s?r:-4&r,h,null,i,a])):(h||(h=arguments),l&&(e=n[v]),this instanceof t?(n=nt(e.prototype),h=e.apply(n,h),wt(h)?h:n):e.apply(n,h))
}var e=n[0],r=n[1],u=n[2],o=n[3],i=n[4],a=n[5],f=1&r,l=2&r,c=4&r,s=8&r,v=e;return $e(t,n),t}function rt(e,r){var u=-1,i=st(),a=e?e.length:0,f=a>=b&&i===n,l=[];if(f){var p=o(r);p?(i=t,r=p):f=false}for(;++u<a;)p=e[u],0>i(r,p)&&l.push(p);return f&&c(r),l}function ut(n,t,e,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){var i=n[r];if(i&&typeof i=="object"&&typeof i.length=="number"&&(Te(i)||yt(i))){t||(i=ut(i,t,e));var a=-1,f=i.length,l=o.length;for(o.length+=f;++a<f;)o[l++]=i[a]}else e||o.push(i)}return o
}function ot(n,t,e,r,u,o){if(e){var i=e(n,t);if(typeof i!="undefined")return!!i}if(n===t)return 0!==n||1/n==1/t;if(n===n&&!(n&&V[typeof n]||t&&V[typeof t]))return false;if(null==n||null==t)return n===t;var f=ce.call(n),c=ce.call(t);if(f==D&&(f=q),c==D&&(c=q),f!=c)return false;switch(f){case T:case F:return+n==+t;case W:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case z:case P:return n==oe(t)}if(c=f==$,!c){var p=me.call(n,"__wrapped__"),s=me.call(t,"__wrapped__");if(p||s)return ot(p?n.__wrapped__:n,s?t.__wrapped__:t,e,r,u,o);
if(f!=q)return false;if(f=n.constructor,p=t.constructor,f!=p&&!(dt(f)&&f instanceof f&&dt(p)&&p instanceof p)&&"constructor"in n&&"constructor"in t)return false}for(f=!u,u||(u=a()),o||(o=a()),p=u.length;p--;)if(u[p]==n)return o[p]==t;var v=0,i=true;if(u.push(n),o.push(t),c){if(p=n.length,v=t.length,(i=v==p)||r)for(;v--;)if(c=p,s=t[v],r)for(;c--&&!(i=ot(n[c],s,e,r,u,o)););else if(!(i=ot(n[v],s,e,r,u,o)))break}else g(t,function(t,a,f){return me.call(f,a)?(v++,i=me.call(n,a)&&ot(n[a],t,e,r,u,o)):void 0}),i&&!r&&g(n,function(n,t,e){return me.call(e,t)?i=-1<--v:void 0
});return u.pop(),o.pop(),f&&(l(u),l(o)),i}function it(n,t,e,r,u){(Te(t)?St:h)(t,function(t,o){var i,a,f=t,l=n[o];if(t&&((a=Te(t))||Pe(t))){for(f=r.length;f--;)if(i=r[f]==t){l=u[f];break}if(!i){var c;e&&(f=e(l,t),c=typeof f!="undefined")&&(l=f),c||(l=a?Te(l)?l:[]:Pe(l)?l:{}),r.push(t),u.push(l),c||it(l,t,e,r,u)}}else e&&(f=e(l,t),typeof f=="undefined"&&(f=t)),typeof f!="undefined"&&(l=f);n[o]=l})}function at(n,t){return n+he(Re()*(t-n+1))}function ft(e,r,u){var i=-1,f=st(),p=e?e.length:0,s=[],v=!r&&p>=b&&f===n,h=u||v?a():s;
for(v&&(h=o(h),f=t);++i<p;){var g=e[i],y=u?u(g,i,e):g;(r?!i||h[h.length-1]!==y:0>f(h,y))&&((u||v)&&h.push(y),s.push(g))}return v?(l(h.k),c(h)):u&&l(h),s}function lt(n){return function(t,e,r){var u={};e=J.createCallback(e,r,3),r=-1;var o=t?t.length:0;if(typeof o=="number")for(;++r<o;){var i=t[r];n(u,i,e(i,r,t),t)}else h(t,function(t,r,o){n(u,t,e(t,r,o),o)});return u}}function ct(n,t,e,r,u,o){var i=1&t,a=4&t,f=16&t,l=32&t;if(!(2&t||dt(n)))throw new ie;f&&!e.length&&(t&=-17,f=e=false),l&&!r.length&&(t&=-33,l=r=false);
var c=n&&n.__bindData__;return c&&true!==c?(c=p(c),c[2]&&(c[2]=p(c[2])),c[3]&&(c[3]=p(c[3])),!i||1&c[1]||(c[4]=u),!i&&1&c[1]&&(t|=8),!a||4&c[1]||(c[5]=o),f&&be.apply(c[2]||(c[2]=[]),e),l&&we.apply(c[3]||(c[3]=[]),r),c[1]|=t,ct.apply(null,c)):(1==t||17===t?X:et)([n,t,e,r,u,o])}function pt(n){return Be[n]}function st(){var t=(t=J.indexOf)===Wt?n:t;return t}function vt(n){return typeof n=="function"&&pe.test(n)}function ht(n){var t,e;return n&&ce.call(n)==q&&(t=n.constructor,!dt(t)||t instanceof t)?(g(n,function(n,t){e=t
}),typeof e=="undefined"||me.call(n,e)):false}function gt(n){return We[n]}function yt(n){return n&&typeof n=="object"&&typeof n.length=="number"&&ce.call(n)==D||false}function mt(n,t,e){var r=Fe(n),u=r.length;for(t=tt(t,e,3);u--&&(e=r[u],false!==t(n[e],e,n)););return n}function bt(n){var t=[];return g(n,function(n,e){dt(n)&&t.push(e)}),t.sort()}function _t(n){for(var t=-1,e=Fe(n),r=e.length,u={};++t<r;){var o=e[t];u[n[o]]=o}return u}function dt(n){return typeof n=="function"}function wt(n){return!(!n||!V[typeof n])
}function jt(n){return typeof n=="number"||n&&typeof n=="object"&&ce.call(n)==W||false}function kt(n){return typeof n=="string"||n&&typeof n=="object"&&ce.call(n)==P||false}function xt(n){for(var t=-1,e=Fe(n),r=e.length,u=Xt(r);++t<r;)u[t]=n[e[t]];return u}function Ct(n,t,e){var r=-1,u=st(),o=n?n.length:0,i=false;return e=(0>e?Ie(0,o+e):e)||0,Te(n)?i=-1<u(n,t,e):typeof o=="number"?i=-1<(kt(n)?n.indexOf(t,e):u(n,t,e)):h(n,function(n){return++r<e?void 0:!(i=n===t)}),i}function Ot(n,t,e){var r=true;t=J.createCallback(t,e,3),e=-1;
var u=n?n.length:0;if(typeof u=="number")for(;++e<u&&(r=!!t(n[e],e,n)););else h(n,function(n,e,u){return r=!!t(n,e,u)});return r}function Nt(n,t,e){var r=[];t=J.createCallback(t,e,3),e=-1;var u=n?n.length:0;if(typeof u=="number")for(;++e<u;){var o=n[e];t(o,e,n)&&r.push(o)}else h(n,function(n,e,u){t(n,e,u)&&r.push(n)});return r}function It(n,t,e){t=J.createCallback(t,e,3),e=-1;var r=n?n.length:0;if(typeof r!="number"){var u;return h(n,function(n,e,r){return t(n,e,r)?(u=n,false):void 0}),u}for(;++e<r;){var o=n[e];
if(t(o,e,n))return o}}function St(n,t,e){var r=-1,u=n?n.length:0;if(t=t&&typeof e=="undefined"?t:tt(t,e,3),typeof u=="number")for(;++r<u&&false!==t(n[r],r,n););else h(n,t);return n}function Et(n,t,e){var r=n?n.length:0;if(t=t&&typeof e=="undefined"?t:tt(t,e,3),typeof r=="number")for(;r--&&false!==t(n[r],r,n););else{var u=Fe(n),r=u.length;h(n,function(n,e,o){return e=u?u[--r]:--r,t(o[e],e,o)})}return n}function Rt(n,t,e){var r=-1,u=n?n.length:0;if(t=J.createCallback(t,e,3),typeof u=="number")for(var o=Xt(u);++r<u;)o[r]=t(n[r],r,n);
else o=[],h(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function At(n,t,e){var u=-1/0,o=u;if(typeof t!="function"&&e&&e[t]===n&&(t=null),null==t&&Te(n)){e=-1;for(var i=n.length;++e<i;){var a=n[e];a>o&&(o=a)}}else t=null==t&&kt(n)?r:J.createCallback(t,e,3),St(n,function(n,e,r){e=t(n,e,r),e>u&&(u=e,o=n)});return o}function Dt(n,t,e,r){if(!n)return e;var u=3>arguments.length;t=J.createCallback(t,r,4);var o=-1,i=n.length;if(typeof i=="number")for(u&&(e=n[++o]);++o<i;)e=t(e,n[o],o,n);else h(n,function(n,r,o){e=u?(u=false,n):t(e,n,r,o)
});return e}function $t(n,t,e,r){var u=3>arguments.length;return t=J.createCallback(t,r,4),Et(n,function(n,r,o){e=u?(u=false,n):t(e,n,r,o)}),e}function Tt(n){var t=-1,e=n?n.length:0,r=Xt(typeof e=="number"?e:0);return St(n,function(n){var e=at(0,++t);r[t]=r[e],r[e]=n}),r}function Ft(n,t,e){var r;t=J.createCallback(t,e,3),e=-1;var u=n?n.length:0;if(typeof u=="number")for(;++e<u&&!(r=t(n[e],e,n)););else h(n,function(n,e,u){return!(r=t(n,e,u))});return!!r}function Bt(n,t,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=-1;
for(t=J.createCallback(t,e,3);++o<u&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[0]:v;return p(n,0,Se(Ie(0,r),u))}function Wt(t,e,r){if(typeof r=="number"){var u=t?t.length:0;r=0>r?Ie(0,u+r):r||0}else if(r)return r=zt(t,e),t[r]===e?r:-1;return n(t,e,r)}function qt(n,t,e){if(typeof t!="number"&&null!=t){var r=0,u=-1,o=n?n.length:0;for(t=J.createCallback(t,e,3);++u<o&&t(n[u],u,n);)r++}else r=null==t||e?1:Ie(0,t);return p(n,r)}function zt(n,t,e,r){var u=0,o=n?n.length:u;for(e=e?J.createCallback(e,r,1):Ut,t=e(t);u<o;)r=u+o>>>1,e(n[r])<t?u=r+1:o=r;
return u}function Pt(n,t,e,r){return typeof t!="boolean"&&null!=t&&(r=e,e=typeof t!="function"&&r&&r[t]===n?null:t,t=false),null!=e&&(e=J.createCallback(e,r,3)),ft(n,t,e)}function Kt(){for(var n=1<arguments.length?arguments:arguments[0],t=-1,e=n?At(Ve(n,"length")):0,r=Xt(0>e?0:e);++t<e;)r[t]=Ve(n,t);return r}function Lt(n,t){var e=-1,r=n?n.length:0,u={};for(t||!r||Te(n[0])||(t=[]);++e<r;){var o=n[e];t?u[o]=t[e]:o&&(u[o[0]]=o[1])}return u}function Mt(n,t){return 2<arguments.length?ct(n,17,p(arguments,2),null,t):ct(n,1,null,null,t)
}function Vt(n,t,e){function r(){c&&ve(c),i=c=p=v,(g||h!==t)&&(s=Ue(),a=n.apply(l,o),c||i||(o=l=null))}function u(){var e=t-(Ue()-f);0<e?c=_e(u,e):(i&&ve(i),e=p,i=c=p=v,e&&(s=Ue(),a=n.apply(l,o),c||i||(o=l=null)))}var o,i,a,f,l,c,p,s=0,h=false,g=true;if(!dt(n))throw new ie;if(t=Ie(0,t)||0,true===e)var y=true,g=false;else wt(e)&&(y=e.leading,h="maxWait"in e&&(Ie(t,e.maxWait)||0),g="trailing"in e?e.trailing:g);return function(){if(o=arguments,f=Ue(),l=this,p=g&&(c||!y),false===h)var e=y&&!c;else{i||y||(s=f);var v=h-(f-s),m=0>=v;
m?(i&&(i=ve(i)),s=f,a=n.apply(l,o)):i||(i=_e(r,v))}return m&&c?c=ve(c):c||t===h||(c=_e(u,t)),e&&(m=true,a=n.apply(l,o)),!m||c||i||(o=l=null),a}}function Ut(n){return n}function Gt(n,t,e){var r=true,u=t&&bt(t);t&&(e||u.length)||(null==e&&(e=t),o=Q,t=n,n=J,u=bt(t)),false===e?r=false:wt(e)&&"chain"in e&&(r=e.chain);var o=n,i=dt(o);St(u,function(e){var u=n[e]=t[e];i&&(o.prototype[e]=function(){var t=this.__chain__,e=this.__wrapped__,i=[e];if(be.apply(i,arguments),i=u.apply(n,i),r||t){if(e===i&&wt(i))return this;
i=new o(i),i.__chain__=t}return i})})}function Ht(){}function Jt(n){return function(t){return t[n]}}function Qt(){return this.__wrapped__}e=e?Y.defaults(G.Object(),e,Y.pick(G,A)):G;var Xt=e.Array,Yt=e.Boolean,Zt=e.Date,ne=e.Function,te=e.Math,ee=e.Number,re=e.Object,ue=e.RegExp,oe=e.String,ie=e.TypeError,ae=[],fe=re.prototype,le=e._,ce=fe.toString,pe=ue("^"+oe(ce).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),se=te.ceil,ve=e.clearTimeout,he=te.floor,ge=ne.prototype.toString,ye=vt(ye=re.getPrototypeOf)&&ye,me=fe.hasOwnProperty,be=ae.push,_e=e.setTimeout,de=ae.splice,we=ae.unshift,je=function(){try{var n={},t=vt(t=re.defineProperty)&&t,e=t(n,n,n)&&t
}catch(r){}return e}(),ke=vt(ke=re.create)&&ke,xe=vt(xe=Xt.isArray)&&xe,Ce=e.isFinite,Oe=e.isNaN,Ne=vt(Ne=re.keys)&&Ne,Ie=te.max,Se=te.min,Ee=e.parseInt,Re=te.random,Ae={};Ae[$]=Xt,Ae[T]=Yt,Ae[F]=Zt,Ae[B]=ne,Ae[q]=re,Ae[W]=ee,Ae[z]=ue,Ae[P]=oe,Q.prototype=J.prototype;var De=J.support={};De.funcDecomp=!vt(e.a)&&E.test(s),De.funcNames=typeof ne.name=="string",J.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:N,variable:"",imports:{_:J}},ke||(nt=function(){function n(){}return function(t){if(wt(t)){n.prototype=t;
var r=new n;n.prototype=null}return r||e.Object()}}());var $e=je?function(n,t){M.value=t,je(n,"__bindData__",M)}:Ht,Te=xe||function(n){return n&&typeof n=="object"&&typeof n.length=="number"&&ce.call(n)==$||false},Fe=Ne?function(n){return wt(n)?Ne(n):[]}:H,Be={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},We=_t(Be),qe=ue("("+Fe(We).join("|")+")","g"),ze=ue("["+Fe(Be).join("")+"]","g"),Pe=ye?function(n){if(!n||ce.call(n)!=q)return false;var t=n.valueOf,e=vt(t)&&(e=ye(t))&&ye(e);return e?n==e||ye(n)==e:ht(n)
}:ht,Ke=lt(function(n,t,e){me.call(n,e)?n[e]++:n[e]=1}),Le=lt(function(n,t,e){(me.call(n,e)?n[e]:n[e]=[]).push(t)}),Me=lt(function(n,t,e){n[e]=t}),Ve=Rt,Ue=vt(Ue=Zt.now)&&Ue||function(){return(new Zt).getTime()},Ge=8==Ee(d+"08")?Ee:function(n,t){return Ee(kt(n)?n.replace(I,""):n,t||0)};return J.after=function(n,t){if(!dt(t))throw new ie;return function(){return 1>--n?t.apply(this,arguments):void 0}},J.assign=U,J.at=function(n){for(var t=arguments,e=-1,r=ut(t,true,false,1),t=t[2]&&t[2][t[1]]===n?1:r.length,u=Xt(t);++e<t;)u[e]=n[r[e]];
return u},J.bind=Mt,J.bindAll=function(n){for(var t=1<arguments.length?ut(arguments,true,false,1):bt(n),e=-1,r=t.length;++e<r;){var u=t[e];n[u]=ct(n[u],1,null,null,n)}return n},J.bindKey=function(n,t){return 2<arguments.length?ct(t,19,p(arguments,2),null,n):ct(t,3,null,null,n)},J.chain=function(n){return n=new Q(n),n.__chain__=true,n},J.compact=function(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r},J.compose=function(){for(var n=arguments,t=n.length;t--;)if(!dt(n[t]))throw new ie;
return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},J.constant=function(n){return function(){return n}},J.countBy=Ke,J.create=function(n,t){var e=nt(n);return t?U(e,t):e},J.createCallback=function(n,t,e){var r=typeof n;if(null==n||"function"==r)return tt(n,t,e);if("object"!=r)return Jt(n);var u=Fe(n),o=u[0],i=n[o];return 1!=u.length||i!==i||wt(i)?function(t){for(var e=u.length,r=false;e--&&(r=ot(t[u[e]],n[u[e]],null,true)););return r}:function(n){return n=n[o],i===n&&(0!==i||1/i==1/n)
}},J.curry=function(n,t){return t=typeof t=="number"?t:+t||n.length,ct(n,4,null,null,null,t)},J.debounce=Vt,J.defaults=_,J.defer=function(n){if(!dt(n))throw new ie;var t=p(arguments,1);return _e(function(){n.apply(v,t)},1)},J.delay=function(n,t){if(!dt(n))throw new ie;var e=p(arguments,2);return _e(function(){n.apply(v,e)},t)},J.difference=function(n){return rt(n,ut(arguments,true,true,1))},J.filter=Nt,J.flatten=function(n,t,e,r){return typeof t!="boolean"&&null!=t&&(r=e,e=typeof t!="function"&&r&&r[t]===n?null:t,t=false),null!=e&&(n=Rt(n,e,r)),ut(n,t)
},J.forEach=St,J.forEachRight=Et,J.forIn=g,J.forInRight=function(n,t,e){var r=[];g(n,function(n,t){r.push(t,n)});var u=r.length;for(t=tt(t,e,3);u--&&false!==t(r[u--],r[u],n););return n},J.forOwn=h,J.forOwnRight=mt,J.functions=bt,J.groupBy=Le,J.indexBy=Me,J.initial=function(n,t,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=u;for(t=J.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else r=null==t||e?1:t||r;return p(n,0,Se(Ie(0,u-r),u))},J.intersection=function(){for(var e=[],r=-1,u=arguments.length,i=a(),f=st(),p=f===n,s=a();++r<u;){var v=arguments[r];
(Te(v)||yt(v))&&(e.push(v),i.push(p&&v.length>=b&&o(r?e[r]:s)))}var p=e[0],h=-1,g=p?p.length:0,y=[];n:for(;++h<g;){var m=i[0],v=p[h];if(0>(m?t(m,v):f(s,v))){for(r=u,(m||s).push(v);--r;)if(m=i[r],0>(m?t(m,v):f(e[r],v)))continue n;y.push(v)}}for(;u--;)(m=i[u])&&c(m);return l(i),l(s),y},J.invert=_t,J.invoke=function(n,t){var e=p(arguments,2),r=-1,u=typeof t=="function",o=n?n.length:0,i=Xt(typeof o=="number"?o:0);return St(n,function(n){i[++r]=(u?t:n[t]).apply(n,e)}),i},J.keys=Fe,J.map=Rt,J.mapValues=function(n,t,e){var r={};
return t=J.createCallback(t,e,3),h(n,function(n,e,u){r[e]=t(n,e,u)}),r},J.max=At,J.memoize=function(n,t){function e(){var r=e.cache,u=t?t.apply(this,arguments):m+arguments[0];return me.call(r,u)?r[u]:r[u]=n.apply(this,arguments)}if(!dt(n))throw new ie;return e.cache={},e},J.merge=function(n){var t=arguments,e=2;if(!wt(n))return n;if("number"!=typeof t[2]&&(e=t.length),3<e&&"function"==typeof t[e-2])var r=tt(t[--e-1],t[e--],2);else 2<e&&"function"==typeof t[e-1]&&(r=t[--e]);for(var t=p(arguments,1,e),u=-1,o=a(),i=a();++u<e;)it(n,t[u],r,o,i);
return l(o),l(i),n},J.min=function(n,t,e){var u=1/0,o=u;if(typeof t!="function"&&e&&e[t]===n&&(t=null),null==t&&Te(n)){e=-1;for(var i=n.length;++e<i;){var a=n[e];a<o&&(o=a)}}else t=null==t&&kt(n)?r:J.createCallback(t,e,3),St(n,function(n,e,r){e=t(n,e,r),e<u&&(u=e,o=n)});return o},J.omit=function(n,t,e){var r={};if(typeof t!="function"){var u=[];g(n,function(n,t){u.push(t)});for(var u=rt(u,ut(arguments,true,false,1)),o=-1,i=u.length;++o<i;){var a=u[o];r[a]=n[a]}}else t=J.createCallback(t,e,3),g(n,function(n,e,u){t(n,e,u)||(r[e]=n)
});return r},J.once=function(n){var t,e;if(!dt(n))throw new ie;return function(){return t?e:(t=true,e=n.apply(this,arguments),n=null,e)}},J.pairs=function(n){for(var t=-1,e=Fe(n),r=e.length,u=Xt(r);++t<r;){var o=e[t];u[t]=[o,n[o]]}return u},J.partial=function(n){return ct(n,16,p(arguments,1))},J.partialRight=function(n){return ct(n,32,null,p(arguments,1))},J.pick=function(n,t,e){var r={};if(typeof t!="function")for(var u=-1,o=ut(arguments,true,false,1),i=wt(n)?o.length:0;++u<i;){var a=o[u];a in n&&(r[a]=n[a])
}else t=J.createCallback(t,e,3),g(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r},J.pluck=Ve,J.property=Jt,J.pull=function(n){for(var t=arguments,e=0,r=t.length,u=n?n.length:0;++e<r;)for(var o=-1,i=t[e];++o<u;)n[o]===i&&(de.call(n,o--,1),u--);return n},J.range=function(n,t,e){n=+n||0,e=typeof e=="number"?e:+e||1,null==t&&(t=n,n=0);var r=-1;t=Ie(0,se((t-n)/(e||1)));for(var u=Xt(t);++r<t;)u[r]=n,n+=e;return u},J.reject=function(n,t,e){return t=J.createCallback(t,e,3),Nt(n,function(n,e,r){return!t(n,e,r)
})},J.remove=function(n,t,e){var r=-1,u=n?n.length:0,o=[];for(t=J.createCallback(t,e,3);++r<u;)e=n[r],t(e,r,n)&&(o.push(e),de.call(n,r--,1),u--);return o},J.rest=qt,J.shuffle=Tt,J.sortBy=function(n,t,e){var r=-1,o=Te(t),i=n?n.length:0,p=Xt(typeof i=="number"?i:0);for(o||(t=J.createCallback(t,e,3)),St(n,function(n,e,u){var i=p[++r]=f();o?i.m=Rt(t,function(t){return n[t]}):(i.m=a())[0]=t(n,e,u),i.n=r,i.o=n}),i=p.length,p.sort(u);i--;)n=p[i],p[i]=n.o,o||l(n.m),c(n);return p},J.tap=function(n,t){return t(n),n
},J.throttle=function(n,t,e){var r=true,u=true;if(!dt(n))throw new ie;return false===e?r=false:wt(e)&&(r="leading"in e?e.leading:r,u="trailing"in e?e.trailing:u),L.leading=r,L.maxWait=t,L.trailing=u,Vt(n,t,L)},J.times=function(n,t,e){n=-1<(n=+n)?n:0;var r=-1,u=Xt(n);for(t=tt(t,e,1);++r<n;)u[r]=t(r);return u},J.toArray=function(n){return n&&typeof n.length=="number"?p(n):xt(n)},J.transform=function(n,t,e,r){var u=Te(n);if(null==e)if(u)e=[];else{var o=n&&n.constructor;e=nt(o&&o.prototype)}return t&&(t=J.createCallback(t,r,4),(u?St:h)(n,function(n,r,u){return t(e,n,r,u)
})),e},J.union=function(){return ft(ut(arguments,true,true))},J.uniq=Pt,J.values=xt,J.where=Nt,J.without=function(n){return rt(n,p(arguments,1))},J.wrap=function(n,t){return ct(t,16,[n])},J.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var e=arguments[n];if(Te(e)||yt(e))var r=r?ft(rt(r,e).concat(rt(e,r))):e}return r||[]},J.zip=Kt,J.zipObject=Lt,J.collect=Rt,J.drop=qt,J.each=St,J.eachRight=Et,J.extend=U,J.methods=bt,J.object=Lt,J.select=Nt,J.tail=qt,J.unique=Pt,J.unzip=Kt,Gt(J),J.clone=function(n,t,e,r){return typeof t!="boolean"&&null!=t&&(r=e,e=t,t=false),Z(n,t,typeof e=="function"&&tt(e,r,1))
},J.cloneDeep=function(n,t,e){return Z(n,true,typeof t=="function"&&tt(t,e,1))},J.contains=Ct,J.escape=function(n){return null==n?"":oe(n).replace(ze,pt)},J.every=Ot,J.find=It,J.findIndex=function(n,t,e){var r=-1,u=n?n.length:0;for(t=J.createCallback(t,e,3);++r<u;)if(t(n[r],r,n))return r;return-1},J.findKey=function(n,t,e){var r;return t=J.createCallback(t,e,3),h(n,function(n,e,u){return t(n,e,u)?(r=e,false):void 0}),r},J.findLast=function(n,t,e){var r;return t=J.createCallback(t,e,3),Et(n,function(n,e,u){return t(n,e,u)?(r=n,false):void 0
}),r},J.findLastIndex=function(n,t,e){var r=n?n.length:0;for(t=J.createCallback(t,e,3);r--;)if(t(n[r],r,n))return r;return-1},J.findLastKey=function(n,t,e){var r;return t=J.createCallback(t,e,3),mt(n,function(n,e,u){return t(n,e,u)?(r=e,false):void 0}),r},J.has=function(n,t){return n?me.call(n,t):false},J.identity=Ut,J.indexOf=Wt,J.isArguments=yt,J.isArray=Te,J.isBoolean=function(n){return true===n||false===n||n&&typeof n=="object"&&ce.call(n)==T||false},J.isDate=function(n){return n&&typeof n=="object"&&ce.call(n)==F||false
},J.isElement=function(n){return n&&1===n.nodeType||false},J.isEmpty=function(n){var t=true;if(!n)return t;var e=ce.call(n),r=n.length;return e==$||e==P||e==D||e==q&&typeof r=="number"&&dt(n.splice)?!r:(h(n,function(){return t=false}),t)},J.isEqual=function(n,t,e,r){return ot(n,t,typeof e=="function"&&tt(e,r,2))},J.isFinite=function(n){return Ce(n)&&!Oe(parseFloat(n))},J.isFunction=dt,J.isNaN=function(n){return jt(n)&&n!=+n},J.isNull=function(n){return null===n},J.isNumber=jt,J.isObject=wt,J.isPlainObject=Pe,J.isRegExp=function(n){return n&&typeof n=="object"&&ce.call(n)==z||false
},J.isString=kt,J.isUndefined=function(n){return typeof n=="undefined"},J.lastIndexOf=function(n,t,e){var r=n?n.length:0;for(typeof e=="number"&&(r=(0>e?Ie(0,r+e):Se(e,r-1))+1);r--;)if(n[r]===t)return r;return-1},J.mixin=Gt,J.noConflict=function(){return e._=le,this},J.noop=Ht,J.now=Ue,J.parseInt=Ge,J.random=function(n,t,e){var r=null==n,u=null==t;return null==e&&(typeof n=="boolean"&&u?(e=n,n=1):u||typeof t!="boolean"||(e=t,u=true)),r&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,e||n%1||t%1?(e=Re(),Se(n+e*(t-n+parseFloat("1e-"+((e+"").length-1))),t)):at(n,t)
},J.reduce=Dt,J.reduceRight=$t,J.result=function(n,t){if(n){var e=n[t];return dt(e)?n[t]():e}},J.runInContext=s,J.size=function(n){var t=n?n.length:0;return typeof t=="number"?t:Fe(n).length},J.some=Ft,J.sortedIndex=zt,J.template=function(n,t,e){var r=J.templateSettings;n=oe(n||""),e=_({},e,r);var u,o=_({},e.imports,r.imports),r=Fe(o),o=xt(o),a=0,f=e.interpolate||S,l="__p+='",f=ue((e.escape||S).source+"|"+f.source+"|"+(f===N?x:S).source+"|"+(e.evaluate||S).source+"|$","g");n.replace(f,function(t,e,r,o,f,c){return r||(r=o),l+=n.slice(a,c).replace(R,i),e&&(l+="'+__e("+e+")+'"),f&&(u=true,l+="';"+f+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),a=c+t.length,t
}),l+="';",f=e=e.variable,f||(e="obj",l="with("+e+"){"+l+"}"),l=(u?l.replace(w,""):l).replace(j,"$1").replace(k,"$1;"),l="function("+e+"){"+(f?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}";try{var c=ne(r,"return "+l).apply(v,o)}catch(p){throw p.source=l,p}return t?c(t):(c.source=l,c)},J.unescape=function(n){return null==n?"":oe(n).replace(qe,gt)},J.uniqueId=function(n){var t=++y;return oe(null==n?"":n)+t
},J.all=Ot,J.any=Ft,J.detect=It,J.findWhere=It,J.foldl=Dt,J.foldr=$t,J.include=Ct,J.inject=Dt,Gt(function(){var n={};return h(J,function(t,e){J.prototype[e]||(n[e]=t)}),n}(),false),J.first=Bt,J.last=function(n,t,e){var r=0,u=n?n.length:0;if(typeof t!="number"&&null!=t){var o=u;for(t=J.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[u-1]:v;return p(n,Ie(0,u-r))},J.sample=function(n,t,e){return n&&typeof n.length!="number"&&(n=xt(n)),null==t||e?n?n[at(0,n.length-1)]:v:(n=Tt(n),n.length=Se(Ie(0,t),n.length),n)
},J.take=Bt,J.head=Bt,h(J,function(n,t){var e="sample"!==t;J.prototype[t]||(J.prototype[t]=function(t,r){var u=this.__chain__,o=n(this.__wrapped__,t,r);return u||null!=t&&(!r||e&&typeof t=="function")?new Q(o,u):o})}),J.VERSION="2.4.1",J.prototype.chain=function(){return this.__chain__=true,this},J.prototype.toString=function(){return oe(this.__wrapped__)},J.prototype.value=Qt,J.prototype.valueOf=Qt,St(["join","pop","shift"],function(n){var t=ae[n];J.prototype[n]=function(){var n=this.__chain__,e=t.apply(this.__wrapped__,arguments);
return n?new Q(e,n):e}}),St(["push","reverse","sort","unshift"],function(n){var t=ae[n];J.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),St(["concat","slice","splice"],function(n){var t=ae[n];J.prototype[n]=function(){return new Q(t.apply(this.__wrapped__,arguments),this.__chain__)}}),J}var v,h=[],g=[],y=0,m=+new Date+"",b=75,_=40,d=" \t\x0B\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",w=/\b__p\+='';/g,j=/\b(__p\+=)''\+/g,k=/(__e\(.*?\)|\b__t\))\+'';/g,x=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,C=/\w*$/,O=/^\s*function[ \n\r\t]+\w/,N=/<%=([\s\S]+?)%>/g,I=RegExp("^["+d+"]*0+(?=.$)"),S=/($^)/,E=/\bthis\b/,R=/['\n\r\t\u2028\u2029\\]/g,A="Array Boolean Date Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),D="[object Arguments]",$="[object Array]",T="[object Boolean]",F="[object Date]",B="[object Function]",W="[object Number]",q="[object Object]",z="[object RegExp]",P="[object String]",K={};
K[B]=false,K[D]=K[$]=K[T]=K[F]=K[W]=K[q]=K[z]=K[P]=true;var L={leading:false,maxWait:0,trailing:false},M={configurable:false,enumerable:false,value:null,writable:false},V={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false},U={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},G=V[typeof window]&&window||this,H=V[typeof exports]&&exports&&!exports.nodeType&&exports,J=V[typeof module]&&module&&!module.nodeType&&module,Q=J&&J.exports===H&&H,X=V[typeof global]&&global;!X||X.global!==X&&X.window!==X||(G=X);
var Y=s();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(G._=Y, define('lodash',function(){return Y})):H&&J?Q?(J.exports=Y)._=Y:H._=Y:G._=Y}).call(this);
//! moment.js
//! version : 2.6.0
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
(function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){function c(){ib.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}var d=!0;return i(function(){return d&&(c(),d=!1),b.apply(this,arguments)},b)}function d(a,b){return function(c){return l(a.call(this,c),b)}}function e(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function f(){}function g(a){y(a),i(this,a)}function h(a){var b=r(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._bubble()}function i(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function j(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&wb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function k(a){return 0>a?Math.ceil(a):Math.floor(a)}function l(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function m(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&db(a,"Date",cb(a,"Date")+f*c),g&&bb(a,cb(a,"Month")+g*c),d&&ib.updateOffset(a,f||g)}function n(a){return"[object Array]"===Object.prototype.toString.call(a)}function o(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function p(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&t(a[d])!==t(b[d]))&&g++;return g+f}function q(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Zb[a]||$b[b]||b}return a}function r(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=q(c),b&&(d[b]=a[c]));return d}function s(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}ib[b]=function(e,f){var g,h,i=ib.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=ib().utc().set(d,a);return i.call(ib.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function t(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function u(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function v(a,b,c){return $(ib([a,11,31+b-c]),b,c).week}function w(a){return x(a)?366:365}function x(a){return a%4===0&&a%100!==0||a%400===0}function y(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[pb]<0||a._a[pb]>11?pb:a._a[qb]<1||a._a[qb]>u(a._a[ob],a._a[pb])?qb:a._a[rb]<0||a._a[rb]>23?rb:a._a[sb]<0||a._a[sb]>59?sb:a._a[tb]<0||a._a[tb]>59?tb:a._a[ub]<0||a._a[ub]>999?ub:-1,a._pf._overflowDayOfYear&&(ob>b||b>qb)&&(b=qb),a._pf.overflow=b)}function z(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function A(a){return a?a.toLowerCase().replace("_","-"):a}function B(a,b){return b._isUTC?ib(a).zone(b._offset||0):ib(a).local()}function C(a,b){return b.abbr=a,vb[a]||(vb[a]=new f),vb[a].set(b),vb[a]}function D(a){delete vb[a]}function E(a){var b,c,d,e,f=0,g=function(a){if(!vb[a]&&xb)try{require("./lang/"+a)}catch(b){}return vb[a]};if(!a)return ib.fn._lang;if(!n(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=A(a[f]).split("-"),b=e.length,d=A(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&p(e,d,!0)>=b-1)break;b--}f++}return ib.fn._lang}function F(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function G(a){var b,c,d=a.match(Bb);for(b=0,c=d.length;c>b;b++)d[b]=cc[d[b]]?cc[d[b]]:F(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function H(a,b){return a.isValid()?(b=I(b,a.lang()),_b[b]||(_b[b]=G(b)),_b[b](a)):a.lang().invalidDate()}function I(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Cb.lastIndex=0;d>=0&&Cb.test(a);)a=a.replace(Cb,c),Cb.lastIndex=0,d-=1;return a}function J(a,b){var c,d=b._strict;switch(a){case"Q":return Nb;case"DDDD":return Pb;case"YYYY":case"GGGG":case"gggg":return d?Qb:Fb;case"Y":case"G":case"g":return Sb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Rb:Gb;case"S":if(d)return Nb;case"SS":if(d)return Ob;case"SSS":if(d)return Pb;case"DDD":return Eb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ib;case"a":case"A":return E(b._l)._meridiemParse;case"X":return Lb;case"Z":case"ZZ":return Jb;case"T":return Kb;case"SSSS":return Hb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Ob:Db;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Db;case"Do":return Mb;default:return c=new RegExp(R(Q(a.replace("\\","")),"i"))}}function K(a){a=a||"";var b=a.match(Jb)||[],c=b[b.length-1]||[],d=(c+"").match(Xb)||["-",0,0],e=+(60*d[1])+t(d[2]);return"+"===d[0]?-e:e}function L(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[pb]=3*(t(b)-1));break;case"M":case"MM":null!=b&&(e[pb]=t(b)-1);break;case"MMM":case"MMMM":d=E(c._l).monthsParse(b),null!=d?e[pb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[qb]=t(b));break;case"Do":null!=b&&(e[qb]=t(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=t(b));break;case"YY":e[ob]=ib.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ob]=t(b);break;case"a":case"A":c._isPm=E(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[rb]=t(b);break;case"m":case"mm":e[sb]=t(b);break;case"s":case"ss":e[tb]=t(b);break;case"S":case"SS":case"SSS":case"SSSS":e[ub]=t(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=K(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function M(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=O(a),a._w&&null==a._a[qb]&&null==a._a[pb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ob]?ib().weekYear():a._a[ob]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=_(f(g.GG),g.W||1,g.E,4,1):(i=E(a._l),j=null!=g.d?X(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=_(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ob]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ob]?d[ob]:a._a[ob],a._dayOfYear>w(e)&&(a._pf._overflowDayOfYear=!0),c=W(e,0,a._dayOfYear),a._a[pb]=c.getUTCMonth(),a._a[qb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[rb]+=t((a._tzm||0)/60),l[sb]+=t((a._tzm||0)%60),a._d=(a._useUTC?W:V).apply(null,l)}}function N(a){var b;a._d||(b=r(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],M(a))}function O(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function P(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=E(a._l),h=""+a._i,i=h.length,j=0;for(d=I(a._f,g).match(Bb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(J(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),cc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),L(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[rb]<12&&(a._a[rb]+=12),a._isPm===!1&&12===a._a[rb]&&(a._a[rb]=0),M(a),y(a)}function Q(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,c=i({},a),c._pf=b(),c._f=a._f[f],P(c),z(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));i(a,d||c)}function T(a){var b,c,d=a._i,e=Tb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Vb.length;c>b;b++)if(Vb[b][1].exec(d)){a._f=Vb[b][0]+(e[6]||" ");break}for(b=0,c=Wb.length;c>b;b++)if(Wb[b][1].exec(d)){a._f+=Wb[b][0];break}d.match(Jb)&&(a._f+="Z"),P(a)}else ib.createFromInputFallback(a)}function U(b){var c=b._i,d=yb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?T(b):n(c)?(b._a=c.slice(0),M(b)):o(c)?b._d=new Date(+c):"object"==typeof c?N(b):"number"==typeof c?b._d=new Date(c):ib.createFromInputFallback(b)}function V(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function W(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function X(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Y(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Z(a,b,c){var d=nb(Math.abs(a)/1e3),e=nb(d/60),f=nb(e/60),g=nb(f/24),h=nb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",nb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,Y.apply({},i)}function $(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=ib(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function _(a,b,c,d,e){var f,g,h=W(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:w(a-1)+g}}function ab(b){var c=b._i,d=b._f;return null===c||d===a&&""===c?ib.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=E().preparse(c)),ib.isMoment(c)?(b=j(c),b._d=new Date(+c._d)):d?n(d)?S(b):P(b):U(b),new g(b))}function bb(a,b){var c;return"string"==typeof b&&(b=a.lang().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),u(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function cb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function db(a,b,c){return"Month"===b?bb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function eb(a,b){return function(c){return null!=c?(db(this,a,c),ib.updateOffset(this,b),this):cb(this,a)}}function fb(a){ib.duration.fn[a]=function(){return this._data[a]}}function gb(a,b){ib.duration.fn["as"+a]=function(){return+this/b}}function hb(a){"undefined"==typeof ender&&(jb=mb.moment,mb.moment=a?c("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ib):ib)}for(var ib,jb,kb,lb="2.6.0",mb="undefined"!=typeof global?global:this,nb=Math.round,ob=0,pb=1,qb=2,rb=3,sb=4,tb=5,ub=6,vb={},wb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},xb="undefined"!=typeof module&&module.exports,yb=/^\/?Date\((\-?\d+)/i,zb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ab=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Bb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Cb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Db=/\d\d?/,Eb=/\d{1,3}/,Fb=/\d{1,4}/,Gb=/[+\-]?\d{1,6}/,Hb=/\d+/,Ib=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Jb=/Z|[\+\-]\d\d:?\d\d/gi,Kb=/T/i,Lb=/[\+\-]?\d+(\.\d{1,3})?/,Mb=/\d{1,2}/,Nb=/\d/,Ob=/\d\d/,Pb=/\d{3}/,Qb=/\d{4}/,Rb=/[+-]?\d{6}/,Sb=/[+-]?\d+/,Tb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ub="YYYY-MM-DDTHH:mm:ssZ",Vb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Wb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Xb=/([\+\-]|\d\d)/gi,Yb=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Zb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$b={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},_b={},ac="DDD w W M D d".split(" "),bc="M D H h m s w W".split(" "),cc={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+l(Math.abs(a),6)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return l(this.weekYear(),4)},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return l(this.isoWeekYear(),4)},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return t(this.milliseconds()/100)},SS:function(){return l(t(this.milliseconds()/10),2)},SSS:function(){return l(this.milliseconds(),3)},SSSS:function(){return l(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+l(t(a/60),2)+":"+l(t(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+l(t(a/60),2)+l(t(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},dc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ac.length;)kb=ac.pop(),cc[kb+"o"]=e(cc[kb],kb);for(;bc.length;)kb=bc.pop(),cc[kb+kb]=d(cc[kb],2);for(cc.DDDD=d(cc.DDD,3),i(f.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=ib.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=ib([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return $(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ib=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),ab(g)},ib.suppressDeprecationWarnings=!1,ib.createFromInputFallback=c("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),ib.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),ab(g).utc()},ib.unix=function(a){return ib(1e3*a)},ib.duration=function(a,b){var c,d,e,f=a,g=null;return ib.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=zb.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:t(g[qb])*c,h:t(g[rb])*c,m:t(g[sb])*c,s:t(g[tb])*c,ms:t(g[ub])*c}):(g=Ab.exec(a))&&(c="-"===g[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(g[2]),M:e(g[3]),d:e(g[4]),h:e(g[5]),m:e(g[6]),s:e(g[7]),w:e(g[8])}),d=new h(f),ib.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},ib.version=lb,ib.defaultFormat=Ub,ib.momentProperties=wb,ib.updateOffset=function(){},ib.lang=function(a,b){var c;return a?(b?C(A(a),b):null===b?(D(a),a="en"):vb[a]||E(a),c=ib.duration.fn._lang=ib.fn._lang=E(a),c._abbr):ib.fn._lang._abbr},ib.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),E(a)},ib.isMoment=function(a){return a instanceof g||null!=a&&a.hasOwnProperty("_isAMomentObject")},ib.isDuration=function(a){return a instanceof h},kb=dc.length-1;kb>=0;--kb)s(dc[kb]);ib.normalizeUnits=function(a){return q(a)},ib.invalid=function(a){var b=ib.utc(0/0);return null!=a?i(b._pf,a):b._pf.userInvalidated=!0,b},ib.parseZone=function(){return ib.apply(null,arguments).parseZone()},ib.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2e3)},i(ib.fn=g.prototype,{clone:function(){return ib(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=ib(this).utc();return 0<a.year()&&a.year()<=9999?H(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return z(this)},isDSTShifted:function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?ib.utc(this._a):ib(this._a)).toArray())>0:!1},parsingFlags:function(){return i({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=H(this,a||ib.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?ib.duration(+b,a):ib.duration(a,b),m(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?ib.duration(+b,a):ib.duration(a,b),m(this,c,-1),this},diff:function(a,b,c){var d,e,f=B(a,this),g=6e4*(this.zone()-f.zone());return b=q(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-ib(this).startOf("month")-(f-ib(f).startOf("month")))/d,e-=6e4*(this.zone()-ib(this).startOf("month").zone()-(f.zone()-ib(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:k(e)},from:function(a,b){return ib.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(ib(),a)},calendar:function(){var a=B(ib(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return x(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=X(a,this.lang()),this.add({d:a-b})):b},month:eb("Month",!0),startOf:function(a){switch(a=q(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=q(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+ib(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+ib(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+B(a,this).startOf(b)},min:function(a){return a=ib.apply(null,arguments),this>a?this:a},max:function(a){return a=ib.apply(null,arguments),a>this?this:a},zone:function(a,b){var c=this._offset||0;return null==a?this._isUTC?c:this._d.getTimezoneOffset():("string"==typeof a&&(a=K(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?m(this,ib.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ib.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?ib(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return u(this.year(),this.month())},dayOfYear:function(a){var b=nb((ib(this).startOf("day")-ib(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=$(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=$(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=$(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return v(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return v(this.year(),a.dow,a.doy)},get:function(a){return a=q(a),this[a]()},set:function(a,b){return a=q(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=E(b),this)}}),ib.fn.millisecond=ib.fn.milliseconds=eb("Milliseconds",!1),ib.fn.second=ib.fn.seconds=eb("Seconds",!1),ib.fn.minute=ib.fn.minutes=eb("Minutes",!1),ib.fn.hour=ib.fn.hours=eb("Hours",!0),ib.fn.date=eb("Date",!0),ib.fn.dates=c("dates accessor is deprecated. Use date instead.",eb("Date",!0)),ib.fn.year=eb("FullYear",!0),ib.fn.years=c("years accessor is deprecated. Use year instead.",eb("FullYear",!0)),ib.fn.days=ib.fn.day,ib.fn.months=ib.fn.month,ib.fn.weeks=ib.fn.week,ib.fn.isoWeeks=ib.fn.isoWeek,ib.fn.quarters=ib.fn.quarter,ib.fn.toJSON=ib.fn.toISOString,i(ib.duration.fn=h.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=k(e/1e3),h.seconds=a%60,b=k(a/60),h.minutes=b%60,c=k(b/60),h.hours=c%24,f+=k(c/24),h.days=f%30,g+=k(f/30),h.months=g%12,d=k(g/12),h.years=d},weeks:function(){return k(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*t(this._months/12)},humanize:function(a){var b=+this,c=Z(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=ib.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=ib.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=q(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=q(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:ib.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(kb in Yb)Yb.hasOwnProperty(kb)&&(gb(kb,Yb[kb]),fb(kb.toLowerCase()));gb("Weeks",6048e5),ib.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ib.lang("en",{ordinal:function(a){var b=a%10,c=1===t(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),xb?module.exports=ib:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(mb.moment=jb),ib}),hb(!0)):hb()}).call(this);
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   3.0.2
 */

(function(){"use strict";function lib$es6$promise$utils$$objectOrFunction(x){return typeof x==="function"||typeof x==="object"&&x!==null}function lib$es6$promise$utils$$isFunction(x){return typeof x==="function"}function lib$es6$promise$utils$$isMaybeThenable(x){return typeof x==="object"&&x!==null}var lib$es6$promise$utils$$_isArray;if(!Array.isArray){lib$es6$promise$utils$$_isArray=function(x){return Object.prototype.toString.call(x)==="[object Array]"}}else{lib$es6$promise$utils$$_isArray=Array.isArray}var lib$es6$promise$utils$$isArray=lib$es6$promise$utils$$_isArray;var lib$es6$promise$asap$$len=0;var lib$es6$promise$asap$$toString={}.toString;var lib$es6$promise$asap$$vertxNext;var lib$es6$promise$asap$$customSchedulerFn;var lib$es6$promise$asap$$asap=function asap(callback,arg){lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len]=callback;lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len+1]=arg;lib$es6$promise$asap$$len+=2;if(lib$es6$promise$asap$$len===2){if(lib$es6$promise$asap$$customSchedulerFn){lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush)}else{lib$es6$promise$asap$$scheduleFlush()}}};function lib$es6$promise$asap$$setScheduler(scheduleFn){lib$es6$promise$asap$$customSchedulerFn=scheduleFn}function lib$es6$promise$asap$$setAsap(asapFn){lib$es6$promise$asap$$asap=asapFn}var lib$es6$promise$asap$$browserWindow=typeof window!=="undefined"?window:undefined;var lib$es6$promise$asap$$browserGlobal=lib$es6$promise$asap$$browserWindow||{};var lib$es6$promise$asap$$BrowserMutationObserver=lib$es6$promise$asap$$browserGlobal.MutationObserver||lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;var lib$es6$promise$asap$$isNode=typeof process!=="undefined"&&{}.toString.call(process)==="[object process]";var lib$es6$promise$asap$$isWorker=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function lib$es6$promise$asap$$useNextTick(){return function(){process.nextTick(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useVertxTimer(){return function(){lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush)}}function lib$es6$promise$asap$$useMutationObserver(){var iterations=0;var observer=new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);var node=document.createTextNode("");observer.observe(node,{characterData:true});return function(){node.data=iterations=++iterations%2}}function lib$es6$promise$asap$$useMessageChannel(){var channel=new MessageChannel;channel.port1.onmessage=lib$es6$promise$asap$$flush;return function(){channel.port2.postMessage(0)}}function lib$es6$promise$asap$$useSetTimeout(){return function(){setTimeout(lib$es6$promise$asap$$flush,1)}}var lib$es6$promise$asap$$queue=new Array(1e3);function lib$es6$promise$asap$$flush(){for(var i=0;i<lib$es6$promise$asap$$len;i+=2){var callback=lib$es6$promise$asap$$queue[i];var arg=lib$es6$promise$asap$$queue[i+1];callback(arg);lib$es6$promise$asap$$queue[i]=undefined;lib$es6$promise$asap$$queue[i+1]=undefined}lib$es6$promise$asap$$len=0}function lib$es6$promise$asap$$attemptVertx(){try{var r=require;var vertx=r("vertx");lib$es6$promise$asap$$vertxNext=vertx.runOnLoop||vertx.runOnContext;return lib$es6$promise$asap$$useVertxTimer()}catch(e){return lib$es6$promise$asap$$useSetTimeout()}}var lib$es6$promise$asap$$scheduleFlush;if(lib$es6$promise$asap$$isNode){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useNextTick()}else if(lib$es6$promise$asap$$BrowserMutationObserver){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMutationObserver()}else if(lib$es6$promise$asap$$isWorker){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useMessageChannel()}else if(lib$es6$promise$asap$$browserWindow===undefined&&typeof require==="function"){lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$attemptVertx()}else{lib$es6$promise$asap$$scheduleFlush=lib$es6$promise$asap$$useSetTimeout()}function lib$es6$promise$$internal$$noop(){}var lib$es6$promise$$internal$$PENDING=void 0;var lib$es6$promise$$internal$$FULFILLED=1;var lib$es6$promise$$internal$$REJECTED=2;var lib$es6$promise$$internal$$GET_THEN_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$selfFulfillment(){return new TypeError("You cannot resolve a promise with itself")}function lib$es6$promise$$internal$$cannotReturnOwn(){return new TypeError("A promises callback cannot return that same promise.")}function lib$es6$promise$$internal$$getThen(promise){try{return promise.then}catch(error){lib$es6$promise$$internal$$GET_THEN_ERROR.error=error;return lib$es6$promise$$internal$$GET_THEN_ERROR}}function lib$es6$promise$$internal$$tryThen(then,value,fulfillmentHandler,rejectionHandler){try{then.call(value,fulfillmentHandler,rejectionHandler)}catch(e){return e}}function lib$es6$promise$$internal$$handleForeignThenable(promise,thenable,then){lib$es6$promise$asap$$asap(function(promise){var sealed=false;var error=lib$es6$promise$$internal$$tryThen(then,thenable,function(value){if(sealed){return}sealed=true;if(thenable!==value){lib$es6$promise$$internal$$resolve(promise,value)}else{lib$es6$promise$$internal$$fulfill(promise,value)}},function(reason){if(sealed){return}sealed=true;lib$es6$promise$$internal$$reject(promise,reason)},"Settle: "+(promise._label||" unknown promise"));if(!sealed&&error){sealed=true;lib$es6$promise$$internal$$reject(promise,error)}},promise)}function lib$es6$promise$$internal$$handleOwnThenable(promise,thenable){if(thenable._state===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,thenable._result)}else if(thenable._state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,thenable._result)}else{lib$es6$promise$$internal$$subscribe(thenable,undefined,function(value){lib$es6$promise$$internal$$resolve(promise,value)},function(reason){lib$es6$promise$$internal$$reject(promise,reason)})}}function lib$es6$promise$$internal$$handleMaybeThenable(promise,maybeThenable){if(maybeThenable.constructor===promise.constructor){lib$es6$promise$$internal$$handleOwnThenable(promise,maybeThenable)}else{var then=lib$es6$promise$$internal$$getThen(maybeThenable);if(then===lib$es6$promise$$internal$$GET_THEN_ERROR){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$GET_THEN_ERROR.error)}else if(then===undefined){lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}else if(lib$es6$promise$utils$$isFunction(then)){lib$es6$promise$$internal$$handleForeignThenable(promise,maybeThenable,then)}else{lib$es6$promise$$internal$$fulfill(promise,maybeThenable)}}}function lib$es6$promise$$internal$$resolve(promise,value){if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$selfFulfillment())}else if(lib$es6$promise$utils$$objectOrFunction(value)){lib$es6$promise$$internal$$handleMaybeThenable(promise,value)}else{lib$es6$promise$$internal$$fulfill(promise,value)}}function lib$es6$promise$$internal$$publishRejection(promise){if(promise._onerror){promise._onerror(promise._result)}lib$es6$promise$$internal$$publish(promise)}function lib$es6$promise$$internal$$fulfill(promise,value){if(promise._state!==lib$es6$promise$$internal$$PENDING){return}promise._result=value;promise._state=lib$es6$promise$$internal$$FULFILLED;if(promise._subscribers.length!==0){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,promise)}}function lib$es6$promise$$internal$$reject(promise,reason){if(promise._state!==lib$es6$promise$$internal$$PENDING){return}promise._state=lib$es6$promise$$internal$$REJECTED;promise._result=reason;lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection,promise)}function lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection){var subscribers=parent._subscribers;var length=subscribers.length;parent._onerror=null;subscribers[length]=child;subscribers[length+lib$es6$promise$$internal$$FULFILLED]=onFulfillment;subscribers[length+lib$es6$promise$$internal$$REJECTED]=onRejection;if(length===0&&parent._state){lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish,parent)}}function lib$es6$promise$$internal$$publish(promise){var subscribers=promise._subscribers;var settled=promise._state;if(subscribers.length===0){return}var child,callback,detail=promise._result;for(var i=0;i<subscribers.length;i+=3){child=subscribers[i];callback=subscribers[i+settled];if(child){lib$es6$promise$$internal$$invokeCallback(settled,child,callback,detail)}else{callback(detail)}}promise._subscribers.length=0}function lib$es6$promise$$internal$$ErrorObject(){this.error=null}var lib$es6$promise$$internal$$TRY_CATCH_ERROR=new lib$es6$promise$$internal$$ErrorObject;function lib$es6$promise$$internal$$tryCatch(callback,detail){try{return callback(detail)}catch(e){lib$es6$promise$$internal$$TRY_CATCH_ERROR.error=e;return lib$es6$promise$$internal$$TRY_CATCH_ERROR}}function lib$es6$promise$$internal$$invokeCallback(settled,promise,callback,detail){var hasCallback=lib$es6$promise$utils$$isFunction(callback),value,error,succeeded,failed;if(hasCallback){value=lib$es6$promise$$internal$$tryCatch(callback,detail);if(value===lib$es6$promise$$internal$$TRY_CATCH_ERROR){failed=true;error=value.error;value=null}else{succeeded=true}if(promise===value){lib$es6$promise$$internal$$reject(promise,lib$es6$promise$$internal$$cannotReturnOwn());return}}else{value=detail;succeeded=true}if(promise._state!==lib$es6$promise$$internal$$PENDING){}else if(hasCallback&&succeeded){lib$es6$promise$$internal$$resolve(promise,value)}else if(failed){lib$es6$promise$$internal$$reject(promise,error)}else if(settled===lib$es6$promise$$internal$$FULFILLED){lib$es6$promise$$internal$$fulfill(promise,value)}else if(settled===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value)}}function lib$es6$promise$$internal$$initializePromise(promise,resolver){try{resolver(function resolvePromise(value){lib$es6$promise$$internal$$resolve(promise,value)},function rejectPromise(reason){lib$es6$promise$$internal$$reject(promise,reason)})}catch(e){lib$es6$promise$$internal$$reject(promise,e)}}function lib$es6$promise$enumerator$$Enumerator(Constructor,input){var enumerator=this;enumerator._instanceConstructor=Constructor;enumerator.promise=new Constructor(lib$es6$promise$$internal$$noop);if(enumerator._validateInput(input)){enumerator._input=input;enumerator.length=input.length;enumerator._remaining=input.length;enumerator._init();if(enumerator.length===0){lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result)}else{enumerator.length=enumerator.length||0;enumerator._enumerate();if(enumerator._remaining===0){lib$es6$promise$$internal$$fulfill(enumerator.promise,enumerator._result)}}}else{lib$es6$promise$$internal$$reject(enumerator.promise,enumerator._validationError())}}lib$es6$promise$enumerator$$Enumerator.prototype._validateInput=function(input){return lib$es6$promise$utils$$isArray(input)};lib$es6$promise$enumerator$$Enumerator.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")};lib$es6$promise$enumerator$$Enumerator.prototype._init=function(){this._result=new Array(this.length)};var lib$es6$promise$enumerator$$default=lib$es6$promise$enumerator$$Enumerator;lib$es6$promise$enumerator$$Enumerator.prototype._enumerate=function(){var enumerator=this;var length=enumerator.length;var promise=enumerator.promise;var input=enumerator._input;for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){enumerator._eachEntry(input[i],i)}};lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry=function(entry,i){var enumerator=this;var c=enumerator._instanceConstructor;if(lib$es6$promise$utils$$isMaybeThenable(entry)){if(entry.constructor===c&&entry._state!==lib$es6$promise$$internal$$PENDING){entry._onerror=null;enumerator._settledAt(entry._state,i,entry._result)}else{enumerator._willSettleAt(c.resolve(entry),i)}}else{enumerator._remaining--;enumerator._result[i]=entry}};lib$es6$promise$enumerator$$Enumerator.prototype._settledAt=function(state,i,value){var enumerator=this;var promise=enumerator.promise;if(promise._state===lib$es6$promise$$internal$$PENDING){enumerator._remaining--;if(state===lib$es6$promise$$internal$$REJECTED){lib$es6$promise$$internal$$reject(promise,value)}else{enumerator._result[i]=value}}if(enumerator._remaining===0){lib$es6$promise$$internal$$fulfill(promise,enumerator._result)}};lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt=function(promise,i){var enumerator=this;lib$es6$promise$$internal$$subscribe(promise,undefined,function(value){enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED,i,value)},function(reason){enumerator._settledAt(lib$es6$promise$$internal$$REJECTED,i,reason)})};function lib$es6$promise$promise$all$$all(entries){return new lib$es6$promise$enumerator$$default(this,entries).promise}var lib$es6$promise$promise$all$$default=lib$es6$promise$promise$all$$all;function lib$es6$promise$promise$race$$race(entries){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);if(!lib$es6$promise$utils$$isArray(entries)){lib$es6$promise$$internal$$reject(promise,new TypeError("You must pass an array to race."));return promise}var length=entries.length;function onFulfillment(value){lib$es6$promise$$internal$$resolve(promise,value)}function onRejection(reason){lib$es6$promise$$internal$$reject(promise,reason)}for(var i=0;promise._state===lib$es6$promise$$internal$$PENDING&&i<length;i++){lib$es6$promise$$internal$$subscribe(Constructor.resolve(entries[i]),undefined,onFulfillment,onRejection)}return promise}var lib$es6$promise$promise$race$$default=lib$es6$promise$promise$race$$race;function lib$es6$promise$promise$resolve$$resolve(object){var Constructor=this;if(object&&typeof object==="object"&&object.constructor===Constructor){return object}var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$resolve(promise,object);return promise}var lib$es6$promise$promise$resolve$$default=lib$es6$promise$promise$resolve$$resolve;function lib$es6$promise$promise$reject$$reject(reason){var Constructor=this;var promise=new Constructor(lib$es6$promise$$internal$$noop);lib$es6$promise$$internal$$reject(promise,reason);return promise}var lib$es6$promise$promise$reject$$default=lib$es6$promise$promise$reject$$reject;var lib$es6$promise$promise$$counter=0;function lib$es6$promise$promise$$needsResolver(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function lib$es6$promise$promise$$needsNew(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var lib$es6$promise$promise$$default=lib$es6$promise$promise$$Promise;function lib$es6$promise$promise$$Promise(resolver){this._id=lib$es6$promise$promise$$counter++;this._state=undefined;this._result=undefined;this._subscribers=[];if(lib$es6$promise$$internal$$noop!==resolver){if(!lib$es6$promise$utils$$isFunction(resolver)){lib$es6$promise$promise$$needsResolver()}if(!(this instanceof lib$es6$promise$promise$$Promise)){lib$es6$promise$promise$$needsNew()}lib$es6$promise$$internal$$initializePromise(this,resolver)}}lib$es6$promise$promise$$Promise.all=lib$es6$promise$promise$all$$default;lib$es6$promise$promise$$Promise.race=lib$es6$promise$promise$race$$default;lib$es6$promise$promise$$Promise.resolve=lib$es6$promise$promise$resolve$$default;lib$es6$promise$promise$$Promise.reject=lib$es6$promise$promise$reject$$default;lib$es6$promise$promise$$Promise._setScheduler=lib$es6$promise$asap$$setScheduler;lib$es6$promise$promise$$Promise._setAsap=lib$es6$promise$asap$$setAsap;lib$es6$promise$promise$$Promise._asap=lib$es6$promise$asap$$asap;lib$es6$promise$promise$$Promise.prototype={constructor:lib$es6$promise$promise$$Promise,then:function(onFulfillment,onRejection){var parent=this;var state=parent._state;if(state===lib$es6$promise$$internal$$FULFILLED&&!onFulfillment||state===lib$es6$promise$$internal$$REJECTED&&!onRejection){return this}var child=new this.constructor(lib$es6$promise$$internal$$noop);var result=parent._result;if(state){var callback=arguments[state-1];lib$es6$promise$asap$$asap(function(){lib$es6$promise$$internal$$invokeCallback(state,child,callback,result)})}else{lib$es6$promise$$internal$$subscribe(parent,child,onFulfillment,onRejection)}return child},"catch":function(onRejection){return this.then(null,onRejection)}};function lib$es6$promise$polyfill$$polyfill(){var local;if(typeof global!=="undefined"){local=global}else if(typeof self!=="undefined"){local=self}else{try{local=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}}var P=local.Promise;if(P&&Object.prototype.toString.call(P.resolve())==="[object Promise]"&&!P.cast){return}local.Promise=lib$es6$promise$promise$$default}var lib$es6$promise$polyfill$$default=lib$es6$promise$polyfill$$polyfill;var lib$es6$promise$umd$$ES6Promise={Promise:lib$es6$promise$promise$$default,polyfill:lib$es6$promise$polyfill$$default};if(typeof define==="function"&&define["amd"]){define("ES6Promise", function(){return lib$es6$promise$umd$$ES6Promise})}else if(typeof module!=="undefined"&&module["exports"]){module["exports"]=lib$es6$promise$umd$$ES6Promise}else if(typeof this!=="undefined"){this["ES6Promise"]=lib$es6$promise$umd$$ES6Promise}lib$es6$promise$polyfill$$default()}).call(this);
!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function r(t){return"string"!=typeof t&&(t=String(t)),t}function o(t){this.map={},t instanceof o?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function n(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function s(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function i(t){var e=new FileReader;return e.readAsArrayBuffer(t),s(e)}function a(t){var e=new FileReader;return e.readAsText(t),s(e)}function h(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(c.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(c.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!c.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))},c.blob?(this.blob=function(){var t=n(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(i)},this.text=function(){var t=n(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=n(this);return t?t:Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}function d(t,e){e=e||{};var r=e.body;if(d.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new o(t.headers)),this.method=t.method,this.mode=t.mode,r||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",(e.headers||!this.headers)&&(this.headers=new o(e.headers)),this.method=u(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function f(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),o=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(n))}}),e}function p(t){var e=new o,r=t.getAllResponseHeaders().trim().split("\n");return r.forEach(function(t){var r=t.trim().split(":"),o=r.shift().trim(),n=r.join(":").trim();e.append(o,n)}),e}function l(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof o?e.headers:new o(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){o.prototype.append=function(t,o){t=e(t),o=r(o);var n=this.map[t];n||(n=[],this.map[t]=n),n.push(o)},o.prototype["delete"]=function(t){delete this.map[e(t)]},o.prototype.get=function(t){var r=this.map[e(t)];return r?r[0]:null},o.prototype.getAll=function(t){return this.map[e(t)]||[]},o.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},o.prototype.set=function(t,o){this.map[e(t)]=[r(o)]},o.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(o){t.call(e,o,r,this)},this)},this)};var c={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},h.call(d.prototype),h.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308];l.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},t.Headers=o,t.Request=d,t.Response=l,t.fetch=function(t,e){return new Promise(function(r,o){function n(){return"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0}var s;s=d.prototype.isPrototypeOf(t)&&!e?t:new d(t,e);var i=new XMLHttpRequest;i.onload=function(){var t=1223===i.status?204:i.status;if(100>t||t>599)return void o(new TypeError("Network request failed"));var e={status:t,statusText:i.statusText,headers:p(i),url:n()},s="response"in i?i.response:i.responseText;r(new l(s,e))},i.onerror=function(){o(new TypeError("Network request failed"))},i.open(s.method,s.url,!0),"include"===s.credentials&&(i.withCredentials=!0),"responseType"in i&&c.blob&&(i.responseType="blob"),s.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send("undefined"==typeof s._bodyInit?null:s._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this);
(function(){function a(a){function c(a){a+="";var b=a.split(":"),c=~a.indexOf("-")?-1:1,d=Math.abs(+b[0]),e=parseInt(b[1],10)||0,f=parseInt(b[2],10)||0;return c*(60*d+e+f/60)}function d(a,b,d,e,f,g,h,i,j,l){this.name=a,this.startYear=+b,this.endYear=+d,this.month=+e,this.day=+f,this.dayRule=+g,this.time=c(h),this.timeRule=+i,this.offset=c(j),this.letters=l||"",this.date=k(this.date),this.weekdayAfter=k(this.weekdayAfter),this.lastWeekday=k(this.lastWeekday)}function e(a,b){this.rule=b,this.start=b.start(a)}function f(a,b){return a.isLast?-1:b.isLast?1:b.start-a.start}function g(a){this.name=a,this.rules=[],this.lastYearRule=k(this.lastYearRule)}function h(b,d,e,f,g,h){var i,j="string"==typeof g?g.split("_"):[9999];for(this.name=b,this.offset=c(d),this.ruleSet=e,this.letters=f,this.lastRule=k(this.lastRule),i=0;i<j.length;i++)j[i]=+j[i];this.until=a.utc(j).subtract("m",c(h))}function i(a,b){return a.until-b.until}function j(a){this.name=n(a),this.displayName=a,this.zones=[],this.zoneAndRule=k(this.zoneAndRule,function(a){return+a})}function k(a,b){var c={};return function(d){var e=b?b.apply(this,arguments):d;return e in c?c[e]:c[e]=a.apply(this,arguments)}}function l(a){var b,c,d;for(b in a)for(d=a[b],c=0;c<d.length;c++)m(b+"	"+d[c])}function m(a){if(y[a])return y[a];var b=a.split(/\s/),c=n(b[0]),e=new d(c,b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10]);return y[a]=e,r(c).add(e),e}function n(a){return(a||"").toLowerCase().replace(/\//g,"_")}function o(a){var b,c,d;for(b in a)for(d=a[b],c=0;c<d.length;c++)q(b+"	"+d[c])}function p(a){var b;for(b in a)C[n(b)]=n(a[b])}function q(a){if(A[a])return A[a];var b=a.split(/\s/),c=n(b[0]),d=new h(c,b[1],r(b[2]),b[3],b[4],b[5]);return A[a]=d,s(b[0]).add(d),d}function r(a){return a=n(a),z[a]||(z[a]=new g(a)),z[a]}function s(a){var b=n(a);return C[b]&&(b=C[b]),B[b]||(B[b]=new j(a)),B[b]}function t(a){a&&(a.zones&&o(a.zones),a.rules&&l(a.rules),a.links&&p(a.links))}function u(){var a,b=[];for(a in B)b.push(B[a]);return b}var v,w=a.fn.zoneName,x=a.fn.zoneAbbr,y={},z={},A={},B={},C={},D=1,E=2,F=7,G=8;return void 0!==a.tz?a:(d.prototype={contains:function(a){return a>=this.startYear&&a<=this.endYear},start:function(b){return b=Math.min(Math.max(b,this.startYear),this.endYear),a.utc([b,this.month,this.date(b),0,this.time])},date:function(a){return this.dayRule===F?this.day:this.dayRule===G?this.lastWeekday(a):this.weekdayAfter(a)},weekdayAfter:function(b){for(var c=this.day,d=a([b,this.month,1]).day(),e=this.dayRule+1-d;c>e;)e+=7;return e},lastWeekday:function(b){var c=this.day,d=c%7,e=a([b,this.month+1,1]).day(),f=a([b,this.month,1]).daysInMonth(),g=f+(d-(e-1))-7*~~(c/7);return d>=e&&(g-=7),g}},e.prototype={equals:function(a){return a&&a.rule===this.rule?Math.abs(a.start-this.start)<864e5:!1}},g.prototype={add:function(a){this.rules.push(a)},ruleYears:function(a,b){var c,d,g,h=a.year(),i=[];for(c=0;c<this.rules.length;c++)d=this.rules[c],d.contains(h)?i.push(new e(h,d)):d.contains(h+1)&&i.push(new e(h+1,d));return i.push(new e(h-1,this.lastYearRule(h-1))),b&&(g=new e(h-1,b.lastRule()),g.start=b.until.clone().utc(),g.isLast=b.ruleSet!==this,i.push(g)),i.sort(f),i},rule:function(a,b,c){var d,e,f,g,h,i=this.ruleYears(a,c),j=0;for(c&&(e=c.offset+c.lastRule().offset,f=9e4*Math.abs(e)),h=i.length-1;h>-1;h--)g=d,d=i[h],d.equals(g)||(c&&!d.isLast&&Math.abs(d.start-c.until)<=f&&(j+=e-b),d.rule.timeRule===E&&(j=b),d.rule.timeRule!==D&&d.start.add("m",-j),j=d.rule.offset+b);for(h=0;h<i.length;h++)if(d=i[h],a>=d.start&&!d.isLast)return d.rule;return v},lastYearRule:function(a){var b,c,d,e=v,f=-1e30;for(b=0;b<this.rules.length;b++)c=this.rules[b],a>=c.startYear&&(d=c.start(a),d>f&&(f=d,e=c));return e}},h.prototype={rule:function(a,b){return this.ruleSet.rule(a,this.offset,b)},lastRule:function(){return this.rule(this.until)},format:function(a){return this.letters.replace("%s",a.letters)}},j.prototype={zoneAndRule:function(a){var b,c,d;for(a=a.clone().utc(),b=0;b<this.zones.length&&(c=this.zones[b],!(a<c.until));b++)d=c;return[c,c.rule(a,d)]},add:function(a){this.zones.push(a),this.zones.sort(i)},format:function(a){var b=this.zoneAndRule(a);return b[0].format(b[1])},offset:function(a){var b=this.zoneAndRule(a);return-(b[0].offset+b[1].offset)}},a.updateOffset=function(a,b){var c;a._z&&(c=a._z.offset(a),Math.abs(c)<16&&(c/=60),a.zone(c,b))},a.fn.tz=function(b){return b?(this._z=s(b),this._z&&a.updateOffset(this),this):this._z?this._z.displayName:void 0},a.fn.zoneName=function(){return this._z?this._z.format(this):w.call(this)},a.fn.zoneAbbr=function(){return this._z?this._z.format(this):x.call(this)},a.momentProperties._z=null,a.tz=function(){var b,c=[],d=arguments.length-1;for(b=0;d>b;b++)c[b]=arguments[b];var e=a.apply(null,c),f=e.zone();return e.tz(arguments[d]),e.add("minutes",e.zone()-f)},a.tz.add=t,a.tz.addRule=m,a.tz.addZone=q,a.tz.zones=u,a.tz.version=b,a.tz.zoneExists=function(a){return s(a).zones.length>0},v=m("- 0 9999 0 0 0 0 0 0"),a)}var b="0.0.6";"function"==typeof define&&define.amd?define("moment-timezone",["moment"],a):"undefined"!=typeof module?module.exports=a(require("moment")):"undefined"!=typeof window&&window.moment&&a(window.moment)}).apply(this);
/*!
 * numeral.js
 * version : 1.5.3
 * author : Adam Draper
 * license : MIT
 * http://adamwdraper.github.com/Numeral-js/
 */
(function(){function a(a){this._value=a}function b(a,b,c,d){var e,f,g=Math.pow(10,b);return f=(c(a*g)/g).toFixed(b),d&&(e=new RegExp("0{1,"+d+"}$"),f=f.replace(e,"")),f}function c(a,b,c){var d;return d=b.indexOf("$")>-1?e(a,b,c):b.indexOf("%")>-1?f(a,b,c):b.indexOf(":")>-1?g(a,b):i(a._value,b,c)}function d(a,b){var c,d,e,f,g,i=b,j=["KB","MB","GB","TB","PB","EB","ZB","YB"],k=!1;if(b.indexOf(":")>-1)a._value=h(b);else if(b===q)a._value=0;else{for("."!==o[p].delimiters.decimal&&(b=b.replace(/\./g,"").replace(o[p].delimiters.decimal,".")),c=new RegExp("[^a-zA-Z]"+o[p].abbreviations.thousand+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),d=new RegExp("[^a-zA-Z]"+o[p].abbreviations.million+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),e=new RegExp("[^a-zA-Z]"+o[p].abbreviations.billion+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),f=new RegExp("[^a-zA-Z]"+o[p].abbreviations.trillion+"(?:\\)|(\\"+o[p].currency.symbol+")?(?:\\))?)?$"),g=0;g<=j.length&&!(k=b.indexOf(j[g])>-1?Math.pow(1024,g+1):!1);g++);a._value=(k?k:1)*(i.match(c)?Math.pow(10,3):1)*(i.match(d)?Math.pow(10,6):1)*(i.match(e)?Math.pow(10,9):1)*(i.match(f)?Math.pow(10,12):1)*(b.indexOf("%")>-1?.01:1)*((b.split("-").length+Math.min(b.split("(").length-1,b.split(")").length-1))%2?1:-1)*Number(b.replace(/[^0-9\.]+/g,"")),a._value=k?Math.ceil(a._value):a._value}return a._value}function e(a,b,c){var d,e,f=b.indexOf("$"),g=b.indexOf("("),h=b.indexOf("-"),j="";return b.indexOf(" $")>-1?(j=" ",b=b.replace(" $","")):b.indexOf("$ ")>-1?(j=" ",b=b.replace("$ ","")):b=b.replace("$",""),e=i(a._value,b,c),1>=f?e.indexOf("(")>-1||e.indexOf("-")>-1?(e=e.split(""),d=1,(g>f||h>f)&&(d=0),e.splice(d,0,o[p].currency.symbol+j),e=e.join("")):e=o[p].currency.symbol+j+e:e.indexOf(")")>-1?(e=e.split(""),e.splice(-1,0,j+o[p].currency.symbol),e=e.join("")):e=e+j+o[p].currency.symbol,e}function f(a,b,c){var d,e="",f=100*a._value;return b.indexOf(" %")>-1?(e=" ",b=b.replace(" %","")):b=b.replace("%",""),d=i(f,b,c),d.indexOf(")")>-1?(d=d.split(""),d.splice(-1,0,e+"%"),d=d.join("")):d=d+e+"%",d}function g(a){var b=Math.floor(a._value/60/60),c=Math.floor((a._value-60*b*60)/60),d=Math.round(a._value-60*b*60-60*c);return b+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d)}function h(a){var b=a.split(":"),c=0;return 3===b.length?(c+=60*Number(b[0])*60,c+=60*Number(b[1]),c+=Number(b[2])):2===b.length&&(c+=60*Number(b[0]),c+=Number(b[1])),Number(c)}function i(a,c,d){var e,f,g,h,i,j,k=!1,l=!1,m=!1,n="",r=!1,s=!1,t=!1,u=!1,v=!1,w="",x="",y=Math.abs(a),z=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],A="",B=!1;if(0===a&&null!==q)return q;if(c.indexOf("(")>-1?(k=!0,c=c.slice(1,-1)):c.indexOf("+")>-1&&(l=!0,c=c.replace(/\+/g,"")),c.indexOf("a")>-1&&(r=c.indexOf("aK")>=0,s=c.indexOf("aM")>=0,t=c.indexOf("aB")>=0,u=c.indexOf("aT")>=0,v=r||s||t||u,c.indexOf(" a")>-1?(n=" ",c=c.replace(" a","")):c=c.replace("a",""),y>=Math.pow(10,12)&&!v||u?(n+=o[p].abbreviations.trillion,a/=Math.pow(10,12)):y<Math.pow(10,12)&&y>=Math.pow(10,9)&&!v||t?(n+=o[p].abbreviations.billion,a/=Math.pow(10,9)):y<Math.pow(10,9)&&y>=Math.pow(10,6)&&!v||s?(n+=o[p].abbreviations.million,a/=Math.pow(10,6)):(y<Math.pow(10,6)&&y>=Math.pow(10,3)&&!v||r)&&(n+=o[p].abbreviations.thousand,a/=Math.pow(10,3))),c.indexOf("b")>-1)for(c.indexOf(" b")>-1?(w=" ",c=c.replace(" b","")):c=c.replace("b",""),g=0;g<=z.length;g++)if(e=Math.pow(1024,g),f=Math.pow(1024,g+1),a>=e&&f>a){w+=z[g],e>0&&(a/=e);break}return c.indexOf("o")>-1&&(c.indexOf(" o")>-1?(x=" ",c=c.replace(" o","")):c=c.replace("o",""),x+=o[p].ordinal(a)),c.indexOf("[.]")>-1&&(m=!0,c=c.replace("[.]",".")),h=a.toString().split(".")[0],i=c.split(".")[1],j=c.indexOf(","),i?(i.indexOf("[")>-1?(i=i.replace("]",""),i=i.split("["),A=b(a,i[0].length+i[1].length,d,i[1].length)):A=b(a,i.length,d),h=A.split(".")[0],A=A.split(".")[1].length?o[p].delimiters.decimal+A.split(".")[1]:"",m&&0===Number(A.slice(1))&&(A="")):h=b(a,null,d),h.indexOf("-")>-1&&(h=h.slice(1),B=!0),j>-1&&(h=h.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+o[p].delimiters.thousands)),0===c.indexOf(".")&&(h=""),(k&&B?"(":"")+(!k&&B?"-":"")+(!B&&l?"+":"")+h+A+(x?x:"")+(n?n:"")+(w?w:"")+(k&&B?")":"")}function j(a,b){o[a]=b}function k(a){var b=a.toString().split(".");return b.length<2?1:Math.pow(10,b[1].length)}function l(){var a=Array.prototype.slice.call(arguments);return a.reduce(function(a,b){var c=k(a),d=k(b);return c>d?c:d},-1/0)}var m,n="1.5.3",o={},p="en",q=null,r="0,0",s="undefined"!=typeof module&&module.exports;m=function(b){return m.isNumeral(b)?b=b.value():0===b||"undefined"==typeof b?b=0:Number(b)||(b=m.fn.unformat(b)),new a(Number(b))},m.version=n,m.isNumeral=function(b){return b instanceof a},m.language=function(a,b){if(!a)return p;if(a&&!b){if(!o[a])throw new Error("Unknown language : "+a);p=a}return(b||!o[a])&&j(a,b),m},m.languageData=function(a){if(!a)return o[p];if(!o[a])throw new Error("Unknown language : "+a);return o[a]},m.language("en",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"k",million:"m",billion:"b",trillion:"t"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"},currency:{symbol:"$"}}),m.zeroFormat=function(a){q="string"==typeof a?a:null},m.defaultFormat=function(a){r="string"==typeof a?a:"0.0"},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a,b){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var c,d,e=this.length>>>0,f=!1;for(1<arguments.length&&(d=b,f=!0),c=0;e>c;++c)this.hasOwnProperty(c)&&(f?d=a(d,this[c],c,this):(d=this[c],f=!0));if(!f)throw new TypeError("Reduce of empty array with no initial value");return d}),m.fn=a.prototype={clone:function(){return m(this)},format:function(a,b){return c(this,a?a:r,void 0!==b?b:Math.round)},unformat:function(a){return"[object Number]"===Object.prototype.toString.call(a)?a:d(this,a?a:r)},value:function(){return this._value},valueOf:function(){return this._value},set:function(a){return this._value=Number(a),this},add:function(a){function b(a,b){return a+c*b}var c=l.call(null,this._value,a);return this._value=[this._value,a].reduce(b,0)/c,this},subtract:function(a){function b(a,b){return a-c*b}var c=l.call(null,this._value,a);return this._value=[a].reduce(b,this._value*c)/c,this},multiply:function(a){function b(a,b){var c=l(a,b);return a*c*b*c/(c*c)}return this._value=[this._value,a].reduce(b,1),this},divide:function(a){function b(a,b){var c=l(a,b);return a*c/(b*c)}return this._value=[this._value,a].reduce(b),this},difference:function(a){return Math.abs(m(this._value).subtract(a).value())}},s&&(module.exports=m),"undefined"==typeof ender&&(this.numeral=m),"function"==typeof define&&define.amd&&define('numeral',[],function(){return m})}).call(this);
!function(e){"function"==typeof define&&define.amd?define("jquery.cookie",["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function o(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(c," ")),u.json?JSON.parse(e):e}catch(n){}}function t(n,o){var i=u.raw?n:r(n);return e.isFunction(o)?o(i):i}var c=/\+/g,u=e.cookie=function(r,c,f){if(arguments.length>1&&!e.isFunction(c)){if(f=e.extend({},u.defaults,f),"number"==typeof f.expires){var a=f.expires,d=f.expires=new Date;d.setTime(+d+864e5*a)}return document.cookie=[n(r),"=",i(c),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}for(var p=r?void 0:{},s=document.cookie?document.cookie.split("; "):[],m=0,x=s.length;x>m;m++){var k=s[m].split("="),l=o(k.shift()),j=k.join("=");if(r&&r===l){p=t(j,c);break}r||void 0===(j=t(j))||(p[l]=j)}return p};u.defaults={},e.removeCookie=function(n,o){return void 0===e.cookie(n)?!1:(e.cookie(n,"",e.extend({},o,{expires:-1})),!e.cookie(n))}});
define("vendor.asset.bluegrass/bluegrass",["vendor.asset.jquery/jquery"],function(e,n){var t=window.jQuery,o=window.$;window.jQuery=window.$=e;var r=n;return function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("jquery")):"function"==typeof r&&r.amd?r(["jquery"],n):"object"==typeof exports?exports.BlueGrass2MW5=n(require("jquery")):e.BlueGrass2MW5=n(e.jQuery)}(this,function(e){return function(e){function n(o){if(t[o])return t[o].exports;var r=t[o]={exports:{},id:o,loaded:!1};return e[o].call(r.exports,r,r.exports,n),r.loaded=!0,r.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){var o=t(2),r=t(11);e.exports=function(e){return o({type:"BG2Silent2",library:"BlueGrass2",legacy:!0,factory:e})}(function(){var e=t(12),n=t(3),i=t(10),a=t(7)("silent2"),s=t(9),c=o({type:"BG2P",library:"BlueGrass2Prime",factory:r}),u=n.blueGrass2SilentTest,l=i.hasSetting("use-silent");if("undefined"==typeof u||null===u)return a.info("Silent connection disabled; no silent settings defined."),c.Runtime;if("object"!=typeof u)return a.warn("Silent connection disabled; silent settings must be a non-null object."),c.Runtime;if(!u.enabled&&!l&&!i.hasSetting("silent"))return a.info("Silent connection disabled."),c.Runtime;var f=u.endpoint;if("string"==typeof f&&(f={to:f}),"object"!=typeof f||null===f||!f.to)return a.warn("Silent connection disabled; endpoint is required and must be a string or a valid endpoint object."),c.Runtime;if(l)return a.info("Using silent connection only."),{openConnection:function(e,n){return c.Runtime.openConnection(f,n)},getConnection:c.Runtime.getConnection};a.info("Silent connection enabled.");var d=o({type:"BG2S",library:"BlueGrass2Silent",factory:r}),p=function(){return{connect:function(e,n){a.info(n)},subscribe:function(e,n,t){a.info("subscribe "+e)},unsubscribe:function(e,n,t){a.info("unsubscribe "+e+(n?" (specific callback)":" (all callbacks)"))},unsubscribeLast:function(e){a.info("unsubscribe "+e+" (unsubscribing from operator)")},message:function(e){var n,t=e&&e.h?e.h:e;try{n=JSON.stringify(t)}catch(o){n=t}a.info("message "+n)},error:a.error,warn:a.warn,info:a.info}}(),g=function(e){try{e()}catch(n){p.error(n)}},h=function(n,t,o){var r,i,a,s=this,u=function(e){b(function(){e(i)})},l=e.isArray(o)?o:[o],h=[],m=[],b=function(e){i?g(e):null!==m?(p.info("Action attempted before silent connection is ready; queuing action."),m.push(e)):p.info("Action attempted before silent connection is ready.  Took too long to connect; skipping action.")},y=function(){c.Runtime.openConnection(t,w),g(function(){a=setTimeout(T,6e4),d.Runtime.openConnection(f,S)})},w=function(n,t){r||(r=n),e.each(l,function(){try{this(s,t)}catch(e){p.warn("Error in connection callback: "+e.message)}})},S=function(n,t){i||(null!==a&&(clearTimeout(a),a=null),i=n,null!==m?(p.info("Silent connection is ready; flushing any queued actions..."),e.each(m,function(){p.info("Flushing queued silent action."),g(this)}),m=[]):p.info("Silent connection is finally ready.  Took too long to connect; any queued actions were forgotten.")),p.connect(n,t)},T=function(){p.error("Silent connection took too long to connect.  Forgetting any queued actions."),m=null},C=function(e,n){"unsubscribe"==e.h.a&&null!=h[n.getChannelName()]&&delete h[n.getChannelName()],r.lowLevelSend(e),b(function(){i.lowLevelSend(e)})};this.subscribe=function(e,n,t){p.subscribe(e,n,t);var o=h[e];return o?o.addCallback(n):(o=new v(r,u,e,n,t,C),h[e]=o),o},this.unsubscribe=function(e,n,t){p.unsubscribe(e,n,t);var o=h[e];return o&&(o.removeCallback(n),n||o.unsubscribe()),o},this.getChannel=function(e){return h[e]},this.close=function(){l=[],h={},r.close(),i&&g(function(){i.close()})},this.reconnect=function(){r.reconnect(),i&&g(function(){i.reconnect()})},this.isOpen=function(){if(!r)return!1;var e=r.isOpen();return i&&g(function(){var n=i.isOpen();n!==e&&p.warn("Silent connection returned a different result from .isOpen() than primary.  Primary returned "+e+" while silent returned "+n)}),e},this.isDisabled=function(){var e=r.isDisabled();return g(function(){var n=i.isDisabled();n!==e&&p.warn("Silent connection returned a different result from .isDisabled() than primary.  Primary returned "+e+" while silent returned "+n)}),e},this.addCallback=function(e){l.push(e)},this.setTransmitHook=function(e){r.setTransmitHook(e)},this.setReceiveHook=function(e){r.setReceiveHook(e)},this.setSystemHook=function(e){r.setSystemHook(e)},this.scrambleClientId=function(){r.scrambleClientId()},this.getChannelCount=function(){var e=r.getChannelCount();return g(function(){var n=i.getChannelCount();n!==e&&p.warn("Silent connection returned a different result from .getChannelCount() than primary.  Primary returned "+e+" while silent returned "+n)}),e},this.lowLevelSend=function(e){r.lowLevelSend(e),b(function(){i.lowLevelSend(e)})},y()},v=function(n,t,o,r,i,a){var c,u,l=o,f=[r],d=a,h=function(){c=n.subscribe(o,v,i),t(function(e){u=e.subscribe(o,p.message,i)})},v=function(e){s.forEach(f,function(n){try{n(e)}catch(t){p.warn('Error delivering message %o on "%s": %o',e,l,t)}})};this.getChannelName=function(){return l},this.getDeliveryType=function(){return c.getDeliveryType()},this.setDeliveryType=function(e){c.setDeliveryType(e),u&&t(function(){u.setDeliveryType(e)})},this.getCallbacks=function(){return f},this.clearTimers=function(){c.clearTimers(),u&&g(function(){u.clearTimers()})},this.unsubscribe=function(){if(p.unsubscribeLast(l),c.unsubscribe(),t(function(){u.unsubscribe()}),e.isFunction(d)){var n={h:{t:l,a:"unsubscribe"}};d(n,this)}},this.deliver=function(e){c.deliver(e),t(function(){u.deliver(e)})},this.resetState=function(){c.resetState(),u&&g(function(){u.resetState()})},this.addCallback=function(n){-1==e.inArray(n,f)&&f.push(n)},this.removeCallback=function(e){1==f.length&&f[0]==e&&this.unsubscribe(),f=s.filter(f,function(n){return n!==e})},this.getLastMessageNumber=function(){return c.getLastMessageNumber()},this.getSequence=function(){return c.getSequence()},this.getToken=function(){return c.getToken()},h()},m=null,b=[],y=!1;return b.push(function(){y=!1}),{openConnection:function(e,n){m?n&&(y?m.addCallback(n):n(m,"connect")):(y=!0,n&&b.push(n),m=new h(this,e,b),b=null)},getConnection:function(e){return"function"!=typeof e?m:(m?y?m.addCallback(e):e(m,"connect"):b.push(e),m)}}})},function(e,n,t){var o=t(3),r=t(4),i=t(5);e.exports=function(e){var n,a=function(){throw new Error("BlueGrass2 client requires a global window and document object.  It is intended to run in the browser, not on the server.")};if(o.document){var s=e.library&&o[e.library]||e.factory();n=s.Runtime?s:{type:e.type,Runtime:s,Utility:r},e.library&&(o[e.library]=n),e.legacy&&(!o.BlueGrass1&&o.BlueGrass&&"undefined"==typeof o.BlueGrass.type&&(o.BlueGrass1=o.BlueGrass),o.BlueGrass=n)}else n={type:e.type,Runtime:{openConnection:a,getConnection:a},Utility:r};return i(n),n.debug=function(){t(7).enable()},n}},function(e,n){e.exports="undefined"!=typeof window?window:{}},function(e,n){e.exports=function(){var e=(new Date).getTimezoneOffset()/60;return{arrayRemove:function(e,n,t){var o=e.slice((t||n)+1||e.length);return e.length=0>n?e.length+n:n,e.push.apply(e,o)},convertToExchangeTime:function(n,t){if(!n||null===n)return null;"undefined"!=typeof t?t+=e:t=0;var o=parseInt(n);isNaN(o)&&(n=n.indexOf("-")>=0||n.indexOf("+")>=0?n.substring(6,n.length-7):n.substring(6,n.length-2),o=parseInt(n)),o+=36e5*t;var r=new Date(o);return r},prettyDate:function(e,n){"object"!=typeof e&&(e=this.convertToExchangeTime(e,n));var t,o=[[60,"Just Now"],[90,"1 Minute"],[3600,"Minutes",60],[5400,"1 Hour"],[86400,"Hours",3600],[129600,"1 Day"],[604800,"Days",86400],[907200,"1 Week"],[2628e3,"Weeks",604800],[3942e3,"1 Month"],[31536e3,"Months",2628e3],[47304e3,"1 Year"],[31536e5,"Years",31536e3],[47304e5,"1 Century"]],r=new Date,i=(r-e)/1e3,a=" Ago",s=0;for(0>i&&(i=Math.abs(i),a="");t=o[s++];)if(i<t[0])return 2==t.length?t[1]+(s>1?a:""):Math.round(i/t[2])+" "+t[1]+(s>1?a:"");return i>47304e5?Math.round(i/47304e5)+" Centuries"+a:date_str}}}()},function(e,n,t){var o=t(6),r=t(7)("client");e.exports=function(e){return o({name:"Client",factory:e})}(function(e){function n(){var n=null,t={},o=!1;e.Runtime.getConnection(function(e,o){if(!n&&"connect"===o){n=e;for(var r in t)for(var i=t[r],a=0;a<i.handlers.length;a++)n.subscribe(r,i.handlers[a],i.options)}}),this.subscribe=function(e,a,u){if(o)return void r.warn("subscribe ignored because client is closed.");e in t||(t[e]={handlers:[]});for(var f=t[e],d=0;d<f.handlers.length;d++)if(f.handlers===a)return;0===f.handlers.length&&(f.options=u,i||s++),f.handlers.push(a),n&&n.subscribe(e,a,u),l(c.subscribe)},this.unsubscribe=function(e,a){if(o)return void r.warn("unsubscribe ignored because client is closed.");if(e in t){var c=t[e];if(a){for(var u=!1,l=0;l<c.handlers.length;l++)if(c.handlers[l]===a){c.handlers.splice(l,1),u=!0;break}if(!u)return;0!==c.handlers.length||i||s--,n&&n.unsubscribe(e,a)}else{var f=c.handlers;if(0===f.length)return;if(c.handlers=[],c.options=null,i||s--,n)for(var l=0;l<f.length;l++)n.unsubscribe(e,f[l])}}},this.close=function(){if(o)return void r.warn("close ignored because client is already closed.");if(o=!0,i||(a--,s-=t.length),n)for(var e in t)if(t.hasOwnProperty(e))for(var c=t[e],u=0;u<c.handlers.length;u++)n.unsubscribe(e,c.handlers[u]);t={},n=null}}var t=null,o=null,i=!1,a=0,s=0,c={now:"now",later:"later",latest:"latest",setup:"setup",create:"create",subscribe:"subscribe","default":"default"},u=function(){var e={};return e[c["default"]]=c.create,e[c.now]=c.setup,e[c.later]=c.create,e[c.latest]=c.subscribe,function(n){return e[n&&"string"==typeof n?n:c["default"]]||(c.hasOwnProperty(n)?n:e[c["default"]])}}(),l=function(n){if(!i&&t&&(o===n||o===c.create&&a>0||o===c.subscribe&&s>0)){i=!0,a=null,s=null;var r=t.endpoint;"string"==typeof r&&(r={to:r}),e.Runtime.openConnection(r)}};return{connect:c,setup:function(e){if(!e||"object"!=typeof e)throw new Error("Config is required and must be an object.");if("string"!=typeof e.endpoint)throw new Error("A valid BlueGrass endpoint is required.");return i?void r.warn("setup ignored because a BG2 connection is already open."):(t&&r.warn("setup called more than once.  New configuration will replace the former."),t=e,o=u(e.connect),void l(c.setup))},create:function(){return i||(a++,l(c.create)),new n}}})},function(e,n){e.exports=function(e){var n=function(n){return n&&(n[e.name]=n[e.name]||e.factory(n))};return n(window.BlueGrass),n(window.BlueGrass1),n(window.BlueGrass2),n(window.BlueGrassAB),n(window.BlueGrass2Silent),n(window.BlueGrass2Legacy),n}},function(e,n,t){var o=t(8),r=t(10),i=t(9),a={enabled:r.hasSetting("debug")||r.hasKey("debugbg2"),enable:function(){s.enabled=!0,i.assign(s,i.filter(o,function(e,n){return s[n]===i.noop})),o.info("Debug mode enabled.")}},s=e.exports=function(e){var n=i.assign({},i.map(a,function(e,n){return s[n]}));return i.defaults(n,i.mapValues(s,function(n,t){return function(){var n=i.map(arguments);return"string"==typeof n[0]?n[0]="["+e+"] "+n[0]:n.unshift("["+e+"] "),s[t].apply(s,n)}})),n};i.assign(s,a),i.defaults(s,i.map(o,function(){return i.noop})),s.enabled&&s.enable()},function(e,n,t){function o(){return a.reduce(arguments,function(e,n){var t=i.console;return e||t&&"function"==typeof t[n]&&r(t,t[n])})||a.noop}function r(e,n){return function(){var t=a.map(arguments);"string"==typeof t[0]?t[0]=s+t[0]:t.unshift(s),n.apply(e,t)}}var i=t(3),a=t(9),s="BG2: ";e.exports={log:o("log","info"),info:o("info","log"),warn:o("warn","info","log"),error:o("error","warn","info","log")}},function(e,n){function t(e,n,t){var o=e[0];if(o){var r=e[1];s.isArray(r)||(r=s.map(e),r.shift()),s.reduce(r,function(e,t){return s.reduce(t,n,e,this)},o,t)}return o}function o(e){return e?function(n,t,o,r){e.apply(this,[t,o,r])}:s.noop}function r(e){return function(n,t,o,r){return n[o]=(e||s.identity).apply(this,[t,o,r]),n}}function i(e){return function(n,t,o,r){return n.hasOwnProperty(o)||(n[o]=(e||s.identity).apply(this,[t,o,r])),n}}function a(e){return!e||"length"in e?[]:{}}var s=e.exports={assign:function(e,n){return t(arguments,r())},defaults:function(e,n){return t(arguments,i())},forEach:function(e,n,t){return s.reduce(e,o(n),null,t),e},filter:function(e,n,t){var o=function(e,t,o,r){return(n||s.identity).apply(this,[t,o,r])&&(s.isArray(e)?e.push(t):e[o]=t),e};return s.reduce(e,o,a(e),t)},forOwn:function(e,n,t){return s.reduceOwn(collection,o(n),null,t),e},identity:function(e){return e},isArray:Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},map:function(e,n,t){return s.reduce(e,r(n),a(e),t)},mapValues:function(e,n,t){return s.reduceOwn(e,r(n),{},t)},noop:function(){},reduce:function(e,n,t,o){if(e)if("length"in e)for(var r=0;r<e.length;r++)t=(n||s.identity).apply(o,[t,e[r],r,e]);else t=s.reduceOwn(e,n,t,o);return t},reduceOwn:function(e,n,t,o){for(var r in e)e.hasOwnProperty(r)&&(t=(n||s.identity).apply(o,[t,e[r],r,e]));return t}}},function(e,n,t){function o(){var e=r.location&&r.location.href&&r.location.href.match(/\?(.+)$/i);if(e){var n=e[1].split("&"),t=i.filter(i.map(n,function(e){return e.match(/^([^\=]+)(?:\=(.*))?$/i)}));i.forEach(t,function(e){var n=e[1].toLowerCase(),t=e[2];"bg2"===n&&i.forEach(t&&t.split(","),function(e){s[e.toLowerCase()]=!0}),"undefined"==typeof t&&(t=!0),a[n]=t})}}var r=t(3),i=t(9),a={},s={};o(),e.exports={hasKey:function(e){return a.hasOwnProperty(e.toLowerCase())},hasSetting:function(e){return!!s[e.toLowerCase()]}}},function(e,n,t){var o=t(12);t(13)(o),t(15)(o);var r=t(8),i=t(7)("runtime"),a=t(9);e.exports=function(){!o.signalR||o.support.cors||o.signalR.prototype.__start||(o.signalR.prototype.__start=o.signalR.prototype.start,o.signalR.prototype.start=function(){var e,n=o.support.cors;try{o.support.cors=!0,e=o.signalR.prototype.__start.apply(this,arguments)}finally{o.support.cors=n}return e}),o.signalR.prototype.__stop||(o.signalR.prototype.__stop=o.signalR.prototype.stop,o.signalR.prototype.stop=function(e,n){return o.signalR.prototype.__stop.apply(this,[!0,n])});var e={h:{a:"process",t:"/system/resubscribe"},b:{resubscribe:!0}},n={h:{a:"heartbeat"},b:{}},t=function(e,n){return"string"!=typeof e||0===e.length||"/"!==e.charAt(0)?(r.error(n+" called with invalid channel name: %o",e),!1):!0},s=function(e,n,t,o){return o&&!e?(r.error(t+" called without a "+n+", which is required."),!1):e&&"function"!=typeof e?(r.error(t+" called with invalid "+n+", which must be a function: %o",e),!1):!0},c=function(e,n,i){var c,f=n,d=o.isArray(i)?i:[i],p={},g=null,h=null,v=this,m=function(e){if(!o)throw new Error("BlueGrass2 requires jQuery.  jQuery was not found.");if(!o.signalR)throw new Error("BlueGrass2 requires Microsoft SignalR client, which is a jQuery plug-in.");e()},b=function(e,n){d&&(o.each(d,function(){try{this(e,n)}catch(t){r.warn("Error in connection callback: "+t.message)}}),d=null)},y=function(e,n){"unsubscribe"==e.h.a&&null!=p[n.getChannelName()]&&delete p[n.getChannelName()],g.send(e)},w=function(e){"process"===e.h.a&&e.b?e.b.resubscribe?S():e.b.channelState&&C(e.b.channelState):"inform"===e.h.a&&"/system/channelinfo"===e.h.t&&T(e.b),h&&h(e)},S=function(){o.each(p,function(){this.lowLevelSubscribe()})},T=function(e){e&&e.channelName&&o.each(p,function(){this.getChannelName()==e.channelName&&e.deliveryType&&this.setDeliveryType(e.deliveryType)})},C=function(e){var n=p[e.channelName];null!=n&&(e.enabled||n.resetState())},_=function(){k();var e=function(){b(v,"connect")};g=new u(e,w),g.initialize(f,R)},k=function(){g&&(g.terminate(),g=null)},R=function(e,n){if(e!==g)return void e.terminate();if(n){var t=p[n.h.t];t&&t.deliver(n)}};this.subscribe=function(e,n,o){if(!t(e,"subscribe")||!s(n,"callback","subscribe",!0))return null;c=o;var r=p[e];return r?r.addCallback(n):(r=new l(e,n,o,y),p[e]=r),r},this.unsubscribe=function(e,n,o){if(!t(e,"unsubscribe")||!s(n,"callback","unsubscribe",!1))return null;var r=p[e];return r&&(n?r.removeCallback(n):r.unsubscribe()),r},this.getChannel=function(e){return t(e,"getChannel")?p[e]:null},this.close=function(){d=null,p={},k()},this.reconnect=function(){},this.isOpen=function(){return g?g.isOpen():!1},this.isDisabled=function(){return g?g.isDisabled():!1},this.addCallback=function(e){s(e,"callback","addCallback",!0)&&d&&d.push(e)},this.setTransmitHook=function(e){s(e,"hook","setTransmitHook",!1)&&g&&g.setTransmitHook(e)},this.setReceiveHook=function(e){s(e,"hook","setReceiveHook",!1)&&g&&g.setReceiveHook(e)},this.setSystemHook=function(e){s(e,"hook","setSystemHook",!1)&&(h=e)},this.scrambleClientId=function(){g&&g.scrambleClientId()},this.getChannelCount=function(){return a.reduceOwn(p,function(e){return e+1},0)},this.lowLevelSend=function(e){return e&&"object"==typeof e?void(g&&g.send(e)):void r.error("lowLevelSend called with invalid message: %o",e)},m(_)},u=function(){return function(t,a){var s,c,u,l,f,d,p,g,h,v,m=[],b=8e3,y=6e4,w=b,S=0,T=0,C=!1,_=!1,k=!1,R=!1,x=null,E=3e4,j=2e3,I=t,A=a,D=this,H=function(){if(!R&&!p){var e=f;"number"==typeof e?(f=null,w=b):(e=w,w=Math.min(e*e,y)),p=setTimeout(function(){p=null,R||h.start().fail(function(){H()})},e)}},M=function(){0!==m.length&&m[0]===n||m.unshift(n)},P=function(e){e.newState==o.signalR.connectionState.connected?(_||(_=!0,N(),C||(C=!0,o.isFunction(I)&&I())),M(),W()):(d&&clearTimeout(d),x&&clearTimeout(x),g&&clearTimeout(g),e.newState==o.signalR.connectionState.disconnected&&_&&(_=!1,R||H())),A({h:{a:"inform",t:"/system/signalrstatechanged"},b:e})},q=function(e){var n=JSON.parse(e);null!=l&&l(n),n.h&&n.h.t&&0===n.h.t.indexOf("/system/")&&A(n),s(D,n)},L=function(e,n){var t={h:{a:"inform",t:"/system/channelinfo"},b:{channelName:e,deliveryType:n}};A(t)},F=function(e){e!==E&&e>=j&&(E=e,g&&(clearTimeout(g),g=setTimeout(Q,e)))},N=function(){A(e)},O=function(e){f=e||0,h.stop()},Q=function(){g=setTimeout(Q,E),G(n)},W=function(){if(_&&(x=null,!(T>=2))){if(0===m.length)return void(g||(g=setTimeout(Q,E)));var e=m.shift();if(S>0)d=setTimeout(function(){G(e)},1e3*Math.min(900,Math.pow(2,S)));else{clearTimeout(d),G(e);var n=m.length>0?100:E;x=setTimeout(W,n)}}},G=function(e){if(_){var n=function(n){T++,n.done(function(e,n){B(n)}).fail(function(){U(e)})};null!=u&&u(e),e.h&&("heartbeat"===e.h.a?n(v.invoke("ping")):"subscribe"===e.h.a?n(e.b.securityToken?v.invoke("subscribe",e.h.t,e.b.sequence,e.b.number,e.b.securityToken):v.invoke("subscribe",e.h.t,e.b.sequence,e.b.number)):"unsubscribe"===e.h.a?n(v.invoke("unsubscribe",e.h.t)):"fetch"===e.h.a&&n(v.invoke("fetch",e.h.t,e.b.sequence,e.b.ranges)))}},B=function(e){T--,S=0,g&&(clearTimeout(g),g=null),W()},U=function(e){T--,S++,g||(g=setTimeout(Q,E)),m.push(e),W()};this.initialize=function(e,n){c=e,s=n,h=o.hubConnection(e.to),i.enabled&&(h.logging=!0),v=h.createHubProxy("mainHub"),v.on("newMessage",q),v.on("setDeliveryType",L),v.on("setHeartbeatInterval",F),v.on("resubscribe",N),v.on("reconnect",O),h.stateChanged(P),h.start().fail(function(){r.error("Failed to connect to BlueGrass2 SignalR endpoint: "+e.to+".  Will retry..."),H()})},this.terminate=function(){R||(R=!0,d&&clearTimeout(d),p&&clearTimeout(p),h&&(h.stop(),h=null,v=null))},this.setPickupInterval=function(e){},this.scrambleClientId=function(){},this.setTransmitHook=function(e){u=e},this.setReceiveHook=function(e){l=e},this.send=function(e){_&&(m.push(e),null==x&&(x=setTimeout(W,100)))},this.isOpen=function(){return _},this.isDisabled=function(){return k}}}(),l=function(e,n,t,i){var c=e,u=[],l="",f="0",d=i;u.push(n);var p=function(e){a.forEach(u,function(n){try{n(e)}catch(t){r.warn('Error delivering message %o on "%s": %o',e,c,t)}})},g="Lossy";t&&t.sequence&&(l=t.sequence),t&&t.number&&(f=t.number);var h=f,v=null,m=0,b=[],y=null,w=null;t&&t.securityToken&&(w=t.securityToken);var S=this,T=function(){if(b&&b.length>0){b.sort(function(e,n){return e.h.n-n.h.n});for(var e=0,n=0;n<b.length&&b[n].h.n==h+1;n++)p(b[n]),h=b[n].h.n,e=n+1;b=b.length>e?b.slice(e):[],b.length>0?y=setTimeout(function(){T()},1e3):(clearTimeout(v),y=null,m=0,b=[])}},C=function(){l="",b=[],clearTimeout(v),m=0},_=function(){if(m>=10)return void C();var e=[];if(b.length>0){b.sort(function(e,n){return e.h.n-n.h.n});for(var n=h,t=0;t<b.length;t++){var r=b[t].h.n;if(r>n+1){var i=n+1;r==i+1?e.push([i]):e.push([i,r-1])}n=r}}if(o.isFunction(d)){var a={h:{t:c,a:"fetch"},b:{sequence:l,ranges:e}};d(a,S)}m++,v=setTimeout(function(){_()},1e3*Math.min(32,Math.pow(2,m)))};this.getChannelName=function(){return c},this.getDeliveryType=function(){return g},this.setDeliveryType=function(e){g=e},this.getCallbacks=function(){return u},this.clearTimers=function(){v&&clearTimeout(v),y&&clearTimeout(y)},this.lowLevelSubscribe=function(){if(o.isFunction(d)){var e={h:{t:c,a:"subscribe"},b:{sequence:l,number:h}};w&&(e.b.securityToken=w),d(e,this)}},this.unsubscribe=function(){if(o.isFunction(d)){var e={h:{t:c,a:"unsubscribe"}};d(e,this)}},this.deliver=function(e){if(p&&e&&e.h&&e.h.t==c)if("retransmit"==e.h.a){for(var n=!1,t=0;t<b.length;t++)if(b[t].h.n==e.h.n){n=!0;break}n||b.push(e),y||(y=setTimeout(function(){T()},1e3))}else if("broadcast"==e.h.a){var o=!1;if(e.h.s!=l&&(l=e.h.s,f=e.h.n,h=e.h.n,b=[],clearTimeout(v),m=0,"Lossy"==g&&(o=!0)),"Lossy"==g&&e.h.n>h||"BestEffort"==g)o=!0;else if("Guaranteed"==g){if(e.h.n<=h&&e.h.n!=f)return;if(h+1==e.h.n||e.h.n==f||e.h.n>=h+50)o=!0;else{var r=b.push(e);1==r?v=setTimeout(function(){_()},1e3):r>=50&&(this.resetState(),this.deliver(e))}}o&&(h=e.h.n,p(e,c))}},this.resetState=function(){C()},this.addCallback=function(e){s(e,"callback","addCallback",!0)&&-1==o.inArray(e,u)&&u.push(e)},this.removeCallback=function(e){s(e,"callback","removeCallback",!0)&&(1==u.length&&u[0]==e&&this.unsubscribe(),u=a.filter(u,function(n){return n!==e}))},this.getLastMessageNumber=function(){return h},this.getSequence=function(){return l},this.getToken=function(){return w},this.lowLevelSubscribe()},f=null,d=!1,p=[];p.push(function(){d=!1});var g={openConnection:function(e,n){if(e&&e.to)(d||f)&&i.warn("openConnection has already been called.  The endpoint given will be ignored.  Consider using getConnection(callback) instead.");else{var t="Calling openConnection without an endpoint is deprecated.  Consider using getConnection(callback) instead.";d||f||(t+="  Since this is the first call to openConnection, the endpoint will default to MarketWatch production."),i.warn(t)}e||(e={}),e.to||(e.to="http://mwstream.wsj.net/bg2"),f?n&&(d?f.addCallback(n):n(f,"connect")):(d=!0,n&&p.push(n),f=new c(this,e,p),p=null)},getConnection:function(e){return"function"!=typeof e?(f?d&&i.warn("getConnection called after openConnection, but before the connection was successfully opened.  The returned connection may not function as expected.  Consider using getConnection with a callback instead."):i.warn("getConnection called before openConnection; null will be returned.  Consider using getConnection with a callback instead."),f):(f?d?f.addCallback(e):e(f,"connect"):p.push(e),f)}};return g}},function(n,t){n.exports=e},function(e,n,t){(function(n){e.exports=function(e){var o=function(n,o){var r=n.jQuery,i=n.$,a=o&&o.jQuery,s=o&&o.$,c=o&&o.window;n.jQuery=n.$=e,o&&(o.jQuery=o.$=e,o.window=n),t(14),n.jQuery=r,n.$=i,o&&(o.jQuery=a,o.$=s,o.window=c)};return"undefined"!=typeof window?o(window,"undefined"!=typeof n&&n):function(e){o(e,"undefined"!=typeof n&&n)}}}).call(n,function(){return this}())},function(e,t,o){var r,i,a;!function(s){i=[o(12)],r=s,a="function"==typeof r?r.apply(t,i):r,!(a!==n&&(e.exports=a))}(function(e){if(!e.support.cors&&e.ajaxTransport&&window.XDomainRequest){var t=/^https?:\/\//i,o=/^get|post$/i,r=new RegExp("^"+location.protocol,"i");e.ajaxTransport("* text html xml json",function(i,a,s){if(i.crossDomain&&i.async&&o.test(i.type)&&t.test(i.url)&&r.test(i.url)){var c=null;return{send:function(t,o){var r="",s=(a.dataType||"").toLowerCase();c=new XDomainRequest,/^\d+$/.test(a.timeout)&&(c.timeout=a.timeout),c.ontimeout=function(){o(500,"timeout")},c.onload=function(){var t="Content-Length: "+c.responseText.length+"\r\nContent-Type: "+c.contentType,r={code:200,message:"success"},i={text:c.responseText};try{if("html"===s||/text\/html/i.test(c.contentType))i.html=c.responseText;else if("json"===s||"text"!==s&&/\/json/i.test(c.contentType))try{i.json=e.parseJSON(c.responseText)}catch(a){r.code=500,r.message="parseerror"}else if("xml"===s||"text"!==s&&/\/xml/i.test(c.contentType)){var u=new ActiveXObject("Microsoft.XMLDOM");u.async=!1;try{u.loadXML(c.responseText)}catch(a){u=n}if(!u||!u.documentElement||u.getElementsByTagName("parsererror").length)throw r.code=500,r.message="parseerror","Invalid XML: "+c.responseText;i.xml=u}}catch(l){throw l}finally{o(r.code,r.message,i,t)}},c.onprogress=function(){},c.onerror=function(){o(500,"error",{text:c.responseText})},a.data&&(r="string"===e.type(a.data)?a.data:e.param(a.data)),c.open(i.type,i.url),c.send(r)},abort:function(){c&&c.abort()}}}})}})},function(e,n,t){(function(n){e.exports=function(e){var o=function(n){var o=n.jQuery,r=n.$;n.jQuery=n.$=e,t(16),n.jQuery=o,n.$=r};return"undefined"!=typeof window?o(window):function(e){var t=n.window;n.window=e,o(e),n.window=t}}}).call(n,function(){return this}())},function(e,n){!function(e,n,t){function o(n,t){if(e.isArray(n)){for(var o=n.length-1;o>=0;o--){var r=n[o];"string"===e.type(r)&&c.transports[r]||(t.log("Invalid transport: "+r+", removing it from the transports list."),n.splice(o,1))}0===n.length&&(t.log("No transports remain within the specified transport array."),n=null)}else if(c.transports[n]||"auto"===n){if("auto"===n&&c._.ieVersion<=8)return["longPolling"]}else t.log("Invalid transport: "+n.toString()+"."),n=null;return n}function r(e){return"http:"===e?80:"https:"===e?443:void 0}function i(e,n){return n.match(/:\d+$/)?n:n+":"+r(e)}function a(n,t){var o=this,r=[];o.tryBuffer=function(t){return n.state===e.signalR.connectionState.connecting?(r.push(t),!0):!1},o.drain=function(){if(n.state===e.signalR.connectionState.connected)for(;r.length>0;)t(r.shift())},o.clear=function(){r=[]}}var s={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if("function"!=typeof e)throw new Error(s.nojQuery);var c,u,l="complete"===n.document.readyState,f=e(n),d="__Negotiate Aborted__",p={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},g={processData:!0,timeout:null,async:!0,global:!1,cache:!1},h=function(e,t){if(t!==!1){var o;"undefined"!=typeof n.console&&(o="["+(new Date).toTimeString()+"] SignalR: "+e,n.console.debug?n.console.debug(o):n.console.log&&n.console.log(o))}},v=function(n,t,o){return t===n.state?(n.state=o,e(n).triggerHandler(p.onStateChanged,[{oldState:t,newState:o}]),!0):!1},m=function(e){return e.state===c.connectionState.disconnected},b=function(e){return e._.keepAliveData.activated&&e.transport.supportsKeepAlive(e)},y=function(t){var o,r;t._.configuredStopReconnectingTimeout||(r=function(n){var t=c._.format(c.resources.reconnectTimeout,n.disconnectTimeout);n.log(t),e(n).triggerHandler(p.onError,[c._.error(t,"TimeoutException")]),n.stop(!1,!1)},t.reconnecting(function(){var e=this;e.state===c.connectionState.reconnecting&&(o=n.setTimeout(function(){r(e)},e.disconnectTimeout))}),t.stateChanged(function(e){e.oldState===c.connectionState.reconnecting&&n.clearTimeout(o)}),t._.configuredStopReconnectingTimeout=!0)};c=function(e,n,t){return new c.fn.init(e,n,t)},c._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var e,t;return"Microsoft Internet Explorer"===n.navigator.appName&&(t=/MSIE ([0-9]+\.[0-9]+)/.exec(n.navigator.userAgent),t&&(e=n.parseFloat(t[1]))),e}(),error:function(e,n,t){var o=new Error(e);return o.source=n,"undefined"!=typeof t&&(o.context=t),o},transportError:function(e,n,o,r){var i=this.error(e,o,r);return i.transport=n?n.name:t,i},format:function(){for(var e=arguments[0],n=0;n<arguments.length-1;n++)e=e.replace("{"+n+"}",arguments[n+1]);return e},firefoxMajorVersion:function(e){var n=e.match(/Firefox\/(\d+)/);return!n||!n.length||n.length<2?0:parseInt(n[1],10)},configurePingInterval:function(t){var o=t._.config,r=function(n){e(t).triggerHandler(p.onError,[n])};o&&!t._.pingIntervalId&&o.pingInterval&&(t._.pingIntervalId=n.setInterval(function(){c.transports._logic.pingServer(t).fail(r)},o.pingInterval))}},c.events=p,c.resources=s,c.ajaxDefaults=g,c.changeState=v,c.isDisconnecting=m,c.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4},c.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'></script>.")}},f.load(function(){l=!0}),c.fn=c.prototype={init:function(n,t,o){var r=e(this);this.url=n,this.qs=t,this.lastError=null,this._={keepAliveData:{},connectingMessageBuffer:new a(this,function(e){r.triggerHandler(p.onReceived,[e])}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0},"boolean"==typeof o&&(this.logging=o)},_parseResponse:function(e){var n=this;return e&&"string"==typeof e?n.json.parse(e):e},_originalJson:n.JSON,json:n.JSON,isCrossDomain:function(t,o){var r;return t=e.trim(t),o=o||n.location,0!==t.indexOf("http")?!1:(r=n.document.createElement("a"),r.href=t,r.protocol+i(r.protocol,r.host)!==o.protocol+i(o.protocol,o.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:c.connectionState.disconnected,clientProtocol:"1.5",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(t,r){var i,a=this,u={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},g=a._deferral||e.Deferred(),h=n.document.createElement("a");if(a.lastError=null,a._deferral=g,!a.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");
if("function"===e.type(t)?r=t:"object"===e.type(t)&&(e.extend(u,t),"function"===e.type(u.callback)&&(r=u.callback)),u.transport=o(u.transport,a),!u.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");if(a._.config=u,!l&&u.waitForPageLoad===!0)return a._.deferredStartHandler=function(){a.start(t,r)},f.bind("load",a._.deferredStartHandler),g.promise();if(a.state===c.connectionState.connecting)return g.promise();if(v(a,c.connectionState.disconnected,c.connectionState.connecting)===!1)return g.resolve(a),g.promise();y(a),h.href=a.url,h.protocol&&":"!==h.protocol?(a.protocol=h.protocol,a.host=h.host):(a.protocol=n.document.location.protocol,a.host=h.host||n.document.location.host),a.baseUrl=a.protocol+"//"+a.host,a.wsProtocol="https:"===a.protocol?"wss://":"ws://","auto"===u.transport&&u.jsonp===!0&&(u.transport="longPolling"),0===a.url.indexOf("//")&&(a.url=n.location.protocol+a.url,a.log("Protocol relative URL detected, normalizing it to '"+a.url+"'.")),this.isCrossDomain(a.url)&&(a.log("Auto detected cross domain url."),"auto"===u.transport&&(u.transport=["webSockets","serverSentEvents","longPolling"]),"undefined"==typeof u.withCredentials&&(u.withCredentials=!0),u.jsonp||(u.jsonp=!e.support.cors,u.jsonp&&a.log("Using jsonp because this browser doesn't support CORS.")),a.contentType=c._.defaultContentType),a.withCredentials=u.withCredentials,a.ajaxDataType=u.jsonp?"jsonp":"text",e(a).bind(p.onStart,function(n,t){"function"===e.type(r)&&r.call(a),g.resolve(a)}),a._.initHandler=c.transports._logic.initHandler(a),i=function(t,o){var r=c._.error(s.noTransportOnInit);if(o=o||0,o>=t.length)return 0===o?a.log("No transports supported by the server were selected."):1===o?a.log("No fallback transports were selected."):a.log("Fallback transports exhausted."),e(a).triggerHandler(p.onError,[r]),g.reject(r),void a.stop();if(a.state!==c.connectionState.disconnected){var u=t[o],l=c.transports[u],d=function(){i(t,o+1)};a.transport=l;try{a._.initHandler.start(l,function(){var t=c._.firefoxMajorVersion(n.navigator.userAgent)>=11,o=!!a.withCredentials&&t;a.log("The start request succeeded. Transitioning to the connected state."),b(a)&&c.transports._logic.monitorKeepAlive(a),c.transports._logic.startHeartbeat(a),c._.configurePingInterval(a),v(a,c.connectionState.connecting,c.connectionState.connected)||a.log("WARNING! The connection was not in the connecting state."),a._.connectingMessageBuffer.drain(),e(a).triggerHandler(p.onStart),f.bind("unload",function(){a.log("Window unloading, stopping the connection."),a.stop(o)}),t&&f.bind("beforeunload",function(){n.setTimeout(function(){a.stop(o)},0)})},d)}catch(h){a.log(l.name+" transport threw '"+h.message+"' when attempting to start."),d()}}};var m=a.url+"/negotiate",w=function(n,t){var o=c._.error(s.errorOnNegotiate,n,t._.negotiateRequest);e(t).triggerHandler(p.onError,o),g.reject(o),t.stop()};return e(a).triggerHandler(p.onStarting),m=c.transports._logic.prepareQueryString(a,m),a.log("Negotiating with '"+m+"'."),a._.negotiateRequest=c.transports._logic.ajax(a,{url:m,error:function(e,n){n!==d?w(e,a):g.reject(c._.error(s.stoppedWhileNegotiating,null,a._.negotiateRequest))},success:function(n){var t,o,r,l=[],f=[];try{t=a._parseResponse(n)}catch(d){return void w(c._.error(s.errorParsingNegotiateResponse,d),a)}return o=a._.keepAliveData,a.appRelativeUrl=t.Url,a.id=t.ConnectionId,a.token=t.ConnectionToken,a.webSocketServerUrl=t.WebSocketServerUrl,a._.pollTimeout=1e3*t.ConnectionTimeout+1e4,a.disconnectTimeout=1e3*t.DisconnectTimeout,a._.totalTransportConnectTimeout=a.transportConnectTimeout+1e3*t.TransportConnectTimeout,t.KeepAliveTimeout?(o.activated=!0,o.timeout=1e3*t.KeepAliveTimeout,o.timeoutWarning=o.timeout*a.keepAliveWarnAt,a._.beatInterval=(o.timeout-o.timeoutWarning)/3):o.activated=!1,a.reconnectWindow=a.disconnectTimeout+(o.timeout||0),t.ProtocolVersion&&t.ProtocolVersion===a.clientProtocol?(e.each(c.transports,function(e){return 0===e.indexOf("_")||"webSockets"===e&&!t.TryWebSockets?!0:void f.push(e)}),e.isArray(u.transport)?e.each(u.transport,function(n,t){e.inArray(t,f)>=0&&l.push(t)}):"auto"===u.transport?l=f:e.inArray(u.transport,f)>=0&&l.push(u.transport),void i(l)):(r=c._.error(c._.format(s.protocolIncompatible,a.clientProtocol,t.ProtocolVersion)),e(a).triggerHandler(p.onError,[r]),void g.reject(r))}}),g.promise()},starting:function(n){var t=this;return e(t).bind(p.onStarting,function(e,o){n.call(t)}),t},send:function(e){var n=this;if(n.state===c.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(n.state===c.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return n.transport.send(n,e),n},received:function(n){var t=this;return e(t).bind(p.onReceived,function(e,o){n.call(t,o)}),t},stateChanged:function(n){var t=this;return e(t).bind(p.onStateChanged,function(e,o){n.call(t,o)}),t},error:function(n){var t=this;return e(t).bind(p.onError,function(e,o,r){t.lastError=o,n.call(t,o,r)}),t},disconnected:function(n){var t=this;return e(t).bind(p.onDisconnect,function(e,o){n.call(t)}),t},connectionSlow:function(n){var t=this;return e(t).bind(p.onConnectionSlow,function(e,o){n.call(t)}),t},reconnecting:function(n){var t=this;return e(t).bind(p.onReconnecting,function(e,o){n.call(t)}),t},reconnected:function(n){var t=this;return e(t).bind(p.onReconnect,function(e,o){n.call(t)}),t},stop:function(t,o){var r=this,i=r._deferral;return r._.deferredStartHandler&&f.unbind("load",r._.deferredStartHandler),delete r._.config,delete r._.deferredStartHandler,l||r._.config&&r._.config.waitForPageLoad!==!0?r.state!==c.connectionState.disconnected?(r.log("Stopping connection."),v(r,r.state,c.connectionState.disconnected),n.clearTimeout(r._.beatHandle),n.clearInterval(r._.pingIntervalId),r.transport&&(r.transport.stop(r),o!==!1&&r.transport.abort(r,t),b(r)&&c.transports._logic.stopMonitoringKeepAlive(r),r.transport=null),r._.negotiateRequest&&(r._.negotiateRequest.abort(d),delete r._.negotiateRequest),r._.initHandler&&r._.initHandler.stop(),e(r).triggerHandler(p.onDisconnect),delete r._deferral,delete r.messageId,delete r.groupsToken,delete r.id,delete r._.pingIntervalId,delete r._.lastMessageAt,delete r._.lastActiveAt,r._.connectingMessageBuffer.clear(),r):void 0:(r.log("Stopping connection prior to negotiate."),void(i&&i.reject(c._.error(s.stoppedWhileLoading))))},log:function(e){h(e,this.logging)}},c.fn.init.prototype=c.fn,c.noConflict=function(){return e.connection===c&&(e.connection=u),c},e.connection&&(u=e.connection),e.connection=e.signalR=c}(window.jQuery,window),function(e,n,t){function o(e){e._.keepAliveData.monitoring&&r(e),s.markActive(e)&&(e._.beatHandle=n.setTimeout(function(){o(e)},e._.beatInterval))}function r(n){var t,o=n._.keepAliveData;n.state===c.connectionState.connected&&(t=(new Date).getTime()-n._.lastMessageAt,t>=o.timeout?(n.log("Keep alive timed out.  Notifying transport that connection has been lost."),n.transport.lostConnection(n)):t>=o.timeoutWarning?o.userNotified||(n.log("Keep alive has been missed, connection may be dead/slow."),e(n).triggerHandler(u.onConnectionSlow),o.userNotified=!0):o.userNotified=!1)}function i(e,n){var t=e.url+n;return e.transport&&(t+="?transport="+e.transport.name),s.prepareQueryString(e,t)}function a(e){this.connection=e,this.startRequested=!1,this.startCompleted=!1,this.connectionStopped=!1}var s,c=e.signalR,u=e.signalR.events,l=e.signalR.changeState,f="__Start Aborted__";c.transports={},a.prototype={start:function(e,o,r){var i=this,a=i.connection,s=!1;return i.startRequested||i.connectionStopped?void a.log("WARNING! "+e.name+" transport cannot be started. Initialization ongoing or completed."):(a.log(e.name+" transport starting."),i.transportTimeoutHandle=n.setTimeout(function(){s||(s=!0,a.log(e.name+" transport timed out when trying to connect."),i.transportFailed(e,t,r))},a._.totalTransportConnectTimeout),void e.start(a,function(){s||i.initReceived(e,o)},function(n){return s||(s=!0,i.transportFailed(e,n,r)),!i.startCompleted||i.connectionStopped}))},stop:function(){this.connectionStopped=!0,n.clearTimeout(this.transportTimeoutHandle),c.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(e,t){var o=this,r=o.connection;return o.startRequested?void r.log("WARNING! The client received multiple init messages."):void(o.connectionStopped||(o.startRequested=!0,n.clearTimeout(o.transportTimeoutHandle),r.log(e.name+" transport connected. Initiating start request."),c.transports._logic.ajaxStart(r,function(){o.startCompleted=!0,t()})))},transportFailed:function(t,o,r){var i,a=this.connection,s=a._deferral;this.connectionStopped||(n.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(i=c._.error(c.resources.errorDuringStartRequest,o),a.log(t.name+" transport failed during the start request. Stopping the connection."),e(a).triggerHandler(u.onError,[i]),s&&s.reject(i),a.stop()):(t.stop(a),a.log(t.name+" transport failed to connect. Attempting to fall back."),r()))}},s=c.transports._logic={ajax:function(n,t){return e.ajax(e.extend(!0,{},e.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:n.withCredentials},contentType:n.contentType,dataType:n.ajaxDataType},t))},pingServer:function(n){var t,o,r=e.Deferred();return n.transport?(t=n.url+"/ping",t=s.addQs(t,n.qs),o=s.ajax(n,{url:t,success:function(e){var t;try{t=n._parseResponse(e)}catch(i){return r.reject(c._.transportError(c.resources.pingServerFailedParse,n.transport,i,o)),void n.stop()}"pong"===t.Response?r.resolve():r.reject(c._.transportError(c._.format(c.resources.pingServerFailedInvalidResponse,e),n.transport,null,o))},error:function(e){401===e.status||403===e.status?(r.reject(c._.transportError(c._.format(c.resources.pingServerFailedStatusCode,e.status),n.transport,e,o)),n.stop()):r.reject(c._.transportError(c.resources.pingServerFailed,n.transport,e,o))}})):r.reject(c._.transportError(c.resources.noConnectionTransport,n.transport)),r.promise()},prepareQueryString:function(e,t){var o;return o=s.addQs(t,"clientProtocol="+e.clientProtocol),o=s.addQs(o,e.qs),e.token&&(o+="&connectionToken="+n.encodeURIComponent(e.token)),e.data&&(o+="&connectionData="+n.encodeURIComponent(e.data)),o},addQs:function(n,t){var o,r=-1!==n.indexOf("?")?"&":"?";if(!t)return n;if("object"==typeof t)return n+r+e.param(t);if("string"==typeof t)return o=t.charAt(0),"?"!==o&&"&"!==o||(r=""),n+r+t;throw new Error("Query string property must be either a string or object.")},getUrl:function(e,t,o,r,i){var a="webSockets"===t?"":e.baseUrl,c=a+e.appRelativeUrl,u="transport="+t;return!i&&e.groupsToken&&(u+="&groupsToken="+n.encodeURIComponent(e.groupsToken)),o?(c+=r?"/poll":"/reconnect",!i&&e.messageId&&(u+="&messageId="+n.encodeURIComponent(e.messageId))):c+="/connect",c+="?"+u,c=s.prepareQueryString(e,c),i||(c+="&tid="+Math.floor(11*Math.random())),c},maximizePersistentResponse:function(e){return{MessageId:e.C,Messages:e.M,Initialized:"undefined"!=typeof e.S,ShouldReconnect:"undefined"!=typeof e.T,LongPollDelay:e.L,GroupsToken:e.G}},updateGroups:function(e,n){n&&(e.groupsToken=n)},stringifySend:function(e,n){return"string"==typeof n||"undefined"==typeof n||null===n?n:e.json.stringify(n)},ajaxSend:function(n,t){var o,r=s.stringifySend(n,t),a=i(n,"/send"),l=function(n,r){e(r).triggerHandler(u.onError,[c._.transportError(c.resources.sendFailed,r.transport,n,o),t])};return o=s.ajax(n,{url:a,type:"jsonp"===n.ajaxDataType?"GET":"POST",contentType:c._.defaultContentType,data:{data:r},success:function(e){var t;if(e){try{t=n._parseResponse(e)}catch(o){return l(o,n),void n.stop()}s.triggerReceived(n,t)}},error:function(e,t){"abort"!==t&&"parsererror"!==t&&l(e,n)}})},ajaxAbort:function(e,n){if("undefined"!=typeof e.transport){n="undefined"==typeof n?!0:n;var t=i(e,"/abort");s.ajax(e,{url:t,async:n,timeout:1e3,type:"POST"}),e.log("Fired ajax abort async = "+n+".")}},ajaxStart:function(n,t){var o=function(e){var t=n._deferral;t&&t.reject(e)},r=function(t){n.log("The start request failed. Stopping the connection."),e(n).triggerHandler(u.onError,[t]),o(t),n.stop()};n._.startRequest=s.ajax(n,{url:i(n,"/start"),success:function(e,o,i){var a;try{a=n._parseResponse(e)}catch(s){return void r(c._.error(c._.format(c.resources.errorParsingStartResponse,e),s,i))}"started"===a.Response?t():r(c._.error(c._.format(c.resources.invalidStartResponse,e),null,i))},error:function(e,t,i){t!==f?r(c._.error(c.resources.errorDuringStartRequest,i,e)):(n.log("The start request aborted because connection.stop() was called."),o(c._.error(c.resources.stoppedDuringStartRequest,null,e)))}})},tryAbortStartRequest:function(e){e._.startRequest&&(e._.startRequest.abort(f),delete e._.startRequest)},tryInitialize:function(e,n){e.Initialized&&n()},triggerReceived:function(n,t){n._.connectingMessageBuffer.tryBuffer(t)||e(n).triggerHandler(u.onReceived,[t])},processMessages:function(n,t,o){var r;s.markLastMessage(n),t&&(r=s.maximizePersistentResponse(t),s.updateGroups(n,r.GroupsToken),r.MessageId&&(n.messageId=r.MessageId),r.Messages&&(e.each(r.Messages,function(e,t){s.triggerReceived(n,t)}),s.tryInitialize(r,o)))},monitorKeepAlive:function(n){var t=n._.keepAliveData;t.monitoring?n.log("Tried to monitor keep alive but it's already being monitored."):(t.monitoring=!0,s.markLastMessage(n),n._.keepAliveData.reconnectKeepAliveUpdate=function(){s.markLastMessage(n)},e(n).bind(u.onReconnect,n._.keepAliveData.reconnectKeepAliveUpdate),n.log("Now monitoring keep alive with a warning timeout of "+t.timeoutWarning+", keep alive timeout of "+t.timeout+" and disconnecting timeout of "+n.disconnectTimeout))},stopMonitoringKeepAlive:function(n){var t=n._.keepAliveData;t.monitoring&&(t.monitoring=!1,e(n).unbind(u.onReconnect,n._.keepAliveData.reconnectKeepAliveUpdate),n._.keepAliveData={},n.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(e){e._.lastActiveAt=(new Date).getTime(),o(e)},markLastMessage:function(e){e._.lastMessageAt=(new Date).getTime()},markActive:function(e){return s.verifyLastActive(e)?(e._.lastActiveAt=(new Date).getTime(),!0):!1},isConnectedOrReconnecting:function(e){return e.state===c.connectionState.connected||e.state===c.connectionState.reconnecting},ensureReconnectingState:function(n){return l(n,c.connectionState.connected,c.connectionState.reconnecting)===!0&&e(n).triggerHandler(u.onReconnecting),n.state===c.connectionState.reconnecting},clearReconnectTimeout:function(e){e&&e._.reconnectTimeout&&(n.clearTimeout(e._.reconnectTimeout),delete e._.reconnectTimeout)},verifyLastActive:function(n){if((new Date).getTime()-n._.lastActiveAt>=n.reconnectWindow){var t=c._.format(c.resources.reconnectWindowTimeout,new Date(n._.lastActiveAt),n.reconnectWindow);return n.log(t),e(n).triggerHandler(u.onError,[c._.error(t,"TimeoutException")]),n.stop(!1,!1),!1}return!0},reconnect:function(e,t){var o=c.transports[t];if(s.isConnectedOrReconnecting(e)&&!e._.reconnectTimeout){if(!s.verifyLastActive(e))return;e._.reconnectTimeout=n.setTimeout(function(){s.verifyLastActive(e)&&(o.stop(e),s.ensureReconnectingState(e)&&(e.log(t+" reconnecting."),o.start(e)))},e.reconnectDelay)}},handleParseFailure:function(n,t,o,r,i){var a=c._.transportError(c._.format(c.resources.parseFailed,t),n.transport,o,i);r&&r(a)?n.log("Failed to parse server response while attempting to connect."):(e(n).triggerHandler(u.onError,[a]),n.stop())},initHandler:function(e){return new a(e)},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(e,n,t){var o=e.signalR,r=e.signalR.events,i=e.signalR.changeState,a=o.transports._logic;o.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(n,t){var i=a.stringifySend(n,t);try{n.socket.send(i)}catch(s){e(n).triggerHandler(r.onError,[o._.transportError(o.resources.webSocketsInvalidState,n.transport,s,n.socket),t])}},start:function(t,s,c){var u,l=!1,f=this,d=!s,p=e(t);return n.WebSocket?void(t.socket||(u=t.webSocketServerUrl?t.webSocketServerUrl:t.wsProtocol+t.host,u+=a.getUrl(t,this.name,d),t.log("Connecting to websocket endpoint '"+u+"'."),t.socket=new n.WebSocket(u),t.socket.onopen=function(){l=!0,t.log("Websocket opened."),a.clearReconnectTimeout(t),i(t,o.connectionState.reconnecting,o.connectionState.connected)===!0&&p.triggerHandler(r.onReconnect)},t.socket.onclose=function(n){var i;this===t.socket&&(l&&"undefined"!=typeof n.wasClean&&n.wasClean===!1?(i=o._.transportError(o.resources.webSocketClosed,t.transport,n),t.log("Unclean disconnect from websocket: "+(n.reason||"[no reason given]."))):t.log("Websocket closed."),c&&c(i)||(i&&e(t).triggerHandler(r.onError,[i]),f.reconnect(t)))},t.socket.onmessage=function(n){var o;try{o=t._parseResponse(n.data)}catch(r){return void a.handleParseFailure(t,n.data,r,c,n)}o&&(e.isEmptyObject(o)||o.M?a.processMessages(t,o,s):a.triggerReceived(t,o))})):void c()},reconnect:function(e){a.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},stop:function(e){a.clearReconnectTimeout(e),e.socket&&(e.log("Closing the Websocket."),e.socket.close(),e.socket=null)},abort:function(e,n){a.ajaxAbort(e,n)}}}(window.jQuery,window),function(e,n,t){var o=e.signalR,r=e.signalR.events,i=e.signalR.changeState,a=o.transports._logic,s=function(e){n.clearTimeout(e._.reconnectAttemptTimeoutHandle),delete e._.reconnectAttemptTimeoutHandle};o.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(t,c,u){var l,f=this,d=!1,p=e(t),g=!c;if(t.eventSource&&(t.log("The connection already has an event source. Stopping it."),t.stop()),!n.EventSource)return void(u&&(t.log("This browser doesn't support SSE."),u()));l=a.getUrl(t,this.name,g);try{t.log("Attempting to connect to SSE endpoint '"+l+"'."),t.eventSource=new n.EventSource(l,{withCredentials:t.withCredentials})}catch(h){return t.log("EventSource failed trying to connect with error "+h.Message+"."),void(u?u():(p.triggerHandler(r.onError,[o._.transportError(o.resources.eventSourceFailedToConnect,t.transport,h)]),g&&f.reconnect(t)))}g&&(t._.reconnectAttemptTimeoutHandle=n.setTimeout(function(){d===!1&&t.eventSource.readyState!==n.EventSource.OPEN&&f.reconnect(t)},f.timeOut)),t.eventSource.addEventListener("open",function(e){t.log("EventSource connected."),s(t),a.clearReconnectTimeout(t),d===!1&&(d=!0,i(t,o.connectionState.reconnecting,o.connectionState.connected)===!0&&p.triggerHandler(r.onReconnect))},!1),t.eventSource.addEventListener("message",function(e){var n;if("initialized"!==e.data){try{n=t._parseResponse(e.data)}catch(o){return void a.handleParseFailure(t,e.data,o,u,e)}a.processMessages(t,n,c)}},!1),t.eventSource.addEventListener("error",function(e){var i=o._.transportError(o.resources.eventSourceError,t.transport,e);this===t.eventSource&&(u&&u(i)||(t.log("EventSource readyState: "+t.eventSource.readyState+"."),e.eventPhase===n.EventSource.CLOSED?(t.log("EventSource reconnecting due to the server connection ending."),f.reconnect(t)):(t.log("EventSource error."),p.triggerHandler(r.onError,[i]))))},!1)},reconnect:function(e){a.reconnect(e,this.name)},lostConnection:function(e){this.reconnect(e)},send:function(e,n){a.ajaxSend(e,n)},stop:function(e){s(e),a.clearReconnectTimeout(e),e&&e.eventSource&&(e.log("EventSource calling close()."),e.eventSource.close(),e.eventSource=null,delete e.eventSource)},abort:function(e,n){a.ajaxAbort(e,n)}}}(window.jQuery,window),function(e,n,t){var o=e.signalR,r=e.signalR.events,i=e.signalR.changeState,a=o.transports._logic,s=function(){var e=n.document.createElement("iframe");return e.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),e},c=function(){var e=null,t=1e3,r=0;return{prevent:function(){o._.ieVersion<=8&&(0===r&&(e=n.setInterval(function(){var e=s();n.document.body.appendChild(e),n.document.body.removeChild(e),e=null},t)),r++)},cancel:function(){1===r&&n.clearInterval(e),r>0&&r--}}}();o.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(e,t,o){var r,i=this,u=a.foreverFrame.count+=1,l=s(),f=function(){e.log("Forever frame iframe finished loading and is no longer receiving messages."),o&&o()||i.reconnect(e)};return n.EventSource?void(o&&(e.log("Forever Frame is not supported by SignalR on browsers with SSE support."),o())):(l.setAttribute("data-signalr-connection-id",e.id),c.prevent(),r=a.getUrl(e,this.name),r+="&frameId="+u,n.document.documentElement.appendChild(l),e.log("Binding to iframe's load event."),l.addEventListener?l.addEventListener("load",f,!1):l.attachEvent&&l.attachEvent("onload",f),l.src=r,a.foreverFrame.connections[u]=e,e.frame=l,e.frameId=u,void(t&&(e.onSuccess=function(){e.log("Iframe transport started."),t()})))},reconnect:function(e){var t=this;a.isConnectedOrReconnecting(e)&&a.verifyLastActive(e)&&n.setTimeout(function(){if(a.verifyLastActive(e)&&e.frame&&a.ensureReconnectingState(e)){var n=e.frame,o=a.getUrl(e,t.name,!0)+"&frameId="+e.frameId;e.log("Updating iframe src to '"+o+"'."),n.src=o}},e.reconnectDelay)},lostConnection:function(e){this.reconnect(e)},send:function(e,n){a.ajaxSend(e,n)},receive:function(n,t){var r,i,s;if(n.json!==n._originalJson&&(t=n._originalJson.stringify(t)),s=n._parseResponse(t),a.processMessages(n,s,n.onSuccess),n.state===e.signalR.connectionState.connected&&(n.frameMessageCount=(n.frameMessageCount||0)+1,n.frameMessageCount>o.transports.foreverFrame.iframeClearThreshold&&(n.frameMessageCount=0,r=n.frame.contentWindow||n.frame.contentDocument,r&&r.document&&r.document.body)))for(i=r.document.body;i.firstChild;)i.removeChild(i.firstChild)},stop:function(e){var t=null;if(c.cancel(),e.frame){if(e.frame.stop)e.frame.stop();else try{t=e.frame.contentWindow||e.frame.contentDocument,t.document&&t.document.execCommand&&t.document.execCommand("Stop")}catch(o){e.log("Error occured when stopping foreverFrame transport. Message = "+o.message+".")}e.frame.parentNode===n.document.body&&n.document.body.removeChild(e.frame),delete a.foreverFrame.connections[e.frameId],e.frame=null,e.frameId=null,delete e.frame,delete e.frameId,delete e.onSuccess,delete e.frameMessageCount,e.log("Stopping forever frame.")}},abort:function(e,n){a.ajaxAbort(e,n)},getConnection:function(e){return a.foreverFrame.connections[e]},started:function(n){i(n,o.connectionState.reconnecting,o.connectionState.connected)===!0&&e(n).triggerHandler(r.onReconnect)}}}(window.jQuery,window),function(e,n,t){var o=e.signalR,r=e.signalR.events,i=e.signalR.changeState,a=e.signalR.isDisconnecting,s=o.transports._logic;o.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(t,c,u){var l=this,f=function(){f=e.noop,t.log("LongPolling connected."),c()},d=function(e){return u(e)?(t.log("LongPolling failed to connect."),!0):!1},p=t._,g=0,h=function(t){n.clearTimeout(p.reconnectTimeoutId),p.reconnectTimeoutId=null,i(t,o.connectionState.reconnecting,o.connectionState.connected)===!0&&(t.log("Raising the reconnect event"),e(t).triggerHandler(r.onReconnect))},v=36e5;t.pollXhr&&(t.log("Polling xhr requests already exists, aborting."),t.stop()),t.messageId=null,p.reconnectTimeoutId=null,p.pollTimeoutId=n.setTimeout(function(){!function i(c,u){var m=c.messageId,b=null===m,y=!b,w=!u,S=s.getUrl(c,l.name,y,w,!0),T={};c.messageId&&(T.messageId=c.messageId),c.groupsToken&&(T.groupsToken=c.groupsToken),a(c)!==!0&&(t.log("Opening long polling request to '"+S+"'."),c.pollXhr=s.ajax(t,{xhrFields:{onprogress:function(){s.markLastMessage(t)}},url:S,type:"POST",contentType:o._.defaultContentType,data:T,timeout:t._.pollTimeout,success:function(o){var r,u,l,v=0;t.log("Long poll complete."),g=0;try{r=t._parseResponse(o)}catch(m){return void s.handleParseFailure(c,o,m,d,c.pollXhr)}null!==p.reconnectTimeoutId&&h(c),r&&(u=s.maximizePersistentResponse(r)),s.processMessages(c,r,f),u&&"number"===e.type(u.LongPollDelay)&&(v=u.LongPollDelay),a(c)!==!0&&(l=u&&u.ShouldReconnect,l&&!s.ensureReconnectingState(c)||(v>0?p.pollTimeoutId=n.setTimeout(function(){i(c,l)},v):i(c,l)))},error:function(a,u){var f=o._.transportError(o.resources.longPollFailed,t.transport,a,c.pollXhr);if(n.clearTimeout(p.reconnectTimeoutId),p.reconnectTimeoutId=null,"abort"===u)return void t.log("Aborted xhr request.");if(!d(f)){if(g++,t.state!==o.connectionState.reconnecting&&(t.log("An error occurred using longPolling. Status = "+u+".  Response = "+a.responseText+"."),e(c).triggerHandler(r.onError,[f])),(t.state===o.connectionState.connected||t.state===o.connectionState.reconnecting)&&!s.verifyLastActive(t))return;if(!s.ensureReconnectingState(c))return;p.pollTimeoutId=n.setTimeout(function(){i(c,!0)},l.reconnectDelay)}}}),y&&u===!0&&(p.reconnectTimeoutId=n.setTimeout(function(){h(c)},Math.min(1e3*(Math.pow(2,g)-1),v))))}(t)},250)},lostConnection:function(e){e.pollXhr&&e.pollXhr.abort("lostConnection")},send:function(e,n){s.ajaxSend(e,n)},stop:function(e){n.clearTimeout(e._.pollTimeoutId),n.clearTimeout(e._.reconnectTimeoutId),delete e._.pollTimeoutId,delete e._.reconnectTimeoutId,e.pollXhr&&(e.pollXhr.abort(),e.pollXhr=null,delete e.pollXhr)},abort:function(e,n){s.ajaxAbort(e,n)}}}(window.jQuery,window),function(e,n,t){function o(e){return e+l}function r(e,n,t){var o,r=e.length,i=[];for(o=0;r>o;o+=1)e.hasOwnProperty(o)&&(i[o]=n.call(t,e[o],o,e));return i}function i(n){return e.isFunction(n)?null:"undefined"===e.type(n)?null:n}function a(e){for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}function s(e,n){var t,o=e._.invocationCallbacks;a(o)&&e.log("Clearing hub invocation callbacks with error: "+n+"."),e._.invocationCallbackId=0,delete e._.invocationCallbacks,e._.invocationCallbacks={};for(var r in o)t=o[r],t.method.call(t.scope,{E:n})}function c(e,n){return new c.fn.init(e,n)}function u(n,t){var o={qs:null,logging:!1,useDefaultPath:!0};return e.extend(o,t),n&&!o.useDefaultPath||(n=(n||"")+"/signalr"),new u.fn.init(n,o)}var l=".hubProxy",f=e.signalR;c.fn=c.prototype={init:function(e,n){this.state={},this.connection=e,this.hubName=n,this._={callbackMap:{}}},constructor:c,hasSubscriptions:function(){return a(this._.callbackMap)},on:function(n,t){var r=this,i=r._.callbackMap;return n=n.toLowerCase(),i[n]||(i[n]={}),i[n][t]=function(e,n){t.apply(r,n)},e(r).bind(o(n),i[n][t]),r},off:function(n,t){var r,i=this,s=i._.callbackMap;return n=n.toLowerCase(),r=s[n],r&&(r[t]?(e(i).unbind(o(n),r[t]),delete r[t],a(r)||delete s[n]):t||(e(i).unbind(o(n)),delete s[n])),i},invoke:function(n){var t=this,o=t.connection,a=e.makeArray(arguments).slice(1),s=r(a,i),c={H:t.hubName,M:n,A:s,I:o._.invocationCallbackId},u=e.Deferred(),l=function(r){var i,a,s=t._maximizeHubResponse(r);e.extend(t.state,s.State),s.Progress?u.notifyWith?u.notifyWith(t,[s.Progress.Data]):o._.progressjQueryVersionLogged||(o.log("A hub method invocation progress update was received but the version of jQuery in use ("+e.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),o._.progressjQueryVersionLogged=!0):s.Error?(s.StackTrace&&o.log(s.Error+"\n"+s.StackTrace+"."),i=s.IsHubException?"HubException":"Exception",a=f._.error(s.Error,i),a.data=s.ErrorData,o.log(t.hubName+"."+n+" failed to execute. Error: "+a.message),u.rejectWith(t,[a])):(o.log("Invoked "+t.hubName+"."+n),u.resolveWith(t,[s.Result]))};return o._.invocationCallbacks[o._.invocationCallbackId.toString()]={scope:t,method:l},o._.invocationCallbackId+=1,e.isEmptyObject(t.state)||(c.S=t.state),o.log("Invoking "+t.hubName+"."+n),o.send(c),u.promise()},_maximizeHubResponse:function(e){return{State:e.S,Result:e.R,Progress:e.P?{Id:e.P.I,Data:e.P.D}:null,Id:e.I,IsHubException:e.H,Error:e.E,StackTrace:e.T,ErrorData:e.D}}},c.fn.init.prototype=c.fn,u.fn=u.prototype=e.connection(),u.fn.init=function(n,t){var r={qs:null,logging:!1,useDefaultPath:!0},i=this;e.extend(r,t),e.signalR.fn.init.call(i,n,r.qs,r.logging),i.proxies={},i._.invocationCallbackId=0,i._.invocationCallbacks={},i.received(function(n){var t,r,a,s,c,u;n&&("undefined"!=typeof n.P?(a=n.P.I.toString(),s=i._.invocationCallbacks[a],s&&s.method.call(s.scope,n)):"undefined"!=typeof n.I?(a=n.I.toString(),s=i._.invocationCallbacks[a],s&&(i._.invocationCallbacks[a]=null,delete i._.invocationCallbacks[a],s.method.call(s.scope,n))):(t=this._maximizeClientHubInvocation(n),i.log("Triggering client hub event '"+t.Method+"' on hub '"+t.Hub+"'."),c=t.Hub.toLowerCase(),u=t.Method.toLowerCase(),r=this.proxies[c],e.extend(r.state,t.State),e(r).triggerHandler(o(u),[t.Args])))}),i.error(function(e,n){var t,o;n&&(t=n.I,o=i._.invocationCallbacks[t],o&&(i._.invocationCallbacks[t]=null,delete i._.invocationCallbacks[t],o.method.call(o.scope,{E:e})))}),i.reconnecting(function(){i.transport&&"webSockets"===i.transport.name&&s(i,"Connection started reconnecting before invocation result was received.")}),i.disconnected(function(){s(i,"Connection was disconnected before invocation result was received.")})},u.fn._maximizeClientHubInvocation=function(e){return{Hub:e.H,Method:e.M,Args:e.A,State:e.S}},u.fn._registerSubscribedHubs=function(){var n=this;n._subscribedToHubs||(n._subscribedToHubs=!0,n.starting(function(){var t=[];e.each(n.proxies,function(e){this.hasSubscriptions()&&(t.push({name:e}),n.log("Client subscribed to hub '"+e+"'."))}),0===t.length&&n.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to."),n.data=n.json.stringify(t)}))},u.fn.createHubProxy=function(e){e=e.toLowerCase();var n=this.proxies[e];return n||(n=c(this,e),this.proxies[e]=n),this._registerSubscribedHubs(),n},u.fn.init.prototype=u.fn,e.hubConnection=u}(window.jQuery,window),function(e,n){e.signalR.version="2.2.0"}(window.jQuery)}])}),window.jQuery=t,window.$=o,window.BlueGrass});
!function(o){window.XDomainRequest&&o.ajaxTransport(function(n){if(n.crossDomain&&n.async){n.timeout&&(n.xdrTimeout=n.timeout,delete n.timeout);var t;return{send:function(e,i){function u(n,e,u,r){t.onload=t.onerror=t.ontimeout=o.noop,t=void 0,i(n,e,u,r)}t=new window.XDomainRequest,t.onload=function(){u(200,"OK",{text:t.responseText},"Content-Type: "+t.contentType)},t.onerror=function(){u(404,"Not Found")},t.onprogress=function(){},n.xdrTimeout&&(t.ontimeout=function(){u(0,"timeout")},t.timeout=n.xdrTimeout),t.open(n.type,n.url,!0),t.send(n.hasContent&&n.data||null)},abort:function(){t&&(t.onerror=o.noop(),t.abort())}}}})}(jQuery);
define("dj.responsive.resources/cookieutils",[],function(){var e="||",o="DJCOOKIE",n={},t=!0,i=function(){if("string"==typeof this._cookieDomain)return this._cookieDomain;var e=window.location.hostname.split("."),o=e.length;return this._cookieDomain=o>2?"."+e[o-2]+"."+e[o-1]:window.location.hostname,this._cookieDomain},r=function(o){if("object"==typeof o){var n=[];for(var t in o)o.hasOwnProperty(t)&&(n[n.length]=t+"="+o[t]);return n=n.join(e)}},s=function(o){if("string"==typeof o){for(var n={},t=o.split(e),i=0,r=t.length;r>i;i+=1){var s=t[i].split("="),u=s.shift();n[u]=s.join("=")}return n!=={}?n:null}},u=function(e,o,n,t){var i=encodeURIComponent(e)+"="+(n?encodeURIComponent(o):o);return"object"!=typeof t?i:(t.expires instanceof Date&&(i+="; expires="+t.expires.toGMTString()),"string"==typeof t.path&&""!==t.path&&(i+="; path="+t.path),"string"==typeof t.domain&&""!==t.domain&&(i+="; domain="+t.domain),t.secure===!0&&(i+="; secure"),i)},a={init:function(e){},setCookie:function(e,o,n,r,s){if(arguments.length>3&&("string"==typeof r||"boolean"==typeof r&&r!==!1))return this.setGroupCookie(r,e,o,n);var a=null;n&&(a=new Date,a.setTime(a.getTime()+24*n*60*60*1e3)),s="boolean"==typeof s?s:t,document.cookie=u(e,o,s,{expires:a,path:"/",domain:i()})},getCookie:function(e,o,n){if(arguments.length>1)return this.getGroupCookie(o,e);n="boolean"==typeof n?n:t;for(var i=(n?encodeURIComponent(e):e)+"=",r=document.cookie.split(";"),s=0,u=r.length;u>s;s+=1){var a=r[s].replace(/^\s+|\s+$/g,"");if(0===a.indexOf(i)){var p=a.substring(i.length,a.length);return n?decodeURIComponent(p):p}}return null},deleteCookie:function(e,o){return arguments.length>1?this.deleteGroupCookie(o,e):void this.setCookie(e,"",-1)},setGroupCookie:function(e,a,p,l){var f=!l||"undefined"==typeof l,c=-1===l,d=!1,h=new Date;l&&!f&&h.setTime(h.getTime()+24*l*60*60*1e3);var m="boolean"!=typeof e?e:o;if(n[m]=n[m]||s(this.getCookie(m))||{},n[m][a]=p,c){delete n[m][a];var g=0;for(var k in n[m])n[m].hasOwnProperty(k)&&(g+=1);g>0?f||h.setTime(h.getTime()+31536e6):(n[m]={},d=!0)}a=m,p=r(n[m]);var v={path:"/",domain:i()};f||(v.expires=d?new Date(-1):h),document.cookie=u(a,p,t,v)},getGroupCookie:function(e,n){for(var t="boolean"!=typeof e?e:o,i=encodeURIComponent(t)+"=",r=document.cookie.split(";"),u=null,a=null,p=null,l=null,f=0,c=r.length;c>f;f+=1)if(u=r[f].replace(/^\s+|\s+$/g,""),0===u.indexOf(i))return p=u.split(i)[1],a=s(decodeURIComponent(p)),l=a[n],"undefined"!=typeof l?l:null;return null},deleteGroupCookie:function(e,o){this.setGroupCookie(e,o," ",-1)}};return a});
var hsInit=function(){!function(){function t(t,e){var i;t||(t={});for(i in e)t[i]=e[i];return t}function e(){var t,e,i=arguments,n={},o=function(t,e){var i,n;"object"!=typeof t&&(t={});for(n in e)e.hasOwnProperty(n)&&(i=e[n],t[n]=i&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?o(t[n]||{},i):e[n]);return t};for(i[0]===!0&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;e>t;t++)n=o(n,i[t]);return n}function i(){for(var t=0,e=arguments,i=e.length,n={};i>t;t++)n[e[t++]]=e[t];return n}function n(t,e){return parseInt(t,e||10)}function o(t){return"string"==typeof t}function s(t){return"object"==typeof t}function r(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"number"==typeof t}function l(t){return dt.log(t)/dt.LN10}function h(t){return dt.pow(10,t)}function c(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function d(t){return t!==Y&&null!==t}function p(t,e,i){var n,r;if(o(e))d(i)?t.setAttribute(e,i):t&&t.getAttribute&&(r=t.getAttribute(e));else if(d(e)&&s(e))for(n in e)t.setAttribute(n,e[n]);return r}function u(t){return r(t)?t:[t]}function g(){var t,e,i=arguments,n=i.length;for(t=0;n>t;t++)if(e=i[t],"undefined"!=typeof e&&null!==e)return e}function f(e,i){At&&!Dt&&i&&i.opacity!==Y&&(i.filter="alpha(opacity="+100*i.opacity+")"),t(e.style,i)}function m(e,i,n,o,s){return e=ht.createElement(e),i&&t(e,i),s&&f(e,{padding:0,border:Xt,margin:0}),n&&f(e,n),o&&o.appendChild(e),e}function x(e,i){var n=function(){};return n.prototype=new e,t(n.prototype,i),n}function y(t,e,i,o){var s=V.lang,t=+t||0,r=-1===e?(t.toString().split(".")[1]||"").length:isNaN(e=xt(e))?2:e,e=void 0===i?s.decimalPoint:i,o=void 0===o?s.thousandsSep:o,s=0>t?"-":"",i=String(n(t=xt(t).toFixed(r))),a=i.length>3?i.length%3:0;return s+(a?i.substr(0,a)+o:"")+i.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+o)+(r?e+xt(t-i).toFixed(r).slice(2):"")}function v(t,e){return Array((e||2)+1-String(t).length).join(0)+t}function b(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}}function k(t,e){for(var i,n,o,s,r,a="{",l=!1,h=[];-1!==(a=t.indexOf(a));){if(i=t.slice(0,a),l){for(n=i.split(":"),o=n.shift().split("."),r=o.length,i=e,s=0;r>s;s++)i=i[o[s]];n.length&&(n=n.join(":"),o=/\.([0-9])/,s=V.lang,r=void 0,/f$/.test(n)?(r=(r=n.match(o))?r[1]:-1,null!==i&&(i=y(i,r,s.decimalPoint,n.indexOf(",")>-1?s.thousandsSep:""))):i=j(n,i))}h.push(i),t=t.slice(a+1),a=(l=!l)?"}":"{"}return h.push(t),h.join("")}function w(t){return dt.pow(10,ut(dt.log(t)/dt.LN10))}function S(t,e,i,n){var o,i=g(i,1);for(o=t/i,e||(e=[1,2,2.5,5,10],n&&n.allowDecimals===!1&&(1===i?e=[1,2,5,10]:.1>=i&&(e=[1/i]))),n=0;n<e.length&&(t=e[n],!(o<=(e[n]+(e[n+1]||e[n]))/2));n++);return t*=i}function A(){this.symbol=this.color=0}function T(t,e){var i,n,o=t.length;for(n=0;o>n;n++)t[n].ss_i=n;for(t.sort(function(t,n){return i=e(t,n),0===i?t.ss_i-n.ss_i:i}),n=0;o>n;n++)delete t[n].ss_i}function P(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function L(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function C(t,e){for(var i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function M(t){_||(_=m(Wt)),t&&_.appendChild(t),_.innerHTML=""}function D(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;ct.console&&console.log(i)}function I(t){return parseFloat(t.toPrecision(14))}function B(t,e){U=g(t,e.animation)}function O(){var t=V.global.useUTC,e=t?"getUTC":"get",i=t?"setUTC":"set";q=6e4*(t&&V.global.timezoneOffset||0),$=t?Date.UTC:function(t,e,i,n,o,s){return new Date(t,e,g(i,1),g(n,0),g(o,0),g(s,0)).getTime()},J=e+"Minutes",Q=e+"Hours",tt=e+"Day",et=e+"Date",it=e+"Month",nt=e+"FullYear",ot=i+"Minutes",st=i+"Hours",rt=i+"Date",at=i+"Month",lt=i+"FullYear"}function z(){}function R(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,!i&&!n&&this.addLabel()}function E(){this.init.apply(this,arguments)}function H(){this.init.apply(this,arguments)}function W(t,e,i,n,o){var s=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=o,this.alignOptions={align:e.align||(s?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(s?"middle":i?"bottom":"top"),y:g(e.y,s?4:i?14:-6),x:g(e.x,s?i?-6:6:0)},this.textAlign=e.textAlign||(s?i?"right":"left":"center")}function X(t){var e=t.options,i=e.navigator,n=i.enabled,e=e.scrollbar,o=e.enabled,s=n?i.height:0,r=o?e.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=t,this.setBaseSeries(),this.height=s,this.scrollbarHeight=r,this.scrollbarEnabled=o,this.navigatorEnabled=n,this.navigatorOptions=i,this.scrollbarOptions=e,this.outlineHeight=s+r,this.init()}function G(t){this.init(t)}var Y,N,F,_,V,j,U,Z,K,$,q,J,Q,tt,et,it,nt,ot,st,rt,at,lt,ht=document,ct=window,dt=Math,pt=dt.round,ut=dt.floor,gt=dt.ceil,ft=dt.max,mt=dt.min,xt=dt.abs,yt=dt.cos,vt=dt.sin,bt=dt.PI,kt=2*bt/360,wt=navigator.userAgent,St=ct.opera,At=/msie/i.test(wt)&&!St,Tt=8===ht.documentMode,Pt=/AppleWebKit/.test(wt),Lt=/Firefox/.test(wt),Ct=/(Mobile|Android|Windows Phone)/.test(wt),Mt="http://www.w3.org/2000/svg",Dt=!!ht.createElementNS&&!!ht.createElementNS(Mt,"svg").createSVGRect,It=Lt&&parseInt(wt.split("Firefox/")[1],10)<4,Bt=!Dt&&!At&&!!ht.createElement("canvas").getContext,Ot={},zt=0,Rt=function(){},Et=[],Ht=0,Wt="div",Xt="none",Gt=/^[0-9]+$/,Yt="stroke-width",Nt={},Ft=ct.Highcharts=ct.Highcharts?D(16,!0):{};j=function(e,i,n){if(!d(i)||isNaN(i))return"Invalid date";var o,e=g(e,"%Y-%m-%d %H:%M:%S"),s=new Date(i-q),r=s[Q](),a=s[tt](),l=s[et](),h=s[it](),c=s[nt](),p=V.lang,u=p.weekdays,s=t({a:u[a].substr(0,3),A:u[a],d:v(l),e:l,b:p.shortMonths[h],B:p.months[h],m:v(h+1),y:c.toString().substr(2,2),Y:c,H:v(r),I:v(r%12||12),l:r%12||12,M:v(s[J]()),p:12>r?"AM":"PM",P:12>r?"am":"pm",S:v(s.getSeconds()),L:v(pt(i%1e3),3)},Ft.dateFormats);for(o in s)for(;-1!==e.indexOf("%"+o);)e=e.replace("%"+o,"function"==typeof s[o]?s[o](i):s[o]);return n?e.substr(0,1).toUpperCase()+e.substr(1):e},A.prototype={wrapColor:function(t){this.color>=t&&(this.color=0)},wrapSymbol:function(t){this.symbol>=t&&(this.symbol=0)}},K=i("millisecond",1,"second",1e3,"minute",6e4,"hour",36e5,"day",864e5,"week",6048e5,"month",26784e5,"year",31556952e3),Z={init:function(t,e,i){var n,o,s,e=e||"",r=t.shift,a=e.indexOf("C")>-1,l=a?7:3,e=e.split(" "),i=[].concat(i),h=function(t){for(n=t.length;n--;)"M"===t[n]&&t.splice(n+1,0,t[n+1],t[n+2],t[n+1],t[n+2])};if(a&&(h(e),h(i)),t.isArea&&(o=e.splice(e.length-6,6),s=i.splice(i.length-6,6)),r<=i.length/l&&e.length===i.length)for(;r--;)i=[].concat(i).splice(0,l).concat(i);if(t.shift=0,e.length)for(t=i.length;e.length<t;)r=[].concat(e).splice(e.length-l,l),a&&(r[l-6]=r[l-2],r[l-5]=r[l-1]),e=e.concat(r);return o&&(e=e.concat(o),i=i.concat(s)),[e,i]},step:function(t,e,i,n){var o=[],s=t.length;if(1===i)o=n;else if(s===e.length&&1>i)for(;s--;)n=parseFloat(t[s]),o[s]=isNaN(n)?t[s]:i*parseFloat(e[s]-n)+n;else o=e;return o}},function(e){ct.HighchartsAdapter=ct.HighchartsAdapter||e&&{init:function(t){var i,n=e.fx,s=n.step,r=e.Tween,a=r&&r.propHooks;i=e.cssHooks.opacity,e.extend(e.easing,{easeOutQuad:function(t,e,i,n,o){return-n*(e/=o)*(e-2)+i}}),e.each(["cur","_default","width","height","opacity"],function(t,e){var i,o=s;"cur"===e?o=n.prototype:"_default"===e&&r&&(o=a[e],e="set"),(i=o[e])&&(o[e]=function(n){var o,n=t?n:this;return"align"!==n.prop?(o=n.elem,o.attr?o.attr(n.prop,"cur"===e?Y:n.now):i.apply(this,arguments)):void 0})}),b(i,"get",function(t,e,i){return e.attr?e.opacity||0:t.call(this,e,i)}),i=function(e){var i,n=e.elem;e.started||(i=t.init(n,n.d,n.toD),e.start=i[0],e.end=i[1],e.started=!0),n.attr("d",t.step(e.start,e.end,e.pos,n.toD))},r?a.d={set:i}:s.d=i,this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){for(var i=0,n=t.length;n>i;i++)if(e.call(t[i],t[i],i,t)===!1)return i},e.fn.highcharts=function(){var t,e,i="Chart",n=arguments;return this[0]&&(o(n[0])&&(i=n[0],n=Array.prototype.slice.call(n,1)),t=n[0],t!==Y&&(t.chart=t.chart||{},t.chart.renderTo=this[0],new Ft[i](t,n[1]),e=this),t===Y&&(e=Et[p(this[0],"data-highcharts-chart")])),e}},getScript:e.getScript,inArray:e.inArray,adapterRun:function(t,i){return e(t)[i]()},grep:e.grep,map:function(t,e){for(var i=[],n=0,o=t.length;o>n;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(t){return e(t).offset()},addEvent:function(t,i,n){e(t).bind(i,n)},removeEvent:function(t,i,n){var o=ht.removeEventListener?"removeEventListener":"detachEvent";ht[o]&&t&&!t[o]&&(t[o]=function(){}),e(t).unbind(i,n)},fireEvent:function(i,n,o,s){var r,a=e.Event(n),l="detached"+n;!At&&o&&(delete o.layerX,delete o.layerY,delete o.returnValue),t(a,o),i[n]&&(i[l]=i[n],i[n]=null),e.each(["preventDefault","stopPropagation"],function(t,e){var i=a[e];a[e]=function(){try{i.call(a)}catch(t){"preventDefault"===e&&(r=!0)}}}),e(i).trigger(a),i[l]&&(i[n]=i[l],i[l]=null),s&&!a.isDefaultPrevented()&&!r&&s(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return e.pageX===Y&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(t,i,n){var o=e(t);t.style||(t.style={}),i.d&&(t.toD=i.d,i.d=1),o.stop(),i.opacity!==Y&&t.attr&&(i.opacity+="px"),o.animate(i,n)},stop:function(t){e(t).stop()}}}(ct.jQuery);var _t=ct.HighchartsAdapter,Vt=_t||{};_t&&_t.init.call(_t,Z);var jt=Vt.adapterRun,Ut=Vt.getScript,Zt=Vt.inArray,Kt=Vt.each,$t=Vt.grep,qt=Vt.offset,Jt=Vt.map,Qt=Vt.addEvent,te=Vt.removeEvent,ee=Vt.fireEvent,ie=Vt.washMouseEvent,ne=Vt.animate,oe=Vt.stop,Vt={enabled:!0,x:0,y:15,style:{color:"#606060",cursor:"default",fontSize:"11px"}};V={colors:"#7cb5ec,#434348,#90ed7d,#f7a35c,#8085e9,#f15c80,#e4d354,#8085e8,#8d4653,#91e8e1".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/2.0.1/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/2.0.1/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:e(Vt,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":y(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:Dt,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">●</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:Ct?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var se=V.plotOptions,_t=se.line;O();var re=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,ae=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,le=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,he=function(t){var i,o,s=[];return function(t){t&&t.stops?o=Jt(t.stops,function(t){return he(t[1])}):(i=re.exec(t))?s=[n(i[1]),n(i[2]),n(i[3]),parseFloat(i[4],10)]:(i=ae.exec(t))?s=[n(i[1],16),n(i[2],16),n(i[3],16),1]:(i=le.exec(t))&&(s=[n(i[1]),n(i[2]),n(i[3]),1])}(t),{get:function(i){var n;return o?(n=e(t),n.stops=[].concat(n.stops),Kt(o,function(t,e){n.stops[e]=[n.stops[e][0],t.get(i)]})):n=s&&!isNaN(s[0])?"rgb"===i?"rgb("+s[0]+","+s[1]+","+s[2]+")":"a"===i?s[3]:"rgba("+s.join(",")+")":t,n},brighten:function(t){if(o)Kt(o,function(e){e.brighten(t)});else if(a(t)&&0!==t){var e;for(e=0;3>e;e++)s[e]+=n(255*t),s[e]<0&&(s[e]=0),s[e]>255&&(s[e]=255)}return this},rgba:s,setOpacity:function(t){return s[3]=t,this}}};z.prototype={init:function(t,e){this.element="span"===e?m(e):ht.createElementNS(Mt,e),this.renderer=t},opacity:1,animate:function(t,i,n){i=g(i,U,!0),oe(this),i?(i=e(i,{}),n&&(i.complete=n),ne(this,t,i)):(this.attr(t),n&&n())},colorGradient:function(t,i,n){var o,s,a,l,h,c,p,u,g,f,m=this.renderer,x=[];if(t.linearGradient?s="linearGradient":t.radialGradient&&(s="radialGradient"),s){a=t[s],l=m.gradients,c=t.stops,g=n.radialReference,r(a)&&(t[s]=a={x1:a[0],y1:a[1],x2:a[2],y2:a[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===s&&g&&!d(a.gradientUnits)&&(a=e(a,{cx:g[0]-g[2]/2+a.cx*g[2],cy:g[1]-g[2]/2+a.cy*g[2],r:a.r*g[2],gradientUnits:"userSpaceOnUse"}));for(f in a)"id"!==f&&x.push(f,a[f]);for(f in c)x.push(c[f]);x=x.join(","),l[x]?t=l[x].attr("id"):(a.id=t="highcharts-"+zt++,l[x]=h=m.createElement(s).attr(a).add(m.defs),h.stops=[],Kt(c,function(t){0===t[1].indexOf("rgba")?(o=he(t[1]),p=o.get("rgb"),u=o.get("a")):(p=t[1],u=1),t=m.createElement("stop").attr({offset:t[0],"stop-color":p,"stop-opacity":u}).add(h),h.stops.push(t)})),n.setAttribute(i,"url("+m.url+"#"+t+")")}},attr:function(t,e){var i,n,o,s,r=this.element,a=this;if("string"==typeof t&&e!==Y&&(i=t,t={},t[i]=e),"string"==typeof t)a=(this[t+"Getter"]||this._defaultGetter).call(this,t,r);else{for(i in t)n=t[i],s=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(i)&&(o||(this.symbolAttr(t),o=!0),s=!0),!this.rotation||"x"!==i&&"y"!==i||(this.doTransform=!0),s||(this[i+"Setter"]||this._defaultSetter).call(this,n,i,r),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(i)&&this.updateShadows(i,n);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return a},updateShadows:function(t,e){for(var i=this.shadows,n=i.length;n--;)i[n].setAttribute(t,"height"===t?ft(e-(i[n].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,i=p(e,"class")||"";return-1===i.indexOf(t)&&p(e,"class",i+" "+t),this},symbolAttr:function(t){var e=this;Kt("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(i){e[i]=g(t[i],e[i])}),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":Xt)},crisp:function(t){var e,i,n={},o=t.strokeWidth||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;i=pt(o)%2/2,t.x=ut(t.x||this.x||0)+i,t.y=ut(t.y||this.y||0)+i,t.width=ut((t.width||this.width||0)-2*i),t.height=ut((t.height||this.height||0)-2*i),t.strokeWidth=o;for(e in t)this[e]!==t[e]&&(this[e]=n[e]=t[e]);return n},css:function(e){var i,o,s=this.styles,r={},a=this.element,l="";if(i=!s,e&&e.color&&(e.fill=e.color),s)for(o in e)e[o]!==s[o]&&(r[o]=e[o],i=!0);if(i){if(i=this.textWidth=e&&e.width&&"text"===a.nodeName.toLowerCase()&&n(e.width),s&&(e=t(s,r)),this.styles=e,i&&(Bt||!Dt&&this.renderer.forExport)&&delete e.width,At&&!Dt)f(this.element,e);else{s=function(t,e){return"-"+e.toLowerCase()};for(o in e)l+=o.replace(/([A-Z])/g,s)+":"+e[o]+";";p(a,"style",l)}i&&this.added&&this.renderer.buildText(this)}return this},on:function(t,e){var i=this,n=i.element;return F&&"click"===t?(n.ontouchstart=function(t){i.touchEventFired=Date.now(),t.preventDefault(),e.call(n,t)},n.onclick=function(t){(-1===wt.indexOf("Android")||Date.now()-(i.touchEventFired||0)>1100)&&e.call(n,t)}):n["on"+t]=e,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var t=this.translateX||0,e=this.translateY||0,i=this.scaleX,n=this.scaleY,o=this.inverted,s=this.rotation,r=this.element;o&&(t+=this.attr("width"),e+=this.attr("height")),t=["translate("+t+","+e+")"],o?t.push("rotate(90) scale(-1,1)"):s&&t.push("rotate("+s+" "+(r.getAttribute("x")||0)+" "+(r.getAttribute("y")||0)+")"),(d(i)||d(n))&&t.push("scale("+g(i,1)+" "+g(n,1)+")"),t.length&&r.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,s,r,a,l={};return s=this.renderer,r=s.alignedObjects,t?(this.alignOptions=t,this.alignByTranslate=e,(!i||o(i))&&(this.alignTo=n=i||"renderer",c(r,this),r.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,n=this.alignTo),i=g(i,s[n],s),n=t.align,s=t.verticalAlign,r=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0),"right"!==n&&"center"!==n||(r+=(i.width-(t.width||0))/{right:1,center:2}[n]),l[e?"translateX":"x"]=pt(r),"bottom"!==s&&"middle"!==s||(a+=(i.height-(t.height||0))/({bottom:1,middle:2}[s]||1)),l[e?"translateY":"y"]=pt(a),this[this.placed?"animate":"attr"](l),this.placed=!0,this.alignAttr=l,this},getBBox:function(){var e,i,n=this.bBox,o=this.renderer,s=this.rotation;e=this.element;var r=this.styles,a=s*kt;i=this.textStr;var l;if((""===i||Gt.test(i))&&(l="num."+i.toString().length+(r?"|"+r.fontSize+"|"+r.fontFamily:"")),l&&(n=o.cache[l]),!n){if(e.namespaceURI===Mt||o.forExport){try{n=e.getBBox?t({},e.getBBox()):{width:e.offsetWidth,height:e.offsetHeight}}catch(h){}(!n||n.width<0)&&(n={width:0,height:0})}else n=this.htmlGetBBox();o.isSVG&&(e=n.width,i=n.height,At&&r&&"11px"===r.fontSize&&"16.9"===i.toPrecision(3)&&(n.height=i=14),s&&(n.width=xt(i*vt(a))+xt(e*yt(a)),n.height=xt(i*yt(a))+xt(e*vt(a)))),this.bBox=n,l&&(o.cache[l]=n)}return n},show:function(t){return t&&this.element.namespaceURI===Mt?(this.element.removeAttribute("visibility"),this):this.attr({visibility:t?"inherit":"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.hide()}})},add:function(t){var e,i,o=this.renderer,s=t||o,r=s.element||o.box,a=this.element,l=this.zIndex;if(t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&o.buildText(this),l&&(s.handleZ=!0,l=n(l)),s.handleZ)for(t=r.childNodes,e=0;e<t.length;e++)if(o=t[e],s=p(o,"zIndex"),o!==a&&(n(s)>l||!d(l)&&d(s))){r.insertBefore(a,o),i=!0;break}return i||r.appendChild(a),this.added=!0,this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i=this,n=i.element||{},o=i.shadows,s=i.renderer.isSVG&&"SPAN"===n.nodeName&&i.parentGroup;if(n.onclick=n.onmouseout=n.onmouseover=n.onmousemove=n.point=null,oe(i),i.clipPath&&(i.clipPath=i.clipPath.destroy()),i.stops){for(e=0;e<i.stops.length;e++)i.stops[e]=i.stops[e].destroy();i.stops=null}for(i.safeRemoveChild(n),o&&Kt(o,function(t){i.safeRemoveChild(t)});s&&0===s.div.childNodes.length;)n=s.parentGroup,i.safeRemoveChild(s.div),delete s.div,s=n;i.alignTo&&c(i.renderer.alignedObjects,i);for(t in i)delete i[t];return null},shadow:function(t,e,i){var n,o,s,r,a,l,h=[],c=this.element;if(t){for(r=g(t.width,3),a=(t.opacity||.15)/r,l=this.parentInverted?"(-1,-1)":"("+g(t.offsetX,1)+", "+g(t.offsetY,1)+")",n=1;r>=n;n++)o=c.cloneNode(0),s=2*r+1-2*n,p(o,{isShadow:"true",stroke:t.color||"black","stroke-opacity":a*n,"stroke-width":s,transform:"translate"+l,fill:Xt}),i&&(p(o,"height",ft(p(o,"height")-s,0)),o.cutHeight=s),e?e.element.appendChild(o):c.parentNode.insertBefore(o,c),h.push(o);this.shadows=h}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){return t=g(this[t],this.element?this.element.getAttribute(t):null,0),/^[0-9\.]+$/.test(t)&&(t=parseFloat(t)),t},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),i.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=t.length;e--;)t[e]=n(t[e])*this.element.getAttribute("stroke-width");t=t.join(","),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t,i.setAttribute(e,t)},"stroke-widthSetter":function(t,e,i){0===t&&(t=1e-5),this.strokeWidth=t,i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=ht.createElementNS(Mt,"title"),this.element.appendChild(e)),e.textContent=t},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.colorGradient(t,e,i)},zIndexSetter:function(t,e,i){i.setAttribute(e,t),this[e]=t},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}},z.prototype.yGetter=z.prototype.xGetter,z.prototype.translateXSetter=z.prototype.translateYSetter=z.prototype.rotationSetter=z.prototype.verticalAlignSetter=z.prototype.scaleXSetter=z.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},z.prototype.strokeSetter=z.prototype.fillSetter;var ce=function(){this.init.apply(this,arguments)};ce.prototype={Element:z,init:function(t,e,i,n,o){var s,r=location,n=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(n));s=n.element,t.appendChild(s),-1===t.innerHTML.indexOf("xmlns")&&p(s,"xmlns",Mt),this.isSVG=!0,this.box=s,this.boxWrapper=n,this.alignedObjects=[],this.url=(Lt||Pt)&&ht.getElementsByTagName("base").length?r.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(ht.createTextNode("Created with Highstock 2.0.1")),this.defs=this.createElement("defs").add(),this.forExport=o,this.gradients={},this.cache={},this.setSize(e,i,!1);var a;Lt&&t.getBoundingClientRect&&(this.subPixelFix=e=function(){f(t,{left:0,top:0}),a=t.getBoundingClientRect(),f(t,{left:gt(a.left)-a.left+"px",top:gt(a.top)-a.top+"px"})},e(),Qt(ct,"resize",e))},getStyle:function(e){return this.style=t({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},e)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),C(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.subPixelFix&&te(ct,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e,i,o=t.element,s=this,r=s.forExport,a=g(t.textStr,"").toString(),l=-1!==a.indexOf("<"),h=o.childNodes,c=p(o,"x"),d=t.styles,u=t.textWidth,m=d&&d.lineHeight,x=h.length,y=function(t){return m?n(m):s.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:d&&d.fontSize||s.style.fontSize||12).h};x--;)o.removeChild(h[x]);l||-1!==a.indexOf(" ")?(e=/<.*style="([^"]+)".*>/,i=/<.*href="(http[^"]+)".*>/,u&&!t.added&&this.box.appendChild(o),a=l?a.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[a],""===a[a.length-1]&&a.pop(),Kt(a,function(n,a){var l,h=0,n=n.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");l=n.split("|||"),Kt(l,function(n){if(""!==n||1===l.length){var g,m={},x=ht.createElementNS(Mt,"tspan");if(e.test(n)&&(g=n.match(e)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),p(x,"style",g)),i.test(n)&&!r&&(p(x,"onclick",'location.href="'+n.match(i)[1]+'"'),f(x,{cursor:"pointer"})),n=(n.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==n&&(x.appendChild(ht.createTextNode(n)),h?m.dx=0:a&&null!==c&&(m.x=c),p(x,m),!h&&a&&(!Dt&&r&&f(x,{display:"block"}),p(x,"dy",y(x),Pt&&x.offsetHeight)),o.appendChild(x),h++,u))for(var v,b,n=n.replace(/([^\^])-/g,"$1- ").split(" "),m=n.length>1&&"nowrap"!==d.whiteSpace,k=t._clipHeight,w=[],S=y(),A=1;m&&(n.length||w.length);)delete t.bBox,v=t.getBBox(),b=v.width,!Dt&&s.forExport&&(b=s.measureSpanWidth(x.firstChild.data,t.styles)),v=b>u,v&&1!==n.length?(x.removeChild(x.firstChild),w.unshift(n.pop())):(n=w,w=[],n.length&&(A++,k&&A*S>k?(n=["..."],t.attr("title",t.textStr)):(x=ht.createElementNS(Mt,"tspan"),p(x,{dy:S,x:c}),g&&p(x,"style",g),o.appendChild(x),b>u&&(u=b)))),n.length&&x.appendChild(ht.createTextNode(n.join(" ").replace(/- /g,"-")))}})})):o.appendChild(ht.createTextNode(a))},button:function(i,n,o,s,r,a,l,h,c){var d,p,u,g,f,m,x=this.label(i,n,o,c,null,null,null,null,"button"),y=0,i={x1:0,y1:0,x2:0,y2:1},r=e({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:i,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},r);return u=r.style,delete r.style,a=e(r,{stroke:"#68A",fill:{linearGradient:i,stops:[[0,"#FFF"],[1,"#ACF"]]}},a),g=a.style,delete a.style,l=e(r,{stroke:"#68A",fill:{linearGradient:i,stops:[[0,"#9BD"],[1,"#CDF"]]}},l),f=l.style,delete l.style,h=e(r,{style:{color:"#CCC"}},h),m=h.style,delete h.style,Qt(x.element,At?"mouseover":"mouseenter",function(){3!==y&&x.attr(a).css(g)}),Qt(x.element,At?"mouseout":"mouseleave",function(){3!==y&&(d=[r,a,l][y],p=[u,g,f][y],x.attr(d).css(p))}),x.setState=function(t){(x.state=y=t)?2===t?x.attr(l).css(f):3===t&&x.attr(h).css(m):x.attr(r).css(u)},x.on("click",function(){3!==y&&s.call(x)}).attr(r).css(t({cursor:"default"},u))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=pt(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=pt(t[2])+e%2/2),t},path:function(e){var i={fill:Xt};return r(e)?i.d=e:s(e)&&t(i,e),this.createElement("path").attr(i)},circle:function(t,e,i){return t=s(t)?t:{x:t,y:e,r:i},e=this.createElement("circle"),e.xSetter=function(t){this.element.setAttribute("cx",t)},e.ySetter=function(t){this.element.setAttribute("cy",t)},e.attr(t)},arc:function(t,e,i,n,o,r){return s(t)&&(e=t.y,i=t.r,n=t.innerR,o=t.start,r=t.end,t=t.x),t=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:o||0,end:r||0}),t.r=i,t},rect:function(t,e,i,n,o,r){var o=s(t)?t.r:o,a=this.createElement("rect"),t=s(t)?t:t===Y?{}:{x:t,y:e,width:ft(i,0),height:ft(n,0)};return r!==Y&&(t.strokeWidth=r,t=a.crisp(t)),o&&(t.r=o),a.rSetter=function(t){p(this.element,{rx:t,ry:t})},a.attr(t)},setSize:function(t,e,i){var n=this.alignedObjects,o=n.length;for(this.width=t,this.height=e,this.boxWrapper[g(i,!0)?"animate":"attr"]({width:t,height:e});o--;)n[o].align()},g:function(t){var e=this.createElement("g");return d(t)?e.attr({"class":"highcharts-"+t}):e},image:function(e,i,n,o,s){var r={preserveAspectRatio:Xt};return arguments.length>1&&t(r,{x:i,y:n,width:o,height:s}),r=this.createElement("image").attr(r),r.element.setAttributeNS?r.element.setAttributeNS("http://www.w3.org/1999/xlink","href",e):r.element.setAttribute("hc-svg-href",e),r},symbol:function(e,i,n,o,s,r){var a,l,h,c=this.symbols[e],c=c&&c(pt(i),pt(n),o,s,r),d=/^url\((.*?)\)$/;return c?(a=this.path(c),t(a,{symbolName:e,x:i,y:n,width:o,height:s}),r&&t(a,r)):d.test(e)&&(h=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(pt((o-e[0])/2),pt((s-e[1])/2)))},l=e.match(d)[1],e=Ot[l],a=this.image(l).attr({x:i,y:n}),a.isImg=!0,e?h(a,e):(a.attr({width:0,height:0}),m("img",{onload:function(){h(a,Ot[l]=[this.width,this.height])},src:l}))),a},symbols:{circle:function(t,e,i,n){var o=.166*i;return["M",t+i/2,e,"C",t+i+o,e,t+i+o,e+n,t+i/2,e+n,"C",t-o,e+n,t-o,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return["M",t,e,"L",t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return["M",t+i/2,e,"L",t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,o){var s=o.start,i=o.r||i||n,r=o.end-.001,n=o.innerR,a=o.open,l=yt(s),h=vt(s),c=yt(r),r=vt(r),o=o.end-s<bt?0:1;return["M",t+i*l,e+i*h,"A",i,i,0,o,1,t+i*c,e+i*r,a?"M":"L",t+n*c,e+n*r,"A",n,n,0,o,0,t+n*l,e+n*h,a?"":"Z"]},callout:function(t,e,i,n,o){var s=mt(o&&o.r||0,i,n),r=s+6,a=o&&o.anchorX,l=o&&o.anchorY,o=pt(o.strokeWidth||0)%2/2;return t+=o,e+=o,o=["M",t+s,e,"L",t+i-s,e,"C",t+i,e,t+i,e,t+i,e+s,"L",t+i,e+n-s,"C",t+i,e+n,t+i,e+n,t+i-s,e+n,"L",t+s,e+n,"C",t,e+n,t,e+n,t,e+n-s,"L",t,e+s,"C",t,e,t,e,t+s,e],a&&a>i&&l>e+r&&e+n-r>l?o.splice(13,3,"L",t+i,l-6,t+i+6,l,t+i,l+6,t+i,e+n-s):a&&0>a&&l>e+r&&e+n-r>l?o.splice(33,3,"L",t,l+6,t-6,l,t,l-6,t,e+s):l&&l>n&&a>t+r&&t+i-r>a?o.splice(23,3,"L",a+6,e+n,a,e+n+6,a-6,e+n,t+s,e+n):l&&0>l&&a>t+r&&t+i-r>a&&o.splice(3,3,"L",a-6,e,a,e-6,a+6,e,i-s,e),o}},clipRect:function(t,e,i,n){var o="highcharts-"+zt++,s=this.createElement("clipPath").attr({id:o}).add(this.defs),t=this.rect(t,e,i,n,0).add(s);return t.id=o,t.clipPath=s,t},text:function(t,e,i,n){var o=Bt||!Dt&&this.forExport,s={};return n&&!this.forExport?this.html(t,e,i):(s.x=Math.round(e||0),i&&(s.y=Math.round(i)),(t||0===t)&&(s.text=t),t=this.createElement("text").attr(s),o&&t.css({position:"absolute"}),n||(t.xSetter=function(t,e,i){var n,o,s=i.childNodes;for(o=1;o<s.length;o++)n=s[o],n.getAttribute("x")===i.getAttribute("x")&&n.setAttribute("x",t);i.setAttribute(e,t)}),t)},fontMetrics:function(t){var t=t||this.style.fontSize,t=/px/.test(t)?n(t):/em/.test(t)?12*parseFloat(t):12,t=24>t?t+4:pt(1.2*t),e=pt(.8*t);return{h:t,b:e}},label:function(i,n,o,s,r,a,l,h,c){function p(){var e,i;e=T.element.style,m=(void 0===x||void 0===y||A.styles.textAlign)&&T.textStr&&T.getBBox(),A.width=(x||m.width||0)+2*L+C,A.height=(y||m.height||0)+2*L,k=L+S.fontMetrics(e&&e.fontSize).b,w&&(f||(e=pt(-P*L),i=h?-k:0,A.box=f=s?S.symbol(s,e,i,A.width,A.height,D):S.rect(e,i,A.width,A.height,0,D[Yt]),f.attr("fill",Xt).add(A)),f.isImg||f.attr(t({width:pt(A.width),height:pt(A.height)},D)),D=null)}function u(){var t,e=A.styles,e=e&&e.textAlign,i=C+L*(1-P);t=h?0:k,d(x)&&m&&("center"===e||"right"===e)&&(i+={center:.5,right:1}[e]*(x-m.width)),i===T.x&&t===T.y||(T.attr("x",i),t!==Y&&T.attr("y",t)),T.x=i,T.y=t}function g(t,e){f?f.attr(t,e):D[t]=e}var f,m,x,y,v,b,k,w,S=this,A=S.g(c),T=S.text("",0,0,l).attr({zIndex:1}),P=0,L=3,C=0,M=0,D={};A.onAdd=function(){T.add(A),
A.attr({text:i||"",x:n,y:o}),f&&d(r)&&A.attr({anchorX:r,anchorY:a})},A.widthSetter=function(t){x=t},A.heightSetter=function(t){y=t},A.paddingSetter=function(t){d(t)&&t!==L&&(L=t,u())},A.paddingLeftSetter=function(t){d(t)&&t!==C&&(C=t,u())},A.alignSetter=function(t){P={left:0,center:.5,right:1}[t]},A.textSetter=function(t){t!==Y&&T.textSetter(t),p(),u()},A["stroke-widthSetter"]=function(t,e){t&&(w=!0),M=t%2/2,g(e,t)},A.strokeSetter=A.fillSetter=A.rSetter=function(t,e){"fill"===e&&t&&(w=!0),g(e,t)},A.anchorXSetter=function(t,e){r=t,g(e,t+M-v)},A.anchorYSetter=function(t,e){a=t,g(e,t-b)},A.xSetter=function(t){A.x=t,P&&(t-=P*((x||m.width)+L)),v=pt(t),A.attr("translateX",v)},A.ySetter=function(t){b=A.y=pt(t),A.attr("translateY",b)};var I=A.css;return t(A,{css:function(t){if(t){var i={},t=e(t);Kt("fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow".split(","),function(e){t[e]!==Y&&(i[e]=t[e],delete t[e])}),T.css(i)}return I.call(A,t)},getBBox:function(){return{width:m.width+2*L,height:m.height+2*L,x:m.x-L,y:m.y-L}},shadow:function(t){return f&&f.shadow(t),A},destroy:function(){te(A.element,"mouseenter"),te(A.element,"mouseleave"),T&&(T=T.destroy()),f&&(f=f.destroy()),z.prototype.destroy.call(A),A=S=p=u=g=null}})}},N=ce,t(z.prototype,{htmlCss:function(e){var i=this.element;return(i=e&&"SPAN"===i.tagName&&e.width)&&(delete e.width,this.textWidth=i,this.updateTransform()),this.styles=t(this.styles,e),f(this.element,e),this},htmlGetBBox:function(){var t=this.element,e=this.bBox;return e||("text"===t.nodeName&&(t.style.position="absolute"),e=this.bBox={x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}),e},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,i=this.translateX||0,o=this.translateY||0,s=this.x||0,r=this.y||0,a=this.textAlign||"left",l={left:0,center:.5,right:1}[a],h=this.shadows;if(f(e,{marginLeft:i,marginTop:o}),h&&Kt(h,function(t){f(t,{marginLeft:i+1,marginTop:o+1})}),this.inverted&&Kt(e.childNodes,function(i){t.invertChild(i,e)}),"SPAN"===e.tagName){var c,p=this.rotation,u=n(this.textWidth),m=[p,a,e.innerHTML,this.textWidth].join(",");m!==this.cTT&&(c=t.fontMetrics(e.style.fontSize).b,d(p)&&this.setSpanRotation(p,l,c),h=g(this.elemWidth,e.offsetWidth),h>u&&/[ \-]/.test(e.textContent||e.innerText)&&(f(e,{width:u+"px",display:"block",whiteSpace:"normal"}),h=u),this.getSpanCorrection(h,c,l,p,a)),f(e,{left:s+(this.xCorr||0)+"px",top:r+(this.yCorr||0)+"px"}),Pt&&(c=e.offsetHeight),this.cTT=m}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,i){var n={},o=At?"-ms-transform":Pt?"-webkit-transform":Lt?"MozTransform":St?"-o-transform":"";n[o]=n.transform="rotate("+t+"deg)",n[o+(Lt?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px",f(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),t(ce.prototype,{html:function(e,i,n){var o=this.createElement("span"),s=o.element,r=o.renderer;return o.textSetter=function(t){t!==s.innerHTML&&delete this.bBox,s.innerHTML=this.textStr=t},o.xSetter=o.ySetter=o.alignSetter=o.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),o[e]=t,o.htmlUpdateTransform()},o.attr({text:e,x:pt(i),y:pt(n)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),o.css=o.htmlCss,r.isSVG&&(o.add=function(e){var i,n=r.box.parentNode,a=[];if(this.parentGroup=e){if(i=e.div,!i){for(;e;)a.push(e),e=e.parentGroup;Kt(a.reverse(),function(e){var o;i=e.div=e.div||m(Wt,{className:p(e.element,"class")},{position:"absolute",left:(e.translateX||0)+"px",top:(e.translateY||0)+"px"},i||n),o=i.style,t(e,{translateXSetter:function(t,i){o.left=t+"px",e[i]=t,e.doTransform=!0},translateYSetter:function(t,i){o.top=t+"px",e[i]=t,e.doTransform=!0},visibilitySetter:function(t,e){o[e]=t}})})}}else i=n;return i.appendChild(s),o.added=!0,o.alignOnAdd&&o.htmlUpdateTransform(),o}),o}});var de,pe;Dt||Bt||(Ft.VMLElement=pe={init:function(t,e){var i=["<",e,' filled="f" stroked="f"'],n=["position: ","absolute",";"],o=e===Wt;("shape"===e||o)&&n.push("left:0;top:0;width:1px;height:1px;"),n.push("visibility: ",o?"hidden":"visible"),i.push(' style="',n.join(""),'"/>'),e&&(i=o||"span"===e||"img"===e?i.join(""):t.prepVML(i),this.element=m(i)),this.renderer=t},add:function(t){var e=this.renderer,i=this.element,n=e.box,n=t?t.element||t:n;return t&&t.inverted&&e.invertChild(i,n),n.appendChild(i),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:z.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=yt(t*kt),i=vt(t*kt);f(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):Xt})},getSpanCorrection:function(t,e,i,n,o){var s,r=n?yt(n*kt):1,a=n?vt(n*kt):0,l=g(this.elemHeight,this.element.offsetHeight);this.xCorr=0>r&&-t,this.yCorr=0>a&&-l,s=0>r*a,this.xCorr+=a*e*(s?1-i:i),this.yCorr-=r*e*(n?s?i:1-i:1),o&&"left"!==o&&(this.xCorr-=t*i*(0>r?-1:1),n&&(this.yCorr-=l*i*(0>a?-1:1)),f(this.element,{textAlign:o}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)a(t[e])?i[e]=pt(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},clip:function(t){var e,i=this;return t?(e=t.members,c(e,i),e.push(i),i.destroyClip=function(){c(e,i)},t=t.getCSS(i)):(i.destroyClip&&i.destroyClip(),t={clip:Tt?"inherit":"rect(auto)"}),i.css(t)},css:z.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&M(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),z.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=ct.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var i,t=t.split(/[ ,]/);return i=t.length,9!==i&&11!==i||(t[i-4]=t[i-2]=n(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var o,s,r,a,l,h,c,d=[],p=this.element,u=this.renderer,f=p.style,x=p.path;if(x&&"string"!=typeof x.value&&(x="x"),l=x,t){for(h=g(t.width,3),c=(t.opacity||.15)/h,o=1;3>=o;o++)a=2*h+1-2*o,i&&(l=this.cutOffPath(x.value,a+.5)),r=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',l,'" coordsize="10 10" style="',p.style.cssText,'" />'],s=m(u.prepVML(r),null,{left:n(f.left)+g(t.offsetX,1),top:n(f.top)+g(t.offsetY,1)}),i&&(s.cutOff=a+1),r=['<stroke color="',t.color||"black",'" opacity="',c*o,'"/>'],m(u.prepVML(r),null,null,s),e?e.element.appendChild(s):p.parentNode.insertBefore(s,p),d.push(s);this.shadows=d}return this},updateShadows:Rt,setAttr:function(t,e){Tt?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,i){(i.getElementsByTagName("stroke")[0]||m(this.renderer.prepVML(["<stroke/>"]),null,null,i))[e]=t||"solid",this[e]=t},dSetter:function(t,e,i){var n=this.shadows,t=t||[];if(this.d=t.join(" "),i.path=t=this.pathToVML(t),n)for(i=n.length;i--;)n[i].path=n[i].cutOff?this.cutOffPath(t,n[i].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,i){var n=i.nodeName;"SPAN"===n?i.style.color=t:"IMG"!==n&&(i.filled=t!==Xt,this.setAttr("fillcolor",this.renderer.color(t,i,e,this)))},opacitySetter:Rt,rotationSetter:function(t,e,i){i=i.style,this[e]=i[e]=t,i.left=-pt(vt(t*kt)+1)+"px",i.top=pt(yt(t*kt))+"px"},strokeSetter:function(t,e,i){this.setAttr("strokecolor",this.renderer.color(t,i,e))},"stroke-widthSetter":function(t,e,i){i.stroked=!!t,this[e]=t,a(t)&&(t+="px"),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,i){"inherit"===t&&(t="visible"),this.shadows&&Kt(this.shadows,function(i){i.style[e]=t}),"DIV"===i.nodeName&&(t="hidden"===t?"-999em":0,Tt||(i.style[e]=t?"visible":"hidden"),e="top"),i.style[e]=t},xSetter:function(t,e,i){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):i.style[e]=t},zIndexSetter:function(t,e,i){i.style[e]=t}},pe=x(z,pe),pe.prototype.ySetter=pe.prototype.widthSetter=pe.prototype.heightSetter=pe.prototype.xSetter,pe={Element:pe,isIE8:wt.indexOf("MSIE 8.0")>-1,init:function(e,i,n,o){var s;if(this.alignedObjects=[],o=this.createElement(Wt).css(t(this.getStyle(o),{position:"relative"})),s=o.element,e.appendChild(o.element),this.isVML=!0,this.box=s,this.boxWrapper=o,this.cache={},this.setSize(i,n,!1),!ht.namespaces.hcv){ht.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{ht.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(r){ht.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(e,i,n,o){var r=this.createElement(),a=s(e);return t(r,{members:[],left:(a?e.x:e)+1,top:(a?e.y:i)+1,width:(a?e.width:n)-1,height:(a?e.height:o)-1,getCSS:function(e){var i=e.element,n=i.nodeName,e=e.inverted,o=this.top-("shape"===n?i.offsetTop:0),s=this.left,i=s+this.width,r=o+this.height,o={clip:"rect("+pt(e?s:o)+"px,"+pt(e?r:i)+"px,"+pt(e?i:r)+"px,"+pt(e?o:s)+"px)"};return!e&&Tt&&"DIV"===n&&t(o,{width:i+"px",height:r+"px"}),o},updateClipping:function(){Kt(r.members,function(t){t.element&&t.css(r.getCSS(t))})}})},color:function(t,e,i,n){var o,s,r,a=this,l=/^rgba/,h=Xt;if(t&&t.linearGradient?r="gradient":t&&t.radialGradient&&(r="pattern"),r){var c,d,p,u,g,f,x,y,v=t.linearGradient||t.radialGradient,b="",t=t.stops,k=[],w=function(){s=['<fill colors="'+k.join(",")+'" opacity="',g,'" o:opacity2="',u,'" type="',r,'" ',b,'focus="100%" method="any" />'],m(a.prepVML(s),null,null,e)};if(p=t[0],y=t[t.length-1],p[0]>0&&t.unshift([0,p[1]]),y[0]<1&&t.push([1,y[1]]),Kt(t,function(t,e){l.test(t[1])?(o=he(t[1]),c=o.get("rgb"),d=o.get("a")):(c=t[1],d=1),k.push(100*t[0]+"% "+c),e?(g=d,f=c):(u=d,x=c)}),"fill"===i)if("gradient"===r)i=v.x1||v[0]||0,t=v.y1||v[1]||0,p=v.x2||v[2]||0,v=v.y2||v[3]||0,b='angle="'+(90-180*dt.atan((v-t)/(p-i))/bt)+'"',w();else{var S,h=v.r,A=2*h,T=2*h,P=v.cx,L=v.cy,C=e.radialReference,h=function(){C&&(S=n.getBBox(),P+=(C[0]-S.x)/S.width-.5,L+=(C[1]-S.y)/S.height-.5,A*=C[2]/S.width,T*=C[2]/S.height),b='src="'+V.global.VMLRadialGradientURL+'" size="'+A+","+T+'" origin="0.5,0.5" position="'+P+","+L+'" color2="'+x+'" ',w()};n.added?h():n.onAdd=h,h=f}else h=c}else l.test(t)&&"IMG"!==e.tagName?(o=he(t),s=["<",i,' opacity="',o.get("a"),'"/>'],m(this.prepVML(s),null,null,e),h=o.get("rgb")):(h=e.getElementsByTagName(i),h.length&&(h[0].opacity=1,h[0].type="solid"),h=t);return h},prepVML:function(t){var e=this.isIE8,t=t.join("");return e?(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),t=-1===t.indexOf('style="')?t.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):t.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):t=t.replace("<","<hcv:"),t},text:ce.prototype.html,path:function(e){var i={coordsize:"10 10"};return r(e)?i.d=e:s(e)&&t(i,e),this.createElement("shape").attr(i)},circle:function(t,e,i){var n=this.symbol("circle");return s(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.r=i,n.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:"highcharts-"+t,"class":"highcharts-"+t}),this.createElement(Wt).attr(e)},image:function(t,e,i,n,o){var s=this.createElement("img").attr({src:t});return arguments.length>1&&s.attr({x:e,y:i,width:n,height:o}),s},createElement:function(t){return"rect"===t?this.symbol(t):ce.prototype.createElement.call(this,t)},invertChild:function(t,e){var i=this,o=e.style,s="IMG"===t.tagName&&t.style;f(t,{flip:"x",left:n(o.width)-(s?n(s.top):1),top:n(o.height)-(s?n(s.left):1),rotation:-90}),Kt(t.childNodes,function(e){i.invertChild(e,t)})},symbols:{arc:function(t,e,i,n,o){var s=o.start,r=o.end,a=o.r||i||n,i=o.innerR,n=yt(s),l=vt(s),h=yt(r),c=vt(r);return r-s===0?["x"]:(s=["wa",t-a,e-a,t+a,e+a,t+a*n,e+a*l,t+a*h,e+a*c],o.open&&!i&&s.push("e","M",t,e),s.push("at",t-i,e-i,t+i,e+i,t+i*h,e+i*c,t+i*n,e+i*l,"x","e"),s.isArc=!0,s)},circle:function(t,e,i,n,o){return o&&(i=n=2*o.r),o&&o.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,o){return ce.prototype.symbols[d(o)&&o.r?"callout":"square"].call(0,t,e,i,n,o)}}},Ft.VMLRenderer=de=function(){this.init.apply(this,arguments)},de.prototype=e(ce.prototype,pe),N=de),ce.prototype.measureSpanWidth=function(t,e){var i,n=ht.createElement("span");return i=ht.createTextNode(t),n.appendChild(i),f(n,e),this.box.appendChild(n),i=n.offsetWidth,M(n),i};var ue;Bt&&(Ft.CanVGRenderer=pe=function(){Mt="http://www.w3.org/1999/xhtml"},pe.prototype.symbols={},ue=function(){function t(){var t,i=e.length;for(t=0;i>t;t++)e[t]();e=[]}var e=[];return{push:function(i,n){0===e.length&&Ut(n,t),e.push(i)}}}(),N=pe),R.prototype={addLabel:function(){var e,i=this.axis,n=i.options,o=i.chart,s=i.horiz,r=i.categories,l=i.names,c=this.pos,p=n.labels,u=i.tickPositions,s=s&&r&&!p.step&&!p.staggerLines&&!p.rotation&&o.plotWidth/u.length||!s&&(o.margin[3]||.33*o.chartWidth),f=c===u[0],m=c===u[u.length-1],l=r?g(r[c],l[c],c):c,r=this.label,x=u.info;i.isDatetimeAxis&&x&&(e=n.dateTimeLabelFormats[x.higherRanks[c]||x.unitName]),this.isFirst=f,this.isLast=m,n=i.labelFormatter.call({axis:i,chart:o,isFirst:f,isLast:m,dateTimeLabelFormat:e,value:i.isLog?I(h(l)):l}),c=s&&{width:ft(1,pt(s-2*(p.padding||10)))+"px"},c=t(c,p.style),d(r)?r&&r.attr({text:n}).css(c):(e={align:i.labelAlign},a(p.rotation)&&(e.rotation=p.rotation),s&&p.ellipsis&&(e._clipHeight=i.len/u.length),this.label=d(n)&&p.enabled?o.renderer.text(n,0,0,p.useHTML).attr(e).css(c).add(i.labelGroup):null)},getLabelSize:function(){var t=this.label,e=this.axis;return t?t.getBBox()[e.horiz?"height":"width"]:0},getLabelSides:function(){var t=this.label.getBBox(),e=this.axis,i=e.horiz,n=e.options.labels,t=i?t.width:t.height,e=i?n.x-t*{left:0,center:.5,right:1}[e.labelAlign]:0;return[e,i?t+e:t]},handleOverflow:function(t,e){var i,n,o,s=!0,r=this.axis,a=this.isFirst,l=this.isLast,h=r.horiz?e.x:e.y,c=r.reversed,d=r.tickPositions,p=this.getLabelSides(),u=p[0],p=p[1],g=this.label.line||0;if(i=r.labelEdge,n=r.justifyLabels&&(a||l),i[g]===Y||h+u>i[g]?i[g]=h+p:n||(s=!1),n){i=(n=r.justifyToPlot)?r.pos:0,n=n?i+r.len:r.chart.chartWidth;do t+=a?1:-1,o=r.ticks[d[t]];while(d[t]&&(!o||o.label.line!==g));r=o&&o.label.xy&&o.label.xy.x+o.getLabelSides()[a?0:1],a&&!c||l&&c?i>h+u&&(h=i-u,o&&h+p>r&&(s=!1)):h+p>n&&(h=n-p,o&&r>h+u&&(s=!1)),e.x=h}return s},getPosition:function(t,e,i,n){var o=this.axis,s=o.chart,r=n&&s.oldChartHeight||s.chartHeight;return{x:t?o.translate(e+i,null,null,n)+o.transB:o.left+o.offset+(o.opposite?(n&&s.oldChartWidth||s.chartWidth)-o.right-o.left:0),y:t?r-o.bottom+o.offset-(o.opposite?o.height:0):r-o.translate(e+i,null,null,n)-o.transB}},getLabelPosition:function(t,e,i,n,o,s,r,a){var l=this.axis,h=l.transA,c=l.reversed,p=l.staggerLines,u=l.chart.renderer.fontMetrics(o.style.fontSize).b,g=o.rotation,t=t+o.x-(s&&n?s*h*(c?-1:1):0),e=e+o.y-(s&&!n?s*h*(c?1:-1):0);return g&&2===l.side&&(e-=u-u*yt(g*kt)),!d(o.y)&&!g&&(e+=u-i.getBBox().height/2),p&&(i.line=r/(a||1)%p,e+=i.line*(l.labelOffset/p)),{x:t,y:e}},getMarkPath:function(t,e,i,n,o,s){return s.crispLine(["M",t,e,"L",t+(o?0:-i),e+(o?i:0)],n)},render:function(t,e,i){var n=this.axis,o=n.options,s=n.chart.renderer,r=n.horiz,a=this.type,l=this.label,h=this.pos,c=o.labels,d=this.gridLine,p=a?a+"Grid":"grid",u=a?a+"Tick":"tick",f=o[p+"LineWidth"],m=o[p+"LineColor"],x=o[p+"LineDashStyle"],y=o[u+"Length"],p=o[u+"Width"]||0,v=o[u+"Color"],b=o[u+"Position"],u=this.mark,k=c.step,w=!0,S=n.tickmarkOffset,A=this.getPosition(r,h,S,e),T=A.x,A=A.y,P=r&&T===n.pos+n.len||!r&&A===n.pos?-1:1;this.isActive=!0,f&&(h=n.getPlotLinePath(h+S,f*P,e,!0),d===Y&&(d={stroke:m,"stroke-width":f},x&&(d.dashstyle=x),a||(d.zIndex=1),e&&(d.opacity=0),this.gridLine=d=f?s.path(h).attr(d).add(n.gridGroup):null),!e&&d&&h&&d[this.isNew?"attr":"animate"]({d:h,opacity:i})),p&&y&&("inside"===b&&(y=-y),n.opposite&&(y=-y),a=this.getMarkPath(T,A,y,p*P,r,s),u?u.animate({d:a,opacity:i}):this.mark=s.path(a).attr({stroke:v,"stroke-width":p,opacity:i}).add(n.axisGroup)),l&&!isNaN(T)&&(l.xy=A=this.getLabelPosition(T,A,l,r,c,S,t,k),this.isFirst&&!this.isLast&&!g(o.showFirstLabel,1)||this.isLast&&!this.isFirst&&!g(o.showLastLabel,1)?w=!1:!n.isRadial&&!c.step&&!c.rotation&&!e&&0!==i&&(w=this.handleOverflow(t,A)),k&&t%k&&(w=!1),w&&!isNaN(A.y)?(A.opacity=i,l[this.isNew?"attr":"animate"](A),this.isNew=!1):l.attr("y",-9999))},destroy:function(){C(this,this.axis)}},Ft.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},Ft.PlotLineOrBand.prototype={render:function(){var t,i=this,n=i.axis,o=n.horiz,s=(n.pointRange||0)/2,r=i.options,a=r.label,h=i.label,c=r.width,p=r.to,u=r.from,f=d(u)&&d(p),m=r.value,x=r.dashStyle,y=i.svgElem,v=[],b=r.color,k=r.zIndex,w=r.events,S={},A=n.chart.renderer;if(n.isLog&&(u=l(u),p=l(p),m=l(m)),c)v=n.getPlotLinePath(m,c),S={stroke:b,"stroke-width":c},x&&(S.dashstyle=x);else{if(!f)return;u=ft(u,n.min-s),p=mt(p,n.max+s),v=n.getPlotBandPath(u,p,r),b&&(S.fill=b),r.borderWidth&&(S.stroke=r.borderColor,S["stroke-width"]=r.borderWidth)}if(d(k)&&(S.zIndex=k),y)v?y.animate({d:v},null,y.onGetPath):(y.hide(),y.onGetPath=function(){y.show()},h&&(i.label=h=h.destroy()));else if(v&&v.length&&(i.svgElem=y=A.path(v).attr(S).add(),w))for(t in s=function(t){y.on(t,function(e){w[t].apply(i,[e])})},w)s(t);return a&&d(a.text)&&v&&v.length&&n.width>0&&n.height>0?(a=e({align:o&&f&&"center",x:o?!f&&4:10,verticalAlign:!o&&f&&"middle",y:o?f?16:10:f?6:-4,rotation:o&&!f&&90},a),h||(S={align:a.textAlign||a.align,rotation:a.rotation},d(k)&&(S.zIndex=k),i.label=h=A.text(a.text,0,0,a.useHTML).attr(S).css(a.style).add()),n=[v[1],v[4],g(v[6],v[1])],v=[v[2],v[5],g(v[7],v[2])],o=P(n),f=P(v),h.align(a,!1,{x:o,y:f,width:L(n)-o,height:L(v)-f}),h.show()):h&&h.hide(),i},destroy:function(){c(this.axis.plotLinesAndBands,this),delete this.axis,C(this)}},E.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:Vt,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return y(this.total,-1)},style:Vt.style}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:20},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-15},title:{rotation:0}},init:function(t,e){var i=e.isX;this.horiz=t.inverted?!i:i,this.coll=(this.isXAxis=i)?"xAxis":"yAxis",this.opposite=e.opposite,this.side=e.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);var n=this.options,o=n.type;this.labelFormatter=n.labels.formatter||this.defaultLabelFormatter,this.userOptions=e,this.minPixelPadding=0,this.chart=t,this.reversed=n.reversed,this.zoomEnabled=n.zoomEnabled!==!1,this.categories=n.categories||"category"===o,this.names=[],this.isLog="logarithmic"===o,this.isDatetimeAxis="datetime"===o,this.isLinked=d(n.linkedTo),this.tickmarkOffset=this.categories&&"between"===n.tickmarkPlacement?.5:0,this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=n.minRange||n.maxZoom,this.range=n.range,this.offset=n.offset||0,this.stacks={},this.oldStacks={},this.min=this.max=null,this.crosshair=g(n.crosshair,u(t.options.tooltip.crosshairs)[i?0:1],!1);var s,n=this.options.events;-1===Zt(this,t.axes)&&(i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&i&&this.reversed===Y&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(s in n)Qt(this,s,n[s]);this.isLog&&(this.val2lin=l,this.lin2val=h)},setOptions:function(t){this.options=e(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],e(V[this.coll],t))},defaultLabelFormatter:function(){var t,e=this.axis,i=this.value,n=e.categories,o=this.dateTimeLabelFormat,s=V.lang.numericSymbols,r=s&&s.length,a=e.options.labels.format,e=e.isLog?i:e.tickInterval;if(a)t=k(a,this);else if(n)t=i;else if(o)t=j(o,i);else if(r&&e>=1e3)for(;r--&&t===Y;)n=Math.pow(1e3,r+1),e>=n&&null!==s[r]&&(t=y(i/n,-1)+s[r]);return t===Y&&(t=xt(i)>=1e4?y(i,0):y(i,-1,Y,"")),t},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=null,t.buildStacks&&t.buildStacks(),Kt(t.series,function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n;n=i.options.threshold;var o;t.hasVisibleSeries=!0,t.isLog&&0>=n&&(n=null),t.isXAxis?(n=i.xData,n.length&&(t.dataMin=mt(g(t.dataMin,n[0]),P(n)),t.dataMax=ft(g(t.dataMax,n[0]),L(n)))):(i.getExtremes(),o=i.dataMax,i=i.dataMin,d(i)&&d(o)&&(t.dataMin=mt(g(t.dataMin,i),i),t.dataMax=ft(g(t.dataMax,o),o)),d(n)&&(t.dataMin>=n?(t.dataMin=n,t.ignoreMinPadding=!0):t.dataMax<n&&(t.dataMax=n,t.ignoreMaxPadding=!0)))}})},translate:function(t,e,i,n,o,s){var r=1,l=0,h=n?this.oldTransA:this.transA,n=n?this.oldMin:this.min,c=this.minPixelPadding,o=(this.options.ordinal||this.isLog&&o)&&this.lin2val;return h||(h=this.transA),i&&(r*=-1,l=this.len),this.reversed&&(r*=-1,l-=r*(this.sector||this.len)),e?(t=t*r+l,t-=c,t=t/h+n,o&&(t=this.lin2val(t))):(o&&(t=this.val2lin(t)),"between"===s&&(s=.5),t=r*(t-n)*h+l+r*c+(a(s)?h*s*this.pointRange:0)),t},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,o){var s,r,a,l=this.chart,h=this.left,c=this.top,d=i&&l.oldChartHeight||l.chartHeight,p=i&&l.oldChartWidth||l.chartWidth;return s=this.transB,o=g(o,this.translate(t,null,null,i)),t=i=pt(o+s),s=r=pt(d-o-s),isNaN(o)?a=!0:this.horiz?(s=c,r=d-this.bottom,(h>t||t>h+this.width)&&(a=!0)):(t=h,i=p-this.right,(c>s||s>c+this.height)&&(a=!0)),a&&!n?null:l.renderer.crispLine(["M",t,s,"L",i,r],e||1)},getLinearTickPositions:function(t,e,i){var n,o=I(ut(e/t)*t),s=I(gt(i/t)*t),r=[];if(e===i&&a(e))return[e];for(e=o;s>=e&&(r.push(e),e=I(e+t),e!==n);)n=e;return r},getMinorTickPositions:function(){var t,e=this.options,i=this.tickPositions,n=this.minorTickInterval,o=[];if(this.isLog)for(t=i.length,e=1;t>e;e++)o=o.concat(this.getLogTickPositions(n,i[e-1],i[e],!0));else if(this.isDatetimeAxis&&"auto"===e.minorTickInterval)o=o.concat(this.getTimeTicks(this.normalizeTimeTickInterval(n),this.min,this.max,e.startOfWeek)),o[0]<this.min&&o.shift();else for(i=this.min+(i[0]-this.min)%n;i<=this.max;i+=n)o.push(i);return o},adjustForMinRange:function(){var t,e,i,n,o,s,r=this.options,a=this.min,l=this.max,h=this.dataMax-this.dataMin>=this.minRange;if(this.isXAxis&&this.minRange===Y&&!this.isLog&&(d(r.min)||d(r.max)?this.minRange=null:(Kt(this.series,function(t){for(o=t.xData,i=s=t.xIncrement?1:o.length-1;i>0;i--)n=o[i]-o[i-1],(e===Y||e>n)&&(e=n)}),this.minRange=mt(5*e,this.dataMax-this.dataMin))),l-a<this.minRange){var c=this.minRange;t=(c-l+a)/2,t=[a-t,g(r.min,a-t)],h&&(t[2]=this.dataMin),a=L(t),l=[a+c,g(r.max,a+c)],h&&(l[2]=this.dataMax),l=P(l),c>l-a&&(t[0]=l-c,t[1]=g(r.min,l-c),a=L(t))}this.min=a,this.max=l},setAxisTranslation:function(t){var e,i=this,n=i.max-i.min,s=i.axisPointRange||0,r=0,a=0,l=i.linkedParent,h=!!i.categories,c=i.transA;(i.isXAxis||h||s)&&(l?(r=l.minPointOffset,a=l.pointRangePadding):Kt(i.series,function(t){var l=h?1:i.isXAxis?t.pointRange:i.axisPointRange||0,c=t.options.pointPlacement,p=t.closestPointRange;l>n&&(l=0),s=ft(s,l),r=ft(r,o(c)?0:l/2),a=ft(a,"on"===c?0:l),!t.noSharedTooltip&&d(p)&&(e=d(e)?mt(e,p):p)}),l=i.ordinalSlope&&e?i.ordinalSlope/e:1,i.minPointOffset=r*=l,i.pointRangePadding=a*=l,i.pointRange=mt(s,n),i.closestPointRange=e),t&&(i.oldTransA=c),i.translationSlope=i.transA=c=i.len/(n+a||1),i.transB=i.horiz?i.left:i.bottom,i.minPixelPadding=c*r},setTickPositions:function(t){var e,i=this,n=i.chart,o=i.options,s=i.isLog,r=i.isDatetimeAxis,h=i.isXAxis,c=i.isLinked,p=i.options.tickPositioner,u=o.maxPadding,f=o.minPadding,m=o.tickInterval,x=o.minTickInterval,y=o.tickPixelInterval,v=i.categories;c?(i.linkedParent=n[i.coll][o.linkedTo],n=i.linkedParent.getExtremes(),i.min=g(n.min,n.dataMin),i.max=g(n.max,n.dataMax),o.type!==i.linkedParent.options.type&&D(11,1)):(i.min=g(i.userMin,o.min,i.dataMin),i.max=g(i.userMax,o.max,i.dataMax)),s&&(!t&&mt(i.min,g(i.dataMin,i.min))<=0&&D(10,1),i.min=I(l(i.min)),i.max=I(l(i.max))),i.range&&d(i.max)&&(i.userMin=i.min=ft(i.min,i.max-i.range),i.userMax=i.max,i.range=null),i.beforePadding&&i.beforePadding(),i.adjustForMinRange(),v||i.axisPointRange||i.usePercentage||c||!d(i.min)||!d(i.max)||!(n=i.max-i.min)||(d(o.min)||d(i.userMin)||!f||!(i.dataMin<0)&&i.ignoreMinPadding||(i.min-=n*f),d(o.max)||d(i.userMax)||!u||!(i.dataMax>0)&&i.ignoreMaxPadding||(i.max+=n*u)),a(o.floor)&&(i.min=ft(i.min,o.floor)),a(o.ceiling)&&(i.max=mt(i.max,o.ceiling)),i.min===i.max||void 0===i.min||void 0===i.max?i.tickInterval=1:c&&!m&&y===i.linkedParent.options.tickPixelInterval?i.tickInterval=i.linkedParent.tickInterval:(i.tickInterval=g(m,v?1:(i.max-i.min)*y/ft(i.len,y)),!d(m)&&i.len<y&&!this.isRadial&&!this.isLog&&!v&&o.startOnTick&&o.endOnTick&&(e=!0,i.tickInterval/=4)),h&&!t&&Kt(i.series,function(t){t.processData(i.min!==i.oldMin||i.max!==i.oldMax)}),i.setAxisTranslation(!0),i.beforeSetTickPositions&&i.beforeSetTickPositions(),i.postProcessTickInterval&&(i.tickInterval=i.postProcessTickInterval(i.tickInterval)),i.pointRange&&(i.tickInterval=ft(i.pointRange,i.tickInterval)),!m&&i.tickInterval<x&&(i.tickInterval=x),r||s||m||(i.tickInterval=S(i.tickInterval,null,w(i.tickInterval),o)),i.minorTickInterval="auto"===o.minorTickInterval&&i.tickInterval?i.tickInterval/5:o.minorTickInterval,i.tickPositions=t=o.tickPositions?[].concat(o.tickPositions):p&&p.apply(i,[i.min,i.max]),t||(!i.ordinalPositions&&(i.max-i.min)/i.tickInterval>ft(2*i.len,200)&&D(19,!0),t=r?i.getTimeTicks(i.normalizeTimeTickInterval(i.tickInterval,o.units),i.min,i.max,o.startOfWeek,i.ordinalPositions,i.closestPointRange,!0):s?i.getLogTickPositions(i.tickInterval,i.min,i.max):i.getLinearTickPositions(i.tickInterval,i.min,i.max),e&&t.splice(1,t.length-2),i.tickPositions=t),c||(s=t[0],r=t[t.length-1],c=i.minPointOffset||0,o.startOnTick?i.min=s:i.min-c>s&&t.shift(),o.endOnTick?i.max=r:i.max+c<r&&t.pop(),1===t.length&&(o=xt(i.max)>1e13?1:.001,i.min-=o,i.max+=o))},setMaxTicks:function(){var t=this.chart,e=t.maxTicks||{},i=this.tickPositions,n=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&i&&i.length>(e[n]||0)&&this.options.alignTicks!==!1&&(e[n]=i.length),t.maxTicks=e},adjustTickAmount:function(){var t=this._maxTicksKey,e=this.tickPositions,i=this.chart.maxTicks;if(i&&i[t]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==Y){var n=this.tickAmount,o=e.length;if(this.tickAmount=t=i[t],t>o){for(;e.length<t;)e.push(I(e[e.length-1]+this.tickInterval));this.transA*=(o-1)/(t-1),this.max=e[e.length-1]}d(n)&&t!==n&&(this.isDirty=!0)}},setScale:function(){var t,e,i,n,o=this.stacks;if(this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),n=this.len!==this.oldAxisLength,Kt(this.series,function(t){(t.isDirtyData||t.isDirty||t.xAxis.isDirty)&&(i=!0)}),n||i||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(t in o)for(e in o[t])o[t][e].total=null,o[t][e].cum=0;this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=n||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis){this.oldStacks&&(o=this.stacks=this.oldStacks);for(t in o)for(e in o[t])o[t][e].cum=o[t][e].total}this.setMaxTicks()},setExtremes:function(e,i,n,o,s){var r=this,a=r.chart,n=g(n,!0),s=t(s,{min:e,max:i});ee(r,"setExtremes",s,function(){r.userMin=e,r.userMax=i,r.eventArgs=s,r.isDirtyExtremes=!0,n&&a.redraw(o)})},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,o=this.options;return this.allowZoomOutside||(d(i)&&t<=mt(i,g(o.min,i))&&(t=Y),d(n)&&e>=ft(n,g(o.max,n))&&(e=Y)),this.displayBtn=t!==Y||e!==Y,this.setExtremes(t,e,!1,Y,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,i=e.offsetLeft||0,n=this.horiz,o=g(e.width,t.plotWidth-i+(e.offsetRight||0)),s=g(e.height,t.plotHeight),r=g(e.top,t.plotTop),e=g(e.left,t.plotLeft+i),i=/%$/;i.test(s)&&(s=parseInt(s,10)/100*t.plotHeight),i.test(r)&&(r=parseInt(r,10)/100*t.plotHeight+t.plotTop),this.left=e,this.top=r,this.width=o,this.height=s,this.bottom=t.chartHeight-s-r,this.right=t.chartWidth-o-e,this.len=ft(n?o:s,0),this.pos=n?e:r},getExtremes:function(){var t=this.isLog;return{min:t?I(h(this.min)):this.min,max:t?I(h(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,i=e?h(this.min):this.min,e=e?h(this.max):this.max;return i>t||null===t?t=i:t>e&&(t=e),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){return t=(g(t,0)-90*this.side+720)%360,t>15&&165>t?"right":t>195&&345>t?"left":"center"},getOffset:function(){var t,e,i,n,o,s,r,a=this,l=a.chart,h=l.renderer,c=a.options,p=a.tickPositions,u=a.ticks,f=a.horiz,m=a.side,x=l.inverted?[1,0,3,2][m]:m,y=0,v=0,b=c.title,k=c.labels,w=0,S=l.axisOffset,A=l.clipOffset,T=[-1,1,1,-1][m],P=1,L=g(k.maxStaggerLines,5),C=2===m?h.fontMetrics(k.style.fontSize).b:0;if(a.hasData=t=a.hasVisibleSeries||d(a.min)&&d(a.max)&&!!p,a.showAxis=l=t||g(c.showEmpty,!0),a.staggerLines=a.horiz&&k.staggerLines,a.axisGroup||(a.gridGroup=h.g("grid").attr({zIndex:c.gridZIndex||1}).add(),a.axisGroup=h.g("axis").attr({zIndex:c.zIndex||2}).add(),a.labelGroup=h.g("axis-labels").attr({zIndex:k.zIndex||7}).addClass("highcharts-"+a.coll.toLowerCase()+"-labels").add()),t||a.isLinked){if(a.labelAlign=g(k.align||a.autoLabelAlign(k.rotation)),Kt(p,function(t){u[t]?u[t].addLabel():u[t]=new R(a,t)}),a.horiz&&!a.staggerLines&&L&&!k.rotation){for(i=a.reversed?[].concat(p).reverse():p;L>P;){for(t=[],n=!1,k=0;k<i.length;k++)o=i[k],s=(s=u[o].label&&u[o].label.getBBox())?s.width:0,r=k%P,s&&(o=a.translate(o),t[r]!==Y&&o<t[r]&&(n=!0),t[r]=o+s);if(!n)break;P++}P>1&&(a.staggerLines=P)}Kt(p,function(t){0!==m&&2!==m&&{1:"left",3:"right"}[m]!==a.labelAlign||(w=ft(u[t].getLabelSize(),w))}),a.staggerLines&&(w*=a.staggerLines,a.labelOffset=w)}else for(i in u)u[i].destroy(),delete u[i];b&&b.text&&b.enabled!==!1&&(a.axisTitle||(a.axisTitle=h.text(b.text,0,0,b.useHTML).attr({zIndex:7,rotation:b.rotation||0,align:b.textAlign||{low:"left",middle:"center",high:"right"}[b.align]}).addClass("highcharts-"+this.coll.toLowerCase()+"-title").css(b.style).add(a.axisGroup),a.axisTitle.isNew=!0),l&&(y=a.axisTitle.getBBox()[f?"height":"width"],v=g(b.margin,f?5:10),e=b.offset),a.axisTitle[l?"show":"hide"]()),a.offset=T*g(c.offset,S[m]),a.axisTitleMargin=g(e,w+v+(w&&T*c.labels[f?"y":"x"]-C)),S[m]=ft(S[m],a.axisTitleMargin+y+T*a.offset),A[x]=ft(A[x],2*ut(c.lineWidth/2))},getLinePath:function(t){
var e=this.chart,i=this.opposite,n=this.offset,o=this.horiz,s=this.left+(i?this.width:0)+n,n=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine(["M",o?this.left:s,o?n:this.top,"L",o?e.chartWidth-this.right:s,o?n:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,o=this.len,s=this.options.title,r=t?e:i,a=this.opposite,l=this.offset,h=n(s.style.fontSize||12),o={low:r+(t?0:o),middle:r+o/2,high:r+(t?o:0)}[s.align],e=(t?i+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?h:0);return{x:t?o:e+(a?this.width:0)+l+(s.x||0),y:t?e-(a?this.height:0)+l:o+(s.y||0)}},render:function(){var t,e,i,n=this,o=n.horiz,s=n.reversed,r=n.chart,a=r.renderer,l=n.options,c=n.isLog,p=n.isLinked,u=n.tickPositions,g=n.axisTitle,f=n.ticks,m=n.minorTicks,x=n.alternateBands,y=l.stackLabels,v=l.alternateGridColor,b=n.tickmarkOffset,k=l.lineWidth,w=r.hasRendered&&d(n.oldMin)&&!isNaN(n.oldMin),S=n.hasData,A=n.showAxis,T=l.labels.overflow,P=n.justifyLabels=o&&T!==!1;n.labelEdge.length=0,n.justifyToPlot="justify"===T,Kt([f,m,x],function(t){for(var e in t)t[e].isActive=!1}),(S||p)&&(n.minorTickInterval&&!n.categories&&Kt(n.getMinorTickPositions(),function(t){m[t]||(m[t]=new R(n,t,"minor")),w&&m[t].isNew&&m[t].render(null,!0),m[t].render(null,!1,1)}),u.length&&(t=u.slice(),(o&&s||!o&&!s)&&t.reverse(),P&&(t=t.slice(1).concat([t[0]])),Kt(t,function(e,i){P&&(i=i===t.length-1?0:i+1),(!p||e>=n.min&&e<=n.max)&&(f[e]||(f[e]=new R(n,e)),w&&f[e].isNew&&f[e].render(i,!0,.1),f[e].render(i,!1,1))}),b&&0===n.min&&(f[-1]||(f[-1]=new R(n,-1,null,!0)),f[-1].render(-1))),v&&Kt(u,function(t,o){o%2===0&&t<n.max&&(x[t]||(x[t]=new Ft.PlotLineOrBand(n)),e=t+b,i=u[o+1]!==Y?u[o+1]+b:n.max,x[t].options={from:c?h(e):e,to:c?h(i):i,color:v},x[t].render(),x[t].isActive=!0)}),n._addedPlotLB||(Kt((l.plotLines||[]).concat(l.plotBands||[]),function(t){n.addPlotBandOrLine(t)}),n._addedPlotLB=!0)),Kt([f,m,x],function(t){var e,i,n=[],o=U?U.duration||500:0,s=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));t!==x&&r.hasRendered&&o?o&&setTimeout(s,o):s()}),k&&(o=n.getLinePath(k),n.axisLine?n.axisLine.animate({d:o}):n.axisLine=a.path(o).attr({stroke:l.lineColor,"stroke-width":k,zIndex:7}).add(n.axisGroup),n.axisLine[A?"show":"hide"]()),g&&A&&(g[g.isNew?"attr":"animate"](n.getTitlePosition()),g.isNew=!1),y&&y.enabled&&n.renderStackTotals(),n.isDirty=!1},redraw:function(){var t=this.chart.pointer;t&&t.reset(!0),this.render(),Kt(this.plotLinesAndBands,function(t){t.render()}),Kt(this.series,function(t){t.isDirty=!0})},destroy:function(t){var e,i=this,n=i.stacks,o=i.plotLinesAndBands;t||te(i);for(e in n)C(n[e]),n[e]=null;for(Kt([i.ticks,i.minorTicks,i.alternateBands],function(t){C(t)}),t=o.length;t--;)o[t].destroy();Kt("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(t){i[t]&&(i[t]=i[t].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){if(this.crosshair)if((d(e)||!g(this.crosshair.snap,!0))===!1)this.hideCrosshair();else{var i,n=this.crosshair,o=n.animation;g(n.snap,!0)?d(e)&&(i=this.chart.inverted!=this.horiz?e.plotX:this.len-e.plotY):i=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:g(e.stackY,e.y)):this.getPlotLinePath(null,null,null,null,i),null===i?this.hideCrosshair():this.cross?this.cross.attr({visibility:"visible"})[o?"animate":"attr"]({d:i},o):(o={"stroke-width":n.width||1,stroke:n.color||"#C0C0C0",zIndex:n.zIndex||2},n.dashStyle&&(o.dashstyle=n.dashStyle),this.cross=this.chart.renderer.path(i).attr(o).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},t(E.prototype,{getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e),n=this.getPlotLinePath(t);return n&&i?n.push(i[4],i[5],i[1],i[2]):n=null,n},addPlotBand:function(t){this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new Ft.PlotLineOrBand(this,t).render(),n=this.userOptions;return i&&(e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,o=e.length;o--;)e[o].id===t&&e[o].destroy();Kt([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],function(e){for(o=e.length;o--;)e[o].id===t&&c(e,e[o])})}}),E.prototype.getTimeTicks=function(e,i,n,o){var s,r=[],a={},l=V.global.useUTC,h=new Date(i-q),c=e.unitRange,p=e.count;if(d(i)){c>=K.second&&(h.setMilliseconds(0),h.setSeconds(c>=K.minute?0:p*ut(h.getSeconds()/p))),c>=K.minute&&h[ot](c>=K.hour?0:p*ut(h[J]()/p)),c>=K.hour&&h[st](c>=K.day?0:p*ut(h[Q]()/p)),c>=K.day&&h[rt](c>=K.month?1:p*ut(h[et]()/p)),c>=K.month&&(h[at](c>=K.year?0:p*ut(h[it]()/p)),s=h[nt]()),c>=K.year&&(s-=s%p,h[lt](s)),c===K.week&&h[rt](h[et]()-h[tt]()+g(o,1)),i=1,q&&(h=new Date(h.getTime()+q)),s=h[nt]();for(var o=h.getTime(),u=h[it](),f=h[et](),m=l?q:(864e5+6e4*h.getTimezoneOffset())%864e5;n>o;)r.push(o),c===K.year?o=$(s+i*p,0):c===K.month?o=$(s,u+i*p):l||c!==K.day&&c!==K.week?o+=c*p:o=$(s,u,f+i*p*(c===K.day?1:7)),i++;r.push(o),Kt($t(r,function(t){return c<=K.hour&&t%K.day===m}),function(t){a[t]="day"})}return r.info=t(e,{higherRanks:a,totalRange:c*p}),r},E.prototype.normalizeTimeTickInterval=function(t,e){var i,n=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],o=n[n.length-1],s=K[o[0]],r=o[1];for(i=0;i<n.length&&(o=n[i],s=K[o[0]],r=o[1],!(n[i+1]&&t<=(s*r[r.length-1]+K[n[i+1][0]])/2));i++);return s===K.year&&5*s>t&&(r=[1,2,5]),n=S(t/s,r,"year"===o[0]?ft(w(t/s),1):1),{unitRange:s,count:n,unitName:o[0]}},E.prototype.getLogTickPositions=function(t,e,i,n){var o=this.options,s=this.len,r=[];if(n||(this._minorAutoInterval=null),t>=.5)t=pt(t),r=this.getLinearTickPositions(t,e,i);else if(t>=.08)for(var a,c,d,p,u,s=ut(e),o=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];i+1>s&&!u;s++)for(c=o.length,a=0;c>a&&!u;a++)d=l(h(s)*o[a]),d>e&&(!n||i>=p)&&r.push(p),p>i&&(u=!0),p=d;else e=h(e),i=h(i),t=o[n?"minorTickInterval":"tickInterval"],t=g("auto"===t?null:t,this._minorAutoInterval,(i-e)*(o.tickPixelInterval/(n?5:1))/((n?s/this.tickPositions.length:s)||1)),t=S(t,null,w(t)),r=Jt(this.getLinearTickPositions(t,e,i),l),n||(this._minorAutoInterval=t/5);return n||(this.tickInterval=t),r};var ge=Ft.Tooltip=function(){this.init.apply(this,arguments)};ge.prototype={init:function(t,e){var i=e.borderWidth,o=e.style,s=n(o.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:s,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(o).css({padding:0}).add().attr({y:-9999}),Bt||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(e,i,n,o){var s=this,r=s.now,a=s.options.animation!==!1&&!s.isHidden,l=s.followPointer||s.len>1;t(r,{x:a?(2*r.x+e)/3:e,y:a?(r.y+i)/2:i,anchorX:l?Y:a?(2*r.anchorX+n)/3:n,anchorY:l?Y:a?(r.anchorY+o)/2:o}),s.label.attr(r),a&&(xt(e-r.x)>1||xt(i-r.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){s&&s.move(e,i,n,o)},32))},hide:function(){var t,e=this;clearTimeout(this.hideTimer),this.isHidden||(t=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){e.label.fadeOut(),e.isHidden=!0},g(this.options.hideDelay,500)),t&&Kt(t,function(t){t.setState()}),this.chart.hoverPoints=null)},getAnchor:function(t,e){var i,n,o=this.chart,s=o.inverted,r=o.plotTop,a=0,l=0,t=u(t);return i=t[0].tooltipPos,this.followPointer&&e&&(e.chartX===Y&&(e=o.pointer.normalize(e)),i=[e.chartX-o.plotLeft,e.chartY-r]),i||(Kt(t,function(t){n=t.series.yAxis,a+=t.plotX,l+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!s&&n?n.top-r:0)}),a/=t.length,l/=t.length,i=[s?o.plotWidth-l:a,this.shared&&!s&&t.length>1&&e?e.chartY-r:s?o.plotHeight-a:l]),Jt(i,pt)},getPosition:function(t,e,i){var n,o=this.chart,s=this.distance,r={},a=["y",o.chartHeight,e,i.plotY+o.plotTop],l=["x",o.chartWidth,t,i.plotX+o.plotLeft],h=i.ttBelow||o.inverted&&!i.negative||!o.inverted&&i.negative,c=function(t,e,i,n){var o=n-s>i,e=e>n+s+i,i=n-s-i;if(n+=s,h&&e)r[t]=n;else if(!h&&o)r[t]=i;else if(o)r[t]=i;else{if(!e)return!1;r[t]=n}},d=function(t,e,i,n){return s>n||n>e-s?!1:void(r[t]=i/2>n?1:n>e-i/2?e-i-2:n-i/2)},p=function(t){var e=a;a=l,l=e,n=t},u=function(){c.apply(0,a)!==!1?d.apply(0,l)===!1&&!n&&(p(!0),u()):n?r.x=r.y=0:(p(!0),u())};return(o.inverted||this.len>1)&&p(),u(),r},defaultFormatter:function(t){var e,i=this.points||u(this),n=i[0].series;return e=[t.tooltipHeaderFormatter(i[0])],Kt(i,function(t){n=t.series,e.push(n.tooltipFormatter&&n.tooltipFormatter(t)||t.point.tooltipFormatter(n.tooltipOptions.pointFormat))}),e.push(t.options.footerFormat||""),e.join("")},refresh:function(t,e){var i,n,o,s=this.chart,r=this.label,a=this.options,l={},h=[];o=a.formatter||this.defaultFormatter;var c,l=s.hoverPoints,d=this.shared;clearTimeout(this.hideTimer),this.followPointer=u(t)[0].series.tooltipOptions.followPointer,n=this.getAnchor(t,e),i=n[0],n=n[1],!d||t.series&&t.series.noSharedTooltip?l=t.getLabelConfig():(s.hoverPoints=t,l&&Kt(l,function(t){t.setState()}),Kt(t,function(t){t.setState("hover"),h.push(t.getLabelConfig())}),l={x:t[0].category,y:t[0].y},l.points=h,this.len=h.length,t=t[0]),o=o.call(l,this),l=t.series,this.distance=g(l.tooltipOptions.distance,16),o===!1?this.hide():(this.isHidden&&(oe(r),r.attr("opacity",1).show()),r.attr({text:o}),c=a.borderColor||t.color||l.color||"#606060",r.attr({stroke:c}),this.updatePosition({plotX:i,plotY:n,negative:t.negative,ttBelow:t.ttBelow}),this.isHidden=!1),ee(s,"tooltipRefresh",{text:o,x:i+s.plotLeft,y:n+s.plotTop,borderColor:c})},updatePosition:function(t){var e=this.chart,i=this.label,i=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(pt(i.x),pt(i.y),t.plotX+e.plotLeft,t.plotY+e.plotTop)},tooltipHeaderFormatter:function(t){var e,i=t.series,n=i.tooltipOptions,o=n.dateTimeLabelFormats,s=n.xDateFormat,r=i.xAxis,l=r&&"datetime"===r.options.type&&a(t.key),n=n.headerFormat,r=r&&r.closestPointRange;if(l&&!s){if(r){for(e in K)if(K[e]>=r||K[e]<=K.day&&t.key%K[e]>0){s=o[e];break}}else s=o.day;s=s||o.year}return l&&s&&(n=n.replace("{point.key}","{point.key:"+s+"}")),k(n,{point:t,series:i})}};var fe;F=ht.documentElement.ontouchstart!==Y;var me=Ft.Pointer=function(t,e){this.init(t,e)};if(me.prototype={init:function(t,e){var i,n=e.chart,o=n.events,s=Bt?"":n.zoomType,n=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(s),this.zoomY=s=/y/.test(s),this.zoomHor=i&&!n||s&&n,this.zoomVert=s&&!n||i&&n,this.hasZoom=i||s,this.runChartClick=o&&!!o.click,this.pinchDown=[],this.lastValidTouch={},Ft.Tooltip&&e.tooltip.enabled&&(t.tooltip=new ge(t,e.tooltip),this.followTouchMove=e.tooltip.followTouchMove),this.setDOMEvents()},normalize:function(e,i){var n,o,e=e||window.event,e=ie(e);return e.target||(e.target=e.srcElement),o=e.touches?e.touches.length?e.touches.item(0):e.changedTouches[0]:e,i||(this.chartPosition=i=qt(this.chart.container)),o.pageX===Y?(n=ft(e.x,e.clientX-i.left),o=e.y):(n=o.pageX-i.left,o=o.pageY-i.top),t(e,{chartX:pt(n),chartY:pt(o)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return Kt(this.chart.axes,function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})}),e},getIndex:function(t){var e=this.chart;return e.inverted?e.plotHeight+e.plotTop-t.chartY:t.chartX-e.plotLeft},runPointActions:function(t){var e,i,n,o,s=this.chart,r=s.series,a=s.tooltip,l=s.hoverPoint,h=s.hoverSeries,c=s.chartWidth,d=this.getIndex(t);if(a&&this.options.tooltip.shared&&(!h||!h.noSharedTooltip)){for(i=[],n=r.length,o=0;n>o;o++)r[o].visible&&r[o].options.enableMouseTracking!==!1&&!r[o].noSharedTooltip&&r[o].singularTooltips!==!0&&r[o].tooltipPoints.length&&(e=r[o].tooltipPoints[d])&&e.series&&(e._dist=xt(d-e.clientX),c=mt(c,e._dist),i.push(e));for(n=i.length;n--;)i[n]._dist>c&&i.splice(n,1);i.length&&i[0].clientX!==this.hoverX&&(a.refresh(i,t),this.hoverX=i[0].clientX)}r=h&&h.tooltipOptions.followPointer,h&&h.tracker&&!r?(e=h.tooltipPoints[d])&&e!==l&&e.onMouseOver(t):a&&r&&!a.isHidden&&(h=a.getAnchor([{}],t),a.updatePosition({plotX:h[0],plotY:h[1]})),a&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(t){Et[fe]&&Et[fe].pointer.onDocumentMouseMove(t)},Qt(ht,"mousemove",this._onDocumentMouseMove)),Kt(s.axes,function(i){i.drawCrosshair(t,g(e,l))})},reset:function(t){var e=this.chart,i=e.hoverSeries,n=e.hoverPoint,o=e.tooltip,s=o&&o.shared?e.hoverPoints:n;(t=t&&o&&s)&&u(s)[0].plotX===Y&&(t=!1),t?(o.refresh(s),n&&n.setState(n.state,!0)):(n&&n.onMouseOut(),i&&i.onMouseOut(),o&&o.hide(),this._onDocumentMouseMove&&(te(ht,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),Kt(e.axes,function(t){t.hideCrosshair()}),this.hoverX=null)},scaleGroups:function(t,e){var i,n=this.chart;Kt(n.series,function(o){i=t||o.getPlotBox(),o.xAxis&&o.xAxis.zoomEnabled&&(o.group.attr(i),o.markerGroup&&(o.markerGroup.attr(i),o.markerGroup.clip(e?n.clipRect:null)),o.dataLabelsGroup&&o.dataLabelsGroup.attr(i))}),n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i=this.chart,n=i.options.chart,o=t.chartX,s=t.chartY,r=this.zoomHor,a=this.zoomVert,l=i.plotLeft,h=i.plotTop,c=i.plotWidth,d=i.plotHeight,p=this.mouseDownX,u=this.mouseDownY;l>o?o=l:o>l+c&&(o=l+c),h>s?s=h:s>h+d&&(s=h+d),this.hasDragged=Math.sqrt(Math.pow(p-o,2)+Math.pow(u-s,2)),this.hasDragged>10&&(e=i.isInsidePlot(p-l,u-h),i.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!this.selectionMarker&&(this.selectionMarker=i.renderer.rect(l,h,r?1:c,a?1:d,0).attr({fill:n.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&r&&(o-=p,this.selectionMarker.attr({width:xt(o),x:(o>0?0:o)+p})),this.selectionMarker&&a&&(o=s-u,this.selectionMarker.attr({height:xt(o),y:(o>0?0:o)+u})),e&&!this.selectionMarker&&n.panning&&i.pan(t,n.panning))},drop:function(e){var i=this.chart,n=this.hasPinched;if(this.selectionMarker){var o,s={xAxis:[],yAxis:[],originalEvent:e.originalEvent||e},e=this.selectionMarker,r=e.attr?e.attr("x"):e.x,a=e.attr?e.attr("y"):e.y,l=e.attr?e.attr("width"):e.width,h=e.attr?e.attr("height"):e.height;(this.hasDragged||n)&&(Kt(i.axes,function(t){if(t.zoomEnabled){var e=t.horiz,i=t.toValue(e?r:a),e=t.toValue(e?r+l:a+h);!isNaN(i)&&!isNaN(e)&&(s[t.coll].push({axis:t,min:mt(i,e),max:ft(i,e)}),o=!0)}}),o&&ee(i,"selection",s,function(e){i.zoom(t(e,n?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(f(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){t=this.normalize(t),t.preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Et[fe]&&Et[fe].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition,n=e.hoverSeries,t=this.normalize(t,i);i&&n&&!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)&&this.reset()},onContainerMouseLeave:function(){var t=Et[fe];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;fe=e.index,t=this.normalize(t),"mousedown"===e.mouseIsDown&&this.drag(t),(this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop))&&!e.openMenu&&this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=p(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf("highcharts-container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=(t=t.relatedTarget||t.toElement)&&t.point&&t.point.series;!e||e.options.stickyTracking||this.inClass(t,"highcharts-tooltip")||i===e||e.onMouseOut()},onContainerClick:function(e){var i=this.chart,n=i.hoverPoint,o=i.plotLeft,s=i.plotTop,e=this.normalize(e);e.cancelBubble=!0,i.cancelClick||(n&&this.inClass(e.target,"highcharts-tracker")?(ee(n.series,"click",t(e,{point:n})),i.hoverPoint&&n.firePointEvent("click",e)):(t(e,this.getCoordinates(e)),i.isInsidePlot(e.chartX-o,e.chartY-s)&&ee(i,"click",e)))},setDOMEvents:function(){var t=this,e=t.chart.container;e.onmousedown=function(e){t.onContainerMouseDown(e)},e.onmousemove=function(e){t.onContainerMouseMove(e)},e.onclick=function(e){t.onContainerClick(e)},Qt(e,"mouseleave",t.onContainerMouseLeave),1===Ht&&Qt(ht,"mouseup",t.onDocumentMouseUp),F&&(e.ontouchstart=function(e){t.onContainerTouchStart(e)},e.ontouchmove=function(e){t.onContainerTouchMove(e)},1===Ht&&Qt(ht,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;te(this.chart.container,"mouseleave",this.onContainerMouseLeave),Ht||(te(ht,"mouseup",this.onDocumentMouseUp),te(ht,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout);for(t in this)this[t]=null}},t(Ft.Pointer.prototype,{pinchTranslate:function(t,e,i,n,o,s){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,i,n,o,s),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,i,n,o,s)},pinchTranslateDirection:function(t,e,i,n,o,s,r,a){var l,h,c,d=this.chart,p=t?"x":"y",u=t?"X":"Y",g="chart"+u,f=t?"width":"height",m=d["plot"+(t?"Left":"Top")],x=a||1,y=d.inverted,v=d.bounds[t?"h":"v"],b=1===e.length,k=e[0][g],w=i[0][g],S=!b&&e[1][g],A=!b&&i[1][g],i=function(){!b&&xt(k-S)>20&&(x=a||xt(w-A)/xt(k-S)),h=(m-w)/x+k,l=d["plot"+(t?"Width":"Height")]/x};i(),e=h,e<v.min?(e=v.min,c=!0):e+l>v.max&&(e=v.max-l,c=!0),c?(w-=.8*(w-r[p][0]),b||(A-=.8*(A-r[p][1])),i()):r[p]=[w,A],y||(s[p]=h-m,s[f]=l),s=y?1/x:x,o[f]=l,o[p]=e,n[y?t?"scaleY":"scaleX":"scale"+u]=x,n["translate"+u]=s*m+(w-s*k)},pinch:function(e){var i=this,n=i.chart,o=i.pinchDown,s=i.followTouchMove,r=e.touches,a=r.length,l=i.lastValidTouch,h=i.hasZoom,c=i.selectionMarker,d={},p=1===a&&(i.inClass(e.target,"highcharts-tracker")&&n.runTrackerClick||n.runChartClick),u={};(h||s)&&!p&&e.preventDefault(),Jt(r,function(t){return i.normalize(t)}),"touchstart"===e.type?(Kt(r,function(t,e){o[e]={chartX:t.chartX,chartY:t.chartY}}),l.x=[o[0].chartX,o[1]&&o[1].chartX],l.y=[o[0].chartY,o[1]&&o[1].chartY],Kt(n.axes,function(t){if(t.zoomEnabled){var e=n.bounds[t.horiz?"h":"v"],i=t.minPixelPadding,o=t.toPixels(t.dataMin),s=t.toPixels(t.dataMax),r=mt(o,s),o=ft(o,s);e.min=mt(t.pos,r-i),e.max=ft(t.pos+t.len,o+i)}})):o.length&&(c||(i.selectionMarker=c=t({destroy:Rt},n.plotBox)),i.pinchTranslate(o,r,d,c,u,l),i.hasPinched=h,i.scaleGroups(d,u),!h&&s&&1===a&&this.runPointActions(i.normalize(e)))},onContainerTouchStart:function(t){var e=this.chart;fe=e.index,1===t.touches.length?(t=this.normalize(t),e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)?(this.runPointActions(t),this.pinch(t)):this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchMove:function(t){(1===t.touches.length||2===t.touches.length)&&this.pinch(t)},onDocumentTouchEnd:function(t){Et[fe]&&Et[fe].pointer.drop(t)}}),ct.PointerEvent||ct.MSPointerEvent){var xe={},ye=!!ct.PointerEvent,ve=function(){var t,e=[];e.item=function(t){return this[t]};for(t in xe)xe.hasOwnProperty(t)&&e.push({pageX:xe[t].pageX,pageY:xe[t].pageY,target:xe[t].target});return e},be=function(t,e,i,n){t=t.originalEvent||t,"touch"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Et[fe]||(n(t),n=Et[fe].pointer,n[e]({type:i,target:t.currentTarget,preventDefault:Rt,touches:ve()}))};t(me.prototype,{onContainerPointerDown:function(t){be(t,"onContainerTouchStart","touchstart",function(t){xe[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}})},onContainerPointerMove:function(t){be(t,"onContainerTouchMove","touchmove",function(t){xe[t.pointerId]={pageX:t.pageX,pageY:t.pageY},xe[t.pointerId].target||(xe[t.pointerId].target=t.currentTarget)})},onDocumentPointerUp:function(t){be(t,"onContainerTouchEnd","touchend",function(t){delete xe[t.pointerId]})},batchMSEvents:function(t){t(this.chart.container,ye?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,ye?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(ht,ye?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),b(me.prototype,"init",function(t,e,i){t.call(this,e,i),(this.hasZoom||this.followTouchMove)&&f(e.container,{"-ms-touch-action":Xt,"touch-action":Xt})}),b(me.prototype,"setDOMEvents",function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(Qt)}),b(me.prototype,"destroy",function(t){this.batchMSEvents(te),t.call(this)})}var ke=Ft.Legend=function(t,e){this.init(t,e)};ke.prototype={init:function(t,i){var o=this,s=i.itemStyle,r=g(i.padding,8),a=i.itemMarginTop||0;this.options=i,i.enabled&&(o.baseline=n(s.fontSize)+3+a,o.itemStyle=s,o.itemHiddenStyle=e(s,i.itemHiddenStyle),o.itemMarginTop=a,o.padding=r,o.initialItemX=r,o.initialItemY=r-5,o.maxItemWidth=0,o.chart=t,o.itemHeight=0,o.lastLineHeight=0,o.symbolWidth=g(i.symbolWidth,16),o.pages=[],o.render(),Qt(o.chart,"endResize",function(){o.positionCheckboxes()}))},colorizeItem:function(t,e){var i,n=this.options,o=t.legendItem,s=t.legendLine,r=t.legendSymbol,a=this.itemHiddenStyle.color,n=e?n.itemStyle.color:a,l=e?t.legendColor||t.color||"#CCC":a,a=t.options&&t.options.marker,h={fill:l};if(o&&o.css({fill:n,color:n}),s&&s.attr({stroke:l}),r){if(a&&r.isMarker)for(i in h.stroke=l,a=t.convertAttribs(a))o=a[i],o!==Y&&(h[i]=o);r.attr(h)}},positionItem:function(t){var e=this.options,i=e.symbolPadding,e=!e.rtl,n=t._legendItemPos,o=n[0],n=n[1],s=t.checkbox;t.legendGroup&&t.legendGroup.translate(e?o:this.legendWidth-o-2*i-4,n),s&&(s.x=o,s.y=n)},destroyItem:function(t){var e=t.checkbox;Kt(["legendItem","legendLine","legendSymbol","legendGroup"],function(e){t[e]&&(t[e]=t[e].destroy())}),e&&M(t.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,Kt(this.allItems,function(o){var s,r=o.checkbox;r&&(s=e+r.y+(t||0)+3,f(r,{left:i.translateX+o.checkboxOffset+r.x-20+"px",top:s+"px",display:s>e-6&&e+n-6>s?"":Xt}))}))},renderTitle:function(){var t=this.padding,e=this.options.title,i=0;e.text&&(this.title||(this.title=this.chart.renderer.label(e.text,t-3,t-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(e.style).add(this.group)),t=this.title.getBBox(),i=t.height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:i})),this.titleHeight=i},renderItem:function(t){var i=this.chart,n=i.renderer,o=this.options,s="horizontal"===o.layout,r=this.symbolWidth,a=o.symbolPadding,l=this.itemStyle,h=this.itemHiddenStyle,c=this.padding,d=s?g(o.itemDistance,20):0,p=!o.rtl,u=o.width,f=o.itemMarginBottom||0,m=this.itemMarginTop,x=this.initialItemX,y=t.legendItem,v=t.series&&t.series.drawLegendSymbol?t.series:t,b=v.options,b=this.createCheckboxForItem&&b&&b.showCheckbox,w=o.useHTML;y||(t.legendGroup=n.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),v.drawLegendSymbol(this,t),t.legendItem=y=n.text(o.labelFormat?k(o.labelFormat,t):o.labelFormatter.call(t),p?r+a:-a,this.baseline,w).css(e(t.visible?l:h)).attr({align:p?"left":"right",zIndex:2}).add(t.legendGroup),this.setItemEvents&&this.setItemEvents(t,y,w,l,h),this.colorizeItem(t,t.visible),b&&this.createCheckboxForItem(t)),n=y.getBBox(),r=t.checkboxOffset=o.itemWidth||t.legendItemWidth||r+a+n.width+d+(b?20:0),this.itemHeight=a=pt(t.legendItemHeight||n.height),s&&this.itemX-x+r>(u||i.chartWidth-2*c-x-o.x)&&(this.itemX=x,this.itemY+=m+this.lastLineHeight+f,this.lastLineHeight=0),this.maxItemWidth=ft(this.maxItemWidth,r),this.lastItemY=m+this.itemY+f,this.lastLineHeight=ft(a,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],s?this.itemX+=r:(this.itemY+=m+a+f,this.lastLineHeight=a),this.offsetWidth=u||ft((s?this.itemX-x-d:r)+c,this.offsetWidth)},getAllItems:function(){var t=[];return Kt(this.chart.series,function(e){var i=e.options;g(i.showInLegend,d(i.linkedTo)?!1:Y,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))}),t},render:function(){var e,i,n,o,s=this,r=s.chart,a=r.renderer,l=s.group,h=s.box,c=s.options,d=s.padding,p=c.borderWidth,u=c.backgroundColor;s.itemX=s.initialItemX,s.itemY=s.initialItemY,s.offsetWidth=0,s.lastItemY=0,l||(s.group=l=a.g("legend").attr({zIndex:7}).add(),s.contentGroup=a.g().attr({zIndex:1}).add(l),s.scrollGroup=a.g().add(s.contentGroup)),s.renderTitle(),e=s.getAllItems(),T(e,function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)}),c.reversed&&e.reverse(),s.allItems=e,s.display=i=!!e.length,Kt(e,function(t){s.renderItem(t)}),n=c.width||s.offsetWidth,o=s.lastItemY+s.lastLineHeight+s.titleHeight,o=s.handleOverflow(o),(p||u)&&(n+=d,o+=d,h?n>0&&o>0&&(h[h.isNew?"attr":"animate"](h.crisp({width:n,height:o})),h.isNew=!1):(s.box=h=a.rect(0,0,n,o,c.borderRadius,p||0).attr({stroke:c.borderColor,"stroke-width":p||0,fill:u||Xt}).add(l).shadow(c.shadow),h.isNew=!0),h[i?"show":"hide"]()),s.legendWidth=n,s.legendHeight=o,Kt(e,function(t){s.positionItem(t)}),i&&l.align(t({width:n,height:o},c),!0,"spacingBox"),r.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,o=this.chart,s=o.renderer,r=this.options,a=r.y,a=o.spacingBox.height+("top"===r.verticalAlign?-a:a)-this.padding,l=r.maxHeight,h=this.clipRect,c=r.navigation,d=g(c.animation,!0),p=c.arrowSize||12,u=this.nav,f=this.pages,m=this.allItems;return"horizontal"===r.layout&&(a/=2),l&&(a=mt(a,l)),f.length=0,t>a&&!r.useHTML?(this.clipHeight=e=a-20-this.titleHeight-this.padding,this.currentPage=g(this.currentPage,1),this.fullHeight=t,Kt(m,function(t,n){var o=t._legendItemPos[1],s=pt(t.legendItem.getBBox().height),r=f.length;(!r||o-f[r-1]>e&&(i||o)!==f[r-1])&&(f.push(i||o),r++),n===m.length-1&&o+s-f[r-1]>e&&f.push(o),o!==i&&(i=o)}),h||(h=n.clipRect=s.clipRect(0,this.padding,9999,0),n.contentGroup.clip(h)),h.attr({height:e}),u||(this.nav=u=s.g().attr({zIndex:1}).add(this.group),this.up=s.symbol("triangle",0,0,p,p).on("click",function(){n.scroll(-1,d)}).add(u),this.pager=s.text("",15,10).css(c.style).add(u),this.down=s.symbol("triangle-down",0,0,p,p).on("click",function(){n.scroll(1,d)}).add(u)),n.scroll(0),t=a):u&&(h.attr({height:o.chartHeight}),u.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i=this.pages,n=i.length,o=this.currentPage+t,s=this.clipHeight,r=this.options.navigation,a=r.activeColor,r=r.inactiveColor,l=this.pager,h=this.padding;o>n&&(o=n),o>0&&(e!==Y&&B(e,this.chart),this.nav.attr({translateX:h,translateY:s+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===o?r:a}).css({cursor:1===o?"default":"pointer"}),l.attr({text:o+"/"+n}),this.down.attr({x:18+this.pager.getBBox().width,fill:o===n?r:a}).css({cursor:o===n?"default":"pointer"}),i=-i[o-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=o,this.positionCheckboxes(i))}},Vt=Ft.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||12;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-5-i/2,t.symbolWidth,i,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i=this.options,n=i.marker;e=t.symbolWidth;var o,s=this.chart.renderer,r=this.legendGroup,t=t.baseline-pt(.3*s.fontMetrics(t.options.itemStyle.fontSize).b);i.lineWidth&&(o={"stroke-width":i.lineWidth},i.dashStyle&&(o.dashstyle=i.dashStyle),this.legendLine=s.path(["M",0,t,"L",e,t]).attr(o).add(r)),n&&n.enabled!==!1&&(i=n.radius,this.legendSymbol=e=s.symbol(this.symbol,e/2-i,t-i,2*i,2*i).add(r),e.isMarker=!0)}},(/Trident\/7\.0/.test(wt)||Lt)&&b(ke.prototype,"positionItem",function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};n(),setTimeout(n)}),H.prototype={init:function(t,i){var n,o=t.series;t.series=null,n=e(V,t),n.series=t.series=o,this.userOptions=t,o=n.chart,this.margin=this.splashArray("margin",o),this.spacing=this.splashArray("spacing",o);var s=o.events;this.bounds={h:{},v:{}},this.callback=i,this.isResizing=0,this.options=n,this.axes=[],this.series=[],this.hasCartesianSeries=o.showAxes;var r,a=this;if(a.index=Et.length,Et.push(a),Ht++,o.reflow!==!1&&Qt(a,"load",function(){a.initReflow()}),s)for(r in s)Qt(a,r,s[r]);a.xAxis=[],a.yAxis=[],a.animation=Bt?!1:g(o.animation,!0),a.pointCount=0,a.counters=new A,a.firstRender()},initSeries:function(t){var e=this.options.chart;return(e=Nt[t.type||e.type||e.defaultSeriesType])||D(17,!0),e=new e,e.init(this,t),e},isInsidePlot:function(t,e,i){var n=i?e:t,t=i?t:e;return n>=0&&n<=this.plotWidth&&t>=0&&t<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&Kt(this.axes,function(t){t.adjustTickAmount()}),this.maxTicks=null},redraw:function(e){var i,n,o=this.axes,s=this.series,r=this.pointer,a=this.legend,l=this.isDirtyLegend,h=this.isDirtyBox,c=s.length,d=c,p=this.renderer,u=p.isHidden(),g=[];for(B(e,this),u&&this.cloneRenderTo(),this.layOutTitles();d--;)if(e=s[d],e.options.stacking&&(i=!0,e.isDirty)){n=!0;break}if(n)for(d=c;d--;)e=s[d],e.options.stacking&&(e.isDirty=!0);Kt(s,function(t){t.isDirty&&"point"===t.options.legendType&&(l=!0)}),l&&a.options.enabled&&(a.render(),this.isDirtyLegend=!1),i&&this.getStacks(),this.hasCartesianSeries&&(this.isResizing||(this.maxTicks=null,Kt(o,function(t){t.setScale()})),this.adjustTickAmounts(),this.getMargins(),Kt(o,function(t){t.isDirty&&(h=!0)}),Kt(o,function(e){e.isDirtyExtremes&&(e.isDirtyExtremes=!1,g.push(function(){ee(e,"afterSetExtremes",t(e.eventArgs,e.getExtremes())),delete e.eventArgs})),(h||i)&&e.redraw()})),h&&this.drawChartBox(),Kt(s,function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()}),r&&r.reset(!0),p.draw(),ee(this,"redraw"),u&&this.cloneRenderTo(!0),Kt(g,function(t){t.call()})},get:function(t){var e,i,n=this.axes,o=this.series;for(e=0;e<n.length;e++)if(n[e].options.id===t)return n[e];for(e=0;e<o.length;e++)if(o[e].options.id===t)return o[e];for(e=0;e<o.length;e++)for(i=o[e].points||[],n=0;n<i.length;n++)if(i[n].id===t)return i[n];return null},getAxes:function(){var t=this,e=this.options,i=e.xAxis=u(e.xAxis||{}),e=e.yAxis=u(e.yAxis||{});Kt(i,function(t,e){t.index=e,t.isX=!0}),Kt(e,function(t,e){t.index=e}),i=i.concat(e),Kt(i,function(e){new E(t,e)}),t.adjustTickAmounts()},getSelectedPoints:function(){var t=[];return Kt(this.series,function(e){t=t.concat($t(e.points||[],function(t){return t.selected}))}),t},getSelectedSeries:function(){return $t(this.series,function(t){return t.selected})},getStacks:function(){var t=this;Kt(t.yAxis,function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)}),Kt(t.series,function(e){!e.options.stacking||e.visible!==!0&&t.options.chart.ignoreHiddenSeries!==!1||(e.stackKey=e.type+g(e.options.stack,""))})},setTitle:function(t,i,n){var o,s,r=this,a=r.options;s=a.title=e(a.title,t),o=a.subtitle=e(a.subtitle,i),a=o,Kt([["title",t,s],["subtitle",i,a]],function(t){var e=t[0],i=r[e],n=t[1],t=t[2];i&&n&&(r[e]=i=i.destroy()),t&&t.text&&!i&&(r[e]=r.renderer.text(t.text,0,0,t.useHTML).attr({align:t.align,"class":"highcharts-"+e,zIndex:t.zIndex||4}).css(t.style).add())}),r.layOutTitles(n)},layOutTitles:function(e){var i=0,n=this.title,o=this.subtitle,s=this.options,r=s.title,s=s.subtitle,a=this.spacingBox.width-44;!n||(n.css({width:(r.width||a)+"px"}).align(t({y:15},r),!1,"spacingBox"),r.floating||r.verticalAlign)||(i=n.getBBox().height),o&&(o.css({width:(s.width||a)+"px"
}).align(t({y:i+r.margin},s),!1,"spacingBox"),!s.floating&&!s.verticalAlign&&(i=gt(i+o.getBBox().height))),n=this.titleOffset!==i,this.titleOffset=i,!this.isDirtyBox&&n&&(this.isDirtyBox=n,this.hasRendered&&g(e,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,e=t.width,t=t.height,i=this.renderToClone||this.renderTo;d(e)||(this.containerWidth=jt(i,"width")),d(t)||(this.containerHeight=jt(i,"height")),this.chartWidth=ft(0,e||this.containerWidth||600),this.chartHeight=ft(0,g(t,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),M(e),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),f(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),ht.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var e,i,s,r,a=this.options.chart;this.renderTo=e=a.renderTo,r="highcharts-"+zt++,o(e)&&(this.renderTo=e=ht.getElementById(e)),e||D(13,!0),i=n(p(e,"data-highcharts-chart")),!isNaN(i)&&Et[i]&&Et[i].hasRendered&&Et[i].destroy(),p(e,"data-highcharts-chart",this.index),e.innerHTML="",!a.skipClone&&!e.offsetWidth&&this.cloneRenderTo(),this.getChartSize(),i=this.chartWidth,s=this.chartHeight,this.container=e=m(Wt,{className:"highcharts-container"+(a.className?" "+a.className:""),id:r},t({position:"relative",overflow:"hidden",width:i+"px",height:s+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},a.style),this.renderToClone||e),this._cursor=e.style.cursor,this.renderer=a.forExport?new ce(e,i,s,a.style,!0):new N(e,i,s,a.style),Bt&&this.renderer.create(this,e,i,s)},getMargins:function(){var t,e=this.spacing,i=this.legend,n=this.margin,o=this.options.legend,s=g(o.margin,20),r=o.x,a=o.y,l=o.align,h=o.verticalAlign,c=this.titleOffset;this.resetMargins(),t=this.axisOffset,c&&!d(n[0])&&(this.plotTop=ft(this.plotTop,c+this.options.title.margin+e[0])),i.display&&!o.floating&&("right"===l?d(n[1])||(this.marginRight=ft(this.marginRight,i.legendWidth-r+s+e[1])):"left"===l?d(n[3])||(this.plotLeft=ft(this.plotLeft,i.legendWidth+r+s+e[3])):"top"===h?d(n[0])||(this.plotTop=ft(this.plotTop,i.legendHeight+a+s+e[0])):"bottom"!==h||d(n[2])||(this.marginBottom=ft(this.marginBottom,i.legendHeight-a+s+e[2]))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&Kt(this.axes,function(t){t.getOffset()}),d(n[3])||(this.plotLeft+=t[3]),d(n[0])||(this.plotTop+=t[0]),d(n[2])||(this.marginBottom+=t[2]),d(n[1])||(this.marginRight+=t[1]),this.setChartSize()},reflow:function(t){var e=this,i=e.options.chart,n=e.renderTo,o=i.width||jt(n,"width"),s=i.height||jt(n,"height"),i=t?t.target:ct,n=function(){e.container&&(e.setSize(o,s,!1),e.hasUserSize=null)};e.hasUserSize||!o||!s||i!==ct&&i!==ht||(o===e.containerWidth&&s===e.containerHeight||(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(n,100):n()),e.containerWidth=o,e.containerHeight=s)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};Qt(ct,"resize",e),Qt(t,"destroy",function(){te(ct,"resize",e)})},setSize:function(t,e,i){var n,o,s,r=this;r.isResizing+=1,s=function(){r&&ee(r,"endResize",null,function(){r.isResizing-=1})},B(i,r),r.oldChartHeight=r.chartHeight,r.oldChartWidth=r.chartWidth,d(t)&&(r.chartWidth=n=ft(0,pt(t)),r.hasUserSize=!!n),d(e)&&(r.chartHeight=o=ft(0,pt(e))),(U?ne:f)(r.container,{width:n+"px",height:o+"px"},U),r.setChartSize(!0),r.renderer.setSize(n,o,i),r.maxTicks=null,Kt(r.axes,function(t){t.isDirty=!0,t.setScale()}),Kt(r.series,function(t){t.isDirty=!0}),r.isDirtyLegend=!0,r.isDirtyBox=!0,r.layOutTitles(),r.getMargins(),r.redraw(i),r.oldChartHeight=null,ee(r,"resize"),U===!1?s():setTimeout(s,U&&U.duration||500)},setChartSize:function(t){var e,i,n,o,s=this.inverted,r=this.renderer,a=this.chartWidth,l=this.chartHeight,h=this.options.chart,c=this.spacing,d=this.clipOffset;this.plotLeft=e=pt(this.plotLeft),this.plotTop=i=pt(this.plotTop),this.plotWidth=n=ft(0,pt(a-e-this.marginRight)),this.plotHeight=o=ft(0,pt(l-i-this.marginBottom)),this.plotSizeX=s?o:n,this.plotSizeY=s?n:o,this.plotBorderWidth=h.plotBorderWidth||0,this.spacingBox=r.spacingBox={x:c[3],y:c[0],width:a-c[3]-c[1],height:l-c[0]-c[2]},this.plotBox=r.plotBox={x:e,y:i,width:n,height:o},a=2*ut(this.plotBorderWidth/2),s=gt(ft(a,d[3])/2),r=gt(ft(a,d[0])/2),this.clipBox={x:s,y:r,width:ut(this.plotSizeX-ft(a,d[1])/2-s),height:ut(this.plotSizeY-ft(a,d[2])/2-r)},t||Kt(this.axes,function(t){t.setAxisSize(),t.setAxisTranslation()})},resetMargins:function(){var t=this.spacing,e=this.margin;this.plotTop=g(e[0],t[0]),this.marginRight=g(e[1],t[1]),this.marginBottom=g(e[2],t[2]),this.plotLeft=g(e[3],t[3]),this.axisOffset=[0,0,0,0],this.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e=this.options.chart,i=this.renderer,n=this.chartWidth,o=this.chartHeight,s=this.chartBackground,r=this.plotBackground,a=this.plotBorder,l=this.plotBGImage,h=e.borderWidth||0,c=e.backgroundColor,d=e.plotBackgroundColor,p=e.plotBackgroundImage,u=e.plotBorderWidth||0,g=this.plotLeft,f=this.plotTop,m=this.plotWidth,x=this.plotHeight,y=this.plotBox,v=this.clipRect,b=this.clipBox;t=h+(e.shadow?8:0),(h||c)&&(s?s.animate(s.crisp({width:n-t,height:o-t})):(s={fill:c||Xt},h&&(s.stroke=e.borderColor,s["stroke-width"]=h),this.chartBackground=i.rect(t/2,t/2,n-t,o-t,e.borderRadius,h).attr(s).addClass("highcharts-background").add().shadow(e.shadow))),d&&(r?r.animate(y):this.plotBackground=i.rect(g,f,m,x,0).attr({fill:d}).add().shadow(e.plotShadow)),p&&(l?l.animate(y):this.plotBGImage=i.image(p,g,f,m,x).add()),v?v.animate({width:b.width,height:b.height}):this.clipRect=i.clipRect(b),u&&(a?a.animate(a.crisp({x:g,y:f,width:m,height:x})):this.plotBorder=i.rect(g,f,m,x,0,-u).attr({stroke:e.plotBorderColor,"stroke-width":u,fill:Xt,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,o=n.options.chart,s=n.options.series;Kt(["inverted","angular","polar"],function(r){for(t=Nt[o.type||o.defaultSeriesType],i=n[r]||o[r]||t&&t.prototype[r],e=s&&s.length;!i&&e--;)(t=Nt[s[e].type])&&t.prototype[r]&&(i=!0);n[r]=i})},linkSeries:function(){var t=this,e=t.series;Kt(e,function(t){t.linkedSeries.length=0}),Kt(e,function(e){var i=e.options.linkedTo;o(i)&&(i=":previous"===i?t.series[e.index-1]:t.get(i))&&(i.linkedSeries.push(e),e.linkedParent=i)})},renderSeries:function(){Kt(this.series,function(t){t.translate(),t.setTooltipPoints&&t.setTooltipPoints(),t.render()})},render:function(){var e,i=this,o=i.axes,s=i.renderer,r=i.options,a=r.labels,l=r.credits;i.setTitle(),i.legend=new ke(i,r.legend),i.getStacks(),Kt(o,function(t){t.setScale()}),i.getMargins(),i.maxTicks=null,Kt(o,function(t){t.setTickPositions(!0),t.setMaxTicks()}),i.adjustTickAmounts(),i.getMargins(),i.drawChartBox(),i.hasCartesianSeries&&Kt(o,function(t){t.render()}),i.seriesGroup||(i.seriesGroup=s.g("series-group").attr({zIndex:3}).add()),i.renderSeries(),a.items&&Kt(a.items,function(e){var o=t(a.style,e.style),r=n(o.left)+i.plotLeft,l=n(o.top)+i.plotTop+12;delete o.left,delete o.top,s.text(e.html,r,l).attr({zIndex:2}).css(o).add()}),l.enabled&&!i.credits&&(e=l.href,i.credits=s.text(l.text,0,0).on("click",function(){e&&(location.href=e)}).attr({align:l.position.align,zIndex:8}).css(l.style).add().align(l.position)),i.hasRendered=!0},destroy:function(){var t,e=this,i=e.axes,n=e.series,o=e.container,s=o&&o.parentNode;for(ee(e,"destroy"),Et[e.index]=Y,Ht--,e.renderTo.removeAttribute("data-highcharts-chart"),te(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();Kt("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())}),o&&(o.innerHTML="",te(o),s&&M(o));for(t in e)delete e[t]},isReadyToRender:function(){var t=this;return!Dt&&ct==ct.top&&"complete"!==ht.readyState||Bt&&!ct.canvg?(Bt?ue.push(function(){t.firstRender()},t.options.global.canvasToolsURL):ht.attachEvent("onreadystatechange",function(){ht.detachEvent("onreadystatechange",t.firstRender),"complete"===ht.readyState&&t.firstRender()}),!1):!0},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),ee(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),Kt(e.series||[],function(e){t.initSeries(e)}),t.linkSeries(),ee(t,"beforeRender"),Ft.Pointer&&(t.pointer=new me(t,e)),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),Kt(t.callbacks,function(e){e.apply(t,[t])}),t.cloneRenderTo(!0),ee(t,"load"))},splashArray:function(t,e){var i=e[t],i=s(i)?i:[i,i,i,i];return[g(e[t+"Top"],i[0]),g(e[t+"Right"],i[1]),g(e[t+"Bottom"],i[2]),g(e[t+"Left"],i[3])]}},H.prototype.callbacks=[],pe=Ft.CenteredSeriesMixin={getCenter:function(){var t,e,i=this.options,o=this.chart,s=2*(i.slicedOffset||0),r=o.plotWidth-2*s,a=o.plotHeight-2*s,o=i.center,i=[g(o[0],"50%"),g(o[1],"50%"),i.size||"100%",i.innerSize||0],l=mt(r,a);return Jt(i,function(i,o){return e=/%$/.test(i),t=2>o||2===o&&e,(e?[r,a,l,l][o]*n(i)/100:i)+(t?s:0)})}};var we=function(){};we.prototype={init:function(t,e,i){return this.series=t,this.applyOptions(e,i),this.pointAttr={},t.options.colorByPoint&&(e=t.options.colors||t.chart.options.colors,this.color=this.color||e[t.colorCounter++],t.colorCounter===e.length)&&(t.colorCounter=0),t.chart.pointCount++,this},applyOptions:function(e,i){var n=this.series,o=n.pointValKey,e=we.prototype.optionsToObject.call(this,e);return t(this,e),this.options=this.options?t(this.options,e):e,o&&(this.y=this[o]),this.x===Y&&n&&(this.x=i===Y?n.autoIncrement():i),this},optionsToObject:function(t){var e={},i=this.series,n=i.pointArrayMap||["y"],o=n.length,s=0,a=0;if("number"==typeof t||null===t)e[n[0]]=t;else if(r(t))for(t.length>o&&(i=typeof t[0],"string"===i?e.name=t[0]:"number"===i&&(e.x=t[0]),s++);o>a;)e[n[a++]]=t[s++];else"object"==typeof t&&(e=t,t.dataLabels&&(i._hasPointLabels=!0),t.marker&&(i._hasPointMarkers=!0));return e},destroy:function(){var t,e=this.series.chart,i=e.hoverPoints;e.pointCount--,i&&(this.setState(),c(i,this),!i.length)&&(e.hoverPoints=null),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(te(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this);for(t in this)this[t]=null},destroyElements:function(){for(var t,e="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),i=6;i--;)t=e[i],this[t]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=g(i.valueDecimals,""),o=i.valuePrefix||"",s=i.valueSuffix||"";return Kt(e.pointArrayMap||["y"],function(e){e="{point."+e,(o||s)&&(t=t.replace(e+"}",o+e+"}"+s)),t=t.replace(e+"}",e+":,."+n+"f}")}),k(t,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,o=this.series.options;(o.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&o.allowPointSelect&&(i=function(t){n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),ee(this,t,e,i)}};var Se=function(){};Se.prototype={isCartesian:!0,type:"line",pointClass:we,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(e,i){var n,o,s=this,r=e.series,a=function(t,e){return g(t.options.index,t._i)-g(e.options.index,e._i)};s.chart=e,s.options=i=s.setOptions(i),s.linkedSeries=[],s.bindAxes(),t(s,{name:i.name,state:"",pointAttr:{},visible:i.visible!==!1,selected:i.selected===!0}),Bt&&(i.animation=!1),o=i.events;for(n in o)Qt(s,n,o[n]);(o&&o.click||i.point&&i.point.events&&i.point.events.click||i.allowPointSelect)&&(e.runTrackerClick=!0),s.getColor(),s.getSymbol(),Kt(s.parallelArrays,function(t){s[t+"Data"]=[]}),s.setData(i.data,!1),s.isCartesian&&(e.hasCartesianSeries=!0),r.push(s),s._i=r.length-1,T(r,a),this.yAxis&&T(this.yAxis.series,a),Kt(r,function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)})},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;Kt(e.axisTypes||[],function(o){Kt(n[o],function(n){t=n.options,(i[o]===t.index||i[o]!==Y&&i[o]===t.id||i[o]===Y&&0===t.index)&&(n.series.push(e),e[o]=n,n.isDirty=!0)}),!e[o]&&e.optionalAxis!==o&&D(18,!0)})},updateParallelArrays:function(t,e){var i=t.series,n=arguments;Kt(i.parallelArrays,"number"==typeof e?function(n){var o="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=o}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))})},autoIncrement:function(){var t=this.options,e=this.xIncrement,e=g(e,t.pointStart,0);return this.pointInterval=g(this.pointInterval,t.pointInterval,1),this.xIncrement=e+this.pointInterval,e},getSegments:function(){var t,e=-1,i=[],n=this.points,o=n.length;if(o)if(this.options.connectNulls){for(t=o;t--;)null===n[t].y&&n.splice(t,1);n.length&&(i=[n])}else Kt(n,function(t,s){null===t.y?(s>e+1&&i.push(n.slice(e+1,s)),e=s):s===o-1&&i.push(n.slice(e+1,s+1))});this.segments=i},setOptions:function(t){var i=this.chart,n=i.options.plotOptions,i=i.userOptions||{},o=i.plotOptions||{},s=n[this.type];return this.userOptions=t,n=e(s,n.series,t),this.tooltipOptions=e(V.tooltip,V.plotOptions[this.type].tooltip,i.tooltip,o.series&&o.series.tooltip,o[this.type]&&o[this.type].tooltip,t.tooltip),null===s.marker&&delete n.marker,n},getColor:function(){var t,e=this.options,i=this.userOptions,n=this.chart.options.colors,o=this.chart.counters;t=e.color||se[this.type].color,t||e.colorByPoint||(d(i._colorIndex)?e=i._colorIndex:(i._colorIndex=o.color,e=o.color++),t=n[e]),this.color=t,o.wrapColor(n.length)},getSymbol:function(){var t=this.userOptions,e=this.options.marker,i=this.chart,n=i.options.symbols,i=i.counters;this.symbol=e.symbol,this.symbol||(d(t._symbolIndex)?t=t._symbolIndex:(t._symbolIndex=i.symbol,t=i.symbol++),this.symbol=n[t]),/^url/.test(this.symbol)&&(e.radius=0),i.wrapSymbol(n.length)},drawLegendSymbol:Vt.drawLineMarker,setData:function(t,e,i,n){var s,l=this,h=l.points,c=h&&h.length||0,d=l.options,p=l.chart,u=null,f=l.xAxis,m=f&&!!f.categories,x=l.tooltipPoints,y=d.turboThreshold,v=this.xData,b=this.yData,k=(s=l.pointArrayMap)&&s.length,t=t||[];if(s=t.length,e=g(e,!0),n===!1||!s||c!==s||l.cropped||l.hasGroupedData){if(l.xIncrement=null,l.pointRange=m?1:d.pointRange,l.colorCounter=0,Kt(this.parallelArrays,function(t){l[t+"Data"].length=0}),y&&s>y){for(i=0;null===u&&s>i;)u=t[i],i++;if(a(u)){for(m=g(d.pointStart,0),d=g(d.pointInterval,1),i=0;s>i;i++)v[i]=m,b[i]=t[i],m+=d;l.xIncrement=m}else if(r(u))if(k)for(i=0;s>i;i++)d=t[i],v[i]=d[0],b[i]=d.slice(1,k+1);else for(i=0;s>i;i++)d=t[i],v[i]=d[0],b[i]=d[1];else D(12)}else for(i=0;s>i;i++)t[i]!==Y&&(d={series:l},l.pointClass.prototype.applyOptions.apply(d,[t[i]]),l.updateParallelArrays(d,i),m&&d.name)&&(f.names[d.x]=d.name);for(o(b[0])&&D(14,!0),l.data=[],l.options.data=t,i=c;i--;)h[i]&&h[i].destroy&&h[i].destroy();x&&(x.length=0),f&&(f.minRange=f.userMinRange),l.isDirty=l.isDirtyData=p.isDirtyBox=!0,i=!1}else Kt(t,function(t,e){h[e].update(t,!1)});e&&p.redraw(i)},processData:function(t){var e,i=this.xData,n=this.yData,o=i.length;e=0;var s,r,a,l,h=this.xAxis,c=this.options,d=c.cropThreshold,p=0,u=this.isCartesian;if(u&&!this.isDirty&&!h.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(u&&this.sorted&&(!d||o>d||this.forceCrop)&&(a=h.min,l=h.max,i[o-1]<a||i[0]>l?(i=[],n=[]):(i[0]<a||i[o-1]>l)&&(e=this.cropData(this.xData,this.yData,a,l),i=e.xData,n=e.yData,e=e.start,s=!0,p=i.length)),o=i.length-1;o>=0;o--)t=i[o]-i[o-1],!s&&i[o]>a&&i[o]<l&&p++,t>0&&(r===Y||r>t)?r=t:0>t&&this.requireSorting&&D(15);this.cropped=s,this.cropStart=e,this.processedXData=i,this.processedYData=n,this.activePointCount=p,null===c.pointRange&&(this.pointRange=r||1),this.closestPointRange=r},cropData:function(t,e,i,n){var o,s=t.length,r=0,a=s,l=g(this.cropShoulder,1);for(o=0;s>o;o++)if(t[o]>=i){r=ft(0,o-l);break}for(;s>o;o++)if(t[o]>n){a=o+l;break}return{xData:t.slice(r,a),yData:e.slice(r,a),start:r,end:a}},generatePoints:function(){var t,e,i,n,o=this.options.data,s=this.data,r=this.processedXData,a=this.processedYData,l=this.pointClass,h=r.length,c=this.cropStart||0,d=this.hasGroupedData,p=[];for(s||d||(s=[],s.length=o.length,s=this.data=s),n=0;h>n;n++)e=c+n,d?p[n]=(new l).init(this,[r[n]].concat(u(a[n]))):(s[e]?i=s[e]:o[e]!==Y&&(s[e]=i=(new l).init(this,o[e],r[n])),p[n]=i);if(s&&(h!==(t=s.length)||d))for(n=0;t>n;n++)n===c&&!d&&(n+=h),s[n]&&(s[n].destroyElements(),s[n].plotX=Y);this.data=s,this.points=p},getExtremes:function(t){var e,i=this.yAxis,n=this.processedXData,o=[],s=0;e=this.xAxis.getExtremes();var r,a,l,h,c=e.min,d=e.max,t=t||this.stackedYData||this.processedYData;for(e=t.length,h=0;e>h;h++)if(a=n[h],l=t[h],r=null!==l&&l!==Y&&(!i.isLog||l.length||l>0),a=this.getExtremesFromAll||this.cropped||(n[h+1]||a)>=c&&(n[h-1]||a)<=d,r&&a)if(r=l.length)for(;r--;)null!==l[r]&&(o[s++]=l[r]);else o[s++]=l;this.dataMin=g(void 0,P(o)),this.dataMax=g(void 0,L(o))},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var t=this.options,e=t.stacking,i=this.xAxis,n=i.categories,o=this.yAxis,s=this.points,r=s.length,l=!!this.modifyValue,h=t.pointPlacement,c="between"===h||a(h),p=t.threshold,t=0;r>t;t++){var u=s[t],f=u.x,m=u.y,x=u.low,y=e&&o.stacks[(this.negStacks&&p>m?"-":"")+this.stackKey];o.isLog&&0>=m&&(u.y=m=null),u.plotX=i.translate(f,0,0,0,1,h,"flags"===this.type),e&&this.visible&&y&&y[f]&&(y=y[f],m=y.points[this.index+","+t],x=m[0],m=m[1],0===x&&(x=g(p,o.min)),o.isLog&&0>=x&&(x=null),u.total=u.stackTotal=y.total,u.percentage=y.total&&u.y/y.total*100,u.stackY=m,y.setOffset(this.pointXOffset||0,this.barW||0)),u.yBottom=d(x)?o.translate(x,0,1,0,1):null,l&&(m=this.modifyValue(m,u)),u.plotY="number"==typeof m&&m!==1/0?o.translate(m,0,1,0,1):Y,u.clientX=c?i.translate(f,0,0,0,1):u.plotX,u.negative=u.y<(p||0),u.category=n&&n[u.x]!==Y?n[u.x]:u.x}this.getSegments()},animate:function(e){var i,n=this.chart,o=n.renderer;i=this.options.animation;var r,a=this.clipBox||n.clipBox,l=n.inverted;i&&!s(i)&&(i=se[this.type].animation),r=["_sharedClip",i.duration,i.easing,a.height].join(","),e?(e=n[r],i=n[r+"m"],e||(n[r]=e=o.clipRect(t(a,{width:0})),n[r+"m"]=i=o.clipRect(-99,l?-n.plotLeft:-n.plotTop,99,l?n.chartWidth:n.chartHeight)),this.group.clip(e),this.markerGroup.clip(i),this.sharedClipKey=r):((e=n[r])&&e.animate({width:n.plotSizeX},i),n[r+"m"]&&n[r+"m"].animate({width:n.plotSizeX+99},i),this.animate=null)},afterAnimate:function(){var t=this.chart,e=this.sharedClipKey,i=this.group,n=this.clipBox;i&&this.options.clip!==!1&&(e&&n||i.clip(n?t.renderer.clipRect(n):t.clipRect),this.markerGroup.clip()),ee(this,"afterAnimate"),setTimeout(function(){e&&t[e]&&(n||(t[e]=t[e].destroy()),t[e+"m"]&&(t[e+"m"]=t[e+"m"].destroy()))},100)},drawPoints:function(){var e,i,n,o,s,r,a,l,h,c=this.points,d=this.chart;i=this.options.marker;var p,u=this.pointAttr[""],f=this.markerGroup,m=g(i.enabled,this.activePointCount<.5*this.xAxis.len/i.radius);if(i.enabled!==!1||this._hasPointMarkers)for(o=c.length;o--;)s=c[o],i=ut(s.plotX),n=s.plotY,h=s.graphic,a=s.marker||{},e=m&&a.enabled===Y||a.enabled,p=d.isInsidePlot(pt(i),n,d.inverted),e&&n!==Y&&!isNaN(n)&&null!==s.y?(e=s.pointAttr[s.selected?"select":""]||u,r=e.r,a=g(a.symbol,this.symbol),l=0===a.indexOf("url"),h?h[p?"show":"hide"](!0).animate(t({x:i-r,y:n-r},h.symbolName?{width:2*r,height:2*r}:{})):p&&(r>0||l)&&(s.graphic=d.renderer.symbol(a,i-r,n-r,2*r,2*r).attr(e).add(f))):h&&(s.graphic=h.destroy())},convertAttribs:function(t,e,i,n){var o,s,r=this.pointAttrToOptions,a={},t=t||{},e=e||{},i=i||{},n=n||{};for(o in r)s=r[o],a[o]=g(t[s],e[o],i[o],n[o]);return a},getAttribs:function(){var e,i=this,n=i.options,o=se[i.type].marker?n.marker:n,s=o.states,r=s.hover,a=i.color;e={stroke:a,fill:a};var l,h,c=i.points||[],p=[],u=i.pointAttrToOptions;h=i.hasPointSpecificOptions;var g=n.negativeColor,f=o.lineColor,m=o.fillColor;l=n.turboThreshold;var x;if(n.marker?(r.radius=r.radius||o.radius+2,r.lineWidth=r.lineWidth||o.lineWidth+1):r.color=r.color||he(r.color||a).brighten(r.brightness).get(),p[""]=i.convertAttribs(o,e),Kt(["hover","select"],function(t){p[t]=i.convertAttribs(s[t],p[""])}),i.pointAttr=p,a=c.length,!l||l>a||h)for(;a--;){if(l=c[a],(o=l.options&&l.options.marker||l.options)&&o.enabled===!1&&(o.radius=0),l.negative&&g&&(l.color=l.fillColor=g),h=n.colorByPoint||l.color,l.options)for(x in u)d(o[u[x]])&&(h=!0);h?(o=o||{},h=[],s=o.states||{},e=s.hover=s.hover||{},n.marker||(e.color=e.color||!l.options.color&&r.color||he(l.color).brighten(e.brightness||r.brightness).get()),e={color:l.color},m||(e.fillColor=l.color),f||(e.lineColor=l.color),h[""]=i.convertAttribs(t(e,o),p[""]),h.hover=i.convertAttribs(s.hover,p.hover,h[""]),h.select=i.convertAttribs(s.select,p.select,h[""])):h=p,l.pointAttr=h}},destroy:function(){var t,e,i,n,o,s=this,r=s.chart,a=/AppleWebKit\/533/.test(wt),l=s.data||[];for(ee(s,"destroy"),te(s),Kt(s.axisTypes||[],function(t){(o=s[t])&&(c(o.series,s),o.isDirty=o.forceRedraw=!0)}),s.legendItem&&s.chart.legend.destroyItem(s),e=l.length;e--;)(i=l[e])&&i.destroy&&i.destroy();s.points=null,clearTimeout(s.animationTimeout),Kt("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(e){s[e]&&(t=a&&"group"===e?"hide":"destroy",s[e][t]())}),r.hoverSeries===s&&(r.hoverSeries=null),c(r.series,s);for(n in s)delete s[n]},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return Kt(t,function(o,s){var r,a=o.plotX,l=o.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,o,s)):(i.push(s?"L":"M"),n&&s&&(r=t[s-1],"right"===n?i.push(r.plotX,l):"center"===n?i.push((r.plotX+a)/2,r.plotY,(r.plotX+a)/2,l):i.push(a,r.plotY)),i.push(o.plotX,o.plotY))}),i},getGraphPath:function(){var t,e=this,i=[],n=[];return Kt(e.segments,function(o){t=e.getSegmentPath(o),o.length>1?i=i.concat(t):n.push(o[0])}),e.singlePoints=n,e.graphPath=i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color]],n=e.lineWidth,o=e.dashStyle,s="square"!==e.linecap,r=this.getGraphPath(),a=e.negativeColor;a&&i.push(["graphNeg",a]),Kt(i,function(i,a){var l=i[0],h=t[l];h?(oe(h),h.animate({d:r})):n&&r.length&&(h={stroke:i[1],"stroke-width":n,fill:Xt,zIndex:1},o?h.dashstyle=o:s&&(h["stroke-linecap"]=h["stroke-linejoin"]="round"),t[l]=t.chart.renderer.path(r).attr(h).add(t.group).shadow(!a&&e.shadow))})},clipNeg:function(){var t,e=this.options,i=this.chart,n=i.renderer,o=e.negativeColor||e.negativeFillColor,s=this.graph,r=this.area,a=this.posClip,l=this.negClip;t=i.chartWidth;var h=i.chartHeight,c=ft(t,h),d=this.yAxis;o&&(s||r)&&(o=pt(d.toPixels(e.threshold||0,!0)),0>o&&(c-=o),e={x:0,y:0,width:c,height:o},c={x:0,y:o,width:c,height:c},i.inverted&&(e.height=c.y=i.plotWidth-o,n.isVML&&(e={x:i.plotWidth-o-i.plotLeft,y:0,width:t,height:h},c={x:o+i.plotLeft-t,y:0,width:i.plotLeft+o,height:t})),d.reversed?(i=c,t=e):(i=e,t=c),a?(a.animate(i),l.animate(t)):(this.posClip=a=n.clipRect(i),this.negClip=l=n.clipRect(t),s&&this.graphNeg&&(s.clip(a),this.graphNeg.clip(l)),r&&(r.clip(a),this.areaNeg.clip(l))))},invertGroups:function(){function t(){var t={width:e.yAxis.len,height:e.xAxis.len};Kt(["group","markerGroup"],function(i){e[i]&&e[i].attr(t).invert()})}var e=this,i=e.chart;e.xAxis&&(Qt(i,"resize",t),Qt(e,"destroy",function(){te(i,"resize",t)}),t(),e.invertGroups=t)},plotGroup:function(t,e,i,n,o){var s=this[t],r=!s;return r&&(this[t]=s=this.chart.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(o)),s[r?"attr":"animate"](this.getPlotBox()),s},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;return t.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,o=(t=n.animation)&&!!e.animate&&i.renderer.isSVG&&g(t.duration,500)||0,s=e.visible?"visible":"hidden",r=n.zIndex,a=e.hasRendered,l=i.seriesGroup;t=e.plotGroup("group","series",s,r,l),e.markerGroup=e.plotGroup("markerGroup","markers",s,r,l),o&&e.animate(!0),e.getAttribs(),t.inverted=e.isCartesian?i.inverted:!1,e.drawGraph&&(e.drawGraph(),e.clipNeg()),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&e.options.enableMouseTracking!==!1&&e.drawTracker(),i.inverted&&e.invertGroups(),n.clip!==!1&&!e.sharedClipKey&&!a&&t.clip(i.clipRect),o&&e.animate(),a||(o?e.animationTimeout=setTimeout(function(){e.afterAnimate()},o):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirtyData,i=this.group,n=this.xAxis,o=this.yAxis;i&&(t.inverted&&i.attr({width:t.plotWidth,height:t.plotHeight}),i.animate({translateX:g(n&&n.left,t.plotLeft),translateY:g(o&&o.top,t.plotTop)})),this.translate(),this.setTooltipPoints&&this.setTooltipPoints(!0),this.render(),e&&ee(this,"updatedData")}},W.prototype={destroy:function(){C(this,this.axis)},render:function(t){var e=this.options,i=e.format,i=i?k(i,this):e.formatter.call(this);this.label?this.label.attr({text:i,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(i,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:"hidden"}).add(t)},setOffset:function(t,e){var i=this.axis,n=i.chart,o=n.inverted,s=this.isNegative,r=i.translate(i.usePercentage?100:this.total,0,0,0,1),i=i.translate(0),i=xt(r-i),a=n.xAxis[0].translate(this.x)+t,l=n.plotHeight,s={x:o?s?r:r-i:a,y:o?l-a-e:s?l-r-i:l-r,width:o?i:e,height:o?e:i};(o=this.label)&&(o.align(this.alignOptions,null,s),s=o.alignAttr,o[this.options.crop===!1||n.isInsidePlot(s.x,s.y)?"show":"hide"](!0))}},E.prototype.buildStacks=function(){var t=this.series,e=g(this.options.reversedStacks,!0),i=t.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)t[e?i:t.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;i<t.length;i++)t[i].setPercentStacks()}},E.prototype.renderStackTotals=function(){var t,e,i=this.chart,n=i.renderer,o=this.stacks,s=this.stackTotalGroup;s||(this.stackTotalGroup=s=n.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),s.translate(i.plotLeft,i.plotTop);for(t in o)for(e in i=o[t])i[e].render(s)},Se.prototype.setStackedPoints=function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var t,e,i,n,o,s,r=this.processedXData,a=this.processedYData,l=[],h=a.length,c=this.options,d=c.threshold,p=c.stack,c=c.stacking,u=this.stackKey,g="-"+u,f=this.negStacks,m=this.yAxis,x=m.stacks,y=m.oldStacks;for(n=0;h>n;n++)o=r[n],s=a[n],i=this.index+","+n,e=(t=f&&d>s)?g:u,x[e]||(x[e]={}),x[e][o]||(y[e]&&y[e][o]?(x[e][o]=y[e][o],x[e][o].total=null):x[e][o]=new W(m,m.options.stackLabels,t,o,p)),e=x[e][o],e.points[i]=[e.cum||0],"percent"===c?(t=t?u:g,f&&x[t]&&x[t][o]?(t=x[t][o],e.total=t.total=ft(t.total,e.total)+xt(s)||0):e.total=I(e.total+(xt(s)||0))):e.total=I(e.total+(s||0)),e.cum=(e.cum||0)+(s||0),e.points[i].push(e.cum),l[n]=e.cum;"percent"===c&&(m.usePercentage=!0),this.stackedYData=l,m.oldStacks={}}},Se.prototype.setPercentStacks=function(){var t=this,e=t.stackKey,i=t.yAxis.stacks,n=t.processedXData;Kt([e,"-"+e],function(e){for(var o,s,r,a=n.length;a--;)s=n[a],o=(r=i[e]&&i[e][s])&&r.points[t.index+","+a],(s=o)&&(r=r.total?100/r.total:0,s[0]=I(s[0]*r),s[1]=I(s[1]*r),t.stackedYData[a]=s[1])})},t(H.prototype,{addSeries:function(t,e,i){var n,o=this;return t&&(e=g(e,!0),ee(o,"addSeries",{options:t},function(){n=o.initSeries(t),o.isDirtyLegend=!0,o.linkSeries(),e&&o.redraw(i)})),n},addAxis:function(t,i,n,o){var s=i?"xAxis":"yAxis",r=this.options;new E(this,e(t,{index:this[s].length,isX:i})),r[s]=u(r[s]||{}),r[s].push(t),g(n,!0)&&this.redraw(o)},showLoading:function(e){var i=this.options,n=this.loadingDiv,o=i.loading;n||(this.loadingDiv=n=m(Wt,{className:"highcharts-loading"},t(o.style,{zIndex:10,display:Xt}),this.container),this.loadingSpan=m("span",null,o.labelStyle,n)),this.loadingSpan.innerHTML=e||i.lang.loading,this.loadingShown||(f(n,{opacity:0,display:"",left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px"}),ne(n,{opacity:o.style.opacity},{duration:o.showDuration||0}),this.loadingShown=!0)},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&ne(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){f(e,{display:Xt})}}),this.loadingShown=!1}}),t(we.prototype,{update:function(t,e,i){var n,o=this,r=o.series,a=o.graphic,l=r.data,h=r.chart,c=r.options,e=g(e,!0);o.firePointEvent("update",{options:t},function(){o.applyOptions(t),s(t)&&(r.getAttribs(),a&&(t&&t.marker&&t.marker.symbol?o.graphic=a.destroy():a.attr(o.pointAttr[o.state||""])),t&&t.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy())),n=Zt(o,l),r.updateParallelArrays(o,n),c.data[n]=o.options,r.isDirty=r.isDirtyData=!0,!r.fixedBox&&r.hasCartesianSeries&&(h.isDirtyBox=!0),"point"===c.legendType&&h.legend.destroyItem(o),e&&h.redraw(i)})},remove:function(t,e){var i,n=this,o=n.series,s=o.points,r=o.chart,a=o.data;B(e,r),t=g(t,!0),n.firePointEvent("remove",null,function(){i=Zt(n,a),a.length===s.length&&s.splice(i,1),a.splice(i,1),o.options.data.splice(i,1),o.updateParallelArrays(n,"splice",i,1),n.destroy(),o.isDirty=!0,o.isDirtyData=!0,t&&r.redraw()})}}),t(Se.prototype,{addPoint:function(t,e,i,n){var o,s=this.options,r=this.data,a=this.graph,l=this.area,h=this.chart,c=this.xAxis&&this.xAxis.names,d=a&&a.shift||0,p=s.data,u=this.xData;if(B(n,h),i&&Kt([a,l,this.graphNeg,this.areaNeg],function(t){t&&(t.shift=d+1)}),l&&(l.isArea=!0),e=g(e,!0),n={series:this},this.pointClass.prototype.applyOptions.apply(n,[t]),a=n.x,l=u.length,this.requireSorting&&a<u[l-1])for(o=!0;l&&u[l-1]>a;)l--;this.updateParallelArrays(n,"splice",l,0,0),this.updateParallelArrays(n,l),c&&(c[a]=n.name),p.splice(l,0,t),o&&(this.data.splice(l,0,null),this.processData()),"point"===s.legendType&&this.generatePoints(),i&&(r[0]&&r[0].remove?r[0].remove(!1):(r.shift(),this.updateParallelArrays(n,"shift"),p.shift())),this.isDirtyData=this.isDirty=!0,e&&(this.getAttribs(),h.redraw())},remove:function(t,e){var i=this,n=i.chart,t=g(t,!0);i.isRemoving||(i.isRemoving=!0,ee(i,"remove",null,function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),t&&n.redraw(e)})),i.isRemoving=!1},update:function(i,n){var o,s=this.chart,r=this.type,a=Nt[r].prototype,i=e(this.userOptions,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},i);this.remove(!1);for(o in a)a.hasOwnProperty(o)&&(this[o]=Y);t(this,Nt[i.type||r].prototype),this.init(s,i),g(n,!0)&&s.redraw(!1)}}),t(E.prototype,{update:function(i,n){var o=this.chart,i=o.options[this.coll][this.options.index]=e(this.userOptions,i);this.destroy(!0),this._addedPlotLB=Y,this.init(o,t(i,{events:Y})),o.isDirtyBox=!0,g(n,!0)&&o.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,o=n.length;o--;)n[o]&&n[o].remove(!1);c(e.axes,this),c(e[i],this),e.options[i].splice(this.options.index,1),Kt(e[i],function(t,e){t.options.index=e}),this.destroy(),e.isDirtyBox=!0,g(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var Ae=x(Se);Nt.line=Ae,se.area=e(_t,{threshold:0});var Te=x(Se,{type:"area",getSegments:function(){var t,e,i,n,o,s=[],r=[],a=[],l=this.xAxis,h=this.yAxis,c=h.stacks[this.stackKey],d={},p=this.points,u=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(n=0;n<p.length;n++)d[p[n].x]=p[n];for(o in c)null!==c[o].total&&a.push(+o);a.sort(function(t,e){return t-e}),Kt(a,function(n){(!u||d[n]&&null!==d[n].y)&&(d[n]?r.push(d[n]):(t=l.translate(n),
i=c[n].percent?c[n].total?100*c[n].cum/c[n].total:0:c[n].cum,e=h.toPixels(i,!0),r.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:Rt})))}),r.length&&s.push(r)}else Se.prototype.getSegments.call(this),s=this.segments;this.segments=s},getSegmentPath:function(t){var e,i=Se.prototype.getSegmentPath.call(this,t),n=[].concat(i),o=this.options;e=i.length;var s,r=this.yAxis.getThreshold(o.threshold);if(3===e&&n.push("L",i[1],i[2]),o.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)s=g(t[e].yBottom,r),e<t.length-1&&o.step&&n.push(t[e+1].plotX,s),n.push(t[e].plotX,s);else this.closeSegment(n,t,r);return this.areaPath=this.areaPath.concat(n),i},closeSegment:function(t,e,i){t.push("L",e[e.length-1].plotX,i,"L",e[0].plotX,i)},drawGraph:function(){this.areaPath=[],Se.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=i.negativeColor,o=i.negativeFillColor,s=[["area",this.color,i.fillColor]];(n||o)&&s.push(["areaNeg",n,o]),Kt(s,function(n){var o=n[0],s=t[o];s?s.animate({d:e}):t[o]=t.chart.renderer.path(e).attr({fill:g(n[2],he(n[1]).setOpacity(g(i.fillOpacity,.75)).get()),zIndex:0}).add(t.group)})},drawLegendSymbol:Vt.drawRectangle});Nt.area=Te,se.spline=e(_t),Ae=x(Se,{type:"spline",getPointSpline:function(t,e,i){var n,o,s,r,a=e.plotX,l=e.plotY,h=t[i-1],c=t[i+1];if(h&&c){t=h.plotY,s=c.plotX;var d,c=c.plotY;n=(1.5*a+h.plotX)/2.5,o=(1.5*l+t)/2.5,s=(1.5*a+s)/2.5,r=(1.5*l+c)/2.5,d=(r-o)*(s-a)/(s-n)+l-r,o+=d,r+=d,o>t&&o>l?(o=ft(t,l),r=2*l-o):t>o&&l>o&&(o=mt(t,l),r=2*l-o),r>c&&r>l?(r=ft(c,l),o=2*l-r):c>r&&l>r&&(r=mt(c,l),o=2*l-r),e.rightContX=s,e.rightContY=r}return i?(e=["C",h.rightContX||h.plotX,h.rightContY||h.plotY,n||a,o||l,a,l],h.rightContX=h.rightContY=null):e=["M",a,l],e}}),Nt.spline=Ae,se.areaspline=e(se.area),Te=Te.prototype,Ae=x(Ae,{type:"areaspline",closedStacks:!0,getSegmentPath:Te.getSegmentPath,closeSegment:Te.closeSegment,drawGraph:Te.drawGraph,drawLegendSymbol:Vt.drawRectangle}),Nt.areaspline=Ae,se.column=e(_t,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,tooltip:{distance:6},threshold:0}),Ae=x(Se,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Se.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&Kt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)})},getColumnMetrics:function(){var t,e,i=this,n=i.options,o=i.xAxis,s=i.yAxis,r=o.reversed,a={},l=0;n.grouping===!1?l=1:Kt(i.chart.series,function(n){var o=n.options,r=n.yAxis;n.type===i.type&&n.visible&&s.len===r.len&&s.pos===r.pos&&(o.stacking?(t=n.stackKey,a[t]===Y&&(a[t]=l++),e=a[t]):o.grouping!==!1&&(e=l++),n.columnIndex=e)});var o=mt(xt(o.transA)*(o.ordinalSlope||n.pointRange||o.closestPointRange||o.tickInterval||1),o.len),h=o*n.groupPadding,c=(o-2*h)/l,p=n.pointWidth,n=d(p)?(c-p)/2:c*n.pointPadding,p=g(p,c-2*n);return i.columnMetrics={width:p,offset:n+(h+((r?l-(i.columnIndex||0):i.columnIndex)||0)*c-o/2)*(r?-1:1)}},translate:function(){var t=this,e=t.chart,i=t.options,n=t.borderWidth=g(i.borderWidth,t.activePointCount>.5*t.xAxis.len?0:1),o=t.yAxis,s=t.translatedThreshold=o.getThreshold(i.threshold),r=g(i.minPointLength,5),i=t.getColumnMetrics(),a=i.width,l=t.barW=gt(ft(a,1+2*n)),h=t.pointXOffset=i.offset,c=-(n%2?.5:0),d=n%2?.5:1;e.renderer.isVML&&e.inverted&&(d+=1),Se.prototype.translate.apply(t),Kt(t.points,function(i){var n,p=g(i.yBottom,s),u=mt(ft(-999-p,i.plotY),o.len+999+p),f=i.plotX+h,m=l,x=mt(u,p);n=ft(u,p)-x,xt(n)<r&&r&&(n=r,x=pt(xt(x-s)>r?p-r:s-(o.translate(i.y,0,1,0,1)<=s?r:0))),i.barX=f,i.pointWidth=a,i.tooltipPos=e.inverted?[o.len-u,t.xAxis.len-f-m/2]:[f+m/2,u],p=xt(f)<.5,m=pt(f+m)+c,f=pt(f)+c,m-=f,u=xt(x)<.5,n=pt(x+n)+d,x=pt(x)+d,n-=x,p&&(f+=1,m-=1),u&&(x-=1,n+=1),i.shapeType="rect",i.shapeArgs={x:f,y:x,width:m,height:n}})},getSymbol:Rt,drawLegendSymbol:Vt.drawRectangle,drawGraph:Rt,drawPoints:function(){var t,i,n,o=this,s=this.chart,r=o.options,a=s.renderer,l=r.animationLimit||250;Kt(o.points,function(h){var c=h.plotY,p=h.graphic;c===Y||isNaN(c)||null===h.y?p&&(h.graphic=p.destroy()):(t=h.shapeArgs,n=d(o.borderWidth)?{"stroke-width":o.borderWidth}:{},i=h.pointAttr[h.selected?"select":""]||o.pointAttr[""],p?(oe(p),p.attr(n)[s.pointCount<l?"animate":"attr"](e(t))):h.graphic=a[h.shapeType](t).attr(i).attr(n).add(o.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))})},animate:function(t){var e=this.yAxis,i=this.options,n=this.chart.inverted,o={};Dt&&(t?(o.scaleY=.001,t=mt(e.pos+e.len,ft(e.pos,e.toPixels(i.threshold))),n?o.translateX=t-e.len:o.translateY=t,this.group.attr(o)):(o.scaleY=1,o[n?"translateX":"translateY"]=e.pos,this.group.animate(o,this.options.animation),this.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&Kt(e.series,function(e){e.type===t.type&&(e.isDirty=!0)}),Se.prototype.remove.apply(t,arguments)}}),Nt.column=Ae,se.bar=e(se.column),Te=x(Ae,{type:"bar",inverted:!0}),Nt.bar=Te,se.scatter=e(_t,{lineWidth:0,tooltip:{headerFormat:'<span style="color:{series.color}">●</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"},stickyTracking:!1}),Te=x(Se,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],takeOrdinalPosition:!1,singularTooltips:!0,drawGraph:function(){this.options.lineWidth&&Se.prototype.drawGraph.call(this)}}),Nt.scatter=Te,se.pie=e(_t,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),_t={type:"pie",isCartesian:!1,pointClass:x(we,{init:function(){we.prototype.init.apply(this,arguments);var e,i=this;return i.y<0&&(i.y=null),t(i,{visible:i.visible!==!1,name:g(i.name,"Slice")}),e=function(t){i.slice("select"===t.type)},Qt(i,"select",e),Qt(i,"unselect",e),i},setVisible:function(t){var e=this,i=e.series,n=i.chart;e.visible=e.options.visible=t=t===Y?!e.visible:t,i.options.data[Zt(e,i.data)]=e.options,Kt(["graphic","dataLabel","connector","shadowGroup"],function(i){e[i]&&e[i][t?"show":"hide"](!0)}),e.legendItem&&n.legend.colorizeItem(e,t),!i.isDirty&&i.options.ignoreHiddenPoint&&(i.isDirty=!0,n.redraw())},slice:function(t,e,i){var n=this.series;B(i,n.chart),g(e,!0),this.sliced=this.options.sliced=t=d(t)?t:!this.sliced,n.options.data[Zt(this,n.data)]=this.options,t=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(t),this.shadowGroup&&this.shadowGroup.animate(t)},haloPath:function(t){var e=this.shapeArgs,i=this.series.chart;return this.series.chart.renderer.symbols.arc(i.plotLeft+e.x,i.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},singularTooltips:!0,getColor:Rt,animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(Kt(i,function(t){var i=t.graphic,t=t.shapeArgs;i&&(i.attr({r:e.center[3]/2,start:n,end:n}),i.animate({r:t.r,start:t.start,end:t.end},e.options.animation))}),e.animate=null)},setData:function(t,e,i,n){Se.prototype.setData.call(this,t,!1,i,n),this.processData(),this.generatePoints(),g(e,!0)&&this.chart.redraw(i)},generatePoints:function(){var t,e,i,n,o=0,s=this.options.ignoreHiddenPoint;for(Se.prototype.generatePoints.call(this),e=this.points,i=e.length,t=0;i>t;t++)n=e[t],o+=s&&!n.visible?0:n.y;for(this.total=o,t=0;i>t;t++)n=e[t],n.percentage=o>0?n.y/o*100:0,n.total=o},translate:function(t){this.generatePoints();var e,i,n,o,s,r=0,a=this.options,l=a.slicedOffset,h=l+a.borderWidth,c=a.startAngle||0,d=this.startAngleRad=bt/180*(c-90),c=(this.endAngleRad=bt/180*(g(a.endAngle,c+360)-90))-d,p=this.points,u=a.dataLabels.distance,a=a.ignoreHiddenPoint,f=p.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,i){return n=dt.asin(mt((e-t[1])/(t[2]/2+u),1)),t[0]+(i?-1:1)*yt(n)*(t[2]/2+u)},o=0;f>o;o++)s=p[o],e=d+r*c,a&&!s.visible||(r+=s.percentage/100),i=d+r*c,s.shapeType="arc",s.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:pt(1e3*e)/1e3,end:pt(1e3*i)/1e3},n=(i+e)/2,n>1.5*bt?n-=2*bt:-bt/2>n&&(n+=2*bt),s.slicedTranslation={translateX:pt(yt(n)*l),translateY:pt(vt(n)*l)},e=yt(n)*t[2]/2,i=vt(n)*t[2]/2,s.tooltipPos=[t[0]+.7*e,t[1]+.7*i],s.half=-bt/2>n||n>bt/2?1:0,s.angle=n,h=mt(h,u/2),s.labelPos=[t[0]+e+yt(n)*u,t[1]+i+vt(n)*u,t[0]+e+yt(n)*h,t[1]+i+vt(n)*h,t[0]+e,t[1]+i,0>u?"center":s.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var e,i,n,o,s=this,r=s.chart.renderer,a=s.options.shadow;a&&!s.shadowGroup&&(s.shadowGroup=r.g("shadow").add(s.group)),Kt(s.points,function(l){i=l.graphic,o=l.shapeArgs,n=l.shadowGroup,a&&!n&&(n=l.shadowGroup=r.g("shadow").add(s.shadowGroup)),e=l.sliced?l.slicedTranslation:{translateX:0,translateY:0},n&&n.attr(e),i?i.animate(t(o,e)):l.graphic=i=r[l.shapeType](o).setRadialReference(s.center).attr(l.pointAttr[l.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(e).add(s.group).shadow(a,n),void 0!==l.visible&&l.setVisible(l.visible)})},sortByAngle:function(t,e){t.sort(function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e})},drawLegendSymbol:Vt.drawRectangle,getCenter:pe.getCenter,getSymbol:Rt},_t=x(Se,_t),Nt.pie=_t,Se.prototype.drawDataLabels=function(){var i,n,o,s,r=this,a=r.options,l=a.cursor,h=a.dataLabels,c=r.points;(h.enabled||r._hasPointLabels)&&(r.dlProcessOptions&&r.dlProcessOptions(h),s=r.plotGroup("dataLabelsGroup","data-labels","hidden",h.zIndex||6),!r.hasRendered&&g(h.defer,!0)&&(s.attr({opacity:0}),Qt(r,"afterAnimate",function(){r.dataLabelsGroup.show()[a.animation?"animate":"attr"]({opacity:1},{duration:200})})),n=h,Kt(c,function(a){var c,p,u,f=a.dataLabel,m=a.connector,x=!0;if(i=a.options&&a.options.dataLabels,c=g(i&&i.enabled,n.enabled),f&&!c)a.dataLabel=f.destroy();else if(c){if(h=e(n,i),c=h.rotation,p=a.getLabelConfig(),o=h.format?k(h.format,p):h.formatter.call(p,h),h.style.color=g(h.color,h.style.color,r.color,"black"),f)d(o)?(f.attr({text:o}),x=!1):(a.dataLabel=f=f.destroy(),m&&(a.connector=m.destroy()));else if(d(o)){f={fill:h.backgroundColor,stroke:h.borderColor,"stroke-width":h.borderWidth,r:h.borderRadius||0,rotation:c,padding:h.padding,zIndex:1};for(u in f)f[u]===Y&&delete f[u];f=a.dataLabel=r.chart.renderer[c?"text":"label"](o,0,-999,null,null,null,h.useHTML).attr(f).css(t(h.style,l&&{cursor:l})).add(s).shadow(h.shadow)}f&&r.alignDataLabel(a,f,h,null,x)}}))},Se.prototype.alignDataLabel=function(e,i,n,o,s){var r=this.chart,a=r.inverted,l=g(e.plotX,-999),h=g(e.plotY,-999),c=i.getBBox();(e=this.visible&&(e.series.forceDL||r.isInsidePlot(l,pt(h),a)||o&&r.isInsidePlot(l,a?o.x+1:o.y+o.height-1,a)))&&(o=t({x:a?r.plotWidth-h:l,y:pt(a?r.plotHeight-l:h),width:0,height:0},o),t(n,{width:c.width,height:c.height}),n.rotation?(a={align:n.align,x:o.x+n.x+o.width/2,y:o.y+n.y+o.height/2},i[s?"attr":"animate"](a)):(i.align(n,null,o),a=i.alignAttr,"justify"===g(n.overflow,"justify")?this.justifyDataLabel(i,n,a,c,o,s):g(n.crop,!0)&&(e=r.isInsidePlot(a.x,a.y)&&r.isInsidePlot(a.x+c.width,a.y+c.height)))),e||(i.attr({y:-999}),i.placed=!1)},Se.prototype.justifyDataLabel=function(t,e,i,n,o,s){var r,a,l=this.chart,h=e.align,c=e.verticalAlign;r=i.x,0>r&&("right"===h?e.align="left":e.x=-r,a=!0),r=i.x+n.width,r>l.plotWidth&&("left"===h?e.align="right":e.x=l.plotWidth-r,a=!0),r=i.y,0>r&&("bottom"===c?e.verticalAlign="top":e.y=-r,a=!0),r=i.y+n.height,r>l.plotHeight&&("top"===c?e.verticalAlign="bottom":e.y=l.plotHeight-r,a=!0),a&&(t.placed=!s,t.align(e,null,o))},Nt.pie&&(Nt.pie.prototype.drawDataLabels=function(){var t,e,i,n,o,s,r,a,l,h,c,d,p=this,u=p.data,f=p.chart,m=p.options.dataLabels,x=g(m.connectorPadding,10),y=g(m.connectorWidth,1),v=f.plotWidth,f=f.plotHeight,b=g(m.softConnector,!0),k=m.distance,w=p.center,S=w[2]/2,A=w[1],T=k>0,P=[[],[]],C=[0,0,0,0],M=function(t,e){return e.y-t.y};if(p.visible&&(m.enabled||p._hasPointLabels)){for(Se.prototype.drawDataLabels.apply(p),Kt(u,function(t){t.dataLabel&&t.visible&&P[t.half].push(t)}),c=0;!r&&u[c];)r=u[c]&&u[c].dataLabel&&(u[c].dataLabel.getBBox().height||21),c++;for(c=2;c--;){var D,u=[],I=[],B=P[c],O=B.length;if(p.sortByAngle(B,c-.5),k>0){for(d=A-S-k;A+S+k>=d;d+=r)u.push(d);if(o=u.length,O>o){for(t=[].concat(B),t.sort(M),d=O;d--;)t[d].rank=d;for(d=O;d--;)B[d].rank>=o&&B.splice(d,1);O=B.length}for(d=0;O>d;d++){t=B[d],s=t.labelPos,t=9999;var z,R;for(R=0;o>R;R++)z=xt(u[R]-s[1]),t>z&&(t=z,D=R);if(d>D&&null!==u[d])D=d;else for(O-d+D>o&&null!==u[d]&&(D=o-O+d);null===u[D];)D++;I.push({i:D,y:u[D]}),u[D]=null}I.sort(M)}for(d=0;O>d;d++)t=B[d],s=t.labelPos,n=t.dataLabel,h=t.visible===!1?"hidden":"visible",t=s[1],k>0?(o=I.pop(),D=o.i,l=o.y,(t>l&&null!==u[D+1]||l>t&&null!==u[D-1])&&(l=t)):l=t,a=m.justify?w[0]+(c?-1:1)*(S+k):p.getX(0===D||D===u.length-1?t:l,c),n._attr={visibility:h,align:s[6]},n._pos={x:a+m.x+({left:x,right:-x}[s[6]]||0),y:l+m.y-10},n.connX=a,n.connY=l,null===this.options.size&&(o=n.width,x>a-o?C[3]=ft(pt(o-a+x),C[3]):a+o>v-x&&(C[1]=ft(pt(a+o-v+x),C[1])),0>l-r/2?C[0]=ft(pt(-l+r/2),C[0]):l+r/2>f&&(C[2]=ft(pt(l+r/2-f),C[2])))}(0===L(C)||this.verifyDataLabelOverflow(C))&&(this.placeDataLabels(),T&&y&&Kt(this.points,function(t){e=t.connector,s=t.labelPos,(n=t.dataLabel)&&n._pos?(h=n._attr.visibility,a=n.connX,l=n.connY,i=b?["M",a+("left"===s[6]?5:-5),l,"C",a,l,2*s[2]-s[4],2*s[3]-s[5],s[2],s[3],"L",s[4],s[5]]:["M",a+("left"===s[6]?5:-5),l,"L",s[2],s[3],"L",s[4],s[5]],e?(e.animate({d:i}),e.attr("visibility",h)):t.connector=e=p.chart.renderer.path(i).attr({"stroke-width":y,stroke:m.connectorColor||t.color||"#606060",visibility:h}).add(p.dataLabelsGroup)):e&&(t.connector=e.destroy())}))}},Nt.pie.prototype.placeDataLabels=function(){Kt(this.points,function(t){var e,t=t.dataLabel;t&&((e=t._pos)?(t.attr(t._attr),t[t.moved?"animate":"attr"](e),t.moved=!0):t&&t.attr({y:-999}))})},Nt.pie.prototype.alignDataLabel=Rt,Nt.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,o=n.center,s=n=n.minSize||80;return null!==o[0]?s=ft(i[2]-ft(t[1],t[3]),n):(s=ft(i[2]-t[1]-t[3],n),i[0]+=(t[3]-t[1])/2),null!==o[1]?s=ft(mt(s,i[2]-ft(t[0],t[2])),n):(s=ft(mt(s,i[2]-t[0]-t[2]),n),i[1]+=(t[0]-t[2])/2),s<i[2]?(i[2]=s,this.translate(i),Kt(this.points,function(t){t.dataLabel&&(t.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),Nt.column&&(Nt.column.prototype.alignDataLabel=function(t,i,n,o,s){var r=this.chart,a=r.inverted,l=t.dlBox||t.shapeArgs,h=t.below||t.plotY>g(this.translatedThreshold,r.plotSizeY),c=g(n.inside,!!this.options.stacking);l&&(o=e(l),a&&(o={x:r.plotWidth-o.y-o.height,y:r.plotHeight-o.x-o.width,width:o.height,height:o.width}),!c)&&(a?(o.x+=h?0:o.width,o.width=0):(o.y+=h?o.height:0,o.height=0)),n.align=g(n.align,!a||c?"center":h?"right":"left"),n.verticalAlign=g(n.verticalAlign,a||c?"middle":h?"top":"bottom"),Se.prototype.alignDataLabel.call(this,t,i,n,o,s)});var Pe=Ft.TrackerMixin={drawTrackerPoint:function(){var t=this,e=t.chart,i=e.pointer,n=t.options.cursor,o=n&&{cursor:n},s=function(i){var n,o=i.target;for(e.hoverSeries!==t&&t.onMouseOver();o&&!n;)n=o.point,o=o.parentNode;n!==Y&&n!==e.hoverPoint&&n.onMouseOver(i)};Kt(t.points,function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)}),t._hasTracking||(Kt(t.trackerGroups,function(e){t[e]&&(t[e].addClass("highcharts-tracker").on("mouseover",s).on("mouseout",function(t){i.onTrackerMouseOut(t)}).css(o),F)&&t[e].on("touchstart",s)}),t._hasTracking=!0)},drawTrackerGraph:function(){var t,e=this,i=e.options,n=i.trackByArea,o=[].concat(n?e.areaPath:e.graphPath),s=o.length,r=e.chart,a=r.pointer,l=r.renderer,h=r.options.tooltip.snap,c=e.tracker,d=i.cursor,p=d&&{cursor:d},d=e.singlePoints,u=function(){r.hoverSeries!==e&&e.onMouseOver()},g="rgba(192,192,192,"+(Dt?1e-4:.002)+")";if(s&&!n)for(t=s+1;t--;)"M"===o[t]&&o.splice(t+1,0,o[t+1]-h,o[t+2],"L"),(t&&"M"===o[t]||t===s)&&o.splice(t,0,"L",o[t-2]+h,o[t-1]);for(t=0;t<d.length;t++)s=d[t],o.push("M",s.plotX-h,s.plotY,"L",s.plotX+h,s.plotY);c?c.attr({d:o}):(e.tracker=l.path(o).attr({"stroke-linejoin":"round",visibility:e.visible?"visible":"hidden",stroke:g,fill:n?g:Xt,"stroke-width":i.lineWidth+(n?0:2*h),zIndex:2}).add(e.group),Kt([e.tracker,e.markerGroup],function(t){t.addClass("highcharts-tracker").on("mouseover",u).on("mouseout",function(t){a.onTrackerMouseOut(t)}).css(p),F&&t.on("touchstart",u)}))}};Nt.column&&(Ae.prototype.drawTracker=Pe.drawTrackerPoint),Nt.pie&&(Nt.pie.prototype.drawTracker=Pe.drawTrackerPoint),Nt.scatter&&(Te.prototype.drawTracker=Pe.drawTrackerPoint),t(ke.prototype,{setItemEvents:function(t,e,i,n,o){var s=this;(i?e:t.legendGroup).on("mouseover",function(){t.setState("hover"),e.css(s.options.itemHoverStyle)}).on("mouseout",function(){e.css(t.visible?n:o),t.setState()}).on("click",function(e){var i=function(){t.setVisible()},e={browserEvent:e};t.firePointEvent?t.firePointEvent("legendItemClick",e,i):ee(t,"legendItemClick",e,i)})},createCheckboxForItem:function(t){t.checkbox=m("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),Qt(t.checkbox,"click",function(e){ee(t,"checkboxClick",{checked:e.target.checked},function(){t.select()})})}}),V.legend.itemStyle.cursor="pointer",t(H.prototype,{showResetZoom:function(){var t=this,e=V.lang,i=t.options.chart.resetZoomButton,n=i.theme,o=n.states,s="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,function(){t.zoomOut()},n,o&&o.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,s)},zoomOut:function(){var t=this;ee(t,"selection",{resetSelection:!0},function(){t.zoom()})},zoom:function(t){var e,i,n=this.pointer,o=!1;!t||t.resetSelection?Kt(this.axes,function(t){e=t.zoom()}):Kt(t.xAxis.concat(t.yAxis),function(t){var i=t.axis,s=i.isXAxis;(n[s?"zoomX":"zoomY"]||n[s?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(o=!0))}),i=this.resetZoomButton,o&&!i?this.showResetZoom():!o&&s(i)&&(this.resetZoomButton=i.destroy()),e&&this.redraw(g(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(t,e){var i,n=this,o=n.hoverPoints;o&&Kt(o,function(t){t.setState()}),Kt("xy"===e?[1,0]:[1],function(e){var o=t[e?"chartX":"chartY"],s=n[e?"xAxis":"yAxis"][0],r=n[e?"mouseDownX":"mouseDownY"],a=(s.pointRange||0)/2,l=s.getExtremes(),h=s.toValue(r-o,!0)+a,r=s.toValue(r+n[e?"plotWidth":"plotHeight"]-o,!0)-a;s.series.length&&h>mt(l.dataMin,l.min)&&r<ft(l.dataMax,l.max)&&(s.setExtremes(h,r,!1,!1,{trigger:"pan"}),i=!0),n[e?"mouseDownX":"mouseDownY"]=o}),i&&n.redraw(!1),f(n.container,{cursor:"move"})}}),t(we.prototype,{select:function(t,e){var i=this,n=i.series,o=n.chart,t=g(t,!i.selected);i.firePointEvent(t?"select":"unselect",{accumulate:e},function(){i.selected=i.options.selected=t,n.options.data[Zt(i,n.data)]=i.options,i.setState(t&&"select"),e||Kt(o.getSelectedPoints(),function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[Zt(t,n.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))})})},onMouseOver:function(t){var e=this.series,i=e.chart,n=i.tooltip,o=i.hoverPoint;o&&o!==this&&o.onMouseOut(),this.firePointEvent("mouseOver"),n&&(!n.shared||e.noSharedTooltip)&&n.refresh(this,t),this.setState("hover"),i.hoverPoint=this},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;e&&-1!==Zt(this,e)||(this.firePointEvent("mouseOut"),this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,i=e(this.series.options.point,this.options).events;this.events=i;for(t in i)Qt(this,t,i[t]);this.hasImportedEvents=!0}},setState:function(i,n){var o,s=this.plotX,r=this.plotY,a=this.series,l=a.options.states,h=se[a.type].marker&&a.options.marker,c=h&&!h.enabled,d=h&&h.states[i],p=d&&d.enabled===!1,u=a.stateMarkerGraphic,g=this.marker||{},f=a.chart,m=a.halo,i=i||"";o=this.pointAttr[i]||a.pointAttr[i],i===this.state&&!n||this.selected&&"select"!==i||l[i]&&l[i].enabled===!1||i&&(p||c&&d.enabled===!1)||i&&g.states&&g.states[i]&&g.states[i].enabled===!1||(this.graphic?(h=h&&this.graphic.symbolName&&o.r,this.graphic.attr(e(o,h?{x:s-h,y:r-h,width:2*h,height:2*h}:{})),u&&u.hide()):(i&&d&&(h=d.radius,g=g.symbol||a.symbol,u&&u.currentSymbol!==g&&(u=u.destroy()),u?u[n?"animate":"attr"]({x:s-h,y:r-h}):g&&(a.stateMarkerGraphic=u=f.renderer.symbol(g,s-h,r-h,2*h,2*h).attr(o).add(a.markerGroup),u.currentSymbol=g)),u&&u[i&&f.isInsidePlot(s,r,f.inverted)?"show":"hide"]()),(s=l[i]&&l[i].halo)&&s.size?(m||(a.halo=m=f.renderer.path().add(a.seriesGroup)),m.attr(t({fill:he(this.color||a.color).setOpacity(s.opacity).get()},s.attributes))[n?"animate":"attr"]({d:this.haloPath(s.size)})):m&&m.attr({d:[]}),this.state=i)},haloPath:function(t){var e=this.series,i=e.chart,n=e.getPlotBox(),o=i.inverted;return i.renderer.symbols.circle(n.translateX+(o?e.yAxis.len-this.plotY:this.plotX)-t,n.translateY+(o?e.xAxis.len-this.plotX:this.plotY)-t,2*t,2*t)}}),t(Se.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&ee(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,i=e.tooltip,n=e.hoverPoint;n&&n.onMouseOut(),this&&t.events.mouseOut&&ee(this,"mouseOut"),i&&!t.stickyTracking&&(!i.shared||this.noSharedTooltip)&&i.hide(),this.setState(),e.hoverSeries=null},setState:function(t){var e=this.options,i=this.graph,n=this.graphNeg,o=e.states,e=e.lineWidth,t=t||"";this.state!==t&&(this.state=t,o[t]&&o[t].enabled===!1||(t&&(e=o[t].lineWidth||e+1),i&&!i.dashstyle&&(t={"stroke-width":e},i.attr(t),n&&n.attr(t))))},setVisible:function(t,e){var i,n=this,o=n.chart,s=n.legendItem,r=o.options.chart.ignoreHiddenSeries,a=n.visible;i=(n.visible=t=n.userOptions.visible=t===Y?!a:t)?"show":"hide",Kt(["group","dataLabelsGroup","markerGroup","tracker"],function(t){n[t]&&n[t][i]()}),o.hoverSeries===n&&n.onMouseOut(),s&&o.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&Kt(o.series,function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)}),Kt(n.linkedSeries,function(e){e.setVisible(t,!1)}),r&&(o.isDirtyBox=!0),e!==!1&&o.redraw(),ee(n,i)},setTooltipPoints:function(t){var e,i,n,o,s=[],r=this.xAxis,a=r&&r.getExtremes(),l=r?r.tooltipLen||r.len:this.chart.plotSizeX,h=[];if(this.options.enableMouseTracking!==!1&&!this.singularTooltips){for(t&&(this.tooltipPoints=null),Kt(this.segments||this.points,function(t){s=s.concat(t)}),r&&r.reversed&&(s=s.reverse()),this.orderTooltipPoints&&this.orderTooltipPoints(s),t=s.length,o=0;t>o;o++)if(r=s[o],e=r.x,e>=a.min&&e<=a.max)for(n=s[o+1],e=i===Y?0:i+1,i=s[o+1]?mt(ft(0,ut((r.clientX+(n?n.wrappedClientX||n.clientX:l))/2)),l):l;e>=0&&i>=e;)h[e++]=r;this.tooltipPoints=h}},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=t===Y?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),ee(this,t?"select":"unselect")},drawTracker:Pe.drawTrackerGraph}),b(Se.prototype,"init",function(t){var e;t.apply(this,Array.prototype.slice.call(arguments,1)),(e=this.xAxis)&&e.options.ordinal&&Qt(this,"updatedData",function(){delete e.ordinalIndex})}),b(E.prototype,"getTimeTicks",function(t,e,i,n,o,s,r,a){var l,h,c,p,u=0,g=0,f={},m=[],x=-Number.MAX_VALUE,y=this.options.tickPixelInterval;if(!this.options.ordinal||!s||s.length<3||i===Y)return t.call(this,e,i,n,o);for(c=s.length;c>g;g++){if(p=g&&s[g-1]>n,s[g]<i&&(u=g),g===c-1||s[g+1]-s[g]>5*r||p){if(s[g]>x){for(l=t.call(this,e,s[u],s[g],o);l.length&&l[0]<=x;)l.shift();l.length&&(x=l[l.length-1]),m=m.concat(l)}u=g+1}if(p)break}if(t=l.info,a&&t.unitRange<=K.hour){for(g=m.length-1,u=1;g>u;u++)new Date(m[u]-q)[et]()!==new Date(m[u-1]-q)[et]()&&(f[m[u]]="day",h=!0);h&&(f[m[0]]="day"),t.higherRanks=f}if(m.info=t,a&&d(y)){var v,a=t=m.length,g=[];for(h=[];a--;)u=this.translate(m[a]),v&&(h[a]=v-u),g[a]=v=u;for(h.sort(),h=h[ut(h.length/2)],.6*y>h&&(h=null),a=m[t-1]>n?t-1:t,v=void 0;a--;)u=g[a],n=v-u,v&&.8*y>n&&(null===h||.8*h>n)?(f[m[a]]&&!f[m[a+1]]?(n=a+1,v=u):n=a,m.splice(n,1)):v=u}return m}),t(E.prototype,{beforeSetTickPositions:function(){var t,e,i,n=[],o=!1,s=this.getExtremes(),r=s.min,s=s.max;if(this.options.ordinal){if(Kt(this.series,function(e,i){if(e.visible!==!1&&e.takeOrdinalPosition!==!1&&(n=n.concat(e.processedXData),t=n.length,n.sort(function(t,e){return t-e}),t))for(i=t-1;i--;)n[i]===n[i+1]&&n.splice(i,1)}),t=n.length,t>2){for(e=n[1]-n[0],i=t-1;i--&&!o;)n[i+1]-n[i]!==e&&(o=!0);!this.options.keepOrdinalPadding&&(n[0]-r>e||s-n[n.length-1]>e)&&(o=!0)}o?(this.ordinalPositions=n,o=this.val2lin(ft(r,n[0]),!0),e=this.val2lin(mt(s,n[n.length-1]),!0),this.ordinalSlope=s=(s-r)/(e-o),this.ordinalOffset=r-o*s):this.ordinalPositions=this.ordinalSlope=this.ordinalOffset=Y}this.groupIntervalFactor=null},val2lin:function(t,e){var i=this.ordinalPositions;if(i){var n,o,s=i.length;for(n=s;n--;)if(i[n]===t){o=n;break}for(n=s-1;n--;)if(t>i[n]||0===n){i=(t-i[n])/(i[n+1]-i[n]),o=n+i;break}return e?o:this.ordinalSlope*(o||0)+this.ordinalOffset}return t},lin2val:function(t,e){var i=this.ordinalPositions;if(i){var n,o,s=this.ordinalSlope,r=this.ordinalOffset,a=i.length-1;if(e)0>t?t=i[0]:t>a?t=i[a]:(a=ut(t),o=t-a);else for(;a--;)if(n=s*a+r,t>=n){s=s*(a+1)+r,o=(t-n)/(s-n);break}return o!==Y&&i[a]!==Y?i[a]+(o?o*(i[a+1]-i[a]):0):t}return t},getExtendedPositions:function(){var t,e,i=this.chart,n=this.series[0].currentDataGrouping,o=this.ordinalIndex,s=n?n.count+n.unitName:"raw",r=this.getExtremes();return o||(o=this.ordinalIndex={}),o[s]||(t={series:[],getExtremes:function(){return{min:r.dataMin,max:r.dataMax}},options:{ordinal:!0},val2lin:E.prototype.val2lin},Kt(this.series,function(o){e={xAxis:t,xData:o.xData,chart:i,destroyGroupedData:Rt},e.options={dataGrouping:n?{enabled:!0,forced:!0,approximation:"open",units:[[n.unitName,[n.count]]]}:{enabled:!1}},o.processData.apply(e),t.series.push(e)}),this.beforeSetTickPositions.apply(t),o[s]=t.ordinalPositions),o[s]},getGroupIntervalFactor:function(t,e,i){var n=0,i=i.processedXData,o=i.length,s=[],r=this.groupIntervalFactor;if(!r){for(;o-1>n;n++)s[n]=i[n+1]-i[n];s.sort(function(t,e){return t-e}),n=s[ut(o/2)],t=ft(t,i[0]),e=mt(e,i[o-1]),this.groupIntervalFactor=r=o*n/(e-t)}return r},postProcessTickInterval:function(t){var e=this.ordinalSlope;return e?t/(e/this.closestPointRange):t}}),b(H.prototype,"pan",function(t,e){var i=this.xAxis[0],n=e.chartX,o=!1;if(i.options.ordinal&&i.series.length){var s,r=this.mouseDownX,a=i.getExtremes(),l=a.dataMax,h=a.min,c=a.max,d=this.hoverPoints,p=i.closestPointRange,r=(r-n)/(i.translationSlope*(i.ordinalSlope||p)),u={ordinalPositions:i.getExtendedPositions()},p=i.lin2val,g=i.val2lin;u.ordinalPositions?xt(r)>1&&(d&&Kt(d,function(t){t.setState()}),0>r?(d=u,s=i.ordinalPositions?i:u):(d=i.ordinalPositions?i:u,s=u),u=s.ordinalPositions,l>u[u.length-1]&&u.push(l),this.fixedRange=c-h,r=i.toFixedRange(null,null,p.apply(d,[g.apply(d,[h,!0])+r,!0]),p.apply(s,[g.apply(s,[c,!0])+r,!0])),r.min>=mt(a.dataMin,h)&&r.max<=ft(l,c)&&i.setExtremes(r.min,r.max,!0,!1,{trigger:"pan"}),this.mouseDownX=n,f(this.container,{cursor:"move"})):o=!0}else o=!0;o&&t.apply(this,Array.prototype.slice.call(arguments,1))}),b(Se.prototype,"getSegments",function(t){var e,i=this.options.gapSize,n=this.xAxis;t.apply(this,Array.prototype.slice.call(arguments,1)),i&&(e=this.segments,Kt(e,function(t,o){for(var s=t.length-1;s--;)t[s+1].x-t[s].x>n.closestPointRange*i&&e.splice(o+1,0,t.splice(s+1,t.length-s))}))});var Le=Se.prototype,_t=ge.prototype,Ce=Le.processData,Me=Le.generatePoints,De=Le.destroy,Ie=_t.tooltipHeaderFormatter,Be={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:i("millisecond",["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],"second",["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],"minute",["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],"hour",["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],"day",["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],"week",["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],"month",["%B %Y","%B","-%B %Y"],"year",["%Y","%Y","-%Y"])},Oe={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},ze=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],Re={sum:function(t){var e,i=t.length;if(!i&&t.hasNulls)e=null;else if(i)for(e=0;i--;)e+=t[i];return e},average:function(t){var e=t.length,t=Re.sum(t);return"number"==typeof t&&e&&(t/=e),t},open:function(t){return t.length?t[0]:t.hasNulls?null:Y},high:function(t){return t.length?L(t):t.hasNulls?null:Y},low:function(t){return t.length?P(t):t.hasNulls?null:Y},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:Y},ohlc:function(t,e,i,n){return t=Re.open(t),e=Re.high(e),i=Re.low(i),n=Re.close(n),"number"==typeof t||"number"==typeof e||"number"==typeof i||"number"==typeof n?[t,e,i,n]:void 0},range:function(t,e){return t=Re.low(t),e=Re.high(e),"number"==typeof t||"number"==typeof e?[t,e]:void 0}};Le.groupData=function(t,e,i,n){var o,s,r,a=this.data,l=this.options.data,h=[],c=[],d=t.length,p=!!e,u=[[],[],[],[]],n="function"==typeof n?n:Re[n],g=this.pointArrayMap,f=g&&g.length;for(r=0;d>=r&&!(t[r]>=i[0]);r++);for(;d>=r;r++){for(;(i[1]!==Y&&t[r]>=i[1]||r===d)&&(o=i.shift(),s=n.apply(0,u),s!==Y&&(h.push(o),c.push(s)),u[0]=[],u[1]=[],u[2]=[],u[3]=[],r!==d););if(r===d)break;if(g){o=this.cropStart+r,o=a&&a[o]||this.pointClass.prototype.applyOptions.apply({series:this},[l[o]]);var m;for(s=0;f>s;s++)m=o[g[s]],"number"==typeof m?u[s].push(m):null===m&&(u[s].hasNulls=!0)}else o=p?e[r]:null,"number"==typeof o?u[0].push(o):null===o&&(u[0].hasNulls=!0)}return[h,c]},Le.processData=function(){var t,e=this.chart,i=this.options,n=i.dataGrouping,o=n&&g(n.enabled,e.options._stock);if(this.forceCrop=o,this.groupPixelWidth=null,this.hasProcessed=!0,Ce.apply(this,arguments)!==!1&&o){this.destroyGroupedData();var s=this.processedXData,r=this.processedYData,a=e.plotSizeX,e=this.xAxis,l=e.options.ordinal,h=this.groupPixelWidth=e.getGroupPixelWidth&&e.getGroupPixelWidth(),o=this.pointRange;if(h){t=!0,this.points=null;var c=e.getExtremes(),o=c.min,c=c.max,l=l&&e.getGroupIntervalFactor(o,c,this)||1,a=h*(c-o)/a*l,h=e.getTimeTicks(e.normalizeTimeTickInterval(a,n.units||ze),o,c,null,s,this.closestPointRange),r=Le.groupData.apply(this,[s,r,h,n.approximation]),s=r[0],r=r[1];if(n.smoothed){for(n=s.length-1,s[n]=c;n--&&n>0;)s[n]+=a/2;s[0]=o}this.currentDataGrouping=h.info,null===i.pointRange&&(this.pointRange=h.info.totalRange),this.closestPointRange=h.info.totalRange,d(s[0])&&s[0]<e.dataMin&&(e.dataMin=s[0]),this.processedXData=s,this.processedYData=r}else this.currentDataGrouping=null,this.pointRange=o;this.hasGroupedData=t}},Le.destroyGroupedData=function(){var t=this.groupedData;Kt(t||[],function(e,i){e&&(t[i]=e.destroy?e.destroy():null)}),this.groupedData=null},Le.generatePoints=function(){Me.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},_t.tooltipHeaderFormatter=function(t){var e,i,n=t.series,o=n.tooltipOptions,s=n.options.dataGrouping,r=o.xDateFormat,l=n.xAxis;if(l&&"datetime"===l.options.type&&s&&a(t.key)){
if(n=n.currentDataGrouping,s=s.dateTimeLabelFormats,n)l=s[n.unitName],1===n.count?r=l[0]:(r=l[1],e=l[2]);else if(!r&&s)for(i in K)if(K[i]>=l.closestPointRange||K[i]<=K.day&&t.key%K[i]>0){r=s[i][0];break}r=j(r,t.key),e&&(r+=j(e,t.key+n.totalRange-1)),t=o.headerFormat.replace("{point.key}",r)}else t=Ie.call(this,t);return t},Le.destroy=function(){for(var t=this.groupedData||[],e=t.length;e--;)t[e]&&t[e].destroy();De.apply(this)},b(Le,"setOptions",function(t,i){var n=t.call(this,i),o=this.type,s=this.chart.options.plotOptions,r=se[o].dataGrouping;return Oe[o]&&(r||(r=e(Be,Oe[o])),n.dataGrouping=e(r,s.series&&s.series.dataGrouping,s[o].dataGrouping,i.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),n}),b(E.prototype,"setScale",function(t){t.call(this),Kt(this.series,function(t){t.hasProcessed=!1})}),E.prototype.getGroupPixelWidth=function(){var t,e,i=this.series,n=i.length,o=0,s=!1;for(t=n;t--;)(e=i[t].options.dataGrouping)&&(o=ft(o,e.groupPixelWidth));for(t=n;t--;)(e=i[t].options.dataGrouping)&&i[t].hasProcessed&&(n=(i[t].processedXData||i[t].data).length,(i[t].groupPixelWidth||n>this.chart.plotSizeX/o||n&&e.forced)&&(s=!0));return s?o:0},se.ohlc=e(se.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{series.color}">●</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null}),_t=x(Nt.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(t){return[t.open,t.high,t.low,t.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){Nt.column.prototype.getAttribs.apply(this,arguments);var t=this.options,i=t.states,t=t.upColor||this.color,n=e(this.pointAttr),o=this.upColorProp;n[""][o]=t,n.hover[o]=i.hover.upColor||t,n.select[o]=i.select.upColor||t,Kt(this.points,function(t){t.open<t.close&&(t.pointAttr=n)})},translate:function(){var t=this.yAxis;Nt.column.prototype.translate.apply(this),Kt(this.points,function(e){null!==e.open&&(e.plotOpen=t.translate(e.open,0,1,0,1)),null!==e.close&&(e.plotClose=t.translate(e.close,0,1,0,1))})},drawPoints:function(){var t,e,i,n,o,s,r,a,l=this,h=l.chart;Kt(l.points,function(c){c.plotY!==Y&&(r=c.graphic,t=c.pointAttr[c.selected?"selected":""]||l.pointAttr[""],n=t["stroke-width"]%2/2,a=pt(c.plotX)-n,o=pt(c.shapeArgs.width/2),s=["M",a,pt(c.yBottom),"L",a,pt(c.plotY)],null!==c.open&&(e=pt(c.plotOpen)+n,s.push("M",a,e,"L",a-o,e)),null!==c.close&&(i=pt(c.plotClose)+n,s.push("M",a,i,"L",a+o,i)),r?r.animate({d:s}):c.graphic=h.renderer.path(s).attr(t).add(l.group))})},animate:null}),Nt.ohlc=_t,se.candlestick=e(se.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:se.ohlc.tooltip,threshold:null,upColor:"white"}),_t=x(_t,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){Nt.ohlc.prototype.getAttribs.apply(this,arguments);var t=this.options,e=t.states,i=t.upLineColor||t.lineColor,n=e.hover.upLineColor||i,o=e.select.upLineColor||i;Kt(this.points,function(t){t.open<t.close&&(t.pointAttr[""].stroke=i,t.pointAttr.hover.stroke=n,t.pointAttr.select.stroke=o)})},drawPoints:function(){var t,e,i,n,o,s,r,a,l,h,c,d,p=this,u=p.chart,g=p.pointAttr[""];Kt(p.points,function(f){h=f.graphic,f.plotY!==Y&&(t=f.pointAttr[f.selected?"selected":""]||g,a=t["stroke-width"]%2/2,l=pt(f.plotX)-a,e=f.plotOpen,i=f.plotClose,n=dt.min(e,i),o=dt.max(e,i),d=pt(f.shapeArgs.width/2),s=pt(n)!==pt(f.plotY),r=o!==f.yBottom,n=pt(n)+a,o=pt(o)+a,c=["M",l-d,o,"L",l-d,n,"L",l+d,n,"L",l+d,o,"Z","M",l,n,"L",l,s?pt(f.plotY):n,"M",l,o,"L",l,r?pt(f.yBottom):o,"Z"],h?h.animate({d:c}):f.graphic=u.renderer.path(c).attr(t).add(p.group).shadow(p.options.shadow))})}}),Nt.candlestick=_t;var Ee=ce.prototype.symbols;se.flags=e(se.column,{dataGrouping:null,fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30}),Nt.flags=x(Nt.column,{type:"flags",sorted:!1,noSharedTooltip:!0,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:Se.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){Nt.column.prototype.translate.apply(this);var t,e,i,n,o,s=this.chart,r=this.points,a=r.length-1,l=this.options.onSeries,l=(t=l&&s.get(l))&&t.options.step,h=t&&t.points,c=h&&h.length,d=this.xAxis,p=d.getExtremes();if(t&&t.visible&&c)for(t=t.currentDataGrouping,n=h[c-1].x+(t?t.totalRange:0),r.sort(function(t,e){return t.x-e.x});c--&&r[a]&&(t=r[a],i=h[c],!(i.x<=t.x&&i.plotY!==Y&&(t.x<=n&&(t.plotY=i.plotY,i.x<t.x&&!l&&(o=h[c+1])&&o.plotY!==Y&&(t.plotY+=(t.x-i.x)/(o.x-i.x)*(o.plotY-i.plotY))),a--,c++,0>a))););Kt(r,function(t,i){t.plotY===Y&&(t.x>=p.min&&t.x<=p.max?t.plotY=s.chartHeight-d.bottom-(d.opposite?d.height:0)+d.offset-s.plotTop:t.shapeArgs={}),(e=r[i-1])&&e.plotX===t.plotX&&(e.stackIndex===Y&&(e.stackIndex=0),t.stackIndex=e.stackIndex+1)})},drawPoints:function(){var t,i,n,o,s,r,a,l,h,c=this.pointAttr[""],d=this.points,p=this.chart.renderer,u=this.options,g=u.y,f=u.lineWidth%2/2;for(s=d.length;s--;)r=d[s],t=r.plotX>this.xAxis.len,i=r.plotX+(t?f:-f),a=r.stackIndex,o=r.options.shape||u.shape,n=r.plotY,n!==Y&&(n=r.plotY+g+f-(a!==Y&&a*u.stackDistance)),l=a?Y:r.plotX+f,h=a?Y:r.plotY,a=r.graphic,n!==Y&&i>=0&&!t?(t=r.pointAttr[r.selected?"select":""]||c,a?a.attr({x:i,y:n,r:t.r,anchorX:l,anchorY:h}):r.graphic=p.label(r.options.title||u.title||"A",i,n,o,l,h,u.useHTML).css(e(u.style,r.style)).attr(t).attr({align:"flag"===o?"left":"center",width:u.width,height:u.height}).add(this.markerGroup).shadow(u.shadow),r.tooltipPos=[i,n]):a&&(r.graphic=a.destroy())},drawTracker:function(){var t=this.points;Pe.drawTrackerPoint.apply(this),Kt(t,function(e){var i=e.graphic;i&&Qt(i.element,"mouseover",function(){e.stackIndex>0&&!e.raised&&(e._y=i.y,i.attr({y:e._y-8}),e.raised=!0),Kt(t,function(t){t!==e&&t.raised&&t.graphic&&(t.graphic.attr({y:t._y}),t.raised=!1)})})})},animate:Rt}),Ee.flag=function(t,e,i,n,o){var s=o&&o.anchorX||t,o=o&&o.anchorY||e;return["M",s,o,"L",t,e+n,t,e,t+i,e,t+i,e+n,t,e+n,"M",s,o,"Z"]},Kt(["circle","square"],function(t){Ee[t+"pin"]=function(e,i,n,o,s){var r=s&&s.anchorX,s=s&&s.anchorY,e=Ee[t](e,i,n,o);return r&&s&&e.push("M",r,i>s?i:i+o,"L",r,s),e}}),N===Ft.VMLRenderer&&Kt(["flag","circlepin","squarepin"],function(t){de.prototype.symbols[t]=Ee[t]}),_t=[].concat(ze),_t[4]=["day",[1,2,3,4]],_t[5]=["week",[1,2,3]],t(V,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:Nt.areaspline===Y?"line":"areaspline",color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:_t},dataLabels:{enabled:!1,zIndex:2},id:"highcharts-navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:Ct?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:Dt&&!Ct}}),X.prototype={drawHandle:function(t,e){var i,n=this.chart,o=n.renderer,s=this.elementsToDestroy,r=this.handles,a=this.navigatorOptions.handles,a={fill:a.backgroundColor,stroke:a.borderColor,"stroke-width":1};this.rendered||(r[e]=o.g("navigator-handle-"+["left","right"][e]).css({cursor:"e-resize"}).attr({zIndex:4-e}).add(),i=o.rect(-4.5,0,9,16,0,1).attr(a).add(r[e]),s.push(i),i=o.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(a).add(r[e]),s.push(i)),r[e][n.isResizing?"animate":"attr"]({translateX:this.scrollerLeft+this.scrollbarHeight+parseInt(t,10),translateY:this.top+this.height/2-8})},drawScrollbarButton:function(t){var e,i=this.chart.renderer,n=this.elementsToDestroy,o=this.scrollbarButtons,s=this.scrollbarHeight,r=this.scrollbarOptions;this.rendered||(o[t]=i.g().add(this.scrollbarGroup),e=i.rect(-.5,-.5,s+1,s+1,r.buttonBorderRadius,r.buttonBorderWidth).attr({stroke:r.buttonBorderColor,"stroke-width":r.buttonBorderWidth,fill:r.buttonBackgroundColor}).add(o[t]),n.push(e),e=i.path(["M",s/2+(t?-1:1),s/2-3,"L",s/2+(t?-1:1),s/2+3,s/2+(t?2:-2),s/2]).attr({fill:r.buttonArrowColor}).add(o[t]),n.push(e)),t&&o[t].attr({translateX:this.scrollerWidth-s})},render:function(t,e,i,n){var o,s,r,a,l,h=this.chart,c=h.renderer,d=this.scrollbarGroup,p=this.navigatorGroup,u=this.scrollbar,p=this.xAxis,f=this.scrollbarTrack,m=this.scrollbarHeight,x=this.scrollbarEnabled,y=this.navigatorOptions,v=this.scrollbarOptions,b=v.minWidth,k=this.height,w=this.top,S=this.navigatorEnabled,A=y.outlineWidth,T=A/2,P=0,L=this.outlineHeight,C=v.barBorderRadius,M=v.barBorderWidth,D=w+T;isNaN(t)||(this.navigatorLeft=o=g(p.left,h.plotLeft+m),this.navigatorWidth=s=g(p.len,h.plotWidth-2*m),this.scrollerLeft=r=o-m,this.scrollerWidth=a=a=s+2*m,p.getExtremes&&(l=this.getUnionExtremes(!0))&&(l.dataMin!==p.min||l.dataMax!==p.max)&&p.setExtremes(l.dataMin,l.dataMax,!0,!1),i=g(i,p.translate(t)),n=g(n,p.translate(e)),(isNaN(i)||xt(i)===1/0)&&(i=0,n=a),p.translate(n,!0)-p.translate(i,!0)<h.xAxis[0].minRange||(this.zoomedMax=mt(ft(i,n),s),this.zoomedMin=ft(this.fixedWidth?this.zoomedMax-this.fixedWidth:mt(i,n),0),this.range=this.zoomedMax-this.zoomedMin,i=pt(this.zoomedMax),e=pt(this.zoomedMin),t=i-e,this.rendered||(S&&(this.navigatorGroup=p=c.g("navigator").attr({zIndex:3}).add(),this.leftShade=c.rect().attr({fill:y.maskFill}).add(p),y.maskInside||(this.rightShade=c.rect().attr({fill:y.maskFill}).add(p)),this.outline=c.path().attr({"stroke-width":A,stroke:y.outlineColor}).add(p)),x&&(this.scrollbarGroup=d=c.g("scrollbar").add(),u=v.trackBorderWidth,this.scrollbarTrack=f=c.rect().attr({x:0,y:-u%2/2,fill:v.trackBackgroundColor,stroke:v.trackBorderColor,"stroke-width":u,r:v.trackBorderRadius||0,height:m}).add(d),this.scrollbar=u=c.rect().attr({y:-M%2/2,height:m,fill:v.barBackgroundColor,stroke:v.barBorderColor,"stroke-width":M,r:C}).add(d),this.scrollbarRifles=c.path().attr({stroke:v.rifleColor,"stroke-width":1}).add(d))),h=h.isResizing?"animate":"attr",S&&(this.leftShade[h](y.maskInside?{x:o+e,y:w,width:i-e,height:k}:{x:o,y:w,width:e,height:k}),this.rightShade&&this.rightShade[h]({x:o+i,y:w,width:s-i,height:k}),this.outline[h]({d:["M",r,D,"L",o+e+T,D,o+e+T,D+L,"L",o+i-T,D+L,"L",o+i-T,D,r+a,D].concat(y.maskInside?["M",o+e+T,D,"L",o+i-T,D]:[])}),this.drawHandle(e+T,0),this.drawHandle(i+T,1)),x&&d&&(this.drawScrollbarButton(0),this.drawScrollbarButton(1),d[h]({translateX:r,translateY:pt(D+k)}),f[h]({width:a}),o=m+e,s=t-M,b>s&&(P=(b-s)/2,s=b,o-=P),this.scrollbarPad=P,u[h]({x:ut(o)+M%2/2,width:s}),b=m+e+t/2-.5,this.scrollbarRifles.attr({visibility:t>12?"visible":"hidden"})[h]({d:["M",b-3,m/4,"L",b-3,2*m/3,"M",b,m/4,"L",b,2*m/3,"M",b+3,m/4,"L",b+3,2*m/3]})),this.scrollbarPad=P,this.rendered=!0))},addEvents:function(){var t,e=this.chart.container,i=this.mouseDownHandler,n=this.mouseMoveHandler,o=this.mouseUpHandler;t=[[e,"mousedown",i],[e,"mousemove",n],[document,"mouseup",o]],F&&t.push([e,"touchstart",i],[e,"touchmove",n],[document,"touchend",o]),Kt(t,function(t){Qt.apply(null,t)}),this._events=t},removeEvents:function(){Kt(this._events,function(t){te.apply(null,t)}),this._events=Y,this.navigatorEnabled&&this.baseSeries&&te(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var t,i,n,o,s,r=this,a=r.chart,l=r.scrollbarHeight,h=r.navigatorOptions,c=r.height,d=r.top,p=document.body.style,u=r.baseSeries;r.mouseDownHandler=function(e){var i,e=a.pointer.normalize(e),o=r.zoomedMin,l=r.zoomedMax,h=r.top,d=r.scrollbarHeight,u=r.scrollerLeft,g=r.scrollerWidth,f=r.navigatorLeft,m=r.navigatorWidth,x=r.scrollbarPad,y=r.range,v=e.chartX,b=e.chartY,e=a.xAxis[0],k=Ct?10:7;b>h&&h+c+d>b&&((h=!r.scrollbarEnabled||h+c>b)&&dt.abs(v-o-f)<k?(r.grabbedLeft=!0,r.otherHandlePos=l,r.fixedExtreme=e.max,a.fixedRange=null):h&&dt.abs(v-l-f)<k?(r.grabbedRight=!0,r.otherHandlePos=o,r.fixedExtreme=e.min,a.fixedRange=null):v>f+o-x&&f+l+x>v?(r.grabbedCenter=v,r.fixedWidth=y,a.renderer.isSVG&&(s=p.cursor,p.cursor="ew-resize"),n=v-o):v>u&&u+g>v&&(l=h?v-f-y/2:f>v?o-.2*y:v>u+g-d?o+.2*y:f+o>v?o-y:l,0>l?l=0:l+y>=m&&(l=m-y,i=t.dataMax),l!==o&&(r.fixedWidth=y,o=t.toFixedRange(l,l+y,null,i),e.setExtremes(o.min,o.max,!0,!1,{trigger:"navigator"}))))},r.mouseMoveHandler=function(t){var e,i=r.scrollbarHeight,s=r.navigatorLeft,l=r.navigatorWidth,h=r.scrollerLeft,c=r.scrollerWidth,d=r.range;0!==t.pageX&&(t=a.pointer.normalize(t),e=t.chartX,s>e?e=s:e>h+c-i&&(e=h+c-i),r.grabbedLeft?(o=!0,r.render(0,0,e-s,r.otherHandlePos)):r.grabbedRight?(o=!0,r.render(0,0,r.otherHandlePos,e-s)):r.grabbedCenter&&(o=!0,n>e?e=n:e>l+n-d&&(e=l+n-d),r.render(0,0,e-n,e-n+d)),o&&r.scrollbarOptions.liveRedraw&&setTimeout(function(){r.mouseUpHandler(t)},0))},r.mouseUpHandler=function(e){var i,l;o&&(r.zoomedMin===r.otherHandlePos?i=r.fixedExtreme:r.zoomedMax===r.otherHandlePos&&(l=r.fixedExtreme),i=t.toFixedRange(r.zoomedMin,r.zoomedMax,i,l),a.xAxis[0].setExtremes(i.min,i.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:e})),"mousemove"!==e.type&&(r.grabbedLeft=r.grabbedRight=r.grabbedCenter=r.fixedWidth=r.fixedExtreme=r.otherHandlePos=o=n=null,p.cursor=s||"")};var f=a.xAxis.length,m=a.yAxis.length;a.extraBottomMargin=r.outlineHeight+h.margin,r.navigatorEnabled?(r.xAxis=t=new E(a,e({ordinal:u&&u.xAxis.options.ordinal},h.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:f,height:c,offset:0,offsetLeft:l,offsetRight:-l,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),r.yAxis=i=new E(a,e(h.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:c,offset:0,index:m,zoomEnabled:!1})),u||h.series.data?r.addBaseSeries():0===a.series.length&&b(a,"redraw",function(t,e){a.series.length>0&&!r.series&&(r.setBaseSeries(),a.redraw=t),t.call(a,e)})):r.xAxis=t={translate:function(t,e){var i=a.xAxis[0].getExtremes(),n=a.plotWidth-2*l,o=i.dataMin,i=i.dataMax-o;return e?t*i/n+o:n*(t-o)/i},toFixedRange:E.prototype.toFixedRange},b(a,"getMargins",function(e){var n=this.legend,o=n.options;e.call(this),r.top=d=r.navigatorOptions.top||this.chartHeight-r.height-r.scrollbarHeight-this.spacing[2]-("bottom"===o.verticalAlign&&o.enabled&&!o.floating?n.legendHeight+g(o.margin,10):0),t&&i&&(t.options.top=i.options.top=d,t.setAxisSize(),i.setAxisSize())}),r.addEvents()},getUnionExtremes:function(t){var e=this.chart.xAxis[0],i=this.xAxis,n=i.options;return t&&null===e.dataMin?void 0:{dataMin:g(n&&n.min,(d(e.dataMin)&&d(i.dataMin)?mt:g)(e.dataMin,i.dataMin)),dataMax:g(n&&n.max,(d(e.dataMax)&&d(i.dataMax)?ft:g)(e.dataMax,i.dataMax))}},setBaseSeries:function(t){var e=this.chart,t=t||e.options.navigator.baseSeries;this.series&&this.series.remove(),this.baseSeries=e.series[t]||"string"==typeof t&&e.get(t)||e.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var i,n=this.baseSeries,o=n?n.options:{},s=o.data,r=this.navigatorOptions.series;i=r.data,this.hasNavigatorData=!!i,o=e(o,r,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0}),o.data=i||s,this.series=this.chart.initSeries(o),n&&this.navigatorOptions.adaptToUpdatedData!==!1&&(Qt(n,"updatedData",this.updatedDataHandler),n.userOptions.events=t(n.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var t,e,i,n,o,s=this.chart.scroller,r=s.baseSeries,a=r.xAxis,l=a.getExtremes(),h=l.min,c=l.max,d=l.dataMin,l=l.dataMax,p=c-h,u=s.series;t=u.xData;var g=!!a.setExtremes;e=c>=t[t.length-1]-(this.closestPointRange||0),t=d>=h,s.hasNavigatorData||(u.options.pointStart=r.xData[0],u.setData(r.options.data,!1),o=!0),t&&(n=d,i=n+p),e&&(i=l,t||(n=ft(i-p,u.xData[0]))),g&&(t||e)?isNaN(n)||a.setExtremes(n,i,!0,!1,{trigger:"updatedData"}):(o&&this.chart.redraw(!1),s.render(ft(h,d),mt(c,l)))},destroy:function(){this.removeEvents(),Kt([this.xAxis,this.yAxis,this.leftShade,this.rightShade,this.outline,this.scrollbarTrack,this.scrollbarRifles,this.scrollbarGroup,this.scrollbar],function(t){t&&t.destroy&&t.destroy()}),this.xAxis=this.yAxis=this.leftShade=this.rightShade=this.outline=this.scrollbarTrack=this.scrollbarRifles=this.scrollbarGroup=this.scrollbar=null,Kt([this.scrollbarButtons,this.handles,this.elementsToDestroy],function(t){C(t)})}},Ft.Scroller=X,b(E.prototype,"zoom",function(t,e,i){var n,o=this.chart,s=o.options,r=s.chart.zoomType,a=s.navigator,s=s.rangeSelector;return this.isXAxis&&(a&&a.enabled||s&&s.enabled)&&("x"===r?o.resetZoomButton="blocked":"y"===r?n=!1:"xy"===r&&(o=this.previousZoom,d(e)?this.previousZoom=[this.min,this.max]:o&&(e=o[0],i=o[1],delete this.previousZoom))),n!==Y?n:t.call(this,e,i)}),b(H.prototype,"init",function(t,e,i){Qt(this,"beforeRender",function(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=new X(this))}),t.call(this,e,i)}),b(Se.prototype,"addPoint",function(t,e,i,n,o){var a=this.options.turboThreshold;a&&this.xData.length>a&&s(e)&&!r(e)&&this.chart.scroller&&D(20,!0),t.call(this,e,i,n,o)}),t(V,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),V.lang=e(V.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),G.prototype={clickButton:function(t,i){var n,o,s=this,r=s.selected,a=s.chart,l=s.buttons,h=s.buttonOptions[t],c=a.xAxis[0],d=a.scroller&&a.scroller.getUnionExtremes()||c||{},p=d.dataMin,u=d.dataMax,f=c&&pt(mt(c.max,g(u,c.max))),m=new Date(f),x=h.type,y=h.count,d=h._range;if(null!==p&&null!==u&&t!==s.selected){if("month"===x||"year"===x)n={month:"Month",year:"FullYear"}[x],m["set"+n](m["get"+n]()-y),n=m.getTime(),p=g(p,Number.MIN_VALUE),isNaN(n)||p>n?(n=p,f=mt(n+d,u)):d=f-n;else if(d)n=ft(f-d,p),f=mt(n+d,u);else if("ytd"===x){if(!c)return void Qt(a,"beforeRender",function(){s.clickButton(t)});u===Y&&(p=Number.MAX_VALUE,u=Number.MIN_VALUE,Kt(a.series,function(t){t=t.xData,p=mt(t[0],p),u=ft(t[t.length-1],u)}),i=!1),f=new Date(u),o=f.getFullYear(),n=o=ft(p||0,Date.UTC(o,0,1)),f=f.getTime(),f=mt(u||f,f)}else"all"===x&&c&&(n=p,f=u);l[r]&&l[r].setState(0),l[t]&&l[t].setState(2),a.fixedRange=d,c?c.setExtremes(n,f,g(i,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:h}):(r=a.options.xAxis,r[0]=e(r[0],{range:d,min:o})),s.setSelected(t)}},setSelected:function(t){this.selected=this.options.selected=t},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(t){var e=this,i=t.options.rangeSelector,n=i.buttons||[].concat(e.defaultButtons),o=i.selected,s=e.blurInputs=function(){var t=e.minInput,i=e.maxInput;t&&t.blur(),i&&i.blur()};e.chart=t,e.options=i,e.buttons=[],t.extraTopMargin=35,e.buttonOptions=n,Qt(t.container,"mousedown",s),Qt(t,"resize",s),Kt(n,e.computeButtonRange),o!==Y&&n[o]&&this.clickButton(o,!1),Qt(t,"load",function(){Qt(t.xAxis[0],"afterSetExtremes",function(){e.updateButtonStates(!0)})})},updateButtonStates:function(t){var e=this,i=this.chart,n=i.xAxis[0],o=i.scroller&&i.scroller.getUnionExtremes()||n,s=o.dataMin,r=o.dataMax,a=e.selected,l=e.buttons;t&&i.fixedRange!==pt(n.max-n.min)&&(l[a]&&l[a].setState(0),e.setSelected(null)),Kt(e.buttonOptions,function(t,i){var o=t._range,h=o>r-s,c=o<n.minRange,d="all"===t.type&&n.max-n.min>=r-s&&2!==l[i].state,p="ytd"===t.type&&j("%Y",s)===j("%Y",r);o===pt(n.max-n.min)&&i!==a?(e.setSelected(i),l[i].setState(2)):h||c||d||p?l[i].setState(3):3===l[i].state&&l[i].setState(0)})},computeButtonRange:function(t){var e=t.type,i=t.count||1,n={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};n[e]?t._range=n[e]*i:"month"!==e&&"year"!==e||(t._range=864e5*{month:30,year:365}[e]*i)},setInputValue:function(t,e){var i=this.chart.options.rangeSelector;d(e)&&(this[t+"Input"].HCTime=e),this[t+"Input"].value=j(i.inputEditDateFormat||"%Y-%m-%d",this[t+"Input"].HCTime),this[t+"DateBox"].attr({text:j(i.inputDateFormat||"%b %e, %Y",this[t+"Input"].HCTime)})},drawInput:function(i){var o,s,r,a=this,l=a.chart,h=l.renderer.style,c=l.renderer,d=l.options.rangeSelector,p=a.div,u="min"===i,g=this.inputGroup;this[i+"Label"]=s=c.label(V.lang[u?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(e(h,d.labelStyle)).add(g),g.offset+=s.width+5,this[i+"DateBox"]=r=c.label("",g.offset).attr({padding:2,width:d.inputBoxWidth||90,height:d.inputBoxHeight||17,stroke:d.inputBoxBorderColor||"silver","stroke-width":1}).css(e({textAlign:"center",color:"#444"},h,d.inputStyle)).on("click",function(){a[i+"Input"].focus()}).add(g),g.offset+=r.width+(u?10:0),this[i+"Input"]=o=m("input",{name:i,className:"highcharts-range-selector",type:"text"},t({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:h.fontSize,fontFamily:h.fontFamily,top:l.plotTop+"px"},d.inputStyle),p),o.onfocus=function(){f(this,{left:g.translateX+r.x+"px",top:g.translateY+"px",width:r.width-2+"px",height:r.height-2+"px",border:"2px solid silver"})},o.onblur=function(){f(this,{border:0,width:"1px",height:"1px"}),a.setInputValue(i)},o.onchange=function(){var t=o.value,e=(d.inputDateParser||Date.parse)(t),i=l.xAxis[0],s=i.dataMin,r=i.dataMax;isNaN(e)&&(e=t.split("-"),e=Date.UTC(n(e[0]),n(e[1])-1,n(e[2]))),isNaN(e)||(V.global.useUTC||(e+=6e4*(new Date).getTimezoneOffset()),u?e>a.maxInput.HCTime?e=Y:s>e&&(e=s):e<a.minInput.HCTime?e=Y:e>r&&(e=r),e!==Y&&l.xAxis[0].setExtremes(u?e:i.min,u?i.max:e,Y,Y,{trigger:"rangeSelectorInput"}))}},render:function(e,i){var n,o=this,s=o.chart,r=s.renderer,a=s.container,l=s.options,h=l.exporting&&l.navigation&&l.navigation.buttonOptions,c=l.rangeSelector,d=o.buttons,l=V.lang,p=o.div,p=o.inputGroup,u=c.buttonTheme,f=c.inputEnabled!==!1,x=u&&u.states,y=s.plotLeft;!o.rendered&&(o.zoomText=r.text(l.rangeSelectorZoom,y,s.plotTop-20).css(c.labelStyle).add(),n=y+o.zoomText.getBBox().width+5,Kt(o.buttonOptions,function(t,e){d[e]=r.button(t.text,n,s.plotTop-35,function(){o.clickButton(e),o.isActive=!0},u,x&&x.hover,x&&x.select).css({textAlign:"center"}).add(),n+=d[e].width+g(c.buttonSpacing,5),o.selected===e&&d[e].setState(2)}),o.updateButtonStates(),f)&&(o.div=p=m("div",null,{position:"relative",height:0,zIndex:1}),a.parentNode.insertBefore(p,a),o.inputGroup=p=r.g("input-group").add(),p.offset=0,o.drawInput("min"),o.drawInput("max")),f&&(a=s.plotTop-45,p.align(t({y:a,width:p.offset,x:h&&a<(h.y||0)+h.height-s.spacing[0]?-40:0},c.inputPosition),!0,s.spacingBox),o.setInputValue("min",e),o.setInputValue("max",i)),o.rendered=!0},destroy:function(){var t,e=this.minInput,i=this.maxInput,n=this.chart,o=this.blurInputs;te(n.container,"mousedown",o),te(n,"resize",o),C(this.buttons),e&&(e.onfocus=e.onblur=e.onchange=null),i&&(i.onfocus=i.onblur=i.onchange=null);for(t in this)this[t]&&"chart"!==t&&(this[t].destroy?this[t].destroy():this[t].nodeType&&M(this[t])),this[t]=null}},E.prototype.toFixedRange=function(t,e,i,n){var o=this.chart&&this.chart.fixedRange,t=g(i,this.translate(t,!0)),e=g(n,this.translate(e,!0)),i=o&&(e-t)/o;return i>.7&&1.3>i&&(n?t=e-o:e=t+o),{min:t,max:e}},b(H.prototype,"init",function(t,e,i){Qt(this,"init",function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new G(this))}),t.call(this,e,i)}),Ft.RangeSelector=G,H.prototype.callbacks.push(function(t){function e(){s=t.xAxis[0].getExtremes(),r.render(s.min,s.max)}function i(){s=t.xAxis[0].getExtremes(),isNaN(s.min)||a.render(s.min,s.max)}function n(t){"navigator-drag"!==t.triggerOp&&r.render(t.min,t.max)}function o(t){a.render(t.min,t.max)}var s,r=t.scroller,a=t.rangeSelector;r&&(Qt(t.xAxis[0],"afterSetExtremes",n),b(t,"drawChartBox",function(t){var i=this.isDirtyBox;t.call(this),i&&e()}),e()),a&&(Qt(t.xAxis[0],"afterSetExtremes",o),Qt(t,"resize",i),i()),Qt(t,"destroy",function(){r&&te(t.xAxis[0],"afterSetExtremes",n),a&&(te(t,"resize",i),te(t.xAxis[0],"afterSetExtremes",o))})}),Ft.StockChart=function(t,i){var n,o=t.series,s=g(t.navigator&&t.navigator.enabled,!0)?{startOnTick:!1,endOnTick:!1}:null,r={marker:{enabled:!1,radius:2},states:{hover:{lineWidth:2}}},a={shadow:!1,borderWidth:0};return t.xAxis=Jt(u(t.xAxis||{}),function(t){return e({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},t,{type:"datetime",categories:null},s)}),t.yAxis=Jt(u(t.yAxis||{}),function(t){return n=g(t.opposite,!0),e({labels:{y:-2},opposite:n,showLastLabel:!1,title:{text:null}},t)}),t.series=null,t=e({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:r,spline:r,area:r,areaspline:r,arearange:r,areasplinerange:r,column:a,columnrange:a,candlestick:a,ohlc:a}},t,{_stock:!0,chart:{inverted:!1}}),t.series=o,new H(t,i)},b(me.prototype,"init",function(t,e,i){var n=i.chart.pinchType||"";t.call(this,e,i),this.pinchX=this.pinchHor=-1!==n.indexOf("x"),this.pinchY=this.pinchVert=-1!==n.indexOf("y"),this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert}),b(E.prototype,"autoLabelAlign",function(t){return this.chart.options._stock&&"yAxis"===this.coll&&0===Zt(this,this.chart.yAxis)?(15===this.options.labels.x&&(this.options.labels.x=0),"right"):t.call(this)}),E.prototype.getPlotLinePath=function(t,e,i,n,o){var s,r,a,l,h,c,p=this,u=this.isLinked&&!this.series?this.linkedParent.series:this.series,f=p.chart,m=f.renderer,x=p.left,y=p.top,v=[];return h=p.isXAxis?d(p.options.yAxis)?[f.yAxis[p.options.yAxis]]:Jt(u,function(t){return t.yAxis}):d(p.options.xAxis)?[f.xAxis[p.options.xAxis]]:Jt(u,function(t){return t.xAxis}),Kt(p.isXAxis?f.yAxis:f.xAxis,function(t){if(d(t.options.id)?-1===t.options.id.indexOf("navigator"):1){var e=t.isXAxis?"yAxis":"xAxis",e=d(t.options[e])?f[e][t.options[e]]:f[e][0];p===e&&h.push(t)}}),c=h.length?[]:[p],Kt(h,function(t){-1===Zt(t,c)&&c.push(t)}),o=g(o,p.translate(t,null,null,i)),isNaN(o)||(p.horiz?Kt(c,function(t){r=t.top,l=r+t.len,s=a=pt(o+p.transB),(s>=x&&s<=x+p.width||n)&&v.push("M",s,r,"L",a,l)}):Kt(c,function(t){s=t.left,a=s+t.width,r=l=pt(y+p.height-o),(r>=y&&r<=y+p.height||n)&&v.push("M",s,r,"L",a,l)})),v.length>0?m.crispPolyLine(v,e||1):void 0},E.prototype.getPlotBandPath=function(t,e){var i,n=this.getPlotLinePath(e),o=this.getPlotLinePath(t),s=[];if(o&&n)for(i=0;i<o.length;i+=6)s.push("M",o[i+1],o[i+2],"L",o[i+4],o[i+5],n[i+4],n[i+5],n[i+1],n[i+2]);else s=null;return s},ce.prototype.crispPolyLine=function(t,e){var i;for(i=0;i<t.length;i+=6)t[i+1]===t[i+4]&&(t[i+1]=t[i+4]=pt(t[i+1])-e%2/2),t[i+2]===t[i+5]&&(t[i+2]=t[i+5]=pt(t[i+2])+e%2/2);return t},N===Ft.VMLRenderer&&(de.prototype.crispPolyLine=ce.prototype.crispPolyLine),b(E.prototype,"hideCrosshair",function(t,e){t.call(this,e),d(this.crossLabelArray)&&(d(e)?this.crossLabelArray[e]&&this.crossLabelArray[e].hide():Kt(this.crossLabelArray,function(t){t.hide()}))}),b(E.prototype,"drawCrosshair",function(e,i,n){var o,s;if(e.call(this,i,n),d(this.crosshair.label)&&this.crosshair.label.enabled&&d(n)){var r,a,e=this.chart,l=this.options.crosshair.label,h=this.isXAxis?"x":"y",i=this.horiz,c=this.opposite,p=this.left,u=this.top,f=this.crossLabel,m=l.format,x="";f||(f=this.crossLabel=e.renderer.label().attr({align:l.align||(i?"center":c?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:i?16:Y,fill:l.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:g(l.padding,2),stroke:l.borderColor||null,"stroke-width":l.borderWidth||0}).css(t({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},l.style)).add()),i?(r=n.plotX+p,a=u+(c?0:this.height)):(r=c?this.width+p:0,a=n.plotY+u),u>a||a>u+this.height?this.hideCrosshair():(!m&&!l.formatter&&(this.isDatetimeAxis&&(x="%b %d, %Y"),m="{value"+(x?":"+x:"")+"}"),f.attr({text:m?k(m,{value:n[h]}):l.formatter.call(this,n[h]),x:r,y:a,visibility:"visible"}),n=f.getBBox(),i?("inside"===this.options.tickPosition&&!c||"inside"!==this.options.tickPosition&&c)&&(a=f.y-n.height):a=f.y-n.height/2,i?(o=p-n.x,s=p+this.width-n.x):(o="left"===this.labelAlign?p:0,s="right"===this.labelAlign?p+this.width:e.chartWidth),f.translateX<o&&(r+=o-f.translateX),f.translateX+n.width>=s&&(r-=f.translateX+n.width-s),f.attr({x:r,y:a,visibility:"visible"}))}});var He=Le.init,We=Le.processData,Xe=we.prototype.tooltipFormatter;Le.init=function(){He.apply(this,arguments),this.setCompare(this.options.compare)},Le.setCompare=function(t){this.modifyValue="value"===t||"percent"===t?function(e,i){var n=this.compareValue;return e!==Y&&(e="value"===t?e-n:e=100*(e/n)-100,i)&&(i.change=e),e}:null,this.chart.hasRendered&&(this.isDirty=!0)},Le.processData=function(){var t,e,i,n=0;if(We.apply(this,arguments),this.xAxis&&this.processedYData)for(t=this.processedXData,e=this.processedYData,i=e.length;i>n;n++)if("number"==typeof e[n]&&t[n]>=this.xAxis.min){this.compareValue=e[n];break}},b(Le,"getExtremes",function(t){t.call(this),this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))}),E.prototype.setCompare=function(t,e){this.isXAxis||(Kt(this.series,function(e){e.setCompare(t)}),g(e,!0)&&this.chart.redraw())},we.prototype.tooltipFormatter=function(t){return t=t.replace("{point.change}",(this.change>0?"+":"")+y(this.change,g(this.series.tooltipOptions.changeDecimals,2))),Xe.apply(this,[t])},b(Se.prototype,"render",function(t){this.isCartesian&&this.chart.options._stock&&(this.clipBox?this.chart[this.sharedClipKey]&&this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}):(this.clipBox=e(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len)),t.call(this)}),t(Ft,{Axis:E,Chart:H,Color:he,Point:we,Tick:R,Renderer:N,Series:Se,SVGElement:z,SVGRenderer:ce,arrayMin:P,arrayMax:L,charts:Et,dateFormat:j,format:k,pathAnim:Z,getOptions:function(){return V},hasBidiBug:It,isTouchDevice:Ct,numberFormat:y,seriesTypes:Nt,setOptions:function(t){return V=e(!0,V,t),O(),V},addEvent:Qt,removeEvent:te,createElement:m,discardElement:M,css:f,each:Kt,extend:t,map:Jt,merge:e,pick:g,splat:u,extendClass:x,pInt:n,wrap:b,svg:Dt,canvas:Bt,vml:!Dt&&!Bt,product:"Highstock",version:"2.0.1"})}()};define("vendor.asset.highstock/highstock",["vendor.asset.jquery/jquery"],function(){return function(){this.highstock||hsInit();var t=this.highstock;return t}}(this));
!function(){function n(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function t(n){return null===n?0/0:+n}function e(n){return!isNaN(n)}function r(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function u(n){return n.length}function i(n){for(var t=1;n*t%1;)t*=10;return t}function o(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function a(){this._=Object.create(null)}function c(n){return(n+="")===la||n[0]===sa?sa+n:n}function l(n){return(n+="")[0]===sa?n.slice(1):n}function s(n){return c(n)in this._}function f(n){return(n=c(n))in this._&&delete this._[n]}function h(){var n=[];for(var t in this._)n.push(l(t));return n}function g(){var n=0;for(var t in this._)++n;return n}function p(){for(var n in this._)return!1;return!0}function v(){this._=Object.create(null)}function d(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function m(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=fa.length;r>e;++e){var u=fa[e]+t;if(u in n)return u}}function y(){}function x(){}function M(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new a;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function _(){Bo.event.preventDefault()}function b(){for(var n,t=Bo.event;n=t.sourceEvent;)t=n;return t}function w(n){for(var t=new x,e=0,r=arguments.length;++e<r;)t[arguments[e]]=M(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=Bo.event;u.target=n,Bo.event=u,t[u.type].apply(e,r)}finally{Bo.event=i}}},t}function S(n){return ga(n,ya),n}function k(n){return"function"==typeof n?n:function(){return pa(n,this)}}function E(n){return"function"==typeof n?n:function(){return va(n,this)}}function A(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=Bo.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function C(n){return n.trim().replace(/\s+/g," ")}function N(n){return new RegExp("(?:^|\\s+)"+Bo.requote(n)+"(?:\\s+|$)","g")}function z(n){return(n+"").trim().split(/^|\s+/)}function L(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=z(n).map(T);var u=n.length;return"function"==typeof t?r:e}function T(n){var t=N(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",C(u+" "+n))):e.setAttribute("class",C(u.replace(t," ")))}}function q(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function R(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function D(n){return"function"==typeof n?n:(n=Bo.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function P(n){return{__data__:n}}function U(n){return function(){return ma(this,n)}}function j(t){return arguments.length||(t=n),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function F(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function H(n){return ga(n,Ma),n}function O(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function Y(){var n=this.__transition__;n&&++n.active}function I(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,Jo(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+Bo.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=Z;a>0&&(n=n.slice(0,a));var l=ba.get(n);return l&&(n=l,c=V),a?t?u:r:t?y:i}function Z(n,t){return function(e){var r=Bo.event;Bo.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{Bo.event=r}}}function V(n,t){var e=Z(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function X(){var n=".dragsuppress-"+ ++Sa,t="click"+n,e=Bo.select(Qo).on("touchmove"+n,_).on("dragstart"+n,_).on("selectstart"+n,_);if(wa){var r=Ko.style,u=r[wa];r[wa]="none"}return function(i){function o(){e.on(t,null)}e.on(n,null),wa&&(r[wa]=u),i&&(e.on(t,function(){_(),o()},!0),setTimeout(o,0))}}function $(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();if(0>ka&&(Qo.scrollX||Qo.scrollY)){e=Bo.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=e[0][0].getScreenCTM();ka=!(u.f||u.e),e.remove()}return ka?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}var i=n.getBoundingClientRect();return[t.clientX-i.left-n.clientLeft,t.clientY-i.top-n.clientTop]}function B(){return Bo.event.changedTouches[0].identifier}function W(){return Bo.event.target}function J(){return Qo}function G(n){return n>0?1:0>n?-1:0}function K(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function Q(n){return n>1?0:-1>n?Ea:Math.acos(n)}function nt(n){return n>1?Ca:-1>n?-Ca:Math.asin(n)}function tt(n){return((n=Math.exp(n))-1/n)/2}function et(n){return((n=Math.exp(n))+1/n)/2}function rt(n){return((n=Math.exp(2*n))-1)/(n+1)}function ut(n){return(n=Math.sin(n/2))*n}function it(){}function ot(n,t,e){return this instanceof ot?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof ot?new ot(n.h,n.s,n.l):Mt(""+n,_t,ot):new ot(n,t,e)}function at(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new dt(u(n+120),u(n),u(n-120))}function ct(n,t,e){return this instanceof ct?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof ct?new ct(n.h,n.c,n.l):n instanceof st?ht(n.l,n.a,n.b):ht((n=bt((n=Bo.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new ct(n,t,e)}function lt(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new st(e,Math.cos(n*=La)*t,Math.sin(n)*t)}function st(n,t,e){return this instanceof st?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof st?new st(n.l,n.a,n.b):n instanceof ct?lt(n.h,n.c,n.l):bt((n=dt(n)).r,n.g,n.b):new st(n,t,e)}function ft(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=gt(u)*Ya,r=gt(r)*Ia,i=gt(i)*Za,new dt(vt(3.2404542*u-1.5371385*r-.4985314*i),vt(-.969266*u+1.8760108*r+.041556*i),vt(.0556434*u-.2040259*r+1.0572252*i))}function ht(n,t,e){return n>0?new ct(Math.atan2(e,t)*Ta,Math.sqrt(t*t+e*e),n):new ct(0/0,0/0,n)}function gt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function pt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function vt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function dt(n,t,e){return this instanceof dt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof dt?new dt(n.r,n.g,n.b):Mt(""+n,dt,at):new dt(n,t,e)}function mt(n){return new dt(n>>16,255&n>>8,255&n)}function yt(n){return mt(n)+""}function xt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function Mt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(St(u[0]),St(u[1]),St(u[2]))}return(i=$a.get(n))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function _t(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),new ot(r,u,c)}function bt(n,t,e){n=wt(n),t=wt(t),e=wt(e);var r=pt((.4124564*n+.3575761*t+.1804375*e)/Ya),u=pt((.2126729*n+.7151522*t+.072175*e)/Ia),i=pt((.0193339*n+.119192*t+.9503041*e)/Za);return st(116*u-16,500*(r-u),200*(u-i))}function wt(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function St(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function kt(n){return"function"==typeof n?n:function(){return n}}function Et(n){return n}function At(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Ct(t,e,n,r)}}function Ct(n,t,e,r){function u(){var n,t=c.status;if(!t&&zt(c)||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return o.error.call(i,r),void 0}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=Bo.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!Qo.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=Bo.event;Bo.event=n;try{o.progress.call(i,c)}finally{Bo.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(l=n,i):l},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(Jo(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var s in a)c.setRequestHeader(s,a[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},Bo.rebind(i,o,"on"),null==r?i:i.get(Nt(r))}function Nt(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function zt(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function Lt(){var n=Tt(),t=qt()-n;t>24?(isFinite(t)&&(clearTimeout(Ga),Ga=setTimeout(Lt,t)),Ja=0):(Ja=1,Qa(Lt))}function Tt(){var n=Date.now();for(Ka=Ba;Ka;)n>=Ka.t&&(Ka.f=Ka.c(n-Ka.t)),Ka=Ka.n;return n}function qt(){for(var n,t=Ba,e=1/0;t;)t.f?t=n?n.n=t.n:Ba=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Wa=n,e}function Rt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Dt(n,t){var e=Math.pow(10,3*ca(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Pt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],o=0,a=r[0],c=0;u>0&&a>0&&(c+a+1>t&&(a=Math.max(1,t-c)),i.push(n.substring(u-=a,u+a)),!((c+=a+1)>t));)a=r[o=(o+1)%r.length];return i.reverse().join(e)}:Et;return function(n){var e=tc.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",c=e[4]||"",l=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=ec.get(g)||Ut;var x=l&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>p){var c=Bo.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var M,_,b=n.lastIndexOf(".");if(0>b){var w=y?n.lastIndexOf("e"):-1;0>w?(M=n,_=""):(M=n.substring(0,w),_=n.substring(w))}else M=n.substring(0,b),_=t+n.substring(b+1);!l&&f&&(M=i(M,1/0));var S=v.length+M.length+_.length+(x?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return x&&(M=i(k+M,k.length?s-_.length:1/0)),u+=v,n=M+_,("<"===o?u+n+k:">"===o?k+u+n:"^"===o?k.substring(0,S>>=1)+u+n+k.substring(S):u+(x?n:k+n))+e}}}function Ut(n){return n+""}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new uc(e-1)),1),e}function i(n,e){return t(n=new uc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{uc=jt;var r=new jt;return r._=n,o(r,t,e)}finally{uc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ht(n);return c.floor=c,c.round=Ht(r),c.ceil=Ht(u),c.offset=Ht(i),c.range=a,n}function Ht(n){return function(t,e){try{uc=jt;var r=new jt;return r._=t,n(r,e)._}finally{uc=Date}}}function Ot(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(c,a)),null!=(u=oc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=C[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.slice(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&uc!==jt,o=new(i?jt:uc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(0|r.Z/100),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,l=e.length;c>a;){if(r>=l)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=N[o in oc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){b.lastIndex=0;var r=b.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){M.lastIndex=0;var r=M.exec(t.slice(e));return r?(n.w=_.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.slice(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,C.c.toString(),t,r)}function c(n,t,r){return e(n,C.x.toString(),t,r)}function l(n,t,r){return e(n,C.X.toString(),t,r)}function s(n,t,e){var r=x.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{uc=jt;var t=new uc;return t._=n,r(t)}finally{uc=Date}}var r=t(n);return e.parse=function(n){try{uc=jt;var t=r.parse(n);return t&&t._}finally{uc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ae;var x=Bo.map(),M=It(v),_=Zt(v),b=It(d),w=Zt(d),S=It(m),k=Zt(m),E=It(y),A=Zt(y);p.forEach(function(n,t){x.set(n.toLowerCase(),t)});var C={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return Yt(n.getDate(),t,2)},e:function(n,t){return Yt(n.getDate(),t,2)},H:function(n,t){return Yt(n.getHours(),t,2)},I:function(n,t){return Yt(n.getHours()%12||12,t,2)},j:function(n,t){return Yt(1+rc.dayOfYear(n),t,3)},L:function(n,t){return Yt(n.getMilliseconds(),t,3)},m:function(n,t){return Yt(n.getMonth()+1,t,2)},M:function(n,t){return Yt(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return Yt(n.getSeconds(),t,2)},U:function(n,t){return Yt(rc.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return Yt(rc.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return Yt(n.getFullYear()%100,t,2)},Y:function(n,t){return Yt(n.getFullYear()%1e4,t,4)},Z:ie,"%":function(){return"%"}},N={a:r,A:u,b:i,B:o,c:a,d:Qt,e:Qt,H:te,I:te,j:ne,L:ue,m:Kt,M:ee,p:s,S:re,U:Xt,w:Vt,W:$t,x:c,X:l,y:Wt,Y:Bt,Z:Jt,"%":oe};return t}function Yt(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function It(n){return new RegExp("^(?:"+n.map(Bo.requote).join("|")+")","i")}function Zt(n){for(var t=new a,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Vt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Xt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function $t(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Bt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Wt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.y=Gt(+r[0]),e+r[0].length):-1}function Jt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Gt(n){return n+(n>68?1900:2e3)}function Kt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Qt(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ne(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function te(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ee(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function re(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ue(n,t,e){ac.lastIndex=0;var r=ac.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ie(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=0|ca(t)/60,u=ca(t)%60;return e+Yt(r,"0",2)+Yt(u,"0",2)}function oe(n,t,e){cc.lastIndex=0;var r=cc.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ae(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ce(){}function le(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function se(n,t){n&&hc.hasOwnProperty(n.type)&&hc[n.type](n,t)}function fe(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)fe(n[e],t,1);t.polygonEnd()}function ge(){function n(n,t){n*=La,t=t*La/2+Ea/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),l=Math.sin(t),s=i*l,f=u*c+s*Math.cos(a),h=s*o*Math.sin(a);pc.add(Math.atan2(h,f)),r=n,u=c,i=l}var t,e,r,u,i;vc.point=function(o,a){vc.point=n,r=(t=o)*La,u=Math.cos(a=(e=a)*La/2+Ea/4),i=Math.sin(a)},vc.lineEnd=function(){n(t,e)}}function pe(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ve(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function de(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function me(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ye(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function xe(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function Me(n){return[Math.atan2(n[1],n[0]),nt(n[2])]}function _e(n,t){return ca(n[0]-t[0])<Na&&ca(n[1]-t[1])<Na}function be(n,t){n*=La;var e=Math.cos(t*=La);we(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function we(n,t,e){++dc,yc+=(n-yc)/dc,xc+=(t-xc)/dc,Mc+=(e-Mc)/dc}function Se(){function n(n,u){n*=La;var i=Math.cos(u*=La),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);mc+=l,_c+=l*(t+(t=o)),bc+=l*(e+(e=a)),wc+=l*(r+(r=c)),we(t,e,r)}var t,e,r;Ac.point=function(u,i){u*=La;var o=Math.cos(i*=La);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),Ac.point=n,we(t,e,r)}}function ke(){Ac.point=be}function Ee(){function n(n,t){n*=La;var e=Math.cos(t*=La),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=u*c-i*a,s=i*o-r*c,f=r*a-u*o,h=Math.sqrt(l*l+s*s+f*f),g=r*o+u*a+i*c,p=h&&-Q(g)/h,v=Math.atan2(h,g);Sc+=p*l,kc+=p*s,Ec+=p*f,mc+=v,_c+=v*(r+(r=o)),bc+=v*(u+(u=a)),wc+=v*(i+(i=c)),we(r,u,i)}var t,e,r,u,i;Ac.point=function(o,a){t=o,e=a,Ac.point=n,o*=La;var c=Math.cos(a*=La);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),we(r,u,i)},Ac.lineEnd=function(){n(t,e),Ac.lineEnd=ke,Ac.point=be}}function Ae(){return!0}function Ce(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(_e(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return u.lineEnd(),void 0}var c=new ze(e,n,null,!0),l=new ze(e,null,c,!1);c.o=l,i.push(c),o.push(l),c=new ze(r,n,null,!1),l=new ze(r,null,c,!0),c.o=l,i.push(c),o.push(l)}}),o.sort(t),Ne(i),Ne(o),i.length){for(var a=0,c=e,l=o.length;l>a;++a)o[a].e=c=!c;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,l=s.length;l>a;++a)u.point((f=s[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var a=s.length-1;a>=0;--a)u.point((f=s[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function Ne(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function ze(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Le(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function l(){y.point=o,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);M.point(e[0],e[1])}function f(){M.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),M.lineEnd();var n,t=M.clean(),e=x.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(_||(i.polygonStart(),_=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Te))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,g=Bo.merge(g);var n=je(m,p);g.length?(_||(i.polygonStart(),_=!0),Ce(g,Re,n,e,i)):n&&(_||(i.polygonStart(),_=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),_&&(i.polygonEnd(),_=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},x=qe(),M=t(x),_=!1;return y}}function Te(n){return n.length>1}function qe(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:y,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Re(n,t){return((n=n.x)[0]<0?n[1]-Ca-Na:Ca-n[1])-((t=t.x)[0]<0?t[1]-Ca-Na:Ca-t[1])}function De(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?Ea:-Ea,c=ca(i-e);ca(c-Ea)<Na?(n.point(e,r=(r+o)/2>0?Ca:-Ca),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=Ea&&(ca(e-u)<Na&&(e-=u*Na),ca(i-a)<Na&&(i-=a*Na),r=Pe(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function Pe(n,t,e,r){var u,i,o=Math.sin(n-e);return ca(o)>Na?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function Ue(n,t,e,r){var u;if(null==n)u=e*Ca,r.point(-Ea,u),r.point(0,u),r.point(Ea,u),r.point(Ea,0),r.point(Ea,-u),r.point(0,-u),r.point(-Ea,-u),r.point(-Ea,0),r.point(-Ea,u);else if(ca(n[0]-t[0])>Na){var i=n[0]<t[0]?Ea:-Ea;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function je(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;pc.reset();for(var a=0,c=t.length;c>a;++a){var l=t[a],s=l.length;if(s)for(var f=l[0],h=f[0],g=f[1]/2+Ea/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=l[d];var m=n[0],y=n[1]/2+Ea/4,x=Math.sin(y),M=Math.cos(y),_=m-h,b=_>=0?1:-1,w=b*_,S=w>Ea,k=p*x;if(pc.add(Math.atan2(k*b*Math.sin(w),v*M+k*Math.cos(w))),i+=S?_+b*Aa:_,S^h>=e^m>=e){var E=de(pe(f),pe(n));xe(E);var A=de(u,E);xe(A);var C=(S^_>=0?-1:1)*nt(A[2]);(r>C||r===C&&(E[0]||E[1]))&&(o+=S^_>=0?1:-1)}if(!d++)break;h=m,p=x,v=M,f=n}}return(-Na>i||Na>i&&0>pc)^1&o}function Fe(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?Ea:-Ea),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(_e(e,g)||_e(p,g))&&(p[0]+=Na,p[1]+=Na,v=t(p[0],p[1]))),v!==c)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(s=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&_e(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return s|(l&&c)<<1}}}function r(n,t,e){var r=pe(n),u=pe(t),o=[1,0,0],a=de(r,u),c=ve(a,a),l=a[0],s=c-l*l;if(!s)return!e&&n;var f=i*c/s,h=-i*l/s,g=de(o,a),p=ye(o,f),v=ye(a,h);me(p,v);var d=g,m=ve(p,d),y=ve(d,d),x=m*m-y*(ve(p,p)-1);if(!(0>x)){var M=Math.sqrt(x),_=ye(d,(-m-M)/y);if(me(_,p),_=Me(_),!e)return _;var b,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(b=w,w=S,S=b);var A=S-w,C=ca(A-Ea)<Na,N=C||Na>A;if(!C&&k>E&&(b=k,k=E,E=b),N?C?k+E>0^_[1]<(ca(_[0]-w)<Na?k:E):k<=_[1]&&_[1]<=E:A>Ea^(w<=_[0]&&_[0]<=S)){var z=ye(d,(-m+M)/y);return me(z,p),[_,Me(z)]}}}function u(t,e){var r=o?n:Ea-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=ca(i)>Na,c=gr(n,6*La);return Le(t,e,c,o?[0,-n]:[-Ea,n-Ea])}function He(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,l=o.y,s=a.x,f=a.y,h=0,g=1,p=s-c,v=f-l;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-l,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-l,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:l+h*v}),1>g&&(u.b={x:c+g*p,y:l+g*v}),u}}}}}}function Oe(n,t,e,r){function u(r,u){return ca(r[0]-n)<Na?u>0?0:3:ca(r[0]-e)<Na?u>0?2:1:ca(r[1]-t)<Na?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,l=a[0];c>o;++o)i=a[o],l[1]<=r?i[1]>r&&K(l,i,n)>0&&++t:i[1]<=r&&K(l,i,n)<0&&--t,l=i;return 0!==t}function l(i,a,c,l){var s=0,f=0;if(null==i||(s=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do l.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+c+4)%4)!==f)}else l.point(a[0],a[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&a.point(n,t)}function h(){N.point=p,d&&d.push(m=[]),S=!0,w=!1,_=b=0/0}function g(){v&&(p(y,x),M&&w&&A.rejoin(),v.push(A.buffer())),N.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Nc,Math.min(Nc,n)),t=Math.max(-Nc,Math.min(Nc,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,x=t,M=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:_,y:b},b:{x:n,y:t}};C(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}_=n,b=t,w=e}var v,d,m,y,x,M,_,b,w,S,k,E=a,A=qe(),C=He(n,t,e,r),N={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=Bo.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),u&&Ce(v,i,t,l,a),a.polygonEnd()),v=d=m=null}};return N}}function Ye(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ie(n){var t=0,e=Ea/3,r=ir(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*Ea/180,e=n[1]*Ea/180):[180*(t/Ea),180*(e/Ea)]},u}function Ze(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,nt((i-(n*n+e*e)*u*u)/(2*u))]},e}function Ve(){function n(n,t){Lc+=u*n-r*t,r=n,u=t}var t,e,r,u;Pc.point=function(i,o){Pc.point=n,t=r=i,e=u=o},Pc.lineEnd=function(){n(t,e)}}function Xe(n,t){Tc>n&&(Tc=n),n>Rc&&(Rc=n),qc>t&&(qc=t),t>Dc&&(Dc=t)}function $e(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=Be(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Be(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Be(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function We(n,t){yc+=n,xc+=t,++Mc}function Je(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);_c+=o*(t+n)/2,bc+=o*(e+r)/2,wc+=o,We(t=n,e=r)}var t,e;jc.point=function(r,u){jc.point=n,We(t=r,e=u)}}function Ge(){jc.point=We}function Ke(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);_c+=o*(r+n)/2,bc+=o*(u+t)/2,wc+=o,o=u*n-r*t,Sc+=o*(r+n),kc+=o*(u+t),Ec+=3*o,We(r=n,u=t)}var t,e,r,u;jc.point=function(i,o){jc.point=n,We(t=r=i,e=u=o)},jc.lineEnd=function(){n(t,e)}}function Qe(n){function t(t,e){n.moveTo(t,e),n.arc(t,e,o,0,Aa)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:y};return a}function nr(n){function t(n){return(a?r:e)(n)}function e(t){return rr(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){x=0/0,S.point=i,t.lineStart()}function i(e,r){var i=pe([e,r]),o=n(e,r);u(x,M,y,_,b,w,x=o[0],M=o[1],y=e,_=i[0],b=i[1],w=i[2],a,t),t.point(x,M)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=l,S.lineEnd=s}function l(n,t){i(f=n,h=t),g=x,p=M,v=_,d=b,m=w,S.point=i}function s(){u(x,M,y,_,b,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,x,M,_,b,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,l,s,f,h,g,p,v,d,m){var y=s-t,x=f-e,M=y*y+x*x;if(M>4*i&&d--){var _=a+g,b=c+p,w=l+v,S=Math.sqrt(_*_+b*b+w*w),k=Math.asin(w/=S),E=ca(ca(w)-1)<Na||ca(r-h)<Na?(r+h)/2:Math.atan2(b,_),A=n(E,k),C=A[0],N=A[1],z=C-t,L=N-e,T=x*z-y*L;
(T*T/M>i||ca((y*z+x*L)/M-.5)>.3||o>a*g+c*p+l*v)&&(u(t,e,r,a,c,l,C,N,E,_/=S,b/=S,w,d,m),m.point(C,N),u(C,N,E,_,b,w,s,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*La),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function tr(n){var t=nr(function(t,e){return n([t*Ta,e*Ta])});return function(n){return or(t(n))}}function er(n){this.stream=n}function rr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ur(n){return ir(function(){return n})()}function ir(n){function t(n){return n=a(n[0]*La,n[1]*La),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Ta,n[1]*Ta]}function r(){a=Ye(o=lr(m,y,x),i);var n=i(v,d);return c=g-n[0]*h,l=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,o,a,c,l,s,f=nr(function(n,t){return n=i(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,y=0,x=0,M=Cc,_=Et,b=null,w=null;return t.stream=function(n){return s&&(s.valid=!1),s=or(M(o,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(M=null==n?(b=n,Cc):Fe((b=+n)*La),u()):b},t.clipExtent=function(n){return arguments.length?(w=n,_=n?Oe(n[0][0],n[0][1],n[1][0],n[1][1]):Et,u()):w},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*La,d=n[1]%360*La,r()):[v*Ta,d*Ta]},t.rotate=function(n){return arguments.length?(m=n[0]%360*La,y=n[1]%360*La,x=n.length>2?n[2]%360*La:0,r()):[m*Ta,y*Ta,x*Ta]},Bo.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function or(n){return rr(n,function(t,e){n.point(t*La,e*La)})}function ar(n,t){return[n,t]}function cr(n,t){return[n>Ea?n-Aa:-Ea>n?n+Aa:n,t]}function lr(n,t,e){return n?t||e?Ye(fr(n),hr(t,e)):fr(n):t||e?hr(t,e):cr}function sr(n){return function(t,e){return t+=n,[t>Ea?t-Aa:-Ea>t?t+Aa:t,e]}}function fr(n){var t=sr(n);return t.invert=sr(-n),t}function hr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*r+a*u;return[Math.atan2(c*i-s*o,a*r-l*u),nt(s*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*i-c*o;return[Math.atan2(c*i+l*o,a*r+s*u),nt(s*r-a*u)]},e}function gr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=pr(e,u),i=pr(e,i),(o>0?i>u:u>i)&&(u+=o*Aa)):(u=n+o*Aa,i=n-.5*c);for(var l,s=u;o>0?s>i:i>s;s-=c)a.point((l=Me([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],l[1])}}function pr(n,t){var e=pe(t);e[0]-=n,xe(e);var r=Q(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Na)%(2*Math.PI)}function vr(n,t,e){var r=Bo.range(n,t-Na,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function dr(n,t,e){var r=Bo.range(n,t-Na,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function mr(n){return n.source}function yr(n){return n.target}function xr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),l=u*Math.sin(n),s=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(ut(r-t)+u*o*ut(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*s,u=e*l+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Ta,Math.atan2(o,Math.sqrt(r*r+u*u))*Ta]}:function(){return[n*Ta,t*Ta]};return p.distance=h,p}function Mr(){function n(n,u){var i=Math.sin(u*=La),o=Math.cos(u),a=ca((n*=La)-t),c=Math.cos(a);Fc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Hc.point=function(u,i){t=u*La,e=Math.sin(i*=La),r=Math.cos(i),Hc.point=n},Hc.lineEnd=function(){Hc.point=Hc.lineEnd=y}}function _r(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function br(n,t){function e(n,t){o>0?-Ca+Na>t&&(t=-Ca+Na):t>Ca-Na&&(t=Ca-Na);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(Ea/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=G(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ca]},e):Sr}function wr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return ca(u)<Na?ar:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-G(u)*Math.sqrt(n*n+e*e)]},e)}function Sr(n,t){return[n,Math.log(Math.tan(Ea/4+t/2))]}function kr(n){var t,e=ur(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=Ea*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Er(n,t){return[Math.log(Math.tan(Ea/4+t/2)),-n]}function Ar(n){return n[0]}function Cr(n){return n[1]}function Nr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&K(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function zr(n,t){return n[0]-t[0]||n[1]-t[1]}function Lr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Tr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],l=e[1],s=t[1]-c,f=r[1]-l,h=(a*(c-l)-f*(u-i))/(f*o-a*s);return[u+h*o,c+h*s]}function qr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Rr(){tu(this),this.edge=this.site=this.circle=null}function Dr(n){var t=Kc.pop()||new Rr;return t.site=n,t}function Pr(n){Xr(n),Wc.remove(n),Kc.push(n),tu(n)}function Ur(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Pr(n);for(var c=i;c.circle&&ca(e-c.circle.x)<Na&&ca(r-c.circle.cy)<Na;)i=c.P,a.unshift(c),Pr(c),c=i;a.unshift(c),Xr(c);for(var l=o;l.circle&&ca(e-l.circle.x)<Na&&ca(r-l.circle.cy)<Na;)o=l.N,a.push(l),Pr(l),l=o;a.push(l),Xr(l);var s,f=a.length;for(s=1;f>s;++s)l=a[s],c=a[s-1],Kr(l.edge,c.site,l.site,u);c=a[0],l=a[f-1],l.edge=Jr(c.site,l.site,null,u),Vr(c),Vr(l)}function jr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Wc._;a;)if(r=Fr(a,o)-i,r>Na)a=a.L;else{if(u=i-Hr(a,o),!(u>Na)){r>-Na?(t=a.P,e=a):u>-Na?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Dr(n);if(Wc.insert(t,c),t||e){if(t===e)return Xr(t),e=Dr(t.site),Wc.insert(c,e),c.edge=e.edge=Jr(t.site,c.site),Vr(t),Vr(e),void 0;if(!e)return c.edge=Jr(t.site,c.site),void 0;Xr(t),Xr(e);var l=t.site,s=l.x,f=l.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,x=v*v+d*d,M={x:(d*y-g*x)/m+s,y:(h*x-v*y)/m+f};Kr(e.edge,l,p,M),c.edge=Jr(l,n,null,M),e.edge=Jr(n,p,null,M),Vr(t),Vr(e)}}function Fr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var s=a-r,f=1/i-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+u-i/2)))/f+r:(r+a)/2}function Hr(n,t){var e=n.N;if(e)return Fr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Or(n){this.site=n,this.edges=[]}function Yr(n){for(var t,e,r,u,i,o,a,c,l,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Bc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)s=a[o].end(),r=s.x,u=s.y,l=a[++o%c].start(),t=l.x,e=l.y,(ca(r-t)>Na||ca(u-e)>Na)&&(a.splice(o,0,new Qr(Gr(i.site,s,ca(r-f)<Na&&p-u>Na?{x:f,y:ca(t-f)<Na?e:p}:ca(u-p)<Na&&h-r>Na?{x:ca(e-p)<Na?t:h,y:p}:ca(r-h)<Na&&u-g>Na?{x:h,y:ca(t-h)<Na?e:g}:ca(u-g)<Na&&r-f>Na?{x:ca(e-g)<Na?t:f,y:g}:null),i.site,null)),++c)}function Ir(n,t){return t.angle-n.angle}function Zr(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,l=r.y-a,s=i.x-o,f=i.y-a,h=2*(c*f-l*s);if(!(h>=-za)){var g=c*c+l*l,p=s*s+f*f,v=(f*g-l*p)/h,d=(c*p-s*g)/h,f=d+a,m=Qc.pop()||new Zr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,x=Gc._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}Gc.insert(y,m),y||(Jc=m)}}}}function Xr(n){var t=n.circle;t&&(t.P||(Jc=t.N),Gc.remove(t),Qc.push(t),tu(t),n.circle=null)}function $r(n){for(var t,e=$c,r=He(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Br(t,n)||!r(t)||ca(t.a.x-t.b.x)<Na&&ca(t.a.y-t.b.y)<Na)&&(t.a=t.b=null,e.splice(u,1))}function Br(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=l)return}else i={x:d,y:c};e={x:d,y:l}}else{if(i){if(i.y<c)return}else i={x:d,y:l};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else{if(i){if(i.y<c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Wr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Jr(n,t,e,r){var u=new Wr(n,t);return $c.push(u),e&&Kr(u,n,t,e),r&&Kr(u,t,n,r),Bc[n.i].edges.push(new Qr(u,n,t)),Bc[t.i].edges.push(new Qr(u,t,n)),u}function Gr(n,t,e){var r=new Wr(n,null);return r.a=t,r.b=e,$c.push(r),r}function Kr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Qr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nu(){this._=null}function tu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ru(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function uu(n){for(;n.L;)n=n.L;return n}function iu(n,t){var e,r,u,i=n.sort(ou).pop();for($c=[],Bc=new Array(n.length),Wc=new nu,Gc=new nu;;)if(u=Jc,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Bc[i.i]=new Or(i),jr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Ur(u.arc)}t&&($r(t),Yr(t));var o={cells:Bc,edges:$c};return Wc=Gc=$c=Bc=null,o}function ou(n,t){return t.y-n.y||t.x-n.x}function au(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function cu(n){return n.x}function lu(n){return n.y}function su(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&fu(n,c[0],e,r,o,a),c[1]&&fu(n,c[1],o,r,u,a),c[2]&&fu(n,c[2],e,a,o,i),c[3]&&fu(n,c[3],o,a,u,i)}}function hu(n,t){n=Bo.rgb(n),t=Bo.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+xt(Math.round(e+i*n))+xt(Math.round(r+o*n))+xt(Math.round(u+a*n))}}function gu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=du(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function pu(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function vu(n,t){var e,r,u,i=tl.lastIndex=el.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=tl.exec(n))&&(r=el.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:pu(e,r)})),i=el.lastIndex;return i<t.length&&(u=t.slice(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function du(n,t){for(var e,r=Bo.interpolators.length;--r>=0&&!(e=Bo.interpolators[r](n,t)););return e}function mu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(du(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function yu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function xu(n){return function(t){return 1-n(1-t)}}function Mu(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function _u(n){return n*n}function bu(n){return n*n*n}function wu(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function Su(n){return function(t){return Math.pow(t,n)}}function ku(n){return 1-Math.cos(n*Ca)}function Eu(n){return Math.pow(2,10*(n-1))}function Au(n){return 1-Math.sqrt(1-n*n)}function Cu(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/Aa*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*Aa/t)}}function Nu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function zu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Lu(n,t){n=Bo.hcl(n),t=Bo.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return lt(e+i*n,r+o*n,u+a*n)+""}}function Tu(n,t){n=Bo.hsl(n),t=Bo.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return at(e+i*n,r+o*n,u+a*n)+""}}function qu(n,t){n=Bo.lab(n),t=Bo.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ft(e+i*n,r+o*n,u+a*n)+""}}function Ru(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Du(n){var t=[n.a,n.b],e=[n.c,n.d],r=Uu(t),u=Pu(t,e),i=Uu(ju(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Ta,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Ta:0}function Pu(n,t){return n[0]*t[0]+n[1]*t[1]}function Uu(n){var t=Math.sqrt(Pu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function ju(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Fu(n,t){var e,r=[],u=[],i=Bo.transform(n),o=Bo.transform(t),a=i.translate,c=o.translate,l=i.rotate,s=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:pu(a[0],c[0])},{i:3,x:pu(a[1],c[1])})):c[0]||c[1]?r.push("translate("+c+")"):r.push(""),l!=s?(l-s>180?s+=360:s-l>180&&(l+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:pu(l,s)})):s&&r.push(r.pop()+"rotate("+s+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:pu(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:pu(g[0],p[0])},{i:e-2,x:pu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Hu(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Ou(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Yu(n){for(var t=n.source,e=n.target,r=Zu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Iu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Zu(n,t){if(n===t)return n;for(var e=Iu(n),r=Iu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Vu(n){n.fixed|=2}function Xu(n){n.fixed&=-7}function $u(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Bu(n){n.fixed&=-5}function Wu(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Wu(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,u+=l*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Ju(n,t){return Bo.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=ei,n}function Gu(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function Ku(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function Qu(n){return n.children}function ni(n){return n.value}function ti(n,t){return t.value-n.value}function ei(n){return Bo.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ri(n){return n.x}function ui(n){return n.y}function ii(n,t,e){n.y0=t,n.y=e}function oi(n){return Bo.range(n.length)}function ai(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function ci(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function li(n){return n.reduce(si,0)}function si(n,t){return n+t[1]}function fi(n,t){return hi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function hi(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function gi(n){return[Bo.min(n),Bo.max(n)]}function pi(n,t){return n.value-t.value}function vi(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function di(n,t){n._pack_next=t,t._pack_prev=n}function mi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function yi(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(l=e.length)){var e,r,u,i,o,a,c,l,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(xi),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(u=e[1],u.x=u.r,u.y=0,t(u),l>2))for(i=e[2],bi(r,u,i),t(i),vi(r,i),r._pack_prev=i,vi(i,u),u=r._pack_next,o=3;l>o;o++){bi(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(mi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!mi(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?di(r,u=a):di(r=c,u),o--):(vi(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,x=0;for(o=0;l>o;o++)i=e[o],i.x-=m,i.y-=y,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=x,e.forEach(Mi)}}function xi(n){n._pack_next=n._pack_prev=n}function Mi(n){delete n._pack_next,delete n._pack_prev}function _i(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)_i(u[i],t,e,r)}function bi(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+l*i,e.y=n.y+c*i-l*u}else e.x=n.x+r,e.y=n.y}function wi(n,t){return n.parent==t.parent?1:2}function Si(n){var t=n.children;return t.length?t[0]:n.t}function ki(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ei(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Ai(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Ci(n,t,e){return n.a.parent===t.parent?n.a:e}function Ni(n){return 1+Bo.max(n,function(n){return n.y})}function zi(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Li(n){var t=n.children;return t&&t.length?Li(t[0]):n}function Ti(n){var t,e=n.children;return e&&(t=e.length)?Ti(e[t-1]):n}function qi(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Ri(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Di(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Pi(n){return n.rangeExtent?n.rangeExtent():Di(n.range())}function Ui(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function ji(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Fi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:gl}function Hi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=Bo.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Oi(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Hi:Ui,c=r?Ou:Hu;return o=u(n,t,c,e),a=u(t,n,c,du),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Ru)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Vi(n,t)},i.tickFormat=function(t,e){return Xi(n,t,e)},i.nice=function(t){return Ii(n,t),u()},i.copy=function(){return Oi(n,t,e,r)},u()}function Yi(n,t){return Bo.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Ii(n,t){return ji(n,Fi(Zi(n,t)[2]))}function Zi(n,t){null==t&&(t=10);var e=Di(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Vi(n,t){return Bo.range.apply(Bo,Zi(n,t))}function Xi(n,t,e){var r=Zi(n,t);if(e){var u=tc.exec(e);if(u.shift(),"s"===u[8]){var i=Bo.formatPrefix(Math.max(ca(r[0]),ca(r[1])));return u[7]||(u[7]="."+$i(i.scale(r[2]))),u[8]="f",e=Bo.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Bi(u[8],r)),e=u.join("")}else e=",."+$i(r[2])+"f";return Bo.format(e)}function $i(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Bi(n,t){var e=$i(t[2]);return n in pl?Math.abs(e-$i(Math.max(ca(t[0]),ca(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Wi(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=ji(r.map(u),e?Math:dl);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Di(r),o=[],a=n[0],c=n[1],l=Math.floor(u(a)),s=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(s-l)){if(e){for(;s>l;l++)for(var h=1;f>h;h++)o.push(i(l)*h);o.push(i(l))}else for(o.push(i(l));l++<s;)for(var h=f-1;h>0;h--)o.push(i(l)*h);for(l=0;o[l]<a;l++);for(s=o.length;o[s-1]>c;s--);o=o.slice(l,s)}return o},o.tickFormat=function(n,t){if(!arguments.length)return vl;arguments.length<2?t=vl:"function"!=typeof t&&(t=Bo.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Wi(n.copy(),t,e,r)},Yi(o,n)}function Ji(n,t,e){function r(t){return n(u(t))}var u=Gi(t),i=Gi(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Vi(e,n)},r.tickFormat=function(n,t){return Xi(e,n,t)},r.nice=function(n){return r.domain(Ii(e,n))},r.exponent=function(o){return arguments.length?(u=Gi(t=o),i=Gi(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Ji(n.copy(),t,e)},Yi(r,n)}function Gi(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function Ki(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return Bo.range(n.length).map(function(n){return t+e*n})}var u,i,o;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new a;for(var i,o=-1,c=r.length;++o<c;)u.has(i=r[o])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,o=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=(l-c)/(Math.max(1,n.length-1)+a);return i=r(n.length<2?(c+l)/2:c+s*a/2,s),o=0,t={t:"rangePoints",a:arguments},e},e.rangeBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=(f-s)/(n.length-a+2*c);return i=r(s+h*c,h),l&&i.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=Math.floor((f-s)/(n.length-a+2*c)),g=f-s-(n.length-a)*h;return i=r(s+Math.round(g/2),h),l&&i.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Di(t.a[0])},e.copy=function(){return Ki(n,t)},e.domain(n)}function Qi(r,u){function i(){var n=0,t=u.length;for(a=[];++n<t;)a[n-1]=Bo.quantile(r,n/t);return o}function o(n){return isNaN(n=+n)?void 0:u[Bo.bisect(a,n)]}var a;return o.domain=function(u){return arguments.length?(r=u.map(t).filter(e).sort(n),i()):r},o.range=function(n){return arguments.length?(u=n,i()):u},o.quantiles=function(){return a},o.invertExtent=function(n){return n=u.indexOf(n),0>n?[0/0,0/0]:[n>0?a[n-1]:r[0],n<a.length?a[n]:r[r.length-1]]},o.copy=function(){return Qi(r,u)},i()}function no(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return no(n,t,e)},u()}function to(n,t){function e(e){return e>=e?t[Bo.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return to(n,t)},e}function eo(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Vi(n,t)},t.tickFormat=function(t,e){return Xi(n,t,e)},t.copy=function(){return eo(n)},t}function ro(n){return n.innerRadius}function uo(n){return n.outerRadius}function io(n){return n.startAngle}function oo(n){return n.endAngle}function ao(n){function t(t){function o(){l.push("M",i(n(s),a))}for(var c,l=[],s=[],f=-1,h=t.length,g=kt(e),p=kt(r);++f<h;)u.call(this,c=t[f],f)?s.push([+g.call(this,c,f),+p.call(this,c,f)]):s.length&&(o(),s=[]);return s.length&&o(),l.length?l.join(""):null}var e=Ar,r=Cr,u=Ae,i=co,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=wl.get(n)||co).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function co(n){return n.join("L")}function lo(n){return co(n)+"Z"}function so(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function fo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function ho(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function go(n,t){return n.length<4?co(n):n[1]+mo(n.slice(1,n.length-1),yo(n,t))}function po(n,t){return n.length<3?co(n):n[0]+mo((n.push(n[0]),n),yo([n[n.length-2]].concat(n,[n[1]]),t))}function vo(n,t){return n.length<3?co(n):n[0]+mo(n,yo(n,t))}function mo(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return co(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,c++)i=n[c],a=t[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var s=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+s[0]+","+s[1]}return r}function yo(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function xo(n){if(n.length<3)return co(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",wo(El,o),",",wo(El,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),So(c,o,a);return n.pop(),c.push("L",r),c.join("")}function Mo(n){if(n.length<4)return co(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(wo(El,i)+","+wo(El,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),So(e,i,o);return e.join("")}function _o(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[wo(El,o),",",wo(El,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),So(t,o,a);return t.join("")}function bo(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],u=l/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return xo(n)}function wo(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function So(n,t,e){n.push("C",wo(Sl,t),",",wo(Sl,e),",",wo(kl,t),",",wo(kl,e),",",wo(El,t),",",wo(El,e))}function ko(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Eo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=ko(u,i);++t<e;)r[t]=(o+(o=ko(u=i,i=n[t+1])))/2;return r[t]=o,r}function Ao(n){for(var t,e,r,u,i=[],o=Eo(n),a=-1,c=n.length-1;++a<c;)t=ko(n[a],n[a+1]),ca(t)<Na?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function Co(n){return n.length<3?co(n):n[0]+mo(n,Ao(n))}function No(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]+_l,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function zo(n){function t(t){function c(){v.push("M",a(n(m),f),s,l(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,x=t.length,M=kt(e),_=kt(u),b=e===r?function(){return g}:kt(r),w=u===i?function(){return p}:kt(i);++y<x;)o.call(this,h=t[y],y)?(d.push([g=+M.call(this,h,y),p=+_.call(this,h,y)]),m.push([+b.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=Ar,r=Ar,u=0,i=Cr,o=Ae,a=co,c=a.key,l=a,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=wl.get(n)||co).key,l=a.reverse||a,s=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Lo(n){return n.radius}function To(n){return[n.x,n.y]}function qo(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]+_l;return[e*Math.cos(r),e*Math.sin(r)]}}function Ro(){return 64}function Do(){return"circle"}function Po(n){var t=Math.sqrt(n/Ea);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Uo(n,t){return ga(n,Tl),n.id=t,n}function jo(n,t,e,r){var u=n.id;return F(n,"function"==typeof e?function(n,i,o){n.__transition__[u].tween.set(t,r(e.call(n,n.__data__,i,o)))}:(e=r(e),function(n){n.__transition__[u].tween.set(t,e)}))}function Fo(n){return null==n&&(n=""),function(){this.textContent=n}}function Ho(n,t,e,r){var u=n.__transition__||(n.__transition__={active:0,count:0}),i=u[e];if(!i){var o=r.time;i=u[e]={tween:new a,time:o,ease:r.ease,delay:r.delay,duration:r.duration},++u.count,Bo.timer(function(r){function a(r){return u.active>e?l():(u.active=e,i.event&&i.event.start.call(n,s,t),i.tween.forEach(function(e,r){(r=r.call(n,s,t))&&v.push(r)
}),Bo.timer(function(){return p.c=c(r||1)?Ae:c,1},0,o),void 0)}function c(r){if(u.active!==e)return l();for(var o=r/g,a=f(o),c=v.length;c>0;)v[--c].call(n,a);return o>=1?(i.event&&i.event.end.call(n,s,t),l()):void 0}function l(){return--u.count?delete u[e]:delete n.__transition__,1}var s=n.__data__,f=i.ease,h=i.delay,g=i.duration,p=Ka,v=[];return p.t=h+o,r>=h?a(r-h):(p.c=a,void 0)},0,o)}}function Oo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function Yo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Io(n){return n.toISOString()}function Zo(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=Bo.bisect(Ol,u);return i==Ol.length?[t.year,Zi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Ol[i-1]<Ol[i]/u?i-1:i]:[Zl,Zi(n,e)[2]]}return r.invert=function(t){return Vo(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Vo)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Vo(+e+1),t).length}var i=r.domain(),o=Di(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(ji(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Vo(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Vo(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Di(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Vo(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Zo(n.copy(),t,e)},Yi(r,n)}function Vo(n){return new Date(n)}function Xo(n){return JSON.parse(n.responseText)}function $o(n){var t=Go.createRange();return t.selectNode(Go.body),t.createContextualFragment(n.responseText)}var Bo={version:"3.4.13"};Date.now||(Date.now=function(){return+new Date});var Wo=[].slice,Jo=function(n){return Wo.call(n)},Go=document,Ko=Go.documentElement,Qo=window;try{Jo(Ko.childNodes)[0].nodeType}catch(na){Jo=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{Go.createElement("div").style.setProperty("opacity",0,"")}catch(ta){var ea=Qo.Element.prototype,ra=ea.setAttribute,ua=ea.setAttributeNS,ia=Qo.CSSStyleDeclaration.prototype,oa=ia.setProperty;ea.setAttribute=function(n,t){ra.call(this,n,t+"")},ea.setAttributeNS=function(n,t,e){ua.call(this,n,t,e+"")},ia.setProperty=function(n,t,e){oa.call(this,n,t+"",e)}}Bo.ascending=n,Bo.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},Bo.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i&&!(null!=(e=n[u])&&e>=e);)e=void 0;for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i&&!(null!=(e=t.call(n,n[u],u))&&e>=e);)e=void 0;for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},Bo.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i&&!(null!=(e=n[u])&&e>=e);)e=void 0;for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i&&!(null!=(e=t.call(n,n[u],u))&&e>=e);)e=void 0;for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},Bo.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o&&!(null!=(e=u=n[i])&&e>=e);)e=u=void 0;for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o&&!(null!=(e=u=t.call(n,n[i],i))&&e>=e);)e=void 0;for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},Bo.sum=function(n,t){var r,u=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)e(r=+n[o])&&(u+=r);else for(;++o<i;)e(r=+t.call(n,n[o],o))&&(u+=r);return u},Bo.mean=function(n,r){var u,i=0,o=n.length,a=-1,c=o;if(1===arguments.length)for(;++a<o;)e(u=t(n[a]))?i+=u:--c;else for(;++a<o;)e(u=t(r.call(n,n[a],a)))?i+=u:--c;return c?i/c:void 0},Bo.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},Bo.median=function(r,u){var i,o=[],a=r.length,c=-1;if(1===arguments.length)for(;++c<a;)e(i=t(r[c]))&&o.push(i);else for(;++c<a;)e(i=t(u.call(r,r[c],c)))&&o.push(i);return o.length?Bo.quantile(o.sort(n),.5):void 0};var aa=r(n);Bo.bisectLeft=aa.left,Bo.bisect=Bo.bisectRight=aa.right,Bo.bisector=function(t){return r(1===t.length?function(e,r){return n(t(e),r)}:t)},Bo.shuffle=function(n){for(var t,e,r=n.length;r;)e=0|Math.random()*r--,t=n[r],n[r]=n[e],n[e]=t;return n},Bo.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},Bo.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},Bo.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=Bo.min(arguments,u),e=new Array(t);++n<t;)for(var r,i=-1,o=e[n]=new Array(r);++i<r;)o[i]=arguments[i][n];return e},Bo.transpose=function(n){return Bo.zip.apply(Bo,n)},Bo.keys=function(n){var t=[];for(var e in n)t.push(e);return t},Bo.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},Bo.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},Bo.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var ca=Math.abs;Bo.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),1/0===(t-n)/e)throw new Error("infinite range");var r,u=[],o=i(ca(e)),a=-1;if(n*=o,t*=o,e*=o,0>e)for(;(r=n+e*++a)>t;)u.push(r/o);else for(;(r=n+e*++a)<t;)u.push(r/o);return u},Bo.map=function(n){var t=new a;if(n instanceof a)n.forEach(function(n,e){t.set(n,e)});else for(var e in n)t.set(e,n[e]);return t};var la="__proto__",sa="\x00";o(a,{has:s,get:function(n){return this._[c(n)]},set:function(n,t){return this._[c(n)]=t},remove:f,keys:h,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:l(t),value:this._[t]});return n},size:g,empty:p,forEach:function(n){for(var t in this._)n.call(this,l(t),this._[t])}}),Bo.nest=function(){function n(t,o,c){if(c>=i.length)return r?r.call(u,o):e?o.sort(e):o;for(var l,s,f,h,g=-1,p=o.length,v=i[c++],d=new a;++g<p;)(h=d.get(l=v(s=o[g])))?h.push(s):d.set(l,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,c))}):(s={},f=function(e,r){s[e]=n(t,r,c)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=o[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],o=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(Bo.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return o[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},Bo.set=function(n){var t=new v;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},o(v,{has:s,add:function(n){return this._[c(n+="")]=!0,n},remove:f,values:h,size:g,empty:p,forEach:function(n){for(var t in this._)n.call(this,l(t))}}),Bo.behavior={},Bo.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=d(n,t,t[e]);return n};var fa=["webkit","ms","moz","Moz","o","O"];Bo.dispatch=function(){for(var n=new x,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=M(n);return n},x.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},Bo.event=null,Bo.requote=function(n){return n.replace(ha,"\\$&")};var ha=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ga={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},pa=function(n,t){return t.querySelector(n)},va=function(n,t){return t.querySelectorAll(n)},da=Ko.matches||Ko[m(Ko,"matchesSelector")],ma=function(n,t){return da.call(n,t)};"function"==typeof Sizzle&&(pa=function(n,t){return Sizzle(n,t)[0]||null},va=Sizzle,ma=Sizzle.matchesSelector),Bo.selection=function(){return _a};var ya=Bo.selection.prototype=[];ya.select=function(n){var t,e,r,u,i=[];n=k(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return S(i)},ya.selectAll=function(n){var t,e,r=[];n=E(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=Jo(n.call(e,e.__data__,a,u))),t.parentNode=e);return S(r)};var xa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Bo.ns={prefix:xa,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.slice(0,t),n=n.slice(t+1)),xa.hasOwnProperty(e)?{space:xa[e],local:n}:n}},ya.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=Bo.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(A(t,n[t]));return this}return this.each(A(n,t))},ya.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=z(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!N(n[u]).test(t))return!1;return!0}for(t in n)this.each(L(t,n[t]));return this}return this.each(L(n,t))},ya.style=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t="");for(e in n)this.each(q(e,n[e],t));return this}if(2>r)return Qo.getComputedStyle(this.node(),null).getPropertyValue(n);e=""}return this.each(q(n,t,e))},ya.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},ya.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},ya.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},ya.append=function(n){return n=D(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},ya.insert=function(n,t){return n=D(n),t=k(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},ya.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})},ya.data=function(n,t){function e(n,e){var r,u,i,o=n.length,f=e.length,h=Math.min(o,f),g=new Array(f),p=new Array(f),v=new Array(o);if(t){var d,m=new a,y=new Array(o);for(r=-1;++r<o;)m.has(d=t.call(u=n[r],u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d;for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=P(i),m.set(d,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=P(i);for(;f>r;++r)p[r]=P(e[r]);for(;o>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,c.push(p),l.push(g),s.push(v)}var r,u,i=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++i<o;)(u=r[i])&&(n[i]=u.__data__);return n}var c=H([]),l=S([]),s=S([]);if("function"==typeof n)for(;++i<o;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],n);return l.enter=function(){return c},l.exit=function(){return s},l},ya.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},ya.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=U(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return S(u)},ya.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},ya.sort=function(n){n=j.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},ya.each=function(n){return F(this,function(t,e,r){n.call(t,t.__data__,e,r)})},ya.call=function(n){var t=Jo(arguments);return n.apply(t[0]=this,t),this},ya.empty=function(){return!this.node()},ya.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},ya.size=function(){var n=0;return F(this,function(){++n}),n};var Ma=[];Bo.selection.enter=H,Bo.selection.enter.prototype=Ma,Ma.append=ya.append,Ma.empty=ya.empty,Ma.node=ya.node,Ma.call=ya.call,Ma.size=ya.size,Ma.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var l=-1,s=u.length;++l<s;)(i=u[l])?(t.push(r[l]=e=n.call(u.parentNode,i.__data__,l,a)),e.__data__=i.__data__):t.push(null)}return S(o)},Ma.insert=function(n,t){return arguments.length<2&&(t=O(this)),ya.insert.call(this,n,t)},ya.transition=function(){for(var n,t,e=Cl||++ql,r=[],u=Nl||{time:Date.now(),ease:wu,delay:0,duration:250},i=-1,o=this.length;++i<o;){r.push(n=[]);for(var a=this[i],c=-1,l=a.length;++c<l;)(t=a[c])&&Ho(t,c,e,u),n.push(t)}return Uo(r,e)},ya.interrupt=function(){return this.each(Y)},Bo.select=function(n){var t=["string"==typeof n?pa(n,Go):n];return t.parentNode=Ko,S([t])},Bo.selectAll=function(n){var t=Jo("string"==typeof n?va(n,Go):n);return t.parentNode=Ko,S([t])};var _a=Bo.select(Ko);ya.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(I(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(I(n,t,e))};var ba=Bo.map({mouseenter:"mouseover",mouseleave:"mouseout"});ba.forEach(function(n){"on"+n in Go&&ba.remove(n)});var wa="onselectstart"in Go?null:m(Ko.style,"userSelect"),Sa=0;Bo.mouse=function(n){return $(n,b())};var ka=/WebKit/.test(Qo.navigator.userAgent)?-1:0;Bo.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=b().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return $(n,r)},Bo.behavior.drag=function(){function n(){this.on("mousedown.drag",u).on("touchstart.drag",i)}function t(n,t,u,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-x[0],e=r[1]-x[1],p|=n|e,x=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&Bo.event.target===f),g({type:"dragend"}))}var l,s=this,f=Bo.event.target,h=s.parentNode,g=e.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=Bo.select(u()).on(i+d,a).on(o+d,c),y=X(),x=t(h,v);r?(l=r.apply(s,arguments),l=[l.x-x[0],l.y-x[1]]):l=[0,0],g({type:"dragstart"})}}var e=w(n,"drag","dragstart","dragend"),r=null,u=t(y,Bo.mouse,J,"mousemove","mouseup"),i=t(B,Bo.touch,W,"touchmove","touchend");return n.origin=function(t){return arguments.length?(r=t,n):r},Bo.rebind(n,e,"on")},Bo.touches=function(n,t){return arguments.length<2&&(t=b().touches),t?Jo(t).map(function(t){var e=$(n,t);return e.identifier=t.identifier,e}):[]};var Ea=Math.PI,Aa=2*Ea,Ca=Ea/2,Na=1e-6,za=Na*Na,La=Ea/180,Ta=180/Ea,qa=Math.SQRT2,Ra=2,Da=4;Bo.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=et(v),o=i/(Ra*h)*(e*rt(qa*t+v)-tt(v));return[r+o*l,u+o*s,i*e/et(qa*t+v)]}return[r+n*l,u+n*s,i*Math.exp(qa*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],l=o-r,s=a-u,f=l*l+s*s,h=Math.sqrt(f),g=(c*c-i*i+Da*f)/(2*i*Ra*h),p=(c*c-i*i-Da*f)/(2*c*Ra*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/qa;return e.duration=1e3*y,e},Bo.behavior.zoom=function(){function n(n){n.on(A,l).on(ja+".zoom",f).on("dblclick.zoom",h).on(z,s)}function t(n){return[(n[0]-S.x)/S.k,(n[1]-S.y)/S.k]}function e(n){return[n[0]*S.k+S.x,n[1]*S.k+S.y]}function r(n){S.k=Math.max(E[0],Math.min(E[1],n))}function u(n,t){t=e(t),S.x+=n[0]-t[0],S.y+=n[1]-t[1]}function i(){x&&x.domain(y.range().map(function(n){return(n-S.x)/S.k}).map(y.invert)),b&&b.domain(M.range().map(function(n){return(n-S.y)/S.k}).map(M.invert))}function o(n){n({type:"zoomstart"})}function a(n){i(),n({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(n){n({type:"zoomend"})}function l(){function n(){s=1,u(Bo.mouse(r),h),a(l)}function e(){f.on(C,null).on(N,null),g(s&&Bo.event.target===i),c(l)}var r=this,i=Bo.event.target,l=L.of(r,arguments),s=0,f=Bo.select(Qo).on(C,n).on(N,e),h=t(Bo.mouse(r)),g=X();Y.call(r),o(l)}function s(){function n(){var n=Bo.touches(g);return h=S.k,n.forEach(function(n){n.identifier in v&&(v[n.identifier]=t(n))}),n}function e(){var t=Bo.event.target;Bo.select(t).on(x,i).on(M,f),b.push(t);for(var e=Bo.event.changedTouches,o=0,c=e.length;c>o;++o)v[e[o].identifier]=null;var l=n(),s=Date.now();if(1===l.length){if(500>s-m){var h=l[0],g=v[h.identifier];r(2*S.k),u(h,g),_(),a(p)}m=s}else if(l.length>1){var h=l[0],y=l[1],w=h[0]-y[0],k=h[1]-y[1];d=w*w+k*k}}function i(){for(var n,t,e,i,o=Bo.touches(g),c=0,l=o.length;l>c;++c,i=null)if(e=o[c],i=v[e.identifier]){if(t)break;n=e,t=i}if(i){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=d&&Math.sqrt(s/d);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+i[0])/2,(t[1]+i[1])/2],r(f*h)}m=null,u(n,t),a(p)}function f(){if(Bo.event.touches.length){for(var t=Bo.event.changedTouches,e=0,r=t.length;r>e;++e)delete v[t[e].identifier];for(var u in v)return void n()}Bo.selectAll(b).on(y,null),w.on(A,l).on(z,s),k(),c(p)}var h,g=this,p=L.of(g,arguments),v={},d=0,y=".zoom-"+Bo.event.changedTouches[0].identifier,x="touchmove"+y,M="touchend"+y,b=[],w=Bo.select(g),k=X();Y.call(g),e(),o(p),w.on(A,null).on(z,e)}function f(){var n=L.of(this,arguments);d?clearTimeout(d):(g=t(p=v||Bo.mouse(this)),Y.call(this),o(n)),d=setTimeout(function(){d=null,c(n)},50),_(),r(Math.pow(2,.002*Pa())*S.k),u(p,g),a(n)}function h(){var n=L.of(this,arguments),e=Bo.mouse(this),i=t(e),l=Math.log(S.k)/Math.LN2;o(n),r(Math.pow(2,Bo.event.shiftKey?Math.ceil(l)-1:Math.floor(l)+1)),u(e,i),a(n),c(n)}var g,p,v,d,m,y,x,M,b,S={x:0,y:0,k:1},k=[960,500],E=Ua,A="mousedown.zoom",C="mousemove.zoom",N="mouseup.zoom",z="touchstart.zoom",L=w(n,"zoomstart","zoom","zoomend");return n.event=function(n){n.each(function(){var n=L.of(this,arguments),t=S;Cl?Bo.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},o(n)}).tween("zoom:zoom",function(){var e=k[0],r=k[1],u=e/2,i=r/2,o=Bo.interpolateZoom([(u-S.x)/S.k,(i-S.y)/S.k,e/S.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),c=e/r[2];this.__chart__=S={x:u-r[0]*c,y:i-r[1]*c,k:c},a(n)}}).each("end.zoom",function(){c(n)}):(this.__chart__=S,o(n),a(n),c(n))})},n.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},i(),n):[S.x,S.y]},n.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:+t},i(),n):S.k},n.scaleExtent=function(t){return arguments.length?(E=null==t?Ua:[+t[0],+t[1]],n):E},n.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],n):v},n.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],n):k},n.x=function(t){return arguments.length?(x=t,y=t.copy(),S={x:0,y:0,k:1},n):x},n.y=function(t){return arguments.length?(b=t,M=t.copy(),S={x:0,y:0,k:1},n):b},Bo.rebind(n,L,"on")};var Pa,Ua=[0,1/0],ja="onwheel"in Go?(Pa=function(){return-Bo.event.deltaY*(Bo.event.deltaMode?120:1)},"wheel"):"onmousewheel"in Go?(Pa=function(){return Bo.event.wheelDelta},"mousewheel"):(Pa=function(){return-Bo.event.detail},"MozMousePixelScroll");Bo.color=it,it.prototype.toString=function(){return this.rgb()+""},Bo.hsl=ot;var Fa=ot.prototype=new it;Fa.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new ot(this.h,this.s,this.l/n)},Fa.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new ot(this.h,this.s,n*this.l)},Fa.rgb=function(){return at(this.h,this.s,this.l)},Bo.hcl=ct;var Ha=ct.prototype=new it;Ha.brighter=function(n){return new ct(this.h,this.c,Math.min(100,this.l+Oa*(arguments.length?n:1)))},Ha.darker=function(n){return new ct(this.h,this.c,Math.max(0,this.l-Oa*(arguments.length?n:1)))},Ha.rgb=function(){return lt(this.h,this.c,this.l).rgb()},Bo.lab=st;var Oa=18,Ya=.95047,Ia=1,Za=1.08883,Va=st.prototype=new it;Va.brighter=function(n){return new st(Math.min(100,this.l+Oa*(arguments.length?n:1)),this.a,this.b)},Va.darker=function(n){return new st(Math.max(0,this.l-Oa*(arguments.length?n:1)),this.a,this.b)},Va.rgb=function(){return ft(this.l,this.a,this.b)},Bo.rgb=dt;var Xa=dt.prototype=new it;Xa.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new dt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new dt(u,u,u)},Xa.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new dt(n*this.r,n*this.g,n*this.b)},Xa.hsl=function(){return _t(this.r,this.g,this.b)},Xa.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var $a=Bo.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});$a.forEach(function(n,t){$a.set(n,mt(t))}),Bo.functor=kt,Bo.xhr=At(Et),Bo.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Ct(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=l)return o;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>s;){var r=n.charCodeAt(s++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++a);else if(r!==c)continue;return n.slice(t,s-a)}return n.slice(t)}for(var r,u,i={},o={},a=[],l=n.length,s=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,f++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new v,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},Bo.csv=Bo.dsv(",","text/csv"),Bo.tsv=Bo.dsv("	","text/tab-separated-values");var Ba,Wa,Ja,Ga,Ka,Qa=Qo[m(Qo,"requestAnimationFrame")]||function(n){setTimeout(n,17)};Bo.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Wa?Wa.n=i:Ba=i,Wa=i,Ja||(Ga=clearTimeout(Ga),Ja=1,Qa(Lt))},Bo.timer.flush=function(){Tt(),qt()},Bo.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var nc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Dt);Bo.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=Bo.round(n,Rt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),nc[8+e/3]};var tc=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ec=Bo.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=Bo.round(n,Rt(n,t))).toFixed(Math.max(0,Math.min(20,Rt(n*(1+1e-15),t))))}}),rc=Bo.time={},uc=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ic.setUTCDate.apply(this._,arguments)},setDay:function(){ic.setUTCDay.apply(this._,arguments)},setFullYear:function(){ic.setUTCFullYear.apply(this._,arguments)},setHours:function(){ic.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ic.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ic.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ic.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ic.setUTCSeconds.apply(this._,arguments)},setTime:function(){ic.setTime.apply(this._,arguments)}};var ic=Date.prototype;rc.year=Ft(function(n){return n=rc.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),rc.years=rc.year.range,rc.years.utc=rc.year.utc.range,rc.day=Ft(function(n){var t=new uc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),rc.days=rc.day.range,rc.days.utc=rc.day.utc.range,rc.dayOfYear=function(n){var t=rc.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=rc[n]=Ft(function(n){return(n=rc.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=rc.year(n).getDay();return Math.floor((rc.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});rc[n+"s"]=e.range,rc[n+"s"].utc=e.utc.range,rc[n+"OfYear"]=function(n){var e=rc.year(n).getDay();return Math.floor((rc.dayOfYear(n)+(e+t)%7)/7)}}),rc.week=rc.sunday,rc.weeks=rc.sunday.range,rc.weeks.utc=rc.sunday.utc.range,rc.weekOfYear=rc.sundayOfYear;var oc={"-":"",_:" ",0:"0"},ac=/^\s*\d+/,cc=/^%/;Bo.locale=function(n){return{numberFormat:Pt(n),timeFormat:Ot(n)}};var lc=Bo.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Bo.format=lc.numberFormat,Bo.geo={},ce.prototype={s:0,t:0,add:function(n){le(n,this.t,sc),le(sc.s,this.s,this),this.s?this.t+=sc.t:this.s=sc.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var sc=new ce;Bo.geo.stream=function(n,t){n&&fc.hasOwnProperty(n.type)?fc[n.type](n,t):se(n,t)};var fc={Feature:function(n,t){se(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)se(e[r].geometry,t)}},hc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fe(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)fe(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)se(e[r],t)}};Bo.geo.area=function(n){return gc=0,Bo.geo.stream(n,vc),gc};var gc,pc=new ce,vc={sphere:function(){gc+=4*Ea},point:y,lineStart:y,lineEnd:y,polygonStart:function(){pc.reset(),vc.lineStart=ge},polygonEnd:function(){var n=2*pc;gc+=0>n?4*Ea+n:n,vc.lineStart=vc.lineEnd=vc.point=y}};Bo.geo.bounds=function(){function n(n,t){x.push(M=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=pe([t*La,e*La]);if(m){var u=de(m,r),i=[u[1],-u[0],0],o=de(i,u);xe(o),o=Me(o);var c=t-p,l=c>0?1:-1,v=o[0]*Ta*l,d=ca(c)>180;if(d^(v>l*p&&l*t>v)){var y=o[1]*Ta;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>l*p&&l*t>v)){var y=-o[1]*Ta;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){_.point=t}function r(){M[0]=s,M[1]=h,_.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=ca(r)>180?r+(r>0?360:-360):r}else v=n,d=e;vc.point(n,e),t(n,e)}function i(){vc.lineStart()}function o(){u(v,d),vc.lineEnd(),ca(y)>Na&&(s=-(h=180)),M[0]=s,M[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,x,M,_={point:n,lineStart:e,lineEnd:r,polygonStart:function(){_.point=u,_.lineStart=i,_.lineEnd=o,y=0,vc.polygonStart()},polygonEnd:function(){vc.polygonEnd(),_.point=n,_.lineStart=e,_.lineEnd=r,0>pc?(s=-(h=180),f=-(g=90)):y>Na?g=90:-Na>y&&(f=-90),M[0]=s,M[1]=h}};return function(n){g=h=-(s=f=1/0),x=[],Bo.geo.stream(n,_);
var t=x.length;if(t){x.sort(c);for(var e,r=1,u=x[0],i=[u];t>r;++r)e=x[r],l(e[0],u)||l(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,s=e[0],h=u[1])}return x=M=null,1/0===s||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[s,f],[h,g]]}}(),Bo.geo.centroid=function(n){dc=mc=yc=xc=Mc=_c=bc=wc=Sc=kc=Ec=0,Bo.geo.stream(n,Ac);var t=Sc,e=kc,r=Ec,u=t*t+e*e+r*r;return za>u&&(t=_c,e=bc,r=wc,Na>mc&&(t=yc,e=xc,r=Mc),u=t*t+e*e+r*r,za>u)?[0/0,0/0]:[Math.atan2(e,t)*Ta,nt(r/Math.sqrt(u))*Ta]};var dc,mc,yc,xc,Mc,_c,bc,wc,Sc,kc,Ec,Ac={sphere:y,point:be,lineStart:Se,lineEnd:ke,polygonStart:function(){Ac.lineStart=Ee},polygonEnd:function(){Ac.lineStart=Se}},Cc=Le(Ae,De,Ue,[-Ea,-Ea/2]),Nc=1e9;Bo.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Oe(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(Bo.geo.conicEqualArea=function(){return Ie(Ze)}).raw=Ze,Bo.geo.albers=function(){return Bo.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Bo.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=Bo.geo.albers(),o=Bo.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Bo.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var l=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*l,f-.238*l],[s+.455*l,f+.238*l]]).stream(c).point,r=o.translate([s-.307*l,f+.201*l]).clipExtent([[s-.425*l+Na,f+.12*l+Na],[s-.214*l-Na,f+.234*l-Na]]).stream(c).point,u=a.translate([s-.205*l,f+.212*l]).clipExtent([[s-.214*l+Na,f+.166*l+Na],[s-.115*l-Na,f+.234*l-Na]]).stream(c).point,n},n.scale(1070)};var zc,Lc,Tc,qc,Rc,Dc,Pc={point:y,lineStart:y,lineEnd:y,polygonStart:function(){Lc=0,Pc.lineStart=Ve},polygonEnd:function(){Pc.lineStart=Pc.lineEnd=Pc.point=y,zc+=ca(Lc/2)}},Uc={point:Xe,lineStart:y,lineEnd:y,polygonStart:y,polygonEnd:y},jc={point:We,lineStart:Je,lineEnd:Ge,polygonStart:function(){jc.lineStart=Ke},polygonEnd:function(){jc.point=We,jc.lineStart=Je,jc.lineEnd=Ge}};Bo.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),Bo.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return zc=0,Bo.geo.stream(n,u(Pc)),zc},n.centroid=function(n){return yc=xc=Mc=_c=bc=wc=Sc=kc=Ec=0,Bo.geo.stream(n,u(jc)),Ec?[Sc/Ec,kc/Ec]:wc?[_c/wc,bc/wc]:Mc?[yc/Mc,xc/Mc]:[0/0,0/0]},n.bounds=function(n){return Rc=Dc=-(Tc=qc=1/0),Bo.geo.stream(n,u(Uc)),[[Tc,qc],[Rc,Dc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||tr(n):Et,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new $e:new Qe(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(Bo.geo.albersUsa()).context(null)},Bo.geo.transform=function(n){return{stream:function(t){var e=new er(t);for(var r in n)e[r]=n[r];return e}}},er.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Bo.geo.projection=ur,Bo.geo.projectionMutator=ir,(Bo.geo.equirectangular=function(){return ur(ar)}).raw=ar.invert=ar,Bo.geo.rotation=function(n){function t(t){return t=n(t[0]*La,t[1]*La),t[0]*=Ta,t[1]*=Ta,t}return n=lr(n[0]%360*La,n[1]*La,n.length>2?n[2]*La:0),t.invert=function(t){return t=n.invert(t[0]*La,t[1]*La),t[0]*=Ta,t[1]*=Ta,t},t},cr.invert=ar,Bo.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=lr(-n[0]*La,-n[1]*La,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Ta,n[1]*=Ta}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gr((t=+r)*La,u*La),n):t},n.precision=function(r){return arguments.length?(e=gr(t*La,(u=+r)*La),n):u},n.angle(90)},Bo.geo.distance=function(n,t){var e,r=(t[0]-n[0])*La,u=n[1]*La,i=t[1]*La,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),l=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=l*s-c*f*a)*e),c*s+l*f*a)},Bo.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return Bo.range(Math.ceil(i/d)*d,u,d).map(h).concat(Bo.range(Math.ceil(l/m)*m,c,m).map(g)).concat(Bo.range(Math.ceil(r/p)*p,e,p).filter(function(n){return ca(n%d)>Na}).map(s)).concat(Bo.range(Math.ceil(a/v)*v,o,v).filter(function(n){return ca(n%m)>Na}).map(f))}var e,r,u,i,o,a,c,l,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],l=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),l>c&&(t=l,l=c,c=t),n.precision(y)):[[i,l],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=vr(a,o,90),f=dr(r,e,y),h=vr(l,c,90),g=dr(i,u,y),n):y},n.majorExtent([[-180,-90+Na],[180,90-Na]]).minorExtent([[-180,-80-Na],[180,80+Na]])},Bo.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=mr,u=yr;return n.distance=function(){return Bo.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},Bo.geo.interpolate=function(n,t){return xr(n[0]*La,n[1]*La,t[0]*La,t[1]*La)},Bo.geo.length=function(n){return Fc=0,Bo.geo.stream(n,Hc),Fc};var Fc,Hc={sphere:y,point:y,lineStart:Mr,lineEnd:y,polygonStart:y,polygonEnd:y},Oc=_r(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(Bo.geo.azimuthalEqualArea=function(){return ur(Oc)}).raw=Oc;var Yc=_r(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},Et);(Bo.geo.azimuthalEquidistant=function(){return ur(Yc)}).raw=Yc,(Bo.geo.conicConformal=function(){return Ie(br)}).raw=br,(Bo.geo.conicEquidistant=function(){return Ie(wr)}).raw=wr;var Ic=_r(function(n){return 1/n},Math.atan);(Bo.geo.gnomonic=function(){return ur(Ic)}).raw=Ic,Sr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Ca]},(Bo.geo.mercator=function(){return kr(Sr)}).raw=Sr;var Zc=_r(function(){return 1},Math.asin);(Bo.geo.orthographic=function(){return ur(Zc)}).raw=Zc;var Vc=_r(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(Bo.geo.stereographic=function(){return ur(Vc)}).raw=Vc,Er.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Ca]},(Bo.geo.transverseMercator=function(){var n=kr(Er),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Er,Bo.geom={},Bo.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=kt(e),i=kt(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(zr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var l=Nr(a),s=Nr(c),f=s[0]===l[0],h=s[s.length-1]===l[l.length-1],g=[];for(t=l.length-1;t>=0;--t)g.push(n[a[l[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[a[s[t]][2]]);return g}var e=Ar,r=Cr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},Bo.geom.polygon=function(n){return ga(n,Xc),n};var Xc=Bo.geom.polygon.prototype=[];Xc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Xc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Xc.clip=function(n){for(var t,e,r,u,i,o,a=qr(n),c=-1,l=this.length-qr(this),s=this[l-1];++c<l;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],Lr(o,s,u)?(Lr(i,s,u)||n.push(Tr(i,o,s,u)),n.push(o)):Lr(i,s,u)&&n.push(Tr(i,o,s,u)),i=o;a&&n.push(n[0]),s=u}return n};var $c,Bc,Wc,Jc,Gc,Kc=[],Qc=[];Or.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Ir),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=uu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(eu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,eu(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?uu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return n.C=!1,void 0;do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,eu(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ru(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,eu(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ru(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},Bo.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return iu(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,s=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=i&&l.y>=u&&l.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];s.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Na)*Na,y:Math.round(o(n,t)/Na)*Na,i:t}})}var r=Ar,u=Cr,i=r,o=u,a=nl;return n?t(n):(t.links=function(n){return iu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return iu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Ir),c=-1,l=a.length,s=a[l-1].edge,f=s.l===o?s.r:s.l;++c<l;)u=s,i=f,s=a[c].edge,f=s.l===o?s.r:s.l,r<i.i&&r<f.i&&au(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=kt(r=n),t):r},t.y=function(n){return arguments.length?(o=kt(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?nl:n,t):a===nl?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===nl?null:a&&a[1]},t)};var nl=[[-1e6,-1e6],[1e6,1e6]];Bo.geom.delaunay=function(n){return Bo.geom.voronoi().triangles(n)},Bo.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,s=n.y;if(null!=c)if(ca(c-e)+ca(s-r)<.01)l(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,c,s,u,i,o,a),l(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,u,i,o,a)}function l(n,t,e,r,u,o,a,c){var l=.5*(u+a),s=.5*(o+c),f=e>=l,h=r>=s,g=(h<<1)+f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=su()),f?u=l:a=l,h?o=s:c=s,i(n,t,e,r,u,o,a,c)}var s,f,h,g,p,v,d,m,y,x=kt(a),M=kt(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var _=+x(s=n[g],g),b=+M(s,g);v>_&&(v=_),d>b&&(d=b),_>m&&(m=_),b>y&&(y=b),f.push(_),h.push(b)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=su();if(k.add=function(n){i(k,n,+x(n,++g),+M(n,g),v,d,m,y)},k.visit=function(n){fu(n,k,v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var o,a=Ar,c=Cr;return(o=arguments.length)?(a=cu,c=lu,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},Bo.interpolateRgb=hu,Bo.interpolateObject=gu,Bo.interpolateNumber=pu,Bo.interpolateString=vu;var tl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,el=new RegExp(tl.source,"g");Bo.interpolate=du,Bo.interpolators=[function(n,t){var e=typeof t;return("string"===e?$a.has(t)||/^(#|rgb\(|hsl\()/.test(t)?hu:vu:t instanceof it?hu:Array.isArray(t)?mu:"object"===e&&isNaN(t)?gu:pu)(n,t)}],Bo.interpolateArray=mu;var rl=function(){return Et},ul=Bo.map({linear:rl,poly:Su,quad:function(){return _u},cubic:function(){return bu},sin:function(){return ku},exp:function(){return Eu},circle:function(){return Au},elastic:Cu,back:Nu,bounce:function(){return zu}}),il=Bo.map({"in":Et,out:xu,"in-out":Mu,"out-in":function(n){return Mu(xu(n))}});Bo.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=ul.get(e)||rl,r=il.get(r)||Et,yu(r(e.apply(null,Wo.call(arguments,1))))},Bo.interpolateHcl=Lu,Bo.interpolateHsl=Tu,Bo.interpolateLab=qu,Bo.interpolateRound=Ru,Bo.transform=function(n){var t=Go.createElementNS(Bo.ns.prefix.svg,"g");return(Bo.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Du(e?e.matrix:ol)})(n)},Du.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ol={a:1,b:0,c:0,d:1,e:0,f:0};Bo.interpolateTransform=Fu,Bo.layout={},Bo.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Yu(n[e]));return t}},Bo.layout.chord=function(){function n(){var n,l,f,h,g,p={},v=[],d=Bo.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(l=0,g=-1;++g<i;)l+=u[h][g];v.push(l),m.push(Bo.range(i)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(Aa-s*i)/n,l=0,h=-1;++h<i;){for(f=l,g=-1;++g<i;){var y=d[h],x=m[y][g],M=u[y][x],_=l,b=l+=M*n;p[y+"-"+x]={index:y,subindex:x,startAngle:_,endAngle:b,value:M}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/n},l+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,l={},s=0;return l.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,l):u},l.padding=function(n){return arguments.length?(s=n,e=r=null,l):s},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},Bo.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var l=t.charge/c;n.px-=i*l,n.py-=o*l}return!0}if(t.point&&c&&p>c){var l=t.pointCharge/c;n.px-=i*l,n.py-=o*l}}return!t.charge}}function t(n){n.px=Bo.event.x,n.py=Bo.event.y,a.resume()}var e,r,u,i,o,a={},c=Bo.dispatch("start","tick","end"),l=[1,1],s=.9,f=al,h=cl,g=-30,p=ll,v=.1,d=.64,m=[],y=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,x,M,_=m.length,b=y.length;for(e=0;b>e;++e)a=y[e],f=a.source,h=a.target,x=h.x-f.x,M=h.y-f.y,(p=x*x+M*M)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,x*=p,M*=p,h.x-=x*(d=f.weight/(h.weight+f.weight)),h.y-=M*d,f.x+=x*(d=1-d),f.y+=M*d);if((d=r*v)&&(x=l[0]/2,M=l[1]/2,e=-1,d))for(;++e<_;)a=m[e],a.x+=(x-a.x)*d,a.y+=(M-a.y)*d;if(g)for(Wu(t=Bo.geom.quadtree(m),r,o),e=-1;++e<_;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<_;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*s,a.y-=(a.py-(a.py=a.y))*s);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(y=n,a):y},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(s=+n,a):s},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),Bo.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;l>a;++a){var u=y[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,s=y.length,p=l[0],v=l[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;s>t;++t)r=y[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;s>t;++t)u[t]=+f.call(this,y[t],t);else for(t=0;s>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;s>t;++t)i[t]=+h.call(this,y[t],t);else for(t=0;s>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=Bo.behavior.drag().origin(Et).on("dragstart.force",Vu).on("drag.force",t).on("dragend.force",Xu)),arguments.length?(this.on("mouseover.force",$u).on("mouseout.force",Bu).call(e),void 0):e},Bo.rebind(a,c,"on")};var al=20,cl=1,ll=1/0;Bo.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(l=e.call(n,i,i.depth))&&(c=l.length)){for(var c,l,s;--c>=0;)o.push(s=l[c]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Ku(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=ti,e=Qu,r=ni;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Gu(t,function(n){n.children&&(n.value=0)}),Ku(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},Bo.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=i[l],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=Bo.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Ju(e,r)},Bo.layout.pie=function(){function n(i){var o=i.map(function(e,r){return+t.call(n,e,r)}),a=+("function"==typeof r?r.apply(this,arguments):r),c=(("function"==typeof u?u.apply(this,arguments):u)-a)/Bo.sum(o),l=Bo.range(i.length);null!=e&&l.sort(e===sl?function(n,t){return o[t]-o[n]}:function(n,t){return e(i[n],i[t])});var s=[];return l.forEach(function(n){var t;s[n]={data:i[n],value:t=o[n],startAngle:a,endAngle:a+=t*c}}),s}var t=Number,e=sl,r=0,u=Aa;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n};var sl={};Bo.layout.stack=function(){function n(a,c){if(!(h=a.length))return a;var l=a.map(function(e,r){return t.call(n,e,r)}),s=l.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,s,c);l=Bo.permute(l,f),s=Bo.permute(s,f);var h,g,p,v,d=r.call(n,s,c),m=l[0].length;for(p=0;m>p;++p)for(u.call(n,l[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,l[g][p],v+=s[g-1][p][1],s[g][p][1]);return a}var t=Et,e=oi,r=ai,u=ii,i=ri,o=ui;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:fl.get(t)||oi,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:hl.get(t)||ai,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var fl=Bo.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(ci),i=n.map(li),o=Bo.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,l=[],s=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],l.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(l)},reverse:function(n){return Bo.range(n.length).reverse()},"default":oi}),hl=Bo.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,l,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=l=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];s>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,l>c&&(l=c)}for(e=0;h>e;++e)g[e]-=l;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ai});Bo.layout.histogram=function(){function n(n,i){for(var o,a,c=[],l=n.map(e,this),s=r.call(this,l,i),f=u.call(this,s,l,i),i=-1,h=l.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=l[i],a>=s[0]&&a<=s[1]&&(o=c[Bo.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=gi,u=fi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=kt(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return hi(n,t)}:kt(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},Bo.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],l=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Ku(a,function(n){n.r=+s(n.value)}),Ku(a,yi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Ku(a,function(n){n.r+=f}),Ku(a,yi),Ku(a,function(n){n.r-=f})}return _i(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=Bo.layout.hierarchy().sort(pi),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Ju(n,e)},Bo.layout.tree=function(){function n(n,u){var s=o.call(this,n,u),f=s[0],h=t(f);if(Ku(h,e),h.parent.m=-h.z,Gu(h,r),l)Gu(f,i);else{var g=f,p=f,v=f;Gu(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);Gu(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Ai(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],l=u.m,s=i.m,f=o.m,h=c.m;o=ki(o),u=Si(u),o&&u;)c=Si(c),i=ki(i),i.a=n,r=o.z+f-u.z-l+a(o._,u._),r>0&&(Ei(Ci(o,n,e),n,r),l+=r,s+=r),f+=o.m,l+=u.m,h+=c.m,s+=i.m;o&&!ki(i)&&(i.t=o,i.m+=f-s),u&&!Si(c)&&(c.t=u,c.m+=l-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=Bo.layout.hierarchy().sort(null).value(null),a=wi,c=[1,1],l=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(l=null==(c=t)?i:null,n):l?null:c},n.nodeSize=function(t){return arguments.length?(l=null==(c=t)?null:i,n):l?c:null},Ju(n,o)},Bo.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],l=0;Ku(c,function(n){var t=n.children;t&&t.length?(n.x=zi(t),n.y=Ni(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var s=Li(c),f=Ti(c),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return Ku(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=Bo.layout.hierarchy().sort(null).value(null),e=wi,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Ju(n,t)},Bo.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,l=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),s.area=0;(c=h.length)>0;)s.push(o=h[c-1]),s.area+=o.area,"squarify"!==g||(a=r(s,v))<=p?(h.pop(),p=a):(s.area-=s.pop().area,u(s,v,l,!1),v=Math.min(l.dx,l.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,l,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,l=e.y,s=t?c(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<o;)u=n[i],u.x=a,u.y=l,u.dy=s,a+=u.dx=Math.min(e.x+e.dx-a,s?c(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<o;)u=n[i],u.x=a,u.y=l,u.dx=s,l+=u.dy=Math.min(e.y+e.dy-l,s?c(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=l[0],i.dy=l[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=Bo.layout.hierarchy(),c=Math.round,l=[1,1],s=null,f=qi,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(n){return arguments.length?(l=n,i):l},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?qi(t):Ri(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Ri(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?qi:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Ju(i,a)},Bo.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=Bo.random.normal.apply(Bo,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=Bo.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},Bo.scale={};var gl={floor:Et,ceil:Et};Bo.scale.linear=function(){return Oi([0,1],[0,1],du,!1)};var pl={s:1,g:1,p:1,r:1,e:1};Bo.scale.log=function(){return Wi(Bo.scale.linear().domain([0,1]),10,!0,[1,10])};var vl=Bo.format(".0e"),dl={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};Bo.scale.pow=function(){return Ji(Bo.scale.linear(),1,[0,1])},Bo.scale.sqrt=function(){return Bo.scale.pow().exponent(.5)},Bo.scale.ordinal=function(){return Ki([],{t:"range",a:[[]]})},Bo.scale.category10=function(){return Bo.scale.ordinal().range(ml)},Bo.scale.category20=function(){return Bo.scale.ordinal().range(yl)},Bo.scale.category20b=function(){return Bo.scale.ordinal().range(xl)},Bo.scale.category20c=function(){return Bo.scale.ordinal().range(Ml)};var ml=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(yt),yl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(yt),xl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(yt),Ml=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(yt);Bo.scale.quantile=function(){return Qi([],[])
},Bo.scale.quantize=function(){return no(0,1,[0,1])},Bo.scale.threshold=function(){return to([.5],[0,1])},Bo.scale.identity=function(){return eo([0,1])},Bo.svg={},Bo.svg.arc=function(){function n(){var n=t.apply(this,arguments),i=e.apply(this,arguments),o=r.apply(this,arguments)+_l,a=u.apply(this,arguments)+_l,c=(o>a&&(c=o,o=a,a=c),a-o),l=Ea>c?"0":"1",s=Math.cos(o),f=Math.sin(o),h=Math.cos(a),g=Math.sin(a);return c>=bl?n?"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"M0,"+n+"A"+n+","+n+" 0 1,0 0,"+-n+"A"+n+","+n+" 0 1,0 0,"+n+"Z":"M0,"+i+"A"+i+","+i+" 0 1,1 0,"+-i+"A"+i+","+i+" 0 1,1 0,"+i+"Z":n?"M"+i*s+","+i*f+"A"+i+","+i+" 0 "+l+",1 "+i*h+","+i*g+"L"+n*h+","+n*g+"A"+n+","+n+" 0 "+l+",0 "+n*s+","+n*f+"Z":"M"+i*s+","+i*f+"A"+i+","+i+" 0 "+l+",1 "+i*h+","+i*g+"L0,0"+"Z"}var t=ro,e=uo,r=io,u=oo;return n.innerRadius=function(e){return arguments.length?(t=kt(e),n):t},n.outerRadius=function(t){return arguments.length?(e=kt(t),n):e},n.startAngle=function(t){return arguments.length?(r=kt(t),n):r},n.endAngle=function(t){return arguments.length?(u=kt(t),n):u},n.centroid=function(){var n=(t.apply(this,arguments)+e.apply(this,arguments))/2,i=(r.apply(this,arguments)+u.apply(this,arguments))/2+_l;return[Math.cos(i)*n,Math.sin(i)*n]},n};var _l=-Ca,bl=Aa-Na;Bo.svg.line=function(){return ao(Et)};var wl=Bo.map({linear:co,"linear-closed":lo,step:so,"step-before":fo,"step-after":ho,basis:xo,"basis-open":Mo,"basis-closed":_o,bundle:bo,cardinal:vo,"cardinal-open":go,"cardinal-closed":po,monotone:Co});wl.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Sl=[0,2/3,1/3,0],kl=[0,1/3,2/3,0],El=[0,1/6,2/3,1/6];Bo.svg.line.radial=function(){var n=ao(No);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},fo.reverse=ho,ho.reverse=fo,Bo.svg.area=function(){return zo(Et)},Bo.svg.area.radial=function(){var n=zo(No);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},Bo.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)+_l,s=l.call(n,u,r)+_l;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>Ea)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=mr,o=yr,a=Lo,c=io,l=oo;return n.radius=function(t){return arguments.length?(a=kt(t),n):a},n.source=function(t){return arguments.length?(i=kt(t),n):i},n.target=function(t){return arguments.length?(o=kt(t),n):o},n.startAngle=function(t){return arguments.length?(c=kt(t),n):c},n.endAngle=function(t){return arguments.length?(l=kt(t),n):l},n},Bo.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=mr,e=yr,r=To;return n.source=function(e){return arguments.length?(t=kt(e),n):t},n.target=function(t){return arguments.length?(e=kt(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},Bo.svg.diagonal.radial=function(){var n=Bo.svg.diagonal(),t=To,e=n.projection;return n.projection=function(n){return arguments.length?e(qo(t=n)):t},n},Bo.svg.symbol=function(){function n(n,r){return(Al.get(t.call(this,n,r))||Po)(e.call(this,n,r))}var t=Do,e=Ro;return n.type=function(e){return arguments.length?(t=kt(e),n):t},n.size=function(t){return arguments.length?(e=kt(t),n):e},n};var Al=Bo.map({circle:Po,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ll)),e=t*Ll;return"M0,"+-t+"L"+e+",0"+" 0,"+t+" "+-e+",0"+"Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/zl),e=t*zl/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/zl),e=t*zl/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});Bo.svg.symbolTypes=Al.keys();var Cl,Nl,zl=Math.sqrt(3),Ll=Math.tan(30*La),Tl=[],ql=0;Tl.call=ya.call,Tl.empty=ya.empty,Tl.node=ya.node,Tl.size=ya.size,Bo.transition=function(n){return arguments.length?Cl?n.transition():n:_a.transition()},Bo.transition.prototype=Tl,Tl.select=function(n){var t,e,r,u=this.id,i=[];n=k(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]);for(var c=this[o],l=-1,s=c.length;++l<s;)(r=c[l])&&(e=n.call(r,r.__data__,l,o))?("__data__"in r&&(e.__data__=r.__data__),Ho(e,l,u,r.__transition__[u]),t.push(e)):t.push(null)}return Uo(i,u)},Tl.selectAll=function(n){var t,e,r,u,i,o=this.id,a=[];n=E(n);for(var c=-1,l=this.length;++c<l;)for(var s=this[c],f=-1,h=s.length;++f<h;)if(r=s[f]){i=r.__transition__[o],e=n.call(r,r.__data__,f,c),a.push(t=[]);for(var g=-1,p=e.length;++g<p;)(u=e[g])&&Ho(u,g,o,i),t.push(u)}return Uo(a,o)},Tl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=U(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Uo(u,this.id)},Tl.tween=function(n,t){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(n):F(this,null==t?function(t){t.__transition__[e].tween.remove(n)}:function(r){r.__transition__[e].tween.set(n,t)})},Tl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Fu:du,a=Bo.ns.qualify(n);return jo(this,"attr."+n,t,a.local?i:u)},Tl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=Bo.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Tl.style=function(n,t,e){function r(){this.style.removeProperty(n)}function u(t){return null==t?r:(t+="",function(){var r,u=Qo.getComputedStyle(this,null).getPropertyValue(n);return u!==t&&(r=du(u,t),function(t){this.style.setProperty(n,r(t),e)})})}var i=arguments.length;if(3>i){if("string"!=typeof n){2>i&&(t="");for(e in n)this.style(e,n[e],t);return this}e=""}return jo(this,"style."+n,t,u)},Tl.styleTween=function(n,t,e){function r(r,u){var i=t.call(this,r,u,Qo.getComputedStyle(this,null).getPropertyValue(n));return i&&function(t){this.style.setProperty(n,i(t),e)}}return arguments.length<3&&(e=""),this.tween("style."+n,r)},Tl.text=function(n){return jo(this,"text",n,Fo)},Tl.remove=function(){return this.each("end.transition",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})},Tl.ease=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof n&&(n=Bo.ease.apply(Bo,arguments)),F(this,function(e){e.__transition__[t].ease=n}))},Tl.delay=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].delay:F(this,"function"==typeof n?function(e,r,u){e.__transition__[t].delay=+n.call(e,e.__data__,r,u)}:(n=+n,function(e){e.__transition__[t].delay=n}))},Tl.duration=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].duration:F(this,"function"==typeof n?function(e,r,u){e.__transition__[t].duration=Math.max(1,n.call(e,e.__data__,r,u))}:(n=Math.max(1,n),function(e){e.__transition__[t].duration=n}))},Tl.each=function(n,t){var e=this.id;if(arguments.length<2){var r=Nl,u=Cl;Cl=e,F(this,function(t,r,u){Nl=t.__transition__[e],n.call(t,t.__data__,r,u)}),Nl=r,Cl=u}else F(this,function(r){var u=r.__transition__[e];(u.event||(u.event=Bo.dispatch("start","end"))).on(n,t)});return this},Tl.transition=function(){for(var n,t,e,r,u=this.id,i=++ql,o=[],a=0,c=this.length;c>a;a++){o.push(n=[]);for(var t=this[a],l=0,s=t.length;s>l;l++)(e=t[l])&&(r=Object.create(e.__transition__[u]),r.delay+=r.duration,Ho(e,l,i,r)),n.push(e)}return Uo(o,i)},Bo.svg.axis=function(){function n(n){n.each(function(){var n,l=Bo.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):Et:t,p=l.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Na),d=Bo.transition(p.exit()).style("opacity",Na).remove(),m=Bo.transition(p.order()).style("opacity",1),y=Math.max(u,0)+o,x=Pi(f),M=l.selectAll(".domain").data([0]),_=(M.enter().append("path").attr("class","domain"),Bo.transition(M));v.append("line"),v.append("text");var b,w,S,k,E=v.select("line"),A=m.select("line"),C=p.select("text").text(g),N=v.select("text"),z=m.select("text"),L="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Oo,b="x",S="y",w="x2",k="y2",C.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+L*i+"V0H"+x[1]+"V"+L*i)):(n=Yo,b="y",S="x",w="y2",k="x2",C.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),_.attr("d","M"+L*i+","+x[0]+"H0V"+x[1]+"H"+L*i)),E.attr(k,L*u),N.attr(S,L*y),A.attr(w,0).attr(k,L*u),z.attr(b,0).attr(S,L*y),f.rangeBand){var T=f,q=T.rangeBand()/2;s=f=function(n){return T(n)+q}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=Bo.scale.linear(),r=Rl,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Dl?t+"":Rl,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Rl="bottom",Dl={top:1,right:1,bottom:1,left:1};Bo.svg.brush=function(){function n(i){i.each(function(){var i=Bo.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),o=i.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=i.selectAll(".resize").data(p,Et);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Pl[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var s,f=Bo.transition(i),h=Bo.transition(o);c&&(s=Pi(c),h.attr("x",s[0]).attr("width",s[1]-s[0]),e(f)),l&&(s=Pi(l),h.attr("y",s[0]).attr("height",s[1]-s[0]),r(f)),t(f)})}function t(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+s[+/e$/.test(n)]+","+f[+/^s/.test(n)]+")"})}function e(n){n.select(".extent").attr("x",s[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function r(n){n.select(".extent").attr("y",f[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function u(){function u(){32==Bo.event.keyCode&&(C||(y=null,z[0]-=s[1],z[1]-=f[1],C=2),_())}function p(){32==Bo.event.keyCode&&2==C&&(z[0]+=s[1],z[1]+=f[1],C=0,_())}function v(){var n=Bo.mouse(M),u=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(Bo.event.altKey?(y||(y=[(s[0]+s[1])/2,(f[0]+f[1])/2]),z[0]=s[+(n[0]<y[0])],z[1]=f[+(n[1]<y[1])]):y=null),E&&d(n,c,0)&&(e(S),u=!0),A&&d(n,l,1)&&(r(S),u=!0),u&&(t(S),w({type:"brush",mode:C?"move":"resize"}))}function d(n,t,e){var r,u,a=Pi(t),c=a[0],l=a[1],p=z[e],v=e?f:s,d=v[1]-v[0];return C&&(c-=p,l-=d+p),r=(e?g:h)?Math.max(c,Math.min(l,n[e])):n[e],C?u=(r+=p)+d:(y&&(p=Math.max(c,Math.min(l,2*y[e]-r))),r>p?(u=r,r=p):u=p),v[0]!=r||v[1]!=u?(e?o=null:i=null,v[0]=r,v[1]=u,!0):void 0}function m(){v(),S.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),Bo.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),N(),w({type:"brushend"})}var y,x,M=this,b=Bo.select(Bo.event.target),w=a.of(M,arguments),S=Bo.select(M),k=b.datum(),E=!/^(n|s)$/.test(k)&&c,A=!/^(e|w)$/.test(k)&&l,C=b.classed("extent"),N=X(),z=Bo.mouse(M),L=Bo.select(Qo).on("keydown.brush",u).on("keyup.brush",p);if(Bo.event.changedTouches?L.on("touchmove.brush",v).on("touchend.brush",m):L.on("mousemove.brush",v).on("mouseup.brush",m),S.interrupt().selectAll("*").interrupt(),C)z[0]=s[0]-z[0],z[1]=f[0]-z[1];else if(k){var T=+/w$/.test(k),q=+/^n/.test(k);x=[s[1-T]-z[0],f[1-q]-z[1]],z[0]=s[T],z[1]=f[q]}else Bo.event.altKey&&(y=z.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),Bo.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),v()}var i,o,a=w(n,"brushstart","brush","brushend"),c=null,l=null,s=[0,0],f=[0,0],h=!0,g=!0,p=Ul[0];return n.event=function(n){n.each(function(){var n=a.of(this,arguments),t={x:s,y:f,i:i,j:o},e=this.__chart__||t;this.__chart__=t,Cl?Bo.select(this).transition().each("start.brush",function(){i=e.i,o=e.j,s=e.x,f=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=mu(s,t.x),r=mu(f,t.y);return i=o=null,function(u){s=t.x=e(u),f=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,p=Ul[!c<<1|!l],n):c},n.y=function(t){return arguments.length?(l=t,p=Ul[!c<<1|!l],n):l},n.clamp=function(t){return arguments.length?(c&&l?(h=!!t[0],g=!!t[1]):c?h=!!t:l&&(g=!!t),n):c&&l?[h,g]:c?h:l?g:null},n.extent=function(t){var e,r,u,a,h;return arguments.length?(c&&(e=t[0],r=t[1],l&&(e=e[0],r=r[0]),i=[e,r],c.invert&&(e=c(e),r=c(r)),e>r&&(h=e,e=r,r=h),(e!=s[0]||r!=s[1])&&(s=[e,r])),l&&(u=t[0],a=t[1],c&&(u=u[1],a=a[1]),o=[u,a],l.invert&&(u=l(u),a=l(a)),u>a&&(h=u,u=a,a=h),(u!=f[0]||a!=f[1])&&(f=[u,a])),n):(c&&(i?(e=i[0],r=i[1]):(e=s[0],r=s[1],c.invert&&(e=c.invert(e),r=c.invert(r)),e>r&&(h=e,e=r,r=h))),l&&(o?(u=o[0],a=o[1]):(u=f[0],a=f[1],l.invert&&(u=l.invert(u),a=l.invert(a)),u>a&&(h=u,u=a,a=h))),c&&l?[[e,u],[r,a]]:c?[e,r]:l&&[u,a])},n.clear=function(){return n.empty()||(s=[0,0],f=[0,0],i=o=null),n},n.empty=function(){return!!c&&s[0]==s[1]||!!l&&f[0]==f[1]},Bo.rebind(n,a,"on")};var Pl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],jl=rc.format=lc.timeFormat,Fl=jl.utc,Hl=Fl("%Y-%m-%dT%H:%M:%S.%LZ");jl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Io:Hl,Io.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Io.toString=Hl.toString,rc.second=Ft(function(n){return new uc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),rc.seconds=rc.second.range,rc.seconds.utc=rc.second.utc.range,rc.minute=Ft(function(n){return new uc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),rc.minutes=rc.minute.range,rc.minutes.utc=rc.minute.utc.range,rc.hour=Ft(function(n){var t=n.getTimezoneOffset()/60;return new uc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),rc.hours=rc.hour.range,rc.hours.utc=rc.hour.utc.range,rc.month=Ft(function(n){return n=rc.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),rc.months=rc.month.range,rc.months.utc=rc.month.utc.range;var Ol=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Yl=[[rc.second,1],[rc.second,5],[rc.second,15],[rc.second,30],[rc.minute,1],[rc.minute,5],[rc.minute,15],[rc.minute,30],[rc.hour,1],[rc.hour,3],[rc.hour,6],[rc.hour,12],[rc.day,1],[rc.day,2],[rc.week,1],[rc.month,1],[rc.month,3],[rc.year,1]],Il=jl.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",Ae]]),Zl={range:function(n,t,e){return Bo.range(Math.ceil(n/e)*e,+t,e).map(Vo)},floor:Et,ceil:Et};Yl.year=rc.year,rc.scale=function(){return Zo(Bo.scale.linear(),Yl,Il)};var Vl=Yl.map(function(n){return[n[0].utc,n[1]]}),Xl=Fl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",Ae]]);Vl.year=rc.year.utc,rc.scale.utc=function(){return Zo(Bo.scale.linear(),Vl,Xl)},Bo.text=At(function(n){return n.responseText}),Bo.json=function(n,t){return Ct(n,"application/json",Xo,t)},Bo.html=function(n,t){return Ct(n,"text/html",$o,t)},Bo.xml=At(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define("d3",Bo):"object"==typeof module&&module.exports&&(module.exports=Bo),this.d3=Bo}();
var Michelangelo,David={},kaavioCodes=function(){function e(){}return e.codes=[{serverKind:"AverageDirectionalIndex",kaavioCode:1024},{serverKind:"BollingerBands",isUpper:!0,kaavioCode:8},{serverKind:"DividendEvents",isUpper:!0,kaavioCode:4096},{serverKind:"EarningsEvents",isUpper:!0,kaavioCode:2048},{serverKind:"MovingAverageConvergenceDivergence",kaavioCode:4},{serverKind:"Momentum",kaavioCode:65536},{serverKind:"MoneyFlow",kaavioCode:512},{serverKind:"MovingAverageEnvelopes",isUpper:!0,kaavioCode:4},{serverKind:"OnBalanceVolume",kaavioCode:8},{serverKind:"ParabolicSAR",isUpper:!0,kaavioCode:16},{serverKind:"PriceChannels",isUpper:!0,kaavioCode:128},{serverKind:"PriceToEarningsRanges",kaavioCode:8388608},{serverKind:"PriceToEarningsRatio",kaavioCode:16777216},{serverKind:"RateOfChange",kaavioCode:128},{serverKind:"RelativeStrengthIndex",kaavioCode:2},{serverKind:"RollingDividend",kaavioCode:134217728},{serverKind:"SplitEvents",isUpper:!0,kaavioCode:1024},{serverKind:"StochasticOscillatorFast",kaavioCode:16},{serverKind:"StochasticOscillatorSlow",kaavioCode:32},{serverKind:"TotalReturn",isUpper:!0,kaavioCode:262144},{serverKind:"VolatilityFast",kaavioCode:8192},{serverKind:"UltimateOscillator",kaavioCode:131072},{serverKind:"VolatilitySlow",kaavioCode:16384},{serverKind:"Volume",kaavioCode:1},{serverKind:"VolumeAccumulation",kaavioCode:4096},{serverKind:"VolumePlus",kaavioCode:268435456},{serverKind:"WilliamsPercentR",kaavioCode:256},{serverKind:"Yield",kaavioCode:33554432},{serverKind:"Unknown",isUpper:!0,kaavioCode:8192},{serverKind:"Unknown",isUpper:!0,kaavioCode:16384},{serverKind:"Unknown",isUpper:!0,kaavioCode:7168},{serverKind:"Unknown",isUpper:!0,kaavioCode:32},{serverKind:"Unknown",isUpper:!0,kaavioCode:7712},{serverKind:"Unknown",kaavioCode:4194304},{serverKind:"Unknown",kaavioCode:67108864},{serverKind:"Unknown",kaavioCode:1073741824},{serverKind:"Unknown",kaavioCode:524288}],e.steps=[{kaavio:"1",mike:"P1D"},{kaavio:"2",mike:"P7D"},{kaavio:"3",mike:"P1M"},{kaavio:"4",mike:"P3M"},{kaavio:"5",mike:"P1Y"},{kaavio:"6",mike:"PT5M"},{kaavio:"7",mike:"PT15M"},{kaavio:"8",mike:"PT1H"},{kaavio:"9",mike:"PT1M"},{kaavio:"2",mike:"P1W"},{kaavio:"1m",mike:"PT1M"},{kaavio:"1mi",mike:"PT1M"},{kaavio:"1min",mike:"PT1M"},{kaavio:"1minute",mike:"PT1M"},{kaavio:"5m",mike:"PT5M"},{kaavio:"5mi",mike:"PT5M"},{kaavio:"5min",mike:"PT5M"},{kaavio:"5minute",mike:"PT5M"},{kaavio:"15m",mike:"PT15M"},{kaavio:"15mi",mike:"PT15M"},{kaavio:"15min",mike:"PT15M"},{kaavio:"15minute",mike:"PT15M"},{kaavio:"1h",mike:"PT1H"},{kaavio:"1hr",mike:"PT1H"},{kaavio:"1hour",mike:"PT1H"},{kaavio:"1d",mike:"P1D"},{kaavio:"1dy",mike:"P1D"},{kaavio:"1day",mike:"P1D"},{kaavio:"7d",mike:"P7D"},{kaavio:"1wk",mike:"P7D"},{kaavio:"1week",mike:"P7D"},{kaavio:"1mo",mike:"P1M"},{kaavio:"1mon",mike:"P1M"},{kaavio:"1month",mike:"P1M"},{kaavio:"3mo",mike:"P3M"},{kaavio:"3mon",mike:"P3M"},{kaavio:"3month",mike:"P3M"},{kaavio:"1y",mike:"P1Y"},{kaavio:"1yr",mike:"P1Y"},{kaavio:"1year",mike:"P1Y"}],e.timeFrames=[{kaavio:"8",mike:"P1Y"},{kaavio:"1",mike:"P1D"},{kaavio:"2",mike:"P2D"},{kaavio:"3",mike:"P5D"},{kaavio:"4",mike:"P1M"},{kaavio:"5",mike:"P2M"},{kaavio:"6",mike:"P3M"},{kaavio:"7",mike:"P6M"},{kaavio:"9",mike:"P2Y"},{kaavio:"10",mike:"P3Y"},{kaavio:"11",mike:"P4Y"},{kaavio:"12",mike:"P5Y"},{kaavio:"13",mike:"P10Y"},{kaavio:"18",mike:"P10D"},{kaavio:"19",mike:"ytd"},{kaavio:"20",mike:"all"},{kaavio:"21",mike:"PT1H"},{kaavio:"1",mike:"D1"},{kaavio:"1d",mike:"P1D"},{kaavio:"1dy",mike:"P1D"},{kaavio:"1day",mike:"P1D"},{kaavio:"2d",mike:"P2D"},{kaavio:"2dy",mike:"P2D"},{kaavio:"2day",mike:"P2D"},{kaavio:"5d",mike:"P5D"},{kaavio:"5dy",mike:"P5D"},{kaavio:"5day",mike:"P5D"},{kaavio:"10d",mike:"P10D"},{kaavio:"10dy",mike:"P10D"},{kaavio:"10day",mike:"P10D"},{kaavio:"1m",mike:"P1M"},{kaavio:"1mo",mike:"P1M"},{kaavio:"1mon",mike:"P1M"},{kaavio:"1month",mike:"P1M"},{kaavio:"2m",mike:"P2M"},{kaavio:"2mo",mike:"P2M"},{kaavio:"2mon",mike:"P2M"},{kaavio:"2month",mike:"P2M"},{kaavio:"3m",mike:"P3M"},{kaavio:"3mo",mike:"P3M"},{kaavio:"3mon",mike:"P3M"},{kaavio:"3month",mike:"P3M"},{kaavio:"6m",mike:"P6M"},{kaavio:"6mo",mike:"P6M"},{kaavio:"6mon",mike:"P6M"},{kaavio:"6month",mike:"P6M"},{kaavio:"1y",mike:"P1Y"},{kaavio:"1yr",mike:"P1Y"},{kaavio:"1year",mike:"P1Y"},{kaavio:"2y",mike:"P2Y"},{kaavio:"2yr",mike:"P2Y"},{kaavio:"2year",mike:"P2Y"},{kaavio:"3y",mike:"P3Y"},{kaavio:"3yr",mike:"P3Y"},{kaavio:"3year",mike:"P3Y"},{kaavio:"4y",mike:"P4Y"},{kaavio:"4yr",mike:"P4Y"},{kaavio:"4year",mike:"P4Y"},{kaavio:"5y",mike:"P5Y"},{kaavio:"5yr",mike:"P5Y"},{kaavio:"5year",mike:"P5Y"},{kaavio:"10y",mike:"P10Y"},{kaavio:"10yr",mike:"P10Y"},{kaavio:"10year",mike:"P10Y"},{kaavio:"ytd",mike:"ytd"},{kaavio:"alldata",mike:"all"}],e.chartTypes=[{kaavio:"2",mike:"ohlc"},{kaavio:"4",mike:"candlestick"},{kaavio:"8",mike:"area"},{kaavio:"16",mike:"column"},{kaavio:"64",mike:"line"},{kaavio:"64",mike:"spline"}],e.kaavioToMike=function(e,i){for(var a=0;a<e.length;a++)if(e[a].kaavio===i)return e[a].mike;return e[0].mike},e.mikeToKaavio=function(e,i){for(var a=0;a<e.length;a++)if(e[a].mike===i)return e[a].kaavio;return e[0].kaavio},e.mapKaavioFrequencyToMichelangeloStep=function(i){return e.kaavioToMike(e.steps,i)},e.mapMichelangeloStepToKaavioFrequency=function(i){return e.mikeToKaavio(e.steps,i)},e.mapKaavioTimeToMichelangeloTimeFrame=function(i){return e.kaavioToMike(e.timeFrames,i)},e.mapMichelangeloTimeFrameToKaavioTime=function(i){return e.mikeToKaavio(e.timeFrames,i)},e.mapKaavioTypeToMichelangeloChartType=function(i){return e.kaavioToMike(e.chartTypes,i)},e.mapMichelangeloChartTypeToKaavioType=function(i){return e.mikeToKaavio(e.chartTypes,i)},e.lookupKaavioCode=function(i){var a;return $.each(e.codes,function(e,o){o.serverKind===i&&(a=o.kaavioCode)}),a},e.createUpperIndicator=function(i){var a;return $.each(e.codes,function(e,o){o.isUpper&&o.kaavioCode===i&&(a=o.serverKind)}),e.createIndicator(a)},e.createLowerIndicator=function(i){var a;return $.each(e.codes,function(e,o){o.isUpper||o.kaavioCode!==i||(a=o.serverKind)}),e.createIndicator(a)},e.createIndicator=function(e){if(!e)return null;var i;return $.each(Michelangelo.MetaData,function(a,o){o.serverKind===e&&(i=o)}),i?new Michelangelo.Indicator(i):null},e}();David.KaavioCodes=kaavioCodes,function(e){!function(e){var i=function(){function e(){}return e.getUrlParts=function(e){var i=e.indexOf("?"),a="";a=e.substr(i+1);for(var o=a.split("&"),n={},r=0;r<o.length;r++){var k=o[r].split("=");k[1]?n[decodeURIComponent(k[0])]=decodeURIComponent(k[1]):n[decodeURIComponent(k[0])]=""}return n},e}();e.Common=i}(e.Legacy||(e.Legacy={}))}(Michelangelo||(Michelangelo={})),function(e){!function(i){var a=function(){function i(){}var a=function(e,i){var a=David.KaavioCodes.createLowerIndicator(parseInt(parseInt(i)));null!==a&&e.addIndicator(a)},o=function(i,o){if(o.ma){var n=null;switch(o.ma){case"1":n=new e.Indicator(e.MetaData.SimpleMovingAverage);break;case"2":n=new e.Indicator(e.MetaData.ExponentialMovingAverage)}null!==n&&(o.maval&&(n.parameters[0].value=o.maval),i.addIndicator(n))}if(o.uf){var r=David.KaavioCodes.createUpperIndicator(parseInt(o.uf));null!==r&&i.addIndicator(r)}o.lf&&a(i,o.lf),o.lf2&&a(i,o.lf2),o.lf3&&a(i,o.lf3)};return i.parse=function(i){var a=new e.ChartDefinition,n=e.Legacy.Common.getUrlParts(i);a.step=David.KaavioCodes.mapKaavioFrequencyToMichelangeloStep(n.freq),a.timeFrame=David.KaavioCodes.mapKaavioTimeToMichelangeloTimeFrame(n.time);var r=new e.TickerSeries;r.setTicker(n.symb),r.chartType=David.KaavioCodes.mapKaavioTypeToMichelangeloChartType(n.type),o(r,n),a.series=[r];var k={width:400,height:300};return{def:a,width:k.width,height:k.height}},i}();i.Kaavio=a}(e.Legacy||(e.Legacy={}))}(Michelangelo||(Michelangelo={})),function(e){!function(i){var a=function(){function i(){}var a=[{thunderball:"1mi",mike:"PT1M"},{thunderball:"5mi",mike:"PT5M"},{thunderball:"15mi",mike:"PT15M"},{thunderball:"1hr",mike:"PT1H"},{thunderball:"1dy",mike:"P1D"},{thunderball:"1wk",mike:"P7D"},{thunderball:"1mo",mike:"P1M"},{thunderball:"3mo",mike:"P3M"},{thunderball:"1yr",mike:"P1Y"}],o=[{thunderball:"1dy",mike:"D1",fullDay:!0},{thunderball:"2dy",mike:"D2",afterHours:!0},{thunderball:"5dy",mike:"D5"},{thunderball:"10dy",mike:"P10D"},{thunderball:"1mo",mike:"P1M"},{thunderball:"2mo",mike:"P2M"},{thunderball:"3mo",mike:"P3M"},{thunderball:"6mo",mike:"P6M"},{thunderball:"1yr",mike:"P1Y"},{thunderball:"2yr",mike:"P2Y"},{thunderball:"3yr",mike:"P3Y"},{thunderball:"4yr",mike:"P4Y"},{thunderball:"5yr",mike:"P5Y"},{thunderball:"10yr",mike:"P10Y"},{thunderball:"ytd",mike:"ytd"},{thunderball:"alldata",mike:"all"}],n=function(e,i){for(var a=0;a<e.length;a++)if(e[a].thunderball===i)return e[a];return e[0]},r=function(e,i){for(var a=0;a<e.length;a++)if(e[a].mike===i)return e[a].thunderball;return e[0].thunderball},k=[{style:"1012",size:"1",height:118,width:230},{style:"1012",size:"2",height:207,width:355},{style:"1012",size:"3",height:298,width:152},{style:"1012",size:"4",height:341,width:550},{style:"222",size:"1",height:118,width:230},{style:"222",size:"2",height:207,width:325},{style:"222",size:"3",height:298,width:152},{style:"222",size:"4",height:341,width:550}],t=function(e,i){var a=null;return $.each(k,function(o,n){n.style===e&&n.size===i&&(a=n)}),a||(a=k[0]),{width:a.width-75,height:a.height}},v=function(e){var i=/function (.{1,})\(/,a=i.exec(e.constructor.toString());return a&&a.length>1?a[1]:""};return i.build=function(e){var i=[],n=e.model;return $.each(n.series,function(e,a){"TickerSeriesObject"===v(a)&&a.getTicker()&&a.getTicker().length>0&&i.push(a.getTicker())}),0===i.length&&(i=["AAPL"]),{tickers:i,freq:r(a,n.step),time:r(o,n.timeFrame),width:e.width,height:e.height}},i.parse=function(i){var r=new e.ChartDefinition,k=e.Legacy.Common.getUrlParts(i),v=n(o,k.time);r.step=n(a,k.freq).mike,r.timeFrame=v.mike,v.fullDay||(r.xAxisCompressed=!0),v.afterHours&&(r.showAfterHours=!0,r.showAfterHoursBands=!0);var m=new e.TickerSeries;m.setTicker(k.symb),m.chartType="line",r.series=[m];var d=t(k.style,k.size),l={def:r,width:d.width,height:d.height};return l},i}();i.Thunderball=a}(e.Legacy||(e.Legacy={}))}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){!function(e){"function"==typeof define&&define("vendor.asset.michelangelo/michelangelo-legacy",[],function(){return e})}(e.Legacy||(e.Legacy={}))}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){!function(e){e.legacy="2.0.1605"}(e.versions||(e.versions={}))}(Michelangelo||(Michelangelo={}));
var mustOverride=function(e){throw e+" is abstract and must be overridden"},InheritanceException=function(e){this.message=e,this.name=this.constructor.name},__inherit=function(e,t){var n;if(t(e,function(t){if(n)throw new InheritanceException("must call the ctor function only once");for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);var o=function(){this.constructor=t};return o.prototype=e.prototype,t.prototype=new o,n=t,t}),!n)throw new InheritanceException("must call the ctor function with the class constructor");return n},__base=function(e){var t;if(e(function(e){if(t)throw new InheritanceException("must call the ctor function only once");var n=function(){this.constructor=e};return n.prototype={},e.prototype=new n,t=e,e}),!t)throw new InheritanceException("must call the ctor function with the class constructor");return t};!function(){}([mustOverride,InheritanceException,__inherit,__base]);var Michelangelo;!function(Michelangelo){var UnknownToolColor="#94b14b",__extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},Rejection=__inherit(Error,function(e,t){t(function(t,n,i){e.call(this,n),this.name=t,this.detail=i})});Michelangelo.Rejection=Rejection;var Logger=__base(function(e){var t,n=e(function(){});t="undefined"!=typeof console&&"function"==typeof console.log?console:{log:function(){},warn:function(){},error:function(){}},n.log=function(){t.log.apply(t,arguments)},n.warn=function(){t.warn.apply(t,arguments)},n.error=function(){t.error.apply(t,arguments)},n.debug=function(){Michelangelo.isDebugEnabled()&&t.log.apply(t,arguments)}});Michelangelo.Logger=Logger;var Marshal=__base(function(ctor){var klass=ctor(function(){});klass.stringify=function(e){var t="(function() { return {",n=0;for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];"function"==typeof o&&(n&&(t+=","),t+="'"+i+"': "+o.toString(),n+=1)}return t+="}})()"},klass.objectify=function(str){return eval(str)}});Michelangelo.Marshal=Marshal;var Helpers=__base(function(e){var t=e(function(){});t.render=function(){var e="Michelangelo.Helpers.render() has been deprecated.  Please use the new jquery syntax instead.",t="See https://github.dowjones.net/MarketData/Michelangelo/blob/master/docs/Jquery-Syntax.md",n=e+"\n"+t;throw new Error(n)}});Michelangelo.Helpers=Helpers;var EventManager=__base(function(e){var t=null,n=function(){return t||(t=new DirectEventManager)},i=e(function(){});i.prototype._fire=function(e,i,o){this!==t&&n()._fire(e,i,o)},i.prototype.createNotifier=function(){mustOverride("createNotifier")},i.prototype.on=function(){mustOverride("on")},i.on=function(e,t){return n().on(e,t)}});Michelangelo.EventManager=EventManager;var Notifier=__base(function(e){var t=e(function(e,t){this.__notify=e,this.__source=t});t.prototype.notify=function(e,t,n){this.__notify(e,t,this.__source||n)};var n=t,i=new n(function(){});t.Null=function(){return i}});Michelangelo.Notifier=Notifier;var DirectEventManager=__inherit(EventManager,function(e,t){var n=1,i=t(function(t){e.call(this),this.__callbacks={},this.__wrapper=t||function(e){e()}});i.prototype.on=function(e,t){var i=this;i.__callbacks[e]||(i.__callbacks[e]={});var o=n++;return this.__callbacks[e][o]=t,function(){var t=i.__callbacks[e];t&&delete t[o]}},i.prototype.createNotifier=function(e){var t=this;return new Notifier(function(e,n,i){t._fire(e,n,i)},e)},i.prototype._fire=function(t,n,i){var o=this;this.__callbacks[t]&&$.each(this.__callbacks[t],function(e,t){o.__wrapper(function(){t(n,i)})}),e.prototype._fire.call(this,t,n,i)}});Michelangelo.DirectEventManager=DirectEventManager;var Environment=__base(function(e){var t=e(function(e){this.__key=e.key||"Custom",this.__name=e.name||"Custom",this.__url=e.url,this.__apiRootUrl=e.apiRootUrl,this.__uiRootUrl=e.uiRootUrl,this.__canUseCustomHeaders=e.canUseCustomHeaders,this.__canUsePost=e.canUsePost,this.__maxGetContentLength=e.maxGetContentLength||512});t.prototype.name=function(){return this.__name},t.prototype.url=function(){return this.__url},t.prototype.apiRootUrl=function(){return this.__apiRootUrl},t.prototype.uiRootUrl=function(){return this.__uiRootUrl},t.prototype.recentChartsUrl=function(){return this.__recentChartsUrl},t.prototype.canUseCustomHeaders=function(){return this.__canUseCustomHeaders&&!window.XDomainRequest},t.prototype.canUsePost=function(){return this.__canUsePost},t.prototype.key=function(){return this.__key},t.prototype.postPresentationUrl=function(){return this.__apiRootUrl+"/presentation"},t.prototype.presentationDefinitionUrl=function(e){return this.__apiRootUrl+"/definition/"+e},t.prototype.presentationUrl=function(e){return this.__apiRootUrl+"/presentation/"+e},t.prototype.presentationListUrl=function(e){return this.__apiRootUrl+"/user/"+e+"/presentations"},t.prototype.rawDataParseUrl=function(){return this.__apiRootUrl+"/rawdata/parse"},t.prototype.maxGetContentLength=function(){return this.__maxGetContentLength};var n=function(){var e="http://"+$(location).attr("host"),t=$(location).attr("port");return""===t&&(e+="/Michelangelo.Service.WebHost"),e},i=t,o=[new i({key:"MuxPublic",name:"Mux (public, production)",url:"http://api.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"http://api.wsj.net/api/michelangelo",uiRootUrl:"http://api.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new i({key:"MuxStaging",name:"Mux (public, staging)",url:"http://api-staging.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"http://api-staging.wsj.net/api/michelangelo",uiRootUrl:"http://api-staging.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new i({key:"MuxLocal",name:"Mux (local)",url:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/timeseries/history",apiRootUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo",uiRootUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new i({key:"MuxPublicSecure",name:"Mux (public, production, secure)",url:"https://api-secure.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"https://api-secure.wsj.net/api/michelangelo",uiRootUrl:"https://api-secure.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new i({key:"MuxStagingSecure",name:"Mux (public, staging, secure)",url:"https://api-staging-secure.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"https://api-staging-secure.wsj.net/api/michelangelo",uiRootUrl:"https://api-staging-secure.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new i({key:"DirectDev",name:"Direct (internal, dev)",url:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/api/timeseries/history",apiRootUrl:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/api/",uiRootUrl:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/ui/",canUseCustomHeaders:!0,canUsePost:!0}),new i({key:"Local",name:"Michelangelo (local)",url:n()+"/api/timeseries/history",apiRootUrl:n()+"/api",uiRootUrl:n()+"/ui",canUseCustomHeaders:!0,canUsePost:!0}),new i({key:"DowJonesDataServicesPublic",name:"DJDS (public)",url:"http://services.dowjones.com/michelangelorest.svc/v1/timeSeries",apiRootUrl:"",uiRootUrl:""}),new i({key:"DowJonesDataServicesPublicStaging",name:"DJDS (public, staging)",url:"http://services-staging.dowjones.com/michelangelorest.svc/v1/timeSeries",apiRootUrl:"",uiRootUrl:""}),new i({key:"DowJonesDataServicesLocal",name:"DJDS (local)",url:"http://"+$(location).attr("host")+"/DowJones.DataServices.WebHost/public/michelangelorest.svc/v1/timeseries",apiRootUrl:"",uiRootUrl:""})],r={};$.each(o,function(e,t){r[t.key()]=t}),t.getWellKnownEnvironments=function(){return $.extend([],o)},t.getWellKnownEnvironment=function(e){return r[e]};var a=function(){return t.getWellKnownEnvironment("MuxPublic")},s=a();t.ambient=function(e){if(0===arguments.length)return s;if(!e)return s=a(),t;if("string"===$.type(e)){var n=t.getWellKnownEnvironment(arguments[0]);if(n)return s=n,Logger.debug("Michelangelo ambient environment set to '"+e+"': "+n.name()),t}return e instanceof t?(s=e,Logger.debug("Michelangelo ambient environment set directly: "+e.name()),t):(Logger.error("Michelangelo ambient environment was not changed to '"+e+"'. Valid values are: "+$.map(o,function(e){return"\r\n  "+e.key()+": "+e.name()}).join()+"\r\nor a custom environment definition."),t)},t.select=function(e){if(0===arguments.length||!e)return t.ambient();if(e instanceof t)return e;var n=t.getWellKnownEnvironment(e);return n?n:(Logger.warn("Could not select an environment for input '"+e+"'; returning ambient environment."),t.ambient())}});Michelangelo.Environment=Environment;var Entitlement=__base(function(e){var t=null,n=e(function(e){if("string"!==$.type(e))throw"token must be a string";this.__token=e});n.prototype.token=function(){return this.__token},n.prototype.ckey=function(){return this.token()?this.token().substr(0,10):""},n.ambient=function(e){return 0===arguments.length?t:e?"string"===$.type(e)?(t=new Entitlement(e),Logger.debug("Michelangelo ambient entitlement set to '"+t.token()+"'"),n):e instanceof n?(t=e,Logger.debug("Michelangelo ambient entitlement set to '"+t.token()+"'"),n):(Logger.error("Michelangelo ambient entitlement was not changed to '"+e+"'. Value must be a token string or an Entitlement instance"),n):(t=n.__defaultEntitlement(),n)},n.select=function(e){return e instanceof n?e:"string"===$.type(e)?new Entitlement(e):n.ambient()},n.__defaultEntitlement=function(){var e=n;return new e("")},t=n.__defaultEntitlement()});Michelangelo.Entitlement=Entitlement;var Ajax=__base(function(e){var t=e(function(){});t.send=function(e,t,n,i,o){try{o=Math.max(0,+o||0);var r=0;t=$.extend(!0,{data:{},params:{},headers:{}},t),n=Environment.select(n),"function"==typeof e?e=e(n):"function"==typeof n[e]&&(e=n[e].call(n));var a=Entitlement.select(i).token();t.params.ckey=a.substr(0,10),n.canUseCustomHeaders()?t.headers["Dylan2010.EntitlementToken"]=a:t.params.entitlementToken=a,"GET"===t.type&&(t.params=$.extend(t.data,t.params),delete t.data);var s=$.map(t.params,function(e,t){return t+"="+encodeURIComponent(e)}).join("&");s&&(e=e+(-1===e.indexOf("?")?"?":"&")+s);var l=function(n,i,a){try{if(r++<=o)return $.ajax(e,t).fail(function(e,t,n){l(e,t,n)});var s="";if(n.responseText)try{var c=JSON.parse(n.responseText);c.Message&&(s=c.Message,c.ExceptionMessage&&(s+="  (with exception: "+c.ExceptionMessage+")"))}catch(h){}return s||"string"!==$.type(a)||(s=a,a=null),o&&(s+=" (after "+(o+1)+" attempts)"),$.Deferred().reject(new Rejection("AJAX error",s,a))}catch(u){return $.Deferred().reject(new Rejection("AJAX exception",u.message,u))}};return l(null,"","")}catch(c){return $.Deferred().reject(new Rejection("AJAX exception",c.message,c))}}}),Position={above:0,below:1,onTop:2,overlay:3,compare:4};Michelangelo.Position=Position;var MetaData=function(){var e=function(){};return e.getLocalRoot=function(){var e="http://"+$(location).attr("host"),t=$(location).attr("port");return""===t&&(e+="/Michelangelo.Service.WebHost"),e},e.AxisTypes=[{name:"Linear",value:"linear"},{name:"Log",value:"logarithmic"}],e.SeriesChartTypes=[{name:"Line",value:"line"},{name:"Candlesticks",value:"candlestick"},{name:"OHLC",value:"ohlc"},{name:"Area",value:"area"},{name:"Column",value:"column"},{name:"Smoothed",value:"spline"},{name:"Scatter",value:"scatter"},{name:"AreaRange",value:"arearange",special:!0}],e.DataFormats=[{name:"Auto",value:"Auto"},{name:"CSV",value:"CSV"},{name:"TSV",value:"TSV"}],e.TimeFrames=[{name:"1 hour",value:"PT1H"},{name:"2 hours",value:"PT2H"},{name:"8 hours",value:"PT8H"},{name:"1 day",value:"D1"},{name:"2 days",value:"D2"},{name:"5 days",value:"D5"},{name:"10 days",value:"D10"},{name:"1 month",value:"P1M"},{name:"3 months",value:"P3M"},{name:"6 months",value:"P6M"},{name:"1 Year",value:"P1Y"},{name:"2 Years",value:"P2Y"},{name:"3 Years",value:"P3Y"},{name:"5 Years",value:"P5Y"},{name:"10 Years",value:"P10Y"},{name:"Yesterday",value:"D1-1"},{name:"All",value:"all"},{name:"YTD",value:"YTD"},{name:"Custom",value:"custom"}],e.Steps=[{name:"1 minute",value:"PT1M"},{name:"5 minutes",value:"PT5M"},{name:"10 minutes",value:"PT10M"},{name:"15 minutes",value:"PT15M"},{name:"1 hour",value:"PT1H"},{name:"2 hours",value:"PT2H"},{name:"1 day",value:"P1D"},{name:"2 days",value:"P2D"},{name:"3 days",value:"P3D"},{name:"4 days",value:"P4D"},{name:"5 days",value:"P5D"},{name:"Weekly",value:"P7D"},{name:"Monthly",value:"P1M"},{name:"Quarterly",value:"P3M"},{name:"Yearly",value:"P1Y"}],e.TickerDataPointsList=[{name:"Last",value:"Last"},{name:"Open",value:"Open"},{name:"High",value:"High"},{name:"Low",value:"Low"},{name:"Hybrid",value:"Hybrid"},{name:"Volume",value:"Volume"},{name:"% Change",value:"PercentChange"}],e.AnimationEasings=["linear","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"],e.IndicatorPositionList=[{name:"Above",value:Michelangelo.Position.above},{name:"Below",value:Michelangelo.Position.below},{name:"OnTop",value:Michelangelo.Position.onTop},{name:"Overlay",value:Michelangelo.Position.overlay},{name:"Compare",value:Michelangelo.Position.compare}],e.IndicatorHeightsList=[{name:"Teeny",value:50},{name:"Small",value:100},{name:"Medium",value:200},{name:"Large",value:300},{name:"X-Large",value:400},{name:"Huge",value:500}],e.AdlIndicator={name:"Accumulation Distribution Line (ADL)",serverKind:"AccumulationDistributionLine",abbreviation:"ADL"},e.AroonIndicator={name:"Aroon Indicator",serverKind:"AroonIndicator",abbreviation:"Aroon",parameters:[{name:"Period",defaultValue:"25",includeInLabel:!0}]},e.AverageTrueRange={name:"Average True Range (ATR)",serverKind:"AverageTrueRange",abbreviation:"ATR",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},e.BollingerBandsIndicator={name:"Bollinger Bands",serverKind:"BollingerBands",isOverlay:!0,abbreviation:"BB",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"Multiplier",defaultValue:"2.0",includeInLabel:!0}]},e.CommodityChannelIndex={name:"Commodity Channel Index (CCI)",serverKind:"CommodityChannelIndex",abbreviation:"CCI",parameters:[{name:"Period",defaultValue:"20",includeInLabel:!0}]},e.CompetitorComparison={name:"Competitor Comparison (Beta)",serverKind:"CompetitorComparison",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0}]},e.DividendsIndicator={name:"Dividends",serverKind:"DividendEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},e.DmiAndAdx={name:"DMI/ADX",serverKind:"AverageDirectionalIndex",abbreviation:"DMI/ADX",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},e.EarningsIndicator={name:"Earnings",serverKind:"EarningsEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},e.ExponentialMovingAverage={name:"Exponential Moving Average",serverKind:"ExponentialMovingAverage",isOverlay:!0,abbreviation:"EMA",parameters:[{name:"Period",isList:!0,defaultValue:"9, 18",includeInLabel:!0}]},e.FundComparison={name:"Fund Comparison (Beta)",serverKind:"FundComparison",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0},{name:"NumFunds",defaultValue:"5"},{name:"FundType",inputType:"pickList",defaultValue:"ETF",choices:["ETF","MutualFund","Both"]}]},e.HorizontalLineIndicator={name:"Horizontal Line",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"Value",defaultValue:"10"}]},e.InsiderTransactions={name:"Insider Transactions (beta)",serverKind:"InsiderTransactions",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},e.KeltnerChannels={name:"Keltner Channels",serverKind:"KeltnerChannels",isOverlay:!0,abbreviation:"KELT",parameters:[{name:"EMA Period",serverName:"EmaPeriod",defaultValue:"20",includeInLabel:!0},{name:"Multiplier",defaultValue:"2.0",includeInLabel:!0},{name:"ATR Period",serverName:"AtrPeriod",defaultValue:"10",includeInLabel:!0}]},e.MacdIndicator={name:"MACD",serverKind:"MovingAverageConvergenceDivergence",parameters:[{name:"EMA Period #1",serverName:"EMA1",defaultValue:"12",includeInLabel:!0},{name:"EMA Period #2",serverName:"EMA2",defaultValue:"26",includeInLabel:!0},{name:"Signal Line",serverName:"SignalLine",defaultValue:"9",includeInLabel:!0}]},e.Momentum={name:"Momentum",serverKind:"Momentum",parameters:[{name:"Period",defaultValue:"12",includeInLabel:!0},{name:"ChartType",inputType:"chartType",defaultValue:"column",clientOnly:!0}]},e.MoneyFlowIndex={name:"Money Flow Index",serverKind:"MoneyFlowIndex",abbreviation:"MFI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},e.MovingAverageEnvelopes={name:"Moving Average Envelopes",serverKind:"MovingAverageEnvelopes",isOverlay:!0,abbreviation:"ENV",parameters:[{name:"Period",defaultValue:"9",includeInLabel:!0},{name:"Percent",defaultValue:"0.02",includeInLabel:!0}]},e.NewsDensity={name:"News Density",serverKind:"NewsDensity",excludeFromLabel:!0,parameters:[{name:"DocTypes",inputType:"docTypesList",isList:"true"},{name:"Significance Flag",inputType:"pickList",defaultValue:"None",choices:["Significant","Prominent","PassingMention","None"]}]},e.DocTypes=[{name:" ",value:" "},{name:"MarketWatch Common",value:"90, 91, 92, 99, 103, 53, 3"},{name:"WSJDN",value:"424, 425, 463, 115, 25, 421, 449, 473"}],e.NewsWiresCorporate={name:"NewsWires - ENF - Corporate",serverKind:"NewsWiresCorporate",excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"scatter",clientOnly:!0},{name:"EnfNames",isList:!0,inputType:"biglist",defaultValue:"REV_CUR,PROFIT_CUR,SALES_CUR"}]},e.OnBalanceVolume={name:"On Balance Volume",serverKind:"OnBalanceVolume"},e.OpenHighLowLines={name:"Open/High/Low Lines",serverKind:"OpenHighLowLines",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ShowOpen",inputType:"checkbox",defaultValue:!0},{name:"ShowHigh",inputType:"checkbox",defaultValue:!0},{name:"ShowLow",inputType:"checkbox",defaultValue:!0},{name:"ShowPriorClose",inputType:"checkbox",defaultValue:!1},{name:"Show52WeekHigh",inputType:"checkbox",defaultValue:!1},{name:"Show52WeekLow",inputType:"checkbox",defaultValue:!1}]},e.ParabolicSAR={name:"Parabolic SAR",serverKind:"ParabolicSAR",isOverlay:!0,abbreviation:"SAR",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"line",clientOnly:!0},{name:"AF Begin",serverName:"initial",defaultValue:"0.02",includeInLabel:!0},{name:"AF Increment",serverName:"step",defaultValue:"0.02",includeInLabel:!0},{name:"AF Maximum",serverName:"maximumStep",defaultValue:"0.2",includeInLabel:!0}]},e.PriceChannels={name:"Price Channels",serverKind:"PriceChannels",abbreviation:"CHAN",isOverlay:!0,parameters:[{name:"Period",defaultValue:"20",includeInLabel:!0}]},e.PriceToEarningsRanges={name:"P/E Ranges",serverKind:"PriceToEarningsRanges",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"ohlc",clientOnly:!0}]},e.PriceToEarningsRatio={name:"P/E Ratio",serverKind:"PriceToEarningsRatio"},e.ProjectedInstrumentSeries={name:"Projected Instrument Series",serverKind:"ProjectedInstrumentSeries",isOverlay:!0,abbreviation:"Projected",parameters:[{name:"TimeFrame",defaultValue:"14",includeInLabel:!0},{name:"Confidence",defaultValue:"90",includeInLabel:!0},{name:"Simulations",defaultValue:"100",includeInLabel:!0},{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0}]},e.RateOfChange={name:"Rate Of Change (ROC)",serverKind:"RateOfChange",abbreviation:"ROC",parameters:[{name:"Period",defaultValue:"12",includeInLabel:!0}]},e.RelativeStrengthIndex={name:"Relative Strength Index",serverKind:"RelativeStrengthIndex",abbreviation:"RSI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},e.RollingDividend={name:"Rolling Dividend",serverKind:"RollingDividend",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"line",clientOnly:!0}]},e.SimpleMovingAverage={name:"Simple Moving Average",abbreviation:"SMA",serverKind:"SimpleMovingAverage",isOverlay:!0,parameters:[{name:"Period",isList:!0,defaultValue:"9, 18",includeInLabel:!0}]},e.SplitsIndicator={name:"Splits",serverKind:"SplitEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},e.StochasticOscillatorFast={name:"Stochastic Oscillator (Fast)",serverKind:"StochasticOscillatorFast",abbreviation:"Fast STO",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"D SMA Period",serverName:"DSMAPeriod",defaultValue:"3",includeInLabel:!0}]},e.StochasticOscillatorSlow={name:"Stochastic Oscillator (Slow)",serverKind:"StochasticOscillatorSlow",abbreviation:"Slow STO",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"K Smoothing Period",serverName:"KSMAPeriod",defaultValue:"3",includeInLabel:!0},{name:"D SMA Period",serverName:"DSMAPeriod",defaultValue:"3",includeInLabel:!0}]},e.TotalReturn={name:"Total Return",serverKind:"TotalReturn",isOverlay:!0},e.TrueStrengthIndex={name:"True Strength Index (TSI)",serverKind:"TrueStrengthIndex",abbreviation:"TSI",parameters:[{name:"Period1",defaultValue:"25",includeInLabel:!0},{name:"Period2",defaultValue:"13",includeInLabel:!0}]},e.UlcerIndex={name:"Ulcer Index",serverKind:"UlcerIndex",abbreviation:"UI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},e.UltimateOscillator={name:"Ultimate Oscillator",serverKind:"UltimateOscillator",abbreviation:"ULT",parameters:[{name:"PeriodShort",defaultValue:"7",includeInLabel:!0},{name:"PeriodMiddle",defaultValue:"14",includeInLabel:!0},{name:"PeriodLong",defaultValue:"28",includeInLabel:!0}]},e.VolatilityFast={name:"Volatility (Fast)",serverKind:"VolatilityFast"},e.VolatilitySlow={name:"Volatility (Slow)",serverKind:"VolatilitySlow",parameters:[{name:"Period",defaultValue:"21",includeInLabel:!0}]},e.VolumeAccumulation={name:"Volume Accumulation",serverKind:"VolumeAccumulation"},e.VolumeIndicator={name:"Volume",serverKind:"Volume",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"column",clientOnly:!0}]},e.VolumePlus={name:"Volume+",serverKind:"VolumePlus",parameters:[{name:"Period",defaultValue:"50",includeInLabel:!0}]},e.VortexIndicator={name:"Vortex Indicator",serverKind:"VortexIndicator",abbreviation:"VTX",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},e.WilliamsPercentR={name:"Williams %R",serverKind:"WilliamsPercentR",abbreviation:"Wm%R",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},e.Yield={name:"Yield",serverKind:"Yield",excludeFromLabel:!0},e.IndicatorList=[e.VolumeIndicator,e.AdlIndicator,e.AroonIndicator,e.AverageTrueRange,e.BollingerBandsIndicator,e.CommodityChannelIndex,e.CompetitorComparison,e.DividendsIndicator,e.DmiAndAdx,e.EarningsIndicator,e.ExponentialMovingAverage,e.FundComparison,e.KeltnerChannels,e.HorizontalLineIndicator,e.InsiderTransactions,e.MacdIndicator,e.Momentum,e.MoneyFlowIndex,e.MovingAverageEnvelopes,e.NewsDensity,e.NewsWiresCorporate,e.OnBalanceVolume,e.OpenHighLowLines,e.ParabolicSAR,e.PriceChannels,e.PriceToEarningsRanges,e.PriceToEarningsRatio,e.ProjectedInstrumentSeries,e.RateOfChange,e.RelativeStrengthIndex,e.RollingDividend,e.SimpleMovingAverage,e.SplitsIndicator,e.StochasticOscillatorFast,e.StochasticOscillatorSlow,e.TotalReturn,e.TrueStrengthIndex,e.UlcerIndex,e.UltimateOscillator,e.VolatilityFast,e.VolatilitySlow,e.VolumeAccumulation,e.VolumePlus,e.VortexIndicator,e.WilliamsPercentR,e.Yield],e.EndPoints={Local:{name:"Michelangelo (local)",url:e.getLocalRoot()+"/api/timeseries/history",stashUrl:e.getLocalRoot()+"/api/stash/timeseries",recentChartsUrl:e.getLocalRoot()+"/api/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxLocal:{name:"Mux (local)",url:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/timeseries/history",stashUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/stash/timeseries",recentChartsUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxPublic:{name:"Mux (public)",url:"http://api.wsj.net/api/michelangelo/timeseries/history",stashUrl:"http://api.wsj.net/api/michelangelo/stash/timeseries",recentChartsUrl:"http://api.wsj.net/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxStaging:{name:"Mux (staging)",url:"http://api-staging.wsj.net/api/michelangelo/timeseries/history",stashUrl:"http://api-staging.wsj.net/api/michelangelo/stash/timeseries",recentChartsUrl:"http://api-staging.wsj.net/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},DowJonesDataServicesLocal:{name:"DJDS (local)",url:"http://"+$(location).attr("host")+"/DowJones.DataServices.WebHost/public/michelangelorest.svc/v1/timeseries",stashUrl:"",recentChartsUrl:""},DowJonesDataServicesPublic:{name:"DJDS (public)",url:"http://services.dowjones.com/michelangelorest.svc/v1/timeSeries",stashUrl:"",recentChartsUrl:""},DowJonesDataServicesPublicStaging:{name:"DJDS (public, staging)",url:"http://services-staging.dowjones.com/michelangelorest.svc/v1/timeSeries",stashUrl:"",recentChartsUrl:""}},e.EndPointList=[e.EndPoints.DowJonesDataServicesPublic,e.EndPoints.DowJonesDataServicesPublicStaging,e.EndPoints.DowJonesDataServicesLocal,e.EndPoints.MuxLocal,e.EndPoints.MuxStaging,e.EndPoints.MuxPublic,e.EndPoints.Local],e}();Michelangelo.MetaData=MetaData;var Annotation=__base(function(e){var t=e(function(e){if(e){_.assign(this,_.cloneDeep(e));var t=this.data;t&&(delete this.data,_.defaults(this,t))}else this.id="a";this.type=this.constructor.type()});t.type=function(){throw'must override "type" method on Annotation-derived types'},t.prototype.idify=function(e){return this.makeId!==e&&(this.makeId=e,this.id="a"+e()),this};var n={};t.create=function(e){var t=n[e.type||""];return t?new t(e):null},t._register=function(e){n[e.type()]=e}});Michelangelo.Annotation=Annotation;var IndicatorParameter=function(){var e=function(e){this.value=void 0,this.metaData=e};return e}();Michelangelo.IndicatorParameter=IndicatorParameter;var Indicator=__base(function(e){var t=e(function(e){var n=this;if(this.annotations=[],e.seriesId){$.extend(this,e);var i=$.map(this.annotations,function(e){return Annotation.create(e)});e instanceof t?this.annotations=i:(this.annotations=[],$.each(i,function(e,t){n.addAnnotation(t)}))}else this.seriesId="i",this.height=MetaData.IndicatorHeightsList[1].value,this.showAxisTitle=!0,this.axisType="linear",e.isOverlay?this.position=Position.overlay:e.isEvent?this.position=Position.onTop:this.position=Position.below,this.metaData=e,this.buildParametersFromMetaData()});t.prototype.idify=function(e){return this.makeId!==e&&(this.makeId=e,this.seriesId="i"+e(),$.each(this.annotations,function(t,n){n.idify(e)})),this},t.prototype.addAnnotation=function(e){this.annotations.push(e.idify(this.makeId))},t.prototype.getAxisTitle=function(e){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:e&&e.CommonName&&e.CommonName.length>0?e.CommonName:this.metaData.name},t.prototype.buildParametersFromMetaData=function(){if(this.parameters=[],this.metaData.parameters){var e=this;$.each(this.metaData.parameters,function(t,n){var i=new Michelangelo.IndicatorParameter(n);n.defaultValue&&(i.value=n.defaultValue),e.parameters.push(i)})}}});Michelangelo.Indicator=Indicator;var SeriesParameter=function(){function e(e,t,n){this.name=e,this.inputType=t,this.value=n}return e}();Michelangelo.SeriesParameter=SeriesParameter;var Series=__base(function(e){var t=e(function(e){var n=this;if(this.seriesKind="unknown",this.chartType="line",this.showAxisTitle=!0,this.axisType="linear",this.position=Michelangelo.Position.onTop,this.height=Michelangelo.MetaData.IndicatorHeightsList[3].value,this.canHaveIndicators=!1,this.canEditData=!1,this.desiredDataPoint="Last",this.djid=null,this.tooltipDataPoints=[],this.customToolTipData={},this.parameters=[],this.indicators=[],this.annotations=[],e){$.extend(!0,this,e);var i=$.map(this.indicators,function(e){return new Indicator(e)}),o=$.map(this.annotations,function(e){return Annotation.create(e)});e instanceof t?(this.indicators=i,this.annotations=o):(this.indicators=[],$.each(i,function(e,t){n.addIndicator(t)}),this.annotations=[],$.each(o,function(e,t){n.addAnnotation(t)}))}else this.seriesId="s"});t.prototype.idify=function(e){return this.makeId!==e&&(this.makeId=e,this.seriesId="s"+e(),$.each(this.indicators,function(t,n){n.idify(e)}),$.each(this.annotations,function(t,n){n.idify(e)})),this},t.prototype.addIndicator=function(e){this.indicators.push(e.idify(this.makeId))},t.prototype.addAnnotation=function(e){this.annotations.push(e.idify(this.makeId))},t.prototype.addParameter=function(e,t,n){this.parameters.push(new SeriesParameter(e,t,n))},t.prototype.addToRequest=function(){return null},t.prototype.getGuiTitle=function(){return"Generic Series"},t.prototype.getAxisTitle=function(e){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:this.getName(e)},t.prototype.getName=function(){return"Generic Series"},t.prototype.getFieldNames=function(){return[]},t.prototype.recommendedChartType=function(){return""},t.prototype.canPickDataPoint=function(){return!1},t.prototype.canAddExtraTooltips=function(){return!1},t.prototype.canAnnotate=function(){return!0}});Michelangelo.Series=Series;var TickerSeries=function(e){function t(t,n){e.call(this,t,n),t||(this.seriesKind="TickerSeries",this.chartType="candlestick",this.canHaveIndicators=!0,this.addParameter("Ticker","ticker"))}return __extends(t,e),t.prototype.setTicker=function(e){this.parameters[0].value=e},t.prototype.getTicker=function(){return this.parameters[0].value},t.prototype.getGuiTitle=function(){var e=this.getTicker(),t="Ticker Series";return e&&(t+=": "+e),t},t.prototype.getAxisTitle=function(e){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:e&&e.CommonName&&e.CommonName.length>0?e.CommonName:e?e.CountryCode&&e.CountryCode.length>0?e.CountryCode+":"+e.Ticker:e.Ticker:"Ticker Series"},t.prototype.getName=function(e){return e?e.CountryCode&&e.CountryCode.length>0?e.CountryCode+":"+e.Ticker:e.Ticker:"Ticker Series"},t.prototype.addToRequest=function(e){var t=new Michelangelo.ServerRequestSeries;return t.parseAndSetTicker(this.getTicker(),this.djid)?(t.Kind="Ticker",t.SeriesId=this.seriesId,t.DataTypes=this.getFieldNames(null),this.tooltipDataPoints&&this.tooltipDataPoints.length>0&&(t.ToolTipDataTypes=this.tooltipDataPoints),e.Series.push(t),t):null},t.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},t.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},t.prototype.canAddExtraTooltips=function(){return!0},t}(Series);Michelangelo.TickerSeries=TickerSeries;var SpreadsheetSeries=function(e){function t(t,n){e.call(this,t,n),t||(this.seriesKind="SpreadsheetSeries",this.addParameter("Name","spreadsheet","Simple series"),this.addParameter("Google","checkbox",!0))}return __extends(t,e),t.prototype.setKey=function(e){this.parameters[0].value=e},t.prototype.getKey=function(){return this.parameters[0].value},t.prototype.addToRequest=function(e){
var t=new Michelangelo.ServerRequestSeries;return this.getKey()&&this.getKey().length>0?(t.Kind="Spreadsheet",t.SeriesId=this.seriesId,t.Key=this.getKey(),t.Dialect=this.parameters[1].value?"Google":"URL",e.Series.push(t),t):null},t.prototype.getGuiTitle=function(){var e=this.getKey(),t="Spreadsheet";return e&&(e.length>30&&(e="..."+e.substring(e.length-27)),t+=": "+e),t},t.prototype.getName=function(e){return e&&e.CommonName&&e.CommonName.length>0?e.CommonName:"Spreadsheet"},t.prototype.getFieldNames=function(e){return[e.DesiredDataPoints[0]]},t}(Series);Michelangelo.SpreadsheetSeries=SpreadsheetSeries;var NewsWiresCorporateSeries=function(e){function t(t,n){e.call(this,t,n),t||(this.seriesKind="NewsWiresCorporateSeries",this.chartType="column",this.addParameter("Ticker","ticker"),this.addParameter("ENF Name","enfName","REV_CUR"))}return __extends(t,e),t.prototype.setTicker=function(e){this.parameters[0].value=e},t.prototype.getTicker=function(){return this.parameters[0].value},t.prototype.getEnfName=function(){return this.parameters[1].value},t.prototype.setEnfName=function(e){this.parameters[1].value=e},t.prototype.addToRequest=function(e){var t=new Michelangelo.ServerRequestSeries;return t.parseAndSetTicker(this.getTicker())?(t.Kind="NewsWiresCorporate",t.SeriesId=this.seriesId,t.DataTypes=[this.getEnfName()],e.Series.push(t),t):null},t.prototype.getGuiTitle=function(){var e=this.getTicker(),t=this.getEnfName(),n="NewsWires Corporate Series";return e&&(n+=": "+e),t&&(n+=", "+t),n},t.prototype.getName=function(e){return e?e.Ticker+", "+e.DesiredDataPoints[0]:"NewsWires Corporate Series"},t.prototype.getFieldNames=function(e){return[e.DesiredDataPoints[0]]},t}(Series);Michelangelo.NewsWiresCorporateSeries=NewsWiresCorporateSeries;var SovereignDebtSeries=function(e){function t(t,n){e.call(this,t,n),t||(this.seriesKind="SovereignDebtSeries",this.chartType="line",this.addParameter("Country Code","countryCode"))}return __extends(t,e),t.prototype.getCountryCode=function(){return this.parameters[0].value},t.prototype.setCountryCode=function(e){this.parameters[0].value=e},t.prototype.getGuiTitle=function(){var e=this.getCountryCode(),t="Sovereign Debt History Series";return e&&(t+=": "+e),t},t.prototype.addToRequest=function(e){var t=new Michelangelo.ServerRequestSeries,n=this.getCountryCode();return n&&n.length>0?(t.Kind="SovereignDebt",t.Key=n,t.SeriesId=this.seriesId,t.DataTypes=this.getFieldNames(null),e.Series.push(t),t):null},t.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},t.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},t.prototype.getName=function(e){return e?e.CommonName&&e.CommonName.length>0?e.CommonName:e.Ticker:"Sov Debt Series"},t.prototype.getAxisTitle=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:this.getCountryCode().toUpperCase()+" Sovereign Debt"},t}(Series);Michelangelo.SovereignDebtSeries=SovereignDebtSeries;var textPhraseSeries=function(e){function t(t,n){e.call(this,t,n),t||(this.seriesKind="TextPhraseSeries",this.chartType="column",this.addParameter("Phrases","phrases"))}return __extends(t,e),t.prototype.getPhrases=function(){return this.parameters[0].value},t.prototype.setPhrases=function(e){this.parameters[0].value=e},t.prototype.getGuiTitle=function(){return"Text Phrase Series"},t.prototype.addToRequest=function(e){var t=new Michelangelo.ServerRequestSeries;return this.getPhrases()&&this.getPhrases().length>0?(t.Kind="TextPhrases",t.SeriesId=this.seriesId,t.Key=this.getPhrases(),e.Series.push(t),t):null},t.prototype.getName=function(e){return e&&e.CommonName&&e.CommonName.length>0?e.CommonName:"Text Phrase(s)"},t.prototype.getFieldNames=function(e){return[e.DesiredDataPoints[0]]},t.prototype.getAxisTitle=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:"Phrase Counts"},t}(Series);Michelangelo.TextPhraseSeries=textPhraseSeries;var newsDensitySeries=function(e){function t(t,n){e.call(this,t,n),t||(this.seriesKind="NewsDensitySeries",this.chartType="column",this.addParameter("Property Name","densityName","MKTW-industry"),this.addParameter("Property Value","densityValue"))}return __extends(t,e),t.prototype.getPropertyName=function(){return this.parameters[0].value},t.prototype.setPropertyName=function(e){this.parameters[0].value=e},t.prototype.getPropertyValue=function(){return this.parameters[1].value},t.prototype.setPropertyValue=function(e){this.parameters[1].value=e},t.prototype.getGuiTitle=function(){return"News Density Series"},t.prototype.addToRequest=function(e){var t=new Michelangelo.ServerRequestSeries;return this.getPropertyName()&&this.getPropertyName().length>0&&this.getPropertyValue()&&this.getPropertyValue().length>0?(t.Kind="NewsDensity",t.SeriesId=this.seriesId,t.Key=this.getPropertyName()+"~"+this.getPropertyValue(),e.Series.push(t),t):null},t.prototype.getName=function(){return this.getPropertyName()},t.prototype.getFieldNames=function(e){return[e.DesiredDataPoints[0]]},t.prototype.getAxisTitle=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:"Density"},t}(Series);Michelangelo.NewsDensitySeries=newsDensitySeries;var ipoByDateSeries=function(e){function t(t,n){e.call(this,t,n),t||(this.seriesKind="IpoByDateSeries",this.chartType="line",this.addParameter("Date","date"))}return __extends(t,e),t.prototype.getDate=function(){return this.parameters[0].value},t.prototype.setDate=function(e){this.parameters[0].value=e},t.prototype.getGuiTitle=function(){var e=this.getDate(),t="IPO Performance";return e&&(t+=": "+e),t},t.prototype.addToRequest=function(e){var t=new Michelangelo.ServerRequestSeries,n=this.getDate();return n?(t.Kind="IpoByDate",t.Key=n,t.SeriesId=this.seriesId,t.DataTypes=this.getFieldNames(null),e.Series.push(t),t):null},t.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},t.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},t.prototype.getName=function(e){return e?e.CommonName&&e.CommonName.length>0?e.CommonName:e.Ticker:"IPO Series"},t.prototype.getAxisTitle=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:this.getDate().toUpperCase()+" IPOs"},t}(Series);Michelangelo.IpoByDateSeries=ipoByDateSeries;var RawDataSeries=function(e){function t(t,n){e.call(this,t,n),t||(this.seriesKind="RawDataSeries",this.DataFormat="Auto",this.addParameter("","rawData"),this.canEditData=!0)}return __extends(t,e),t.prototype.getGuiTitle=function(){var e="Raw Data Series";return e},t.prototype.setData=function(e){this.parameters[0].value=e},t.prototype.getName=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:"Raw Data"},t.prototype.recommendedChartType=function(){return"line"},t.prototype.addToRequest=function(e){var t=new Michelangelo.ServerRequestSeries;return this.parameters[0].value?(t.Kind="Spreadsheet",t.SeriesId=this.seriesId,t.Key=this.getName(),t.Dialect="RawData",t.RawData=this.parameters[0].value,e.Series.push(t),t):null},t}(Series);Michelangelo.RawDataSeries=RawDataSeries;var ChartDefinition=__base(function(e){var t=e(function(e){var n=this;if(this.version=1,this.showNavigator=!1,this.showRangeSelector=!1,this.showExporting=!1,this.showLegend=!1,this.showTooltips=!0,this.title=null,this.subtitle=null,this.firstAxisOnLeft=!1,this.maxVisibleAxesPerPane=3,this.showTimestamp=!1,this.showIndicatorLabels=!1,this.filterNullSlots=!1,this.includeClosedSlots=!1,this.filterClosedPoints=!0,this.includeOfficialClose=!0,this.injectOpen=!1,this.showPreMarket=!1,this.showAfterHours=!1,this.useExtendedTimeFrame=!0,this.includeMockTick=!0,this.wantPriorClose=!1,this.includeCurrentQuotes=!1,this.showYAxisTitle=!0,this.addTimeZoneToXAxisTitle=!0,this.xAxisTitle="Time",this.credit=null,this.showPreMarketBands=!1,this.showAfterHoursBands=!1,this.showClosedBands=!1,this.xAxisCompressed=!1,this.animationSpeed=300,this.animationEasing="linear",this.timeFrame="P6M",this.startDate=null,this.endDate=null,this.step="P1D",this.series=[],!this.makeId){var i=1;this.makeId=function(){return i++}}if(e){$.extend(!0,this,e);var o=$.map(this.series,function(e){var t;switch(e.seriesKind){case"TickerSeries":t=new Michelangelo.TickerSeries(e);break;case"SpreadsheetSeries":t=new Michelangelo.SpreadsheetSeries(e);break;case"TextPhraseSeries":t=new Michelangelo.TextPhraseSeries(e);break;case"RawDataSeries":t=new Michelangelo.RawDataSeries(e);break;case"SovereignDebtSeries":t=new Michelangelo.SovereignDebtSeries(e);break;case"IpoByDateSeries":t=new Michelangelo.IpoByDateSeries(e);break;case"NewsDensitySeries":t=new Michelangelo.NewsDensitySeries(e);break;default:throw"Series kind '"+e.seriesKind+"' is not yet implemented!"}return t});if(e instanceof t)this.series=o;else if(this.series=[],$.each(o,function(e,t){n.addSeries(t)}),this.series.length>0&&this.extensionData&&this.extensionData.annotations&&this.extensionData.annotations.items){var r=this.series[0];$.each(this.extensionData.annotations.items,function(e,t){r.addAnnotation(Annotation.create(t))}),delete this.extensionData}}this.style=this.style||Michelangelo.EmptyStyle.instance()});t.prototype.addSeries=function(e){this.series.push(e.idify(this.makeId))}});Michelangelo.ChartDefinition=ChartDefinition,Michelangelo.ViewModel=function(){Logger.warn("Michelangelo.ViewModel is deprecated. Use Michelangelo.ChartDefinition instead."),Michelangelo.ChartDefinition.call(this),this.load=function(){var e="Michelangelo.ViewModel.load() is deprecated.  Use the presentation manager's load method instead.",t="See https://github.dowjones.net/MarketData/Michelangelo/blob/master/docs/Jquery-Syntax.md#presentationmanagerload",n=e+"\n"+t;throw new Error(n)}};var Repo=__base(function(e){var t=e(function(){});t.prototype.get=function(){mustOverride()},t.prototype.getDefinition=function(){mustOverride()},t.prototype.put=function(){mustOverride()},t.prototype.list=function(){mustOverride()};var n;t.ambient=function(e){return arguments.length?(e?e instanceof t?(n=e,Logger.debug("Michelangelo ambient repo set directly.")):Logger.error("Michelangelo ambient repo was not changed. Value must be a Repo."):n=null,t):n||(n=new CloudRepo)},t.select=function(e){return e instanceof Repo?e:t.ambient()}});Michelangelo.Repo=Repo;var CloudRepo=__inherit(Repo,function(e,t){var n=t(function(e){this.__environment=e});n.prototype.get=function(e){return Ajax.send(function(t){return t.presentationUrl(e)},{type:"GET",dataType:"json",cache:!0},this.__environment).then(function(t){return t?{metadata:t.metadata,definition:new ChartDefinition(t.definition)}:$.Deferred().reject("Chart '"+e+"' not found in "+Environment.select(this.__environment).key()+".")})},n.prototype.getDefinition=function(e){return Ajax.send(function(t){return t.presentationDefinitionUrl(e)},{type:"GET",params:{id:e},dataType:"json",cache:!0},this.__environment).then(function(t){return t?new ChartDefinition(t):$.Deferred().reject("Chart '"+e+"' not found in "+Environment.select(this.__environment).key()+".")})},n.prototype.put=function(e,t){return e?t&&t.definition?t.metadata&&t.metadata.description?Ajax.send("postPresentationUrl",{type:"POST",params:{user:e},data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",cache:!1},this.__environment):$.Deferred().reject("A description is required to save the chart"):$.Deferred().reject("A definition is required to save the chart"):$.Deferred().reject("A user ID is required to save the chart")},n.prototype.list=function(e){return e&&e.userId?Ajax.send(function(t){return t.presentationListUrl(e.userId)},{type:"GET",params:{limit:e.limit||10},cache:!1},this.__environment):$.Deferred().reject("userId must be specified the the list options")}});Michelangelo.CloudRepo=CloudRepo;var Fetcher=__base(function(e){var t=e(function(e,t){this.__environment=e,this.__entitlement=t,this.__cache={},this.__requestCount=0});t.prototype.fetch=function(e,t,n){var i=this.buildRequest(e);if(null===i)return $.Deferred().resolve();n.notify("request.built",i,this);var o=JSON.stringify(i),r=this.__cache[o];return r&&r.expiration&&r.expiration<(new Date).getTime()&&(r=null),r||(r=this.__cache[o]={expiration:null,deferred:$.Deferred()},this.sendRequest(i,t,r,n)),r.deferred.promise()},t.prototype.clearCache=function(){this.__cache={}},t.prototype.buildRequest=function(e){var t=new Michelangelo.ServerRequest;return t.TimeFrame=e.timeFrame,t.Step=e.step,t.IncludeMockTick=e.includeMockTick,t.FilterNullSlots=e.filterNullSlots,t.IncludeClosedSlots=e.includeClosedSlots,t.FilterClosedPoints=e.filterClosedPoints,t.IncludeOfficialClose=e.includeOfficialClose,t.InjectOpen=e.injectOpen,t.ShowPreMarket=e.showPreMarket,t.ShowAfterHours=e.showAfterHours,t.UseExtendedTimeFrame=e.useExtendedTimeFrame,t.WantPriorClose=e.wantPriorClose,t.IncludeCurrentQuotes=e.includeCurrentQuotes,t.EntitlementToken=Entitlement.select(this.__entitlement).token(),e.startDate&&("number"==typeof e.startDate?t.StartDate=e.startDate:t.StartDate=Date.parse(e.startDate),isNaN(t.StartDate))?null:e.endDate&&("number"==typeof e.endDate?t.EndDate=e.endDate:t.EndDate=Date.parse(e.endDate),isNaN(t.EndDate))?null:(this.addSeriesToRequest(t,e.series),0===t.Series.length?null:t)},t.prototype.addSeriesToRequest=function(e,t){var n=this;$.each(t,function(t,i){var o=i.addToRequest(e);n.addIndicatorsToRequestSeries(e,o,i.indicators)})},t.prototype.addIndicatorsToRequestSeries=function(e,t,n){$.each(n,function(e,n){if(n.metaData.serverKind){var i=new Michelangelo.ServerRequestIndicator;i.Kind=n.metaData.serverKind,i.SeriesId=n.seriesId,i.Parameters=[],$.each(n.parameters,function(e,t){if(!t.metaData.clientOnly){var n=t.metaData.name;if(t.metaData.serverName&&(n=t.metaData.serverName),t.metaData.isList){var o=t.value.split(",");$.each(o,function(e,t){i.Parameters.push({Name:n,Value:t})})}else i.Parameters.push({Name:n,Value:t.value})}}),t.Indicators?t.Indicators.push(i):t.Indicators=[i]}})};var n=function(e){var t,n,i,o=0;if(0===e.length)return o;for(t=0,i=e.length;i>t;t++)n=e.charCodeAt(t),o=(o<<5)-o+n,o|=0;return o};t.prototype.sendRequest=function(e,t,i,o){try{var r=this,a=Environment.select(this.__environment);0===this.__requestCount&&o.notify("dataFetch.started",null,this),this.__requestCount++;var s={cache:!0,params:{},headers:{},dataType:"json"},l=JSON.stringify(e),c=l.length>a.maxGetContentLength();c&&a.canUsePost()?(s.type="POST",s.data=l,s.contentType="application/json; charset=utf-8",s.params.hash=n(s.data)):(s.type="GET",s.params.json=l),t&&t.showServerPerf&&(s.params.perf=!0);var h="",u=null;t&&a.canUseCustomHeaders()&&(t.sendAkamaiDebugHeaders&&(s.headers.Pragma="akamai-x-cache-on, akamai-x-cache-remote-on, akamai-x-check-cacheable, akamai-x-get-cache-key, akamai-x-get-extracted-values, akamai-x-get-nonces, akamai-x-get-ssl-client-session-id, akamai-x-get-true-cache-key, akamai-x-serial-no, akamai-x-get-request-id"),t.showInternalRequest&&(h+="Q"),t.showInternalGuts&&(h+="G"),t.showInternalResponse&&(h+="R"),t.showInternalStore&&(h+="S"),t.showServerResponse&&(h+="H"),t.useDebugNow&&(u=t.debugNow)),h.length>0&&(s.headers["X-Mike-Debug"]=h),u&&(s.headers["X-Mike-Now"]=u),Ajax.send("url",s,a,null,1).then(function(e,t,n){var a=e.Debug;e.Debug=null,o.notify("response.received",e,r),r.fireAllHeaderEvents(n,o),r.fireAllDebugEvents(a,o),r.__requestCount--,i.expiration=(new Date).getTime()+6e5,i.serverResponse=e,i.deferred.resolve(e)},function(e){r.fireAllHeaderEvents(null,o),o.notify("error",e,r),r.__requestCount--,i.expiration=new Date(0),i.deferred.reject(new Rejection("Could not fetch data",e.message,e))}).always(function(){0===r.__requestCount&&o.notify("dataFetch.complete",null,r)})}catch(d){return $.Deferred().reject(new Rejection("Data fetch exception",d.message,d))}},t.prototype.fireHeader=function(e,t,n,i,o){var r=null;if(t){var a="";if(i)for(var s=1;;){var l=n+"-"+s,c=t.getResponseHeader(l);if(!c)break;a+=c,s+=1}else a=t.getResponseHeader(n);if(a)try{r=JSON.parse(a)}catch(h){o.notify("error","Malformed (truncated?) JSON data in "+n+" header, length="+a.length+".",this),r=null}}o.notify(e,r,this)},t.prototype.fireAllDebugEvents=function(e,t){e&&(null!==e.InternalRequest&&t.notify("internalRequest.received",e.InternalRequest,this),null!==e.Guts&&t.notify("internalGuts.received",e.Guts,this),null!==e.Store&&t.notify("internalStore.received",e.Store,this),null!==e.InternalResponse&&t.notify("internalResponse.received",e.InternalResponse,this),null!==e.InternalStitched&&t.notify("internalStitched.received",e.InternalStitched,this),null!==e.Stitched&&t.notify("stitched.received",e.Stitched,this))},t.prototype.fireAllHeaderEvents=function(e,t){this.fireHeader("perf.received",e,"X-DJ-Perf",!1,t)};var i;t.ambient=function(e){return arguments.length?(e?e instanceof t?(i=e,Logger.debug("Michelangelo ambient fetcher set directly.")):Logger.error("Michelangelo ambient fetcher was not changed. Value must be a Fetcher."):i=null,t):i||(i=new Fetcher)},t.select=function(e,n,i){return e instanceof t?e:n||i?new Fetcher(n,i):t.ambient()}});Michelangelo.Fetcher=Fetcher,Michelangelo.ambience=function(e,t,n,i){if(1===arguments.length&&$.isPlainObject(e)){var o=e;e=o.environment,t=o.entitlement,n=o.repo,i=o.dataFetcher}e&&Environment.ambient(e),t&&Entitlement.ambient(t),Michelangelo.Repo&&Michelangelo.Repo.ambient(n),Michelangelo.Fetcher&&Michelangelo.Fetcher.ambient(i)};var Symbol=__base(function(e){var t=function(){},n=1,i={},o=e(function(e,t){var o=e.trim();o in i&&(o+="-"+(n++).toString()),this.__key=o,this.__type=t,i[o]=this});o.prototype.type=function(){return this.__type},o.equals=function(e,t){var n=_.isUndefined(t)||_.isNull(t);return _.isUndefined(e)||_.isNull(e)?n:n?!1:e.__key===t.__key},o.hash=function(){return _(arguments).indexBy(function(e){return e[0].__key}).mapValues(function(e){return e[1]}).value()},o.mergeHashes=function(e,n,o){var r={};o=_.extend({a:t,b:t,both:t},o);for(var a=_.keys(e).sort(),s=_.keys(n).sort(),l=0,c=0;l<a.length&&c<s.length;){var h,u=l<a.length?a[l]:void 0,d=c<s.length?s[c]:void 0;u===d?(h=o.both(i[u],e[u],n[u]),l++,c++):_.isUndefined(d)||d>u?(h=o.a(i[u],e[u]),l++):(h=o.b(i[d],e[d]),c++),"undefined"!=typeof h&&(r[u]=h)}return r},o.expandHash=function(e){return _.isArray(e)?e.slice(0):_.map(e,function(e,t){return[i[t],e]})},o.applyInPlace=function(e,t,n){_.each(e,function(e){var i=e[0].__key;if(i in n){for(var o=n[i].split("."),r=o[0],a=t,s=1;s<o.length;s++)r in a||(a[r]={}),a=a[r],r=o[s];a[r]=e[1]}})},o.hasEffect=function(e,t,n){return _.any(e,function(e){var i=e[0].__key;if(i in n){for(var o=n[i].split("."),r=o[0],a=t,s=1;s<o.length;s++){if(!(r in a))return!0;a=a[r],r=o[s]}return a[r]!==e[1]}})},o.collect=function(e,t){return _.reduce(o.expandHash(t),function(t,n){for(var i=n[1].split("."),o=i[0],r=e,a=1;a<i.length;a++){if(!(o in r))return t;r=r[o],o=i[a]}return o in r&&(t[n[0].__key]=r[o]),t},{})}});Michelangelo.Symbol=Symbol;var SymbolType=__base(function(e){var t=function(e,t){return e===t},n={},i=e(function(e,n){this.__name=e,this.__valueEquals=n||t});i.prototype.name=function(){return this.__name},i.prototype.combineValues=function(e,t){return this.__valueEquals(e,t)?e:n},i.multivalue=function(){return n}});Michelangelo.SymbolType=SymbolType;var SymbolTypes={hexColor:new SymbolType("hex-color"),lineThickness:new SymbolType("line-thickness"),lineForm:new SymbolType("line-form"),startLineForm:new SymbolType("start-line-form"),endLineForm:new SymbolType("end-line-form"),text:new SymbolType("text"),fontSize:new SymbolType("font-size"),fontFamily:new SymbolType("font-family"),textAlignment:new SymbolType("text-alignment")};Michelangelo.SymbolTypes=SymbolTypes;var Symbols={generalColor:new Symbol("general-color",SymbolTypes.hexColor),thickness:new Symbol("thickness",SymbolTypes.lineThickness),lineForm:new Symbol("line-form",SymbolTypes.lineForm),startLineForm:new Symbol("start-line-form",SymbolTypes.startLineForm),endLineForm:new Symbol("end-line-form",SymbolTypes.endLineForm),text:new Symbol("text",SymbolTypes.text),fontSize:new Symbol("font-size",SymbolTypes.fontSize),fontFamily:new Symbol("font-family",SymbolTypes.fontFamily),textAlignment:new Symbol("text-alignment",SymbolTypes.textAlignment)};Michelangelo.Symbols=Symbols;var Cloner=__base(function(e){var t=e(function(){});t.clone=function(e){return $.extend(!0,{},e)},t.shallowClone=function(e){return $.extend({},e)}});Michelangelo.Cloner=Cloner;var DrawingHandler=__base(function(e){var t=e(function(){this.__hostElements=[],this.__dirty=!1});t.prototype.context=function(){throw"DrawingHandler subtypes must override context()"},t.prototype._createHostElement=function(e){var t=this.context().getHostElement(e).append("g").classed("annotation",!0).classed("event-target",!0).datum(this);return this.__hostElements.push(t),t},t.prototype._applyToHostElements=function(e){$.each(this.__hostElements,function(t,n){e(n)})},t.prototype.add=function(){this.__dirty=!0},t.prototype.update=function(){this.__dirty=!1},t.prototype.refresh=function(){this.__dirty&&this.update()},t.prototype.remove=function(){this._applyToHostElements(function(e){e.datum(null),e.remove()}),this.__hostElements=[]}});Michelangelo.DrawingHandler=DrawingHandler;var AnnotationHandler=__inherit(DrawingHandler,function(e,t){var n=t(function(t,n){e.call(this),this.__annotation=t,this.__context=n,this.__isCreating=!1,this.__overlays=null});n.dragCreate=function(){throw"AnnotationHandler subtypes must provide dragCreate()"},n.prototype.annotation=function(){return this.__annotation},n.prototype.context=function(){return this.__context},n.prototype.createOnNoDrag=function(){return!1},n.prototype.moveTo=function(){this.__dirty=!0},n.prototype.startDrag=function(){},n.prototype.endDrag=function(e){e||this.publish(),this.__dirty=!0},n.prototype.dirty=function(){this.__dirty=!0},n.prototype.update=function(){var t=this.context().isSelected(this);this._applyToHostElements(function(e){e.classed("selected",t)}),t?this.__overlays||this.__addOverlays():this.__removeOverlays(),this.__overlays&&this._applyToOverlays(function(e){e.update()}),e.prototype.update.call(this)},n.prototype.publish=function(){var e=this.context();this.__isCreating?(this.__isCreating=!1,e.publishAdd(this)):e.publishUpdate(this)},n.prototype.getLocation=function(){return Point.Physical(0,0)},n.prototype._createHostElement=function(t){var n=e.prototype._createHostElement.call(this,t);return n.attr("mask","url(#"+this.context().maskId()+")"),n},n.prototype.remove=function(t){t&&this.context().publishRemove(this),this.__removeOverlays(),e.prototype.remove.call(this)},n.prototype._applyToOverlays=function(e){this.__overlays&&$.each(this.__overlays,function(t,n){e(n)})},n.prototype.__removeOverlays=function(){this._applyToOverlays(function(e){e.remove()}),this.__overlays=null},n.prototype.__addOverlays=function(){this.__overlays=this._createOverlays(),this._applyToOverlays(function(e){e.add()})},n.prototype.startCreateMode=function(e){var t=this;this.__addOverlays();var n=_.find(this.__overlays||[],function(e){return e.tag&&"start"===e.tag()});n&&(this.__isCreating=!0,this.context().trackDrag([n],e,function(){t.__isCreating=!1,t.createOnNoDrag()?t.context().publishAdd(t):(t.context().select([]),t.remove())}))},n.prototype.handleMouseDown=function(e){if(e.button)return!1;e.stopPropagation(),e.stopImmediatePropagation();var t=this,n=this.context();if(e.shiftKey)n.select([this],!0),n.swallowMouseUp();else{var i=null;n.isSelected(this)?n.hasSelection()&&(i=function(){return n.select([t])}):n.select([this]),n.trackDrag(null,Point.Physical(e.chartX,e.chartY),i)}return!1},n.prototype.handleClick=function(e){return e.stopPropagation(),e.stopImmediatePropagation(),!1},n.prototype._map=function(){return{}},n.prototype.applyAttributes=function(e){_.isPlainObject(e)&&(e=Symbol.expandHash(e)),e=_.select(e,function(e){return e[1]!==SymbolType.multivalue()});var t=this._map();Symbol.applyInPlace(e,this.__annotation,t),this.__isCreating||this.context().publishUpdate(this),this.__dirty=!0},n.prototype.accumulateAttributes=function(e){var t=this._map(),n=Symbol.collect(this.__annotation,t);return e?Symbol.mergeHashes(e,n,{both:function(e,t,n){return e.type().combineValues(t,n)}}):n},n.applyLineForm=function(e,t){switch(t){case"dashed":e.attr("stroke-dasharray","6 6");break;case"dotted":e.attr("stroke-dasharray","3 5");break;default:e.attr("stroke-dasharray",null)}},n.neatenPoint=function(e,t){var n=(t||1)%2===0?0:.5;return Point.Physical(Math.round(e.physX+n)-n,Math.round(e.physY+n)-n)},n.neatenValue=function(e,t){var n=(t||1)%2===0?0:.5;return Math.round(e+n)-n}});Michelangelo.AnnotationHandler=AnnotationHandler;var DragHandle=__inherit(DrawingHandler,function(e,t){var n=t(function(t,n,i,o){e.call(this),this.__handler=t,this.__moveAction=n,this.__getLocationFn=i,this.__tag=o,this.__dragging=!1});n.prototype.handler=function(){return this.__handler},n.prototype.tag=function(){return this.__tag},n.prototype.context=function(){return this.__handler.context()},n.prototype.add=function(){var t=this.context();this.__hostElement=this._createHostElement("overlay");var n=this.__hostElement.classed("drag-handle",!0).append("g").attr("transform","translate(0.5 0.5)").attr("filter","url(#"+t.dropShadowId()+")").append("g");n.append("circle").attr("r",7).attr("cx",0).attr("cy",0).attr("fill","#a9f3ff").attr("fill-opacity",.25).attr("stroke","#46869b"),e.prototype.add.call(this)},n.prototype.update=function(){var t=this.getLocation();this.__hostElement.classed("dragging",this.__dragging).select("g").attr("transform","translate("+t.physX+" "+t.physY+")"),e.prototype.update.call(this)},n.prototype.moveTo=function(e){this.__moveAction(e),this.__handler.dirty()},n.prototype.startDrag=function(){this.__dragging=!0,this.__dirty=!0},n.prototype.endDrag=function(e){e||this.__handler.publish(),this.__dragging=!1,this.__dirty=!0},n.prototype.handleMouseDown=function(e){var t=this,n=this.context();return e.shiftKey?n.select([this.__handler],!0):(this.update(),n.getSelectionList().length>1?n.trackDrag(null,Point.Physical(e.chartX,e.chartY),function(){return n.select([t.__handler])}):n.trackDrag([this],Point.Physical(e.chartX,e.chartY))),e.stopImmediatePropagation(),!1},n.prototype.handleClick=function(e){return e.stopPropagation(),!1},n.prototype.getLocation=function(){return this.__getLocationFn()}});Michelangelo.DragHandle=DragHandle;var Tools=__base(function(e){var t={},n=e(function(){}),i={};n.registerHandler=function(e){var n=e.annotationType().type();i[n]=e;var o=e.displayInfo();t[n]={symbol:n,displayName:o.name,precedence:o.precedence,createStartMode:function(t){return new InteractionMode(t,n,function(t){return new InteractionState(t,e.annotationType(),o.instruction)})}}},n.getTools=function(){return Cloner.clone(t)},n.createHandler=function(e,t){var n=i[e.type];return n?new n(e,t):null},n.dragCreateHandler=function(e,t,n){var o=i[e.type()];return o?o.dragCreate(t,n):null}});Michelangelo.Tools=Tools;var AnnotationContext=__base(function(e){var t=__base(function(e){var t=e(function(e){this.__axis=e;var t=e.getExtremes(),n=e.toPixels(t.min),i=e.toPixels(t.max);i>=n?(this.__physMin=n,this.__physMax=i,this.__inverted=!1):(this.__physMin=i,this.__physMax=n,this.__inverted=!0)});t.prototype.toDomain=function(e){return this.__axis.toValue(e)},t.prototype.toPhysical=function(e){return this.__axis.toPixels(e)},t.prototype.toVisible=function(e){return this.__inverted?this.__physMax-e*(this.__physMax-this.__physMin):e*(this.__physMax-this.__physMin)+this.__physMin},t.prototype.isInRange=function(e){return this.__physMax>=e&&this.__physMin<=e},t.prototype.constrain=function(e){return e>this.__physMax?this.__physMax:e<this.__physMin?this.__physMin:e}}),n=e(function(e,n,i,o,r){this.__manager=e,this.__xAxis=new t(n),this.__yAxis=new t(i),this.__maskId=o,this.__parentId=r});n.prototype.toDomainX=function(e){return this.__xAxis.toDomain(e)},n.prototype.toDomainY=function(e){return this.__yAxis.toDomain(e)},n.prototype.toPhysicalX=function(e){return this.__xAxis.toPhysical(e)},n.prototype.toPhysicalY=function(e){return this.__yAxis.toPhysical(e)},n.prototype.toVisibleX=function(e){return this.__xAxis.toVisible(e)},n.prototype.toVisibleY=function(e){return this.__yAxis.toVisible(e)},n.prototype.toDomainPoint=function(e){return Point.Domain(this.__xAxis.toDomain(e.physX),this.__yAxis.toDomain(e.physY))},n.prototype.toPhysicalPoint=function(e){return Point.Physical(this.__xAxis.toPhysical(e.domX),this.__yAxis.toPhysical(e.domY))},n.prototype.toVisiblePoint=function(e){return Point.Physical(this.__xAxis.toVisible(e.domX),this.__yAxis.toVisible(e.domY))},n.prototype.isIn=function(e){return this.__xAxis.isInRange(e.physX)&&this.__yAxis.isInRange(e.physY)},n.prototype.constrain=function(e){return Point.Physical(this.__xAxis.constrain(e.physX),this.__yAxis.constrain(e.physY))},n.prototype.__withEditor=function(e,t){return this.__manager.__editor?e(this.__manager.__editor):t},n.prototype.maskId=function(){return this.__maskId},n.prototype.dropShadowId=function(){return this.__manager.__dropShadowId},n.prototype.getHostElement=function(e){return this.__manager.getLayerElement(e)},n.prototype.idify=function(e){return e.idify(this.__manager.__def.makeId)},n.prototype.select=function(e,t){this.__withEditor(function(n){n.select(e,t)})},n.prototype.isSelected=function(e){return this.__withEditor(function(t){return t.isSelected(e)},!1)},n.prototype.hasSelection=function(){return this.getSelectionList().length>0},n.prototype.getSelection=function(){return this.__withEditor(function(e){return e.getSelection()},{})},n.prototype.getSelectionList=function(){return this.__withEditor(function(e){return e.getSelectionList()},[])},n.prototype.trackDrag=function(e,t,n){return this.__withEditor(function(i){return i.trackDrag(e,t,n)},!1)},n.prototype.addHandler=function(e){var t=Tools.createHandler(e,this);t&&(this.__manager.addHandler(t),t.add())},n.prototype.dragCreate=function(e,t){var n=Tools.dragCreateHandler(e,this,t);n&&(this.idify(n.annotation()),this.__manager.addHandler(n),this.select([n]),n.add(),n.startCreateMode(t))},n.prototype.swallowMouseUp=function(){this.__withEditor(function(e){e.swallowMouseUp()})},n.prototype.publishAdd=function(e){this.__manager.editExecutor().addAnnotation(this.__parentId,e.annotation())},n.prototype.publishUpdate=function(e){this.__manager.editExecutor().updateAnnotation(this.__parentId,e.annotation())},n.prototype.publishRemove=function(e){this.__manager.editExecutor().removeAnnotation(this.__parentId,e.annotation().id)}}),InteractionModeBase=__base(function(e){var t=e(function(e){this.__name=e||"none"});t.prototype.name=function(){return this.__name},t.prototype.instructionText=function(){return null},t.prototype.handleMouseDown=function(){},t.prototype.handleMouseMove=function(){},t.prototype.handleMouseUp=function(){},t.prototype.handleClick=function(){},t.prototype.handleKeyDown=function(){},t.prototype.handleKeyPress=function(){},t.prototype.start=function(){},t.prototype.cancel=function(){}}),InteractionMode=__inherit(InteractionModeBase,function(e,t){var n=t(function(t,n,i){e.call(this,n),this.__context=t,i?"function"===$.type(i)?this.__state=i(this):this.__state=i:this.__state=new InteractionState(this)});n.prototype.context=function(){return this.__context},n.prototype.instructionText=function(){return this.__state.instructionText()},n.prototype.handleClick=function(e){return this.__transition(this.__state.handleClick(e))},n.prototype.handleMouseDown=function(e){return this.__transition(this.__state.handleMouseDown(e))},n.prototype.handleMouseMove=function(e){return this.__transition(this.__state.handleMouseMove(e));
},n.prototype.handleMouseUp=function(e){return this.__transition(this.__state.handleMouseUp(e))},n.prototype.handleKeyPress=function(e){return this.__transition(this.__state.handleKeyPress(e))},n.prototype.handleKeyDown=function(e){return this.__transition(this.__state.handleKeyDown(e))},n.prototype.__transition=function(e){return e?(this.__state=e,!1):!0}}),SelectInteractionMode=__inherit(InteractionModeBase,function(e,t){var n=t(function(t){e.call(this,"select"),this.__editor=t});n.prototype.instructionText=function(){return"Click to select an annotation; Shift+click to select multiple annotations."},n.prototype.__getHandlerForElement=function(e){for(;e&&!(e instanceof SVGSVGElement);){var t=d3.select(e).datum();if(t)return t;e=e.parentElement}return null},n.prototype.handleMouseDown=function(e){var t=this.__getHandlerForElement(e.target);if(t){var n=t.handleMouseDown;if(n)return n.call(t,e)}return e.shiftKey||(this.__editor.select([]),this.__editor.swallowMouseUp()),e.stopPropagation(),e.stopImmediatePropagation(),!1},n.prototype.handleKeyDown=function(e){return 46!==e.keyCode&&8!==e.keyCode||(this.__editor.deleteSelected(),e.stopPropagation(),e.stopImmediatePropagation()),!1}}),InteractionState=__base(function(e){var t=e(function(e,t,n){this.__mode=e,this.__instructionText=n||"",this.__annotationType=t});t.prototype.instructionText=function(){return this.__instructionText},t.prototype.mode=function(){return this.__mode},t.prototype.handleClick=function(){return this},t.prototype.handleMouseDown=function(e){var t=Point.Physical(e.chartX,e.chartY),n=this.__mode.context();return n&&n.dragCreate(this.__annotationType,t),e.stopPropagation(),e.preventDefault(),null},t.prototype.handleMouseMove=function(){return this},t.prototype.handleKeyDown=function(e){return 27===e.keyCode?this.handleEscape():this},t.prototype.handleKeyPress=function(){return this},t.prototype.handleEscape=function(){return null}});Michelangelo.InteractionState=InteractionState;var ChartDefinitionEditExecutor=__base(function(e){var t=e(function(e){this.__def=e;var t={};$.each(e.series,function(e,n){t[n.seriesId]=n,$.each(n.indicators,function(e,n){t[n.seriesId]=n})}),this.__map=t});t.prototype.addAnnotation=function(e,t){var n=Annotation.create(t);return this.__map[e].addAnnotation(n),n.id},t.prototype.removeAnnotation=function(e,t){var n=this.__map[e];$.each(n.annotations,function(e,i){return i.id===t?(n.annotations.splice(e,1),!1):void 0})},t.prototype.updateAnnotation=function(e,t){var n=this.__map[e];$.each(n.annotations,function(e,n){return n.id===t.id?($.extend(!0,n,t),!1):void 0})}});Michelangelo.ChartDefinitionEditExecutor=ChartDefinitionEditExecutor;var DragTracking=function(){function e(e,t){this.offset=e,this.target=t}return e}(),DragTracker=function(){function e(e,t,n,i){this.__engaged=!1,this.__startDelta=3,this.__dragStart=t,this.__endAction=n,this.__noDragAction=i||function(){},this.__tracking=$.map(e,function(e){var n=e.getLocation();return new DragTracking(Point.Physical(t.physX-n.physX,t.physY-n.physY),e)})}return e.prototype.handleMouseUp=function(e){e.stopPropagation(),e.stopImmediatePropagation(),this.__engaged?this.__endAction($.map(this.__tracking,function(e){return e.target})):this.__noDragAction()},e.prototype.handleMouseMove=function(e){this.__engaged||Math.sqrt(Math.pow(e.chartX-this.__dragStart.physX,2)+Math.pow(e.chartY-this.__dragStart.physY,2))>this.__startDelta&&(this.__engaged=!0,$.each(this.__tracking,function(e,t){t.target.startDrag()})),this.__engaged&&$.each(this.__tracking,function(t,n){n.target.moveTo(Point.Physical(e.chartX-n.offset.physX,e.chartY-n.offset.physY))}),e.stopPropagation(),e.stopImmediatePropagation()},e.prototype.cancel=function(){$.each(this.__tracking,function(e,t){t.target.endDrag(!0)})},e}();Michelangelo.DragTracker=DragTracker;var PublicEditor=__base(function(e){var t=e(function(e){this.__realEditor=e});t.prototype.mode=function(e){if(!arguments.length)return this.__realEditor.mode();var t=this;return this.__realEditor.refresh(function(){return t.__realEditor.mode(e)})},t.prototype.modes=function(){return this.__realEditor.modes()},t.prototype.deleteSelected=function(){var e=this;return this.__realEditor.refresh(function(){return e.__realEditor.deleteSelected()})},t.prototype.end=function(){return this.__realEditor.end()},t.prototype.instructionText=function(){return this.__realEditor.instructionText()},t.prototype.select=function(e,t){var n=this;return this.__realEditor.refresh(function(){return n.__realEditor.select(e,t)})},t.prototype.getSelection=function(){return __base.mapValues(this.__realEditor.getSelection(),function(e,t){return t.annotation()})},t.prototype.getSelectionList=function(){return _.map(this.__realEditor.getSelectionList(),function(e){return e.annotation()})},t.prototype.isSelected=function(e){return this.__realEditor.isSelected(e)},t.prototype.getSelectionDescription=function(){return this.__realEditor.getSelectionDescription()},t.prototype.applyToSelection=function(e){var t=this;return this.__realEditor.refresh(function(){return t.__realEditor.applyToSelection(e)})},t.prototype.getSelectionVersion=function(){return this.__realEditor.getSelectionVersion()}}),AnnotationEditor=__base(function(e){var t=e(function(e,t){this.__manager=e,this.__context=t;var n={symbol:"select",displayName:"Select",precedence:0};this.__modes=$.map(Tools.getTools(),function(e){return{symbol:e.symbol,displayName:e.displayName,precedence:e.precedence}}),t?(this.__modes.sort(function(e,t){return e.precedence-t.precedence}),this.__modes=[n].concat(this.__modes)):this.__modes=[n],this.__eventFilter=".annotations-"+e.id(),this.__selection={},this.__selectionList=[],this.__selectionVersion=0,this.__mode=new InteractionModeBase,this.mode(null),this.__publicEditor=new PublicEditor(this)});t.prototype.publicEditor=function(){return this.__publicEditor},t.prototype.context=function(){return this.__context},t.prototype.refresh=function(e){return this.__manager.refresh(e)},t.prototype.mode=function(e){if(!arguments.length)return this.__mode.name();if(this.__mode.cancel(),this.__mode=null,e&&"select"!==e){var t=this.__manager.tools()[e];t&&(this.__mode=t.createStartMode(this.__context))}return this.__mode=this.__mode||new SelectInteractionMode(this),this.__mode.start(),this},t.prototype.modes=function(){return this.__modes},t.prototype.instructionText=function(){return this.__mode.instructionText()},t.prototype.end=function(){var e=this.__manager;e&&(this.unrender(),this.__mode.cancel(),this.__manager=null,e.endEdit())},t.prototype.render=function(e){var t=this.__selection;$.each(t,function(n){n in e?t[n]=e[n]:delete t[n]});var n=this.__manager.svgElement();this._subscribe(n,"mousedown",this.__handleMouseDown,this),this._subscribe(n,"mousemove",this.__handleMouseMove,this),this._subscribe(document,"mousemove",this.__handleMouseMove,this),this._subscribe(document,"mouseup",this.__handleMouseUp,this),this._subscribe(n,"click",this.__handleClick,this),this._subscribe(document,"keydown",this.__handleKeyDown,this),this._subscribe(document,"keypress",this.__handleKeyPress,this),this.__selectionVersion++},t.prototype.unrender=function(){$(this.__manager.containerElement()).off(this.__eventFilter),$(this.__manager.svgElement()).off(this.__eventFilter),$(document).off(this.__eventFilter)},t.prototype._subscribe=function(e,t,n,i){var o=this;$(e).on(t+this.__eventFilter,function(e){return o.__dispatchInContext(i||o,n,e)})},t.prototype._subscribeForHandler=function(e,t){var n=this,i=function(e,i){var o=d3.select(e).datum()||null;if(o){var r=o[t];if(r)return n.__dispatchInContext(o,r,i)}return!0};$(this.__manager.svgElement()).on(e+this.__eventFilter,".event-target",function(e){return i(this,e)})},t.prototype.__dispatchInContext=function(e,t,n){var i=this;return this.__manager.event(function(){if(n&&n.originalEvent){var o=i.__manager.chart().pointer.normalize(n.originalEvent);$.extend(n,{chartX:o.chartX,chartY:o.chartY})}return t.call(e,n)})},t.prototype.trackDrag=function(e,t,n){this.__dragTracker&&(this.__dragTracker.cancel(),this.__dragTracker=null),e||(e=this.getSelection());var i=function(e){$.each(e,function(e,t){t.endDrag(!1)})};this.__dragTracker=new DragTracker(e,t,i,n)},t.prototype.endCreatingItem=function(){this.mode(null)},t.prototype.select=function(e,t){var n=this;t?$.each(e,function(e,t){var i=t.annotation().id;i in n.__selection?delete n.__selection[i]:n.__selection[i]=t,t.dirty()}):($.each(this.__selection,function(e,t){t.dirty()}),this.__selection={},$.each(e,function(e,t){n.__selection[t.annotation().id]=t,t.dirty()})),this.__selectionList=_.map(this.__selection,function(e){return e}),this.__selectionVersion++},t.prototype.getSelection=function(){return $.extend({},this.__selection)},t.prototype.getSelectionList=function(){return $.extend([],this.__selectionList)},t.prototype.isSelected=function(e){return e.annotation().id in this.__selection},t.prototype.getSelectionDescription=function(){return _(this.__selection).reduce(function(e,t){return t.accumulateAttributes(e)},null)},t.prototype.applyToSelection=function(e){_(this.__selection).each(function(t){t.applyAttributes(e)},null),this.__selectionVersion++},t.prototype.getSelectionVersion=function(){return this.__selectionVersion},t.prototype.deleteSelected=function(){var e=this;$.each(this.__selection,function(t,n){e.__manager.removeHandler(n),n.remove(!0)}),this.select([])},t.prototype.swallowMouseUp=function(){this.__swallowMouseUp=!0},t.prototype.__handleClick=function(e){this.__mode.handleClick(e)},t.prototype.__handleMouseUp=function(e){this.__dragTracker?(this.__dragTracker.handleMouseUp(e),this.__dragTracker=null):this.__swallowMouseUp?(e.stopPropagation(),e.stopImmediatePropagation()):this.__transition(this.__mode.handleMouseUp(e)),this.__swallowMouseUp=!1},t.prototype.__handleMouseMove=function(e){this.__dragTracker?this.__dragTracker.handleMouseMove(e):this.__transition(this.__mode.handleMouseMove(e))},t.prototype.__handleKeyDown=function(e){this.__transition(this.__mode.handleKeyDown(e))},t.prototype.__handleMouseDown=function(e){this.__transition(this.__mode.handleMouseDown(e))},t.prototype.__handleKeyPress=function(e){this.__transition(this.__mode.handleKeyPress(e))},t.prototype.__transition=function(e){e&&this.mode(null)}}),AnnotationManager=__base(function(e){var t=3.5,n=3.75,i=2.5,o=e(function(e,t,n){this.__id=e,this.__notifier=t,this.__eventWrapper=n||function(e){return e()},this.__nextSubId=1,this.__dropShadowId=this.__makeId("dropShadow"),this.__handlers={},this.__axisInfo={},this.__parentContexts={},this.__tools=Tools.getTools(),this.__editExecutor=null});o.prototype.__makeId=function(e){return e+"-"+this.__id+"-"+this.__nextSubId++},o.prototype.render=function(e,o,r,a){this.unrender(),this.__chart=e,this.__renderModel=o,this.__def=r,this.__editExecutor=a,this.__container=e.container,this.__$container=$(this.__container),this.__$svg=this.__$container.find("svg"),this.__svg=this.__$svg.get(0),this.__svg_d3=d3.select(this.__svg),this.__defs_d3=this.__svg_d3.select("defs"),this.__style_d3=this.__defs_d3.append("style").attr("type","text/css"),this.__group_d3=d3.select(e.renderer.g().attr("zIndex",t).addClass("annotations").add().element),this.__overlay_d3=d3.select(e.renderer.g().attr("zIndex",n).addClass("annotation-overlays").add().element),this.__background_d3=d3.select(e.renderer.g().attr("zIndex",i).addClass("annotation-background").add().element),this.__defs_d3.append("filter").attr("id",this.__dropShadowId).attr("x","-10%").attr("y","-10%").attr("width","200%").attr("height","200%").call(function(e){e.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","1"),e.append("feOffset").attr("dx","2").attr("dy","2").attr("result","offsetblur"),e.append("feFlood").attr("flood-color","#000").attr("flood-opacity","50%"),e.append("feComposite").attr("in2","offsetblur").attr("operator","in"),e.append("feMerge").call(function(e){e.append("feMergeNode"),e.append("feMergeNode").attr("in","SourceGraphic")})});var s=this;this.__handlers={};var l=s.__chart.xAxis[0];this.__axisInfo={},this.__parentContexts={},$.each(this.__renderModel.panes,function(e,t){$.each(t.axes,function(e,t){var n=t.axisStyle.__mikeId,i=t.getActualAxis(s.__chart),o=s.__makeId("annotationMask"),r=s.__defs_d3.append("mask").attr("id",o).append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","#FFF");s.__axisInfo[n]={axis:i,maskId:o,rect_d3:r},$.each(t.series,function(e,t){var n=new AnnotationContext(s,l,i,o,t.sourceId);s.__parentContexts[t.sourceId]=n,$.each(t.annotations,function(e,t){n.addHandler(t)})})})}),this.__updateMasks(),this.__setStyles(),this.__editor&&this.__editor.render(this.__handlers),this.refresh()},o.prototype.__updateMasks=function(){var e=this.__chart.xAxis[0],t=e.getExtremes();$.each(this.__axisInfo,function(n,i){var o=i.axis,r=o.getExtremes();i.rect_d3.attr("x",e.toPixels(t.min)).attr("y",o.toPixels(r.max)).attr("width",e.toPixels(t.max)-e.toPixels(t.min)).attr("height",o.toPixels(r.min)-o.toPixels(r.max))})},o.prototype.__setStyles=function(){this.__editor?this.__style_d3.text(".highcharts-grid, .highcharts-axis, .highcharts-series-group { pointer-events: none }</style>"):this.__style_d3.text("")},o.prototype.redraw=function(){$.each(this.__handlers,function(e,t){t.update()}),this.__updateMasks()},o.prototype.refresh=function(e){try{e&&e()}finally{$.each(this.__handlers,function(e,t){t.refresh()})}},o.prototype.event=function(e){var t=this;this.refresh(function(){t.__eventWrapper(e)})},o.prototype.unrender=function(){this.__editor&&this.__editor.unrender(),this.__chart=null,this.__axisInfo={},this.__parentContexts={}},o.prototype.canEdit=function(e){if(!e){for(var t in this.__handlers)if(this.__handlers.hasOwnProperty(t))return!0;return!1}return"string"===$.type(e.seriesId)&&this.__parentContexts[e.seriesId]},o.prototype.edit=function(e){if(!this.canEdit(e))return this.__editor;var t=e&&"string"===$.type(e.seriesId)?this.__parentContexts[e.seriesId]||null:null;return this.__editor&&this.__editor.context()===t?this.__editor:(this.__editor&&this.endEdit(!0),this.__setStyles(),this.__editor=new AnnotationEditor(this,t),this.__notifier.notify("edit.started",null,this),this.__editor)},o.prototype.editor=function(){return this.__editor?this.__editor.publicEditor():null},o.prototype.endEdit=function(e){var t=this.__editor;t&&(this.__editor=null,t.end(),e||this.__notifier.notify("edit.ended",null,this),this.__setStyles())},o.prototype.id=function(){return this.__id},o.prototype.chart=function(){return this.__chart},o.prototype.svgElement=function(){return this.__svg},o.prototype.containerElement=function(){return this.__container},o.prototype.tools=function(){return this.__tools},o.prototype.editExecutor=function(){return this.__editExecutor},o.prototype.eventWrapper=function(){return this.__eventWrapper},o.prototype.addHandler=function(e){this.__handlers[e.annotation().id]=e},o.prototype.removeHandler=function(e){delete this.__handlers[e.annotation().id]},o.prototype.getLayerElement=function(e){switch(e){case"background":return this.__background_d3;case"overlay":return this.__overlay_d3;default:return this.__group_d3}}}),Point=__base(function(e){var t=e(function(){});t.Domain=function(e,t){return{domX:e,domY:t}},t.Physical=function(e,t){return{physX:e,physY:t}},t.AddDomain=function(e,t){return Point.Domain(e.domX+t.domX,e.domY+t.domY)},t.AddPhysical=function(e,t){return Point.Physical(e.physX+t.physX,e.physY+t.physY)}});Michelangelo.Point=Point;var Rect=__base(function(e){var t=e(function(){});t.Domain=function(e,t,n,i){return{domTop:Math.min(e,n),domLeft:Math.min(t,i),domBottom:Math.max(e,n),domRight:Math.max(t,i)}},t.Physical=function(e,t,n,i){return{physTop:Math.min(e,n),physLeft:Math.min(t,i),physBottom:Math.max(e,n),physRight:Math.max(t,i)}},t.FromPhysical=function(e,t){return Rect.Physical(e.physY,e.physX,t.physY,t.physX)},t.FromDomain=function(e,t){return Rect.Domain(e.domY,e.domX,t.domY,t.domX)}});Michelangelo.Rect=Rect;var PaletteColorDefinition=__base(function(e){var t=e(function(){});t.prototype.displayName=function(){return this.__displayName},t.prototype.symbol=function(){return this.__symbol},t.prototype.rgbHex=function(){return this.__rgbHex}});Michelangelo.PaletteColorDefinition=PaletteColorDefinition;var LineWidthDefinition=__base(function(e){var t=e(function(){});t.prototype.displayName=function(){return this.__displayName},t.prototype.symbol=function(){return this.__symbol},t.prototype.physicalWidth=function(){return this.__physicalWidth}});Michelangelo.LineWidthDefinition=LineWidthDefinition;var LineFormDefinition=__base(function(e){var t=e(function(){});t.prototype.displayName=function(){return this.__displayName},t.prototype.symbol=function(){return this.__symbol}});Michelangelo.LineFormDefinition=LineFormDefinition;var EllipseAnnotation=__inherit(Annotation,function(e,t){var n=t(function(t){e.call(this,t),_.defaults(this,{center:Point.Domain(0,0),control1:Point.Domain(0,0),control2:Point.Domain(0,0),color:UnknownToolColor,borderThickness:1,borderForm:"solid"})});n.type=function(){return"ellipse"},Annotation._register(n)});Michelangelo.EllipseAnnotation=EllipseAnnotation,__inherit(AnnotationHandler,function(e,t){var n=t(function(t,n){e.call(this,t,n)});n.annotationType=function(){return EllipseAnnotation},n.displayInfo=function(){return{name:"Ellipse",precedence:50,instruction:"Click and drag in the chart to draw a circle or ellipse."}},n.dragCreate=function(e,t){var i=new EllipseAnnotation;return i.center=e.toDomainPoint(t),i.control1=e.toDomainPoint(t),i.control2=e.toDomainPoint(t),new n(i,e)};var i=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"]);n.prototype._map=function(){return i},n.prototype.startDrag=function(){var e=this.annotation();this.__initialDragData={center:_.clone(e.center),control1:_.clone(e.control1),control2:_.clone(e.control2)}},n.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("region",!0).attr("visibility","collapse").append("ellipse").classed("fill",!0).attr("cx",0).attr("cy",0).attr("rx",1e-6).attr("ry",1e-6).attr("fill","none").attr("stroke","none").attr("opacity",.25),this.__hostElement.append("ellipse").classed("outline",!0).attr("cx",0).attr("cy",0).attr("rx",1e-6).attr("ry",1e-6).attr("fill","none").attr("stroke","none"),e.prototype.add.call(this)};var o=function(e,t){var n=e.physX-t.physX,i=e.physY-t.physY;return Math.sqrt(n*n+i*i)},r=function(e,t){return Math.atan2(t.physY-e.physY,t.physX-e.physX)};n.prototype.update=function(){var t=this.context(),n=this.annotation(),i=AnnotationHandler.neatenPoint(t.toPhysicalPoint(n.center),2),a=AnnotationHandler.neatenPoint(t.toPhysicalPoint(n.control1),n.borderThickness||1),s=AnnotationHandler.neatenPoint(t.toPhysicalPoint(n.control2),n.borderThickness||1),l=o(a,i),c=o(s,i),h=180*r(a,i)/Math.PI;this.__hostElement.attr("visibility",null).select(".fill").attr("cx",i.physX).attr("cy",i.physY).attr("rx",l).attr("ry",c).attr("transform","rotate("+h+","+i.physX+","+i.physY+")").attr("fill",n.color||UnknownToolColor);var u=this.__hostElement.select(".outline").attr("cx",i.physX).attr("cy",i.physY).attr("rx",l).attr("ry",c).attr("transform","rotate("+h+","+i.physX+","+i.physY+")").attr("stroke",n.borderThickness<=0?"none":n.color||UnknownToolColor).attr("stroke-width",n.borderThickness);AnnotationHandler.applyLineForm(u,n.borderForm),e.prototype.update.call(this)},n.prototype.__moveControl=function(e,t,n,i,a){i=i||1;var s=this.context(),l=s.toPhysicalPoint(e),c=r(l,t)+Math.PI/2*(i/Math.abs(i)),h=o(l,a?t:s.toPhysicalPoint(n));return{control:s.toDomainPoint(t),otherControl:s.toDomainPoint(Point.Physical(l.physX+Math.cos(c)*h,l.physY+Math.sin(c)*h))}},n.prototype._createOverlays=function(){var e=this,t=this.annotation();return[new DragHandle(this,function(n){var i=e.__moveControl(t.center,n,t.control2,1,e.__isCreating);t.control1=i.control,t.control2=i.otherControl},function(){return e.context().toPhysicalPoint(t.control1)},"start"),new DragHandle(this,function(n){var i=e.__moveControl(t.center,n,t.control1,-1,e.__isCreating);t.control2=i.control,t.control1=i.otherControl},function(){return e.context().toPhysicalPoint(t.control2)})]},n.prototype.moveTo=function(t){var n=this.annotation(),i=this.__initialDragData,o=this.context();n.center=o.toDomainPoint(Point.AddPhysical(t,o.toPhysicalPoint(i.center))),n.control1=o.toDomainPoint(Point.AddPhysical(t,o.toPhysicalPoint(i.control1))),n.control2=o.toDomainPoint(Point.AddPhysical(t,o.toPhysicalPoint(i.control2))),e.prototype.moveTo.call(this,t)},Tools.registerHandler(n)});var LineAnnotation=__inherit(Annotation,function(e,t){var n=t(function(t){e.call(this,t),_.defaults(this,{start:{domX:0,domY:0,form:"none"},end:{domX:0,domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})});n.type=function(){return"line"},Annotation._register(n)});Michelangelo.LineAnnotation=LineAnnotation;var ValueLineAnnotation=__inherit(Annotation,function(e,t){var n=t(function(t){e.call(this,t),_.defaults(this,{domY:0,start:{domX:0,form:"none"},end:{domX:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})});n.type=function(){return"value line"},Annotation._register(n)});Michelangelo.ValueLineAnnotation=ValueLineAnnotation;var TimeLineAnnotation=__inherit(Annotation,function(e,t){var n=t(function(t){e.call(this,t),_.defaults(this,{domX:0,start:{domY:0,form:"none"},end:{domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})});n.type=function(){return"time line"},Annotation._register(n)});Michelangelo.TimeLineAnnotation=TimeLineAnnotation,function(){var e=__base(function(e){e(function(e,t){this.inherited=e,this.hitable=t})}),t=__inherit(AnnotationHandler,function(t,n){var i=n(function(e,n){t.call(this,e,n)});i.prototype.createOnNoDrag=function(){return!!this.constraint()},i.prototype.constraint=function(){return null};var o=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startLineForm,"start.form"],[Symbols.endLineForm,"end.form"]);i.prototype._map=function(){return o},i.prototype.add=function(){this.__hostElement=this._createHostElement("foreground"),this.__hostElement.classed("line",!0).attr("visibility","collapse").append("line").classed("line hit-helper",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("style","stroke-width: 5px; stroke: white").attr("opacity",0),this.__hostElement.append("line").classed("start-extension",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end-extension",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("line visible",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),t.prototype.add.call(this)},i.prototype.update=function(){var e=this.annotation(),n=this.physicalStart(),i=this.physicalEnd(),o=this.__updateLineExt(n,i,e.start.form,e.form,".start-extension"),r=this.__updateLineExt(i,n,e.end.form,e.form,".end-extension"),a=AnnotationHandler.neatenPoint(o.inherited,e.thickness||1),s=AnnotationHandler.neatenPoint(r.inherited,e.thickness||1),l=this.__hostElement.attr("visibility",null).select(".line.visible").attr("x1",a.physX).attr("y1",a.physY).attr("x2",s.physX).attr("y2",s.physY).attr("stroke",e.thickness<=0?"none":e.color||UnknownToolColor).attr("stroke-width",e.thickness||1);AnnotationHandler.applyLineForm(l,e.form),this.__applyArrow(".arrow.end",e.end.form,a,s,e.thickness||1,e.color||UnknownToolColor),this.__applyArrow(".arrow.start",e.start.form,s,a,e.thickness||1,e.color||UnknownToolColor),this.__hostElement.select(".line.hit-helper").attr("x1",o.hitable.physX).attr("y1",o.hitable.physY).attr("x2",r.hitable.physX).attr("y2",r.hitable.physY),t.prototype.update.call(this)},i.prototype.__applyArrow=function(e,t,n,i,o,r){var a=180*Math.atan2(i.physY-n.physY,i.physX-n.physX)/Math.PI,s=this.__hostElement.selectAll(e);"arrow"===t?(s=s.data([1]),s.enter().append("polygon").classed(e.replace(/\./g," "),!0).attr("points","0,0 -8,5, -8, -5"),s.attr("transform","translate("+i.physX+" "+i.physY+") rotate("+a+") ").attr("fill",r).attr("stroke",r).attr("stroke-width",o)):s.remove()},i.prototype.__updateLineExt=function(t,n,i,o,r){var a;if(i&&"none"!==i&&"arrow"!==i){var s,l=this.context(),c=this.annotation(),h=Math.atan2(t.physY-n.physY,n.physX-t.physX);if(t.physY===n.physY)s=Point.Physical(t.physX>=n.physX?l.toVisibleX(1):l.toVisibleX(0),t.physY);else{var u;u=t.physY<n.physY?l.toVisibleY(1):l.toVisibleY(0),s=Point.Physical(t.physX+(t.physY-u)/Math.tan(h),u)}var d=this.__hostElement.selectAll(r).attr("visibility",null).attr("x1",s.physX).attr("y1",s.physY).attr("x2",t.physX).attr("y2",t.physY).attr("stroke",c.color||UnknownToolColor).attr("stroke-width",c.thickness||1);if("inherit"===i&&(i=o),o===i)d.attr("visibility","hidden"),a=new e(s,s);else switch(i){case"dashed":d.attr("stroke-dasharray","6 6"),a=new e(t,s);break;case"dotted":d.attr("stroke-dasharray","3 5"),a=new e(t,s);break;default:d.attr("stroke-dasharray",null),a=new e(t,s)}}else this.__hostElement.selectAll(r).attr("visibility","hidden"),a=new e(t,t);return a},i.prototype._createOverlays=function(){var e=this;return[new DragHandle(this,function(t){e.physicalStart(t)},function(){return e.physicalStart()}),new DragHandle(this,function(t){e.physicalEnd(t)},function(){return e.physicalEnd()},"start")]},i.prototype.moveTo=function(e){var n=this.context();this.physicalStart(Point.AddPhysical(e,n.toPhysicalPoint(this.__initialDragData.start))),this.physicalEnd(Point.AddPhysical(e,n.toPhysicalPoint(this.__initialDragData.end))),t.prototype.moveTo.call(this,e)}}),n=__inherit(t,function(e,t){var i=t(function(t,n){e.call(this,t,n)});i.annotationType=function(){return LineAnnotation},i.displayInfo=function(){return{name:"Line",precedence:10,instruction:"Click and drag in the chart to draw a line."}},i.dragCreate=function(e,t){var i=new LineAnnotation,o=e.toDomainPoint(t);return i.start={domX:o.domX,domY:o.domY,form:"none"},i.end={domX:o.domX,domY:o.domY,form:"none"},new n(i,e)},i.prototype.startDrag=function(){var e=this.annotation();this.__initialDragData={start:_.clone(e.start),end:_.clone(e.end)}},i.prototype.physicalStart=function(e){return arguments.length?(_.assign(this.annotation().start,this.context().toDomainPoint(e)),this):this.context().toPhysicalPoint(this.annotation().start)},i.prototype.physicalEnd=function(e){return arguments.length?(_.assign(this.annotation().end,this.context().toDomainPoint(e)),this):this.context().toPhysicalPoint(this.annotation().end)},Tools.registerHandler(i)}),i=__inherit(t,function(e,t){var n=t(function(t,n){e.call(this,t,n)});n.annotationType=function(){return ValueLineAnnotation},n.displayInfo=function(){return{name:"Value Line",precedence:10.1,instruction:"Click and drag in the chart to draw a value line."}},n.prototype.constraint=function(){return"value"},n.dragCreate=function(e,t){var n=new ValueLineAnnotation;return n.domY=e.toDomainY(t.physY),n.start={domX:e.toDomainX(t.physX),form:"inherit"},n.end={domX:e.toDomainX(t.physX+1),form:"inherit"},new i(n,e)},n.prototype.startDrag=function(){var e=this.annotation();this.__initialDragData={domY:e.domY,start:_.clone(e.start),end:_.clone(e.end)}},n.prototype.physicalStart=function(e){var t=this.context(),n=this.annotation();return arguments.length?(n.start.domX=t.toDomainX(e.physX),n.domY=t.toDomainY(e.physY),this):Point.Physical(t.toPhysicalX(n.start.domX),t.toPhysicalY(n.domY))},n.prototype.physicalEnd=function(e){var t=this.context(),n=this.annotation();return arguments.length?(n.end.domX=t.toDomainX(e.physX),n.domY=t.toDomainY(e.physY),this):Point.Physical(t.toPhysicalX(n.end.domX),t.toPhysicalY(n.domY))},Tools.registerHandler(n)}),o=__inherit(t,function(e,t){var n=t(function(t,n){e.call(this,t,n)});n.annotationType=function(){return TimeLineAnnotation},n.displayInfo=function(){return{name:"Time Line",precedence:10.2,instruction:"Click and drag in the chart to draw a time line."}},n.prototype.constraint=function(){return"time"},n.dragCreate=function(e,t){var n=new TimeLineAnnotation;return n.domX=e.toDomainX(t.physX),n.start={domY:e.toDomainY(t.physY),form:"inherit"},n.end={domY:e.toDomainY(t.physY+1),form:"inherit"},new o(n,e)},n.prototype.startDrag=function(){var e=this.annotation();this.__initialDragData={domX:e.domX,start:_.clone(e.start),end:_.clone(e.end)}},n.prototype.physicalStart=function(e){var t=this.context(),n=this.annotation();return arguments.length?(n.domX=t.toDomainX(e.physX),n.start.domY=t.toDomainY(e.physY),this):Point.Physical(t.toPhysicalX(n.domX),t.toPhysicalY(n.start.domY))},n.prototype.physicalEnd=function(e){var t=this.context(),n=this.annotation();return arguments.length?(n.domX=t.toDomainX(e.physX),n.end.domY=t.toDomainY(e.physY),this):Point.Physical(t.toPhysicalX(n.domX),t.toPhysicalY(n.end.domY))},Tools.registerHandler(n)})}();var RegionAnnotation=__inherit(Annotation,function(e,t){var n=t(function(t){e.call(this,t),_.defaults(this,{from:Point.Domain(0,0),to:Point.Domain(0,0),color:UnknownToolColor,borderThickness:1,borderForm:"solid"})});n.type=function(){return"region"},Annotation._register(n)});Michelangelo.RegionAnnotation=RegionAnnotation,__inherit(AnnotationHandler,function(e,t){var n=t(function(t,n){e.call(this,t,n)});n.annotationType=function(){return RegionAnnotation},n.displayInfo=function(){return{name:"Region",precedence:40,instruction:"Click and drag in the chart to highlight a region."}},n.dragCreate=function(e,t){var i=new RegionAnnotation;return i.from=e.toDomainPoint(t),i.to=e.toDomainPoint(t),new n(i,e)};var i=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"]);n.prototype._map=function(){return i},n.prototype.startDrag=function(){var e=this.annotation();this.__initialDragData={from:_.clone(e.from),to:_.clone(e.to)}},n.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("region",!0).attr("visibility","collapse").append("rect").classed("fill",!0).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("stroke","none").attr("opacity",.25),this.__hostElement.append("rect").classed("outline",!0).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("stroke","none"),e.prototype.add.call(this)},n.prototype.update=function(){var t=this.context(),n=this.annotation(),i=Rect.FromPhysical(AnnotationHandler.neatenPoint(t.toPhysicalPoint(n.from),n.borderThickness||1),AnnotationHandler.neatenPoint(t.toPhysicalPoint(n.to),n.borderThickness||1));this.__hostElement.attr("visibility",null).select(".fill").attr("x",i.physLeft).attr("y",i.physTop).attr("width",i.physRight-i.physLeft).attr("height",i.physBottom-i.physTop).attr("fill",n.color||UnknownToolColor);var o=this.__hostElement.select(".outline").attr("x",i.physLeft).attr("y",i.physTop).attr("width",i.physRight-i.physLeft).attr("height",i.physBottom-i.physTop).attr("stroke",n.borderThickness<=0?"none":n.color||UnknownToolColor).attr("stroke-width",n.borderThickness);AnnotationHandler.applyLineForm(o,n.borderForm),e.prototype.update.call(this)},n.prototype._createOverlays=function(){var e=this.context(),t=this.annotation();return[new DragHandle(this,function(n){t.from.domX=e.toDomainX(n.physX)},function(){return e.toPhysicalPoint(Point.Domain(t.from.domX,(t.from.domY+t.to.domY)/2))}),new DragHandle(this,function(n){t.to.domX=e.toDomainX(n.physX)},function(){return e.toPhysicalPoint(Point.Domain(t.to.domX,(t.from.domY+t.to.domY)/2))}),new DragHandle(this,function(n){t.from.domY=e.toDomainY(n.physY)},function(){return e.toPhysicalPoint(Point.Domain((t.from.domX+t.to.domX)/2,t.from.domY))}),new DragHandle(this,function(n){t.to.domY=e.toDomainY(n.physY)},function(){return e.toPhysicalPoint(Point.Domain((t.from.domX+t.to.domX)/2,t.to.domY));
}),new DragHandle(this,function(n){t.from=e.toDomainPoint(n)},function(){return e.toPhysicalPoint(t.from)}),new DragHandle(this,function(n){t.to=e.toDomainPoint(n)},function(){return e.toPhysicalPoint(t.to)},"start"),new DragHandle(this,function(n){t.to.domX=e.toDomainX(n.physX),t.from.domY=e.toDomainY(n.physY)},function(){return e.toPhysicalPoint(Point.Domain(t.to.domX,t.from.domY))}),new DragHandle(this,function(n){t.from.domX=e.toDomainX(n.physX),t.to.domY=e.toDomainY(n.physY)},function(){return e.toPhysicalPoint(Point.Domain(t.from.domX,t.to.domY))})]},n.prototype.moveTo=function(t){var n=this.context(),i=this.annotation();i.from=n.toDomainPoint(Point.AddPhysical(t,n.toPhysicalPoint(this.__initialDragData.from))),i.to=n.toDomainPoint(Point.AddPhysical(t,n.toPhysicalPoint(this.__initialDragData.to))),e.prototype.moveTo.call(this,t)},Tools.registerHandler(n)});var TextAnnotation=__inherit(Annotation,function(e,t){var n=t(function(t){e.call(this,t),_.defaults(this,{location:location,text:"Text",font:"Arial",fontSize:5,alignment:"left",color:UnknownToolColor})});n.type=function(){return"text"},Annotation._register(n)});Michelangelo.TextAnnotation=TextAnnotation,__inherit(AnnotationHandler,function(e,t){function n(e,t,n,i){return _.map(e.split(t),function(e,t){return{text:e,tag:n+(t%2===0?"":i)}})}var i=t(function(t,n){e.call(this,t,n)});i.annotationType=function(){return TextAnnotation},i.displayInfo=function(){return{name:"Text",precedence:100,instruction:"Click in the chart to add text."}},i.prototype.createOnNoDrag=function(){return!0},i.dragCreate=function(e,t){var n=new TextAnnotation;return n.location=e.toDomainPoint(t),new i(n,e)};var o=Symbol.hash([Symbols.generalColor,"color"],[Symbols.text,"text"],[Symbols.fontFamily,"font"],[Symbols.fontSize,"fontSize"],[Symbols.textAlignment,"alignment"]);i.prototype._map=function(){return o},i.prototype.startDrag=function(){var e=this.annotation();this.__initialDragData={location:_.clone(e.location)}},i.prototype.add=function(){this.__hostElement=this._createHostElement("foreground"),this.__hostElement.classed("text",!0).attr("visibility","collapse"),e.prototype.add.call(this)},i.prototype.update=function(){var t=this,i=this.context(),o=this.annotation(),r=AnnotationHandler.neatenPoint(i.toPhysicalPoint(o.location),2),a="start";switch(o.alignment){case"right":a="end";break;case"center":a="middle"}this.__hostElement.attr("visibility",null).selectAll("text").remove();var s=Math.max(6,Math.abs(i.toVisibleY(1)-i.toVisibleY(0))*(o.fontSize||5)/100);_(o.text.replace(/<\/br>/g,"").split(/<br\/?>/)).map(function(e,i){var l=_(n(e,/<\/?b>/,"","b")).map(function(e){return n(e.text,/<\/?i>/,e.tag,"i")}).flatten().select(function(e){return e.text.length>0}).value(),c=t.__hostElement.append("text").attr("x",r.physX).attr("y",r.physY+s*i).attr("fill",o.color||UnknownToolColor).attr("font-family",o.font||"Arial").attr("font-size",s).attr("text-anchor",a).attr("style","cursor: default");_.each(l,function(e){c.append("tspan").text(e.text.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")).attr("xml:space","preserve").attr("style","font-weight: "+(-1===e.tag.indexOf("b")?"normal":"bold")+"; font-style: "+(-1===e.tag.indexOf("i")?"normal":"italic"))})}),e.prototype.update.call(this)},i.prototype._createOverlays=function(){var e=this.context(),t=this.annotation();return[new DragHandle(this,function(n){t.location=e.toDomainPoint(n)},function(){return e.toPhysicalPoint(t.location)},"start")]},i.prototype.moveTo=function(t){var n=this.context(),i=this.annotation();i.location=n.toDomainPoint(Point.AddPhysical(t,n.toPhysicalPoint(this.__initialDragData.location))),e.prototype.moveTo.call(this,t)},Tools.registerHandler(i)});var TimeRangeAnnotation=__inherit(Annotation,function(e,t){var n=t(function(t){e.call(this,t),_.defaults(this,{startTime:0,endTime:0,color:UnknownToolColor,borderThickness:1,borderForm:"solid"})});n.type=function(){return"time range"},Annotation._register(n)});Michelangelo.TimeRangeAnnotation=TimeRangeAnnotation;var TimeRangeHandler=__inherit(AnnotationHandler,function(e,t){var n=t(function(t,n){e.call(this,t,n)});n.annotationType=function(){return TimeRangeAnnotation},n.displayInfo=function(){return{name:"Time Range",precedence:20,instruction:"Click and drag in the chart to highlight a time range."}},n.dragCreate=function(e,t){var n=new TimeRangeAnnotation;return n.startTime=e.toDomainX(t.physX),n.endTime=e.toDomainX(t.physX),new TimeRangeHandler(n,e)};var i=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"]);n.prototype._map=function(){return i},n.prototype.startDrag=function(){var e=this.annotation();this.__initialDragData={startTime:e.startTime,endTime:e.endTime}},n.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("time-range",!0).attr("visibility","collapse").append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("opacity",.25),this.__hostElement.append("line").classed("start",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),e.prototype.add.call(this)},n.prototype.update=function(){var t=this.context(),n=this.annotation(),i=Rect.Physical(t.toVisibleY(1),AnnotationHandler.neatenValue(t.toPhysicalX(n.startTime),n.borderThickness||1),t.toVisibleY(0),AnnotationHandler.neatenValue(t.toPhysicalX(n.endTime),n.borderThickness||1)),o=this.__hostElement.attr("visibility",null).select("line.start").attr("x1",i.physLeft).attr("y1",i.physTop).attr("x2",i.physLeft).attr("y2",i.physBottom).attr("stroke",n.borderThickness<=0?"none":n.color||UnknownToolColor).attr("stroke-width",n.borderThickness||1);AnnotationHandler.applyLineForm(o,n.borderForm);var r=this.__hostElement.select("line.end").attr("x1",i.physRight).attr("y1",i.physTop).attr("x2",i.physRight).attr("y2",i.physBottom).attr("stroke",n.borderThickness<=0?"none":n.color||UnknownToolColor).attr("stroke-width",n.borderThickness||1);AnnotationHandler.applyLineForm(r,n.borderForm),this.__hostElement.select("rect").attr("x",i.physLeft).attr("y",i.physTop).attr("width",i.physRight-i.physLeft).attr("height",i.physBottom-i.physTop).attr("fill",n.color||UnknownToolColor),e.prototype.update.call(this)},n.prototype._createOverlays=function(){var e=this.context(),t=this.annotation();return[new DragHandle(this,function(n){t.startTime=e.toDomainX(n.physX)},function(){return Point.Physical(e.toPhysicalX(t.startTime),e.toVisibleY(.5))}),new DragHandle(this,function(n){t.endTime=e.toDomainX(n.physX)},function(){return Point.Physical(e.toPhysicalX(t.endTime),e.toVisibleY(.5))},"start")]},n.prototype.moveTo=function(t){var n=this.context(),i=this.annotation();i.startTime=n.toDomainX(t.physX+n.toPhysicalX(this.__initialDragData.startTime)),i.endTime=n.toDomainX(t.physX+n.toPhysicalX(this.__initialDragData.endTime)),e.prototype.moveTo.call(this,t)},Tools.registerHandler(n)}),ValueRangeAnnotation=__inherit(Annotation,function(e,t){var n=t(function(t){e.call(this,t),_.defaults(this,{start:0,end:0,color:UnknownToolColor,borderThickness:1,borderForm:"solid"})});n.type=function(){return"value range"},Annotation._register(n)});Michelangelo.ValueRangeAnnotation=ValueRangeAnnotation;var ValueRangeHandler=__inherit(AnnotationHandler,function(e,t){var n=t(function(t,n){e.call(this,t,n)});n.annotationType=function(){return ValueRangeAnnotation},n.displayInfo=function(){return{name:"Time Range",precedence:20,instruction:"Click and drag in the chart to highlight a value range."}},n.dragCreate=function(e,t){var n=new ValueRangeAnnotation;return n.start=e.toDomainY(t.physY),n.end=e.toDomainY(t.physY),new ValueRangeHandler(n,e)};var i=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"]);n.prototype._map=function(){return i},n.prototype.startDrag=function(){var e=this.annotation();this.__initialDragData={start:e.start,end:e.end}},n.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("time-range",!0).attr("visibility","collapse").append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("opacity",.25),this.__hostElement.append("line").classed("start",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),e.prototype.add.call(this)},n.prototype.update=function(){var t=this.context(),n=this.annotation(),i=Rect.Physical(AnnotationHandler.neatenValue(t.toPhysicalY(n.start),n.borderThickness||1),t.toVisibleX(0),AnnotationHandler.neatenValue(t.toPhysicalY(n.end),n.borderThickness||1),t.toVisibleX(1)),o=this.__hostElement.attr("visibility",null).select("line.start").attr("x1",i.physLeft).attr("y1",i.physTop).attr("x2",i.physRight).attr("y2",i.physTop).attr("stroke",n.borderThickness<=0?"none":n.color||UnknownToolColor).attr("stroke-width",n.borderThickness||1);AnnotationHandler.applyLineForm(o,n.borderForm);var r=this.__hostElement.select("line.end").attr("x1",i.physLeft).attr("y1",i.physBottom).attr("x2",i.physRight).attr("y2",i.physBottom).attr("stroke",n.borderThickness<=0?"none":n.color||UnknownToolColor).attr("stroke-width",n.borderThickness||1);AnnotationHandler.applyLineForm(r,n.borderForm),this.__hostElement.select("rect").attr("x",i.physLeft).attr("y",i.physTop).attr("width",i.physRight-i.physLeft).attr("height",i.physBottom-i.physTop).attr("fill",n.color||UnknownToolColor),e.prototype.update.call(this)},n.prototype._createOverlays=function(){var e=this.context(),t=this.annotation();return[new DragHandle(this,function(n){t.start=e.toDomainY(n.physY)},function(){return Point.Physical(e.toVisibleX(.5),e.toPhysicalY(t.start))}),new DragHandle(this,function(n){t.end=e.toDomainY(n.physY)},function(){return Point.Physical(e.toVisibleX(.5),e.toPhysicalY(t.end))},"start")]},n.prototype.moveTo=function(t){var n=this.context(),i=this.annotation();i.start=n.toDomainY(t.physY+n.toPhysicalY(this.__initialDragData.start)),i.end=n.toDomainY(t.physY+n.toPhysicalY(this.__initialDragData.end)),e.prototype.moveTo.call(this,t)},Tools.registerHandler(n)}),PostProcessor=__base(function(e){var t=e(function(){}),n=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg",e);for(var i in t)i&&n.setAttribute(i,t[i]);return n},i=function(e,t,i){var o=n(e,i);if(t){var r=[];t.fontSize&&r.push("font-size:"+t.fontSize),t.fontFamily&&r.push("font-family:"+t.fontFamily),t.color&&r.push("fill:"+t.color),r.length&&o.setAttribute("style",r.join(";"))}return o},o=function(e,t){return e&&e.mikeStyle&&e.mikeStyle[t]?e.mikeStyle[t]:{}},r=function(e,t,n){var r=o(n,"timestamp"),a="%m/%d/%y %l:%M %P";r.dateFormat&&(a=r.dateFormat);var s=Highcharts.dateFormat(a,new Date),l=i("text",r.style,{x:t.renderWidth()-2,y:t.renderHeight()-2,"z-index":1,"text-anchor":"end"});l.appendChild(document.createTextNode(s)),e.append(l)},a=function(e,t){var n=[],i=null;return $.each(t.axes,function(e,t){t.labels.length>0?n.push(t.labels.slice(0)):t.title&&!i&&(i=t.title)}),0===n.length&&i&&n.push(i),n.join(", ")},s=function(e,t,r,s){var l=o(s,"indicatorLabels"),c=r.xAxis[0],h=c.toPixels(c.getExtremes().min);$.each(t.panes,function(t,o){var s=o.axes[0].getActualAxis(r),c=s.toPixels(s.getExtremes().max),u=a(t+1,o);if(u){var d=i("text",l.style,{x:h,y:c,"z-index":1}),p=n("tspan",{dy:"1em"});d.appendChild(p),p.appendChild(document.createTextNode(u)),e.append(d)}})},l=function(e,t){var i=o(t,"injectCss");if(i&&i.length>0){var r=e.find("defs");if(r.length>0){var a=n("style",{type:"text/css"}),s=i.join(" ");a.appendChild(document.createTextNode(s)),r.append(a)}}};t.exec=function(e,t,n){var i=$(n.container).find("svg"),o=e.def(),a=t.style;o.showTimestamp&&r(i,e,a),o.showIndicatorLabels&&s(i,t,n,a),l(i,a);var c={svg:i,quotes:t.quotes,chart:n};e.notify("svg.ready",c)}});Michelangelo.PostProcessor=PostProcessor;var RenderContext=__base(function(e){var t=e(function(e,t,n,i,o,r){this.__host=e,this.__def=t,this.__renderSize=n,this.__notifier=i||Michelangelo.Notifier.Null(),this.__immediate=!!o,this.__editExecutor=r});t.prototype.host=function(){return this.__host},t.prototype.def=function(){return this.__def},t.prototype.renderWidth=function(){return this.__renderSize.width},t.prototype.renderHeight=function(){return this.__renderSize.height},t.prototype.notify=function(e,t){this.__notifier.notify(e,t)},t.prototype.notifier=function(){return this.__notifier},t.prototype.immediate=function(){return this.__immediate},t.prototype.editExecutor=function(){return this.__editExecutor}});Michelangelo.RenderContext=RenderContext;var Renderer=__base(function(e){var t=e(function(){});t.prototype.measure=function(){mustOverride()},t.prototype.render=function(){mustOverride()},t.prototype.unrender=function(){mustOverride()},t.prototype.edit=function(){return null},t.prototype.editor=function(){return null},t.prototype.canEdit=function(){return!1}}),HighstockRenderer=__inherit(Renderer,function(e,t){var n=t(function(t,n,i,o){e.call(this),this.__lastDataGrouping=null,this.__notifier=n,this.__chart=null,this.__annotationManager=o?{render:function(){},redraw:function(){},unrender:function(){},edit:function(){},canEdit:function(){return!1},editor:function(){return null}}:new AnnotationManager(t,n,i)});n.prototype.edit=function(e){this.__annotationManager.edit(e)},n.prototype.editor=function(){return this.__annotationManager.editor()},n.prototype.canEdit=function(e){return this.__annotationManager.canEdit(e)},n.prototype.__isEditing=function(){return!!this.__annotationManager.editor()},n.prototype.measure=function(e,t){this.__renderModel=null;var n=e.def();try{var i={width:e.renderWidth(),height:e.renderHeight()};if(!t)return"auto"===i.height&&(i.height=300),i;var o=this.__assimilateStyle(n);this.__renderModel=new Michelangelo.RenderModel(t,n,o,i),e.notify("renderModel.built",this.__renderModel,this)}catch(r){throw e.notify("presentation.error",r,this),r}return this.__renderModel.size},n.prototype.render=function(e,t){var n=this,i=e.def();try{if(this.unrender(e.notifier()),!this.__renderModel)return this.__renderEmptyChart(i,e),$.Deferred().reject();var o=[],r=new Michelangelo.ToolTipRepository(this.__renderModel.tzData,t.TimeInfo),a=this.__buildChartConfig(i,e,t,this.__renderModel,r,o);return this.__renderModel.style.highchartsStyles&&$.extend(!0,a,this.__renderModel.style.highchartsStyles),e.notify("chartConfig.built",a,this),e.notify("tooltip.info",r,this),a.chart.events={redraw:function(){n.__annotationManager.redraw(),e.notify("chart.redrawn",null,this)}},new Highcharts.StockChart(a,function(t){try{n.__chart=t,n.__annotationManager.render(t,n.__renderModel,i,e.editExecutor()),n.__detectDataGroupingChanges(e,t),PostProcessor.exec(e,n.__renderModel,t)}catch(o){Michelangelo.Logger.log("Unhandled error in Michelangelo HighStock render callback:"),Michelangelo.Logger.log(o)}}),e.notify("bluegrass.subscribe",o,this),$.Deferred().resolve()}catch(s){return e.notify("presentation.error",s,this),$.Deferred().reject(s)}},n.prototype.unrender=function(e){if(this.__annotationManager.unrender(),this.__renderModel&&e.notify("bluegrass.unsubscribe",null,this),this.__chart){var t=this.__chart;this.__chart=null,t.destroy()}this.__annotationHandlers=[]},n.prototype.privateDataOmgMakeThisGoAway=function(){return{chart:this.__chart}},n.prototype.__fontHack=function(){Michelangelo.Logger.debug("FONT HACK:");var e=$(this.__chart.container).find("svg");if(0===e.length)return void Michelangelo.Logger.debug("...no SVG...");var t=e.find("defs").first();0===t.length&&Michelangelo.Logger.debug("...no defs..."),t.append('<style type="text/css"><![CDATA[ @import url(http://fonts.googleapis.com/css?family=Walter+Turncoat); ]]></style>'),Michelangelo.Logger.debug("...font HACKED!")},n.prototype.__assimilateStyle=function(e){var t={};return $.extend(!0,t,Michelangelo.DefaultStyle.instance()),e.style&&$.extend(!0,t,e.style),t.highchartsYAxisStyle={},t.highchartsStyles.yAxis&&(t.highchartsYAxisStyle=t.highchartsStyles.yAxis,t.highchartsStyles.yAxis=void 0),t},n.prototype.__renderEmptyChart=function(e,t){var n=this.__buildSkeletonChartConfig(e,t);t.notify("chartConfig.built",n,this),this.__chart=new Highcharts.StockChart(n),this.__chart.showLoading("No data to display")},n.prototype.__buildChartConfig=function(e,t,n,i,o,r){var a=this,s=this.__buildSkeletonChartConfig(e,t);return n?(i.title&&i.title.length>0&&(s.title={text:e.title}),i.subtitle&&i.subtitle.length>0&&(s.subtitle={text:e.subtitle}),s.legend.enabled=i.layoutContext.showLegend,s.credits.enabled=i.layoutContext.showCredits,n.TimeInfo&&n.TimeInfo.IsIntraday&&(s.rangeSelector.buttons=[{type:"minute",count:30,text:"30m"},{type:"hour",count:1,text:"1h"},{type:"hour",count:2,text:"2h"},{type:"hour",count:4,text:"4h"},{type:"day",count:1,text:"1d"},{type:"all",text:"All"}]),i.xAxis.showTitle&&(s.xAxis.title={text:i.xAxis.title}),s.xAxis.ordinal=i.xAxis.compressed,$.extend(!0,s.xAxis,{labels:{enabled:i.xAxis.showLabels}}),i.xAxis.min&&i.xAxis.max&&(s.xAxis.min=i.xAxis.min,s.xAxis.max=i.xAxis.max,s.xAxis.startOnTick=!1,s.xAxis.endOnTick=!1),s.xAxis.plotBands=[],$.each(i.xAxis.plotBands,function(e,t){var n={from:t.from,to:t.to,color:t.color,label:{text:t.name}};t.labelStyle&&$.extend(!0,n.label,t.labelStyle),s.xAxis.plotBands.push(n)}),s.xAxis.plotLines=[],$.each(i.xAxis.plotLines,function(e,t){s.xAxis.plotLines.push(t)}),i.isCompare&&(s.plotOptions.series.compare="percent"),$.each(i.panes,function(l,c){$.each(c.axes,function(l,c){var h={opposite:!c.onLeft,title:{text:c.title},labels:{enabled:c.showLabels},plotLines:[],top:c.top,height:c.height,offset:c.offset,type:c.type};h.labels.formatter=function(){var e;if(this.axis.tickInterval>=1e4&&!c.labelUnitSymbol){var t=1,n="";this.axis.tickInterval>=1e10?(t=1e9,n="b"):this.axis.tickInterval>=1e7?(t=1e6,n="m"):this.axis.tickInterval>=1e4&&(t=1e3,n="k"),e=Highcharts.numberFormat(this.value/t,0)+n}else{var i=this.axis.tickInterval+"",o=0;i.indexOf(".")>=0&&(o=i.length-i.indexOf(".")-1),c.maxLabelDecimals&&o>c.maxLabelDecimals&&(o=c.maxLabelDecimals),e=Highcharts.numberFormat(this.value,o);var r=!1;"boolean"==typeof c.addYAxisUnits?r=c.addYAxisUnits:"string"==typeof c.addYAxisUnits&&("all"===c.addYAxisUnits?r=!0:"none"===c.addYAxisUnits?r=!1:"first"===c.addYAxisUnits?r=this.isFirst:"last"===c.addYAxisUnits&&(r=this.isLast)),c.labelUnitSymbol||(r=!1),r&&(c.labelSuffix?e+=c.labelUnitSymbol:e=c.labelUnitSymbol+e)}return e},e.style.mikeStyle&&e.style.mikeStyle.yAxisLabelsOutside&&(c.onLeft?(h.labels.align="right",h.labels.x=-4):(h.labels.align="left",h.labels.x=4)),$.extend(!0,h,c.axisStyle);var u=s.yAxis.length;s.yAxis.push(h),$.each(c.series,function(l,c){var h=Michelangelo.ServerResponseHelpers.findSeriesByResponseId(n,c.responseId);if(h){var d={id:c.id,type:c.chartType,name:c.seriesName,yAxis:u,data:null,tooltip:{valueDecimals:3},sourceId:c.sourceId},p=e.includeMockTick||n.TimeInfo.IsIntraday;if(p&&h.BlueGrassChannels&&h.BlueGrassChannels.length>0){var m=new Michelangelo.BlueGrassUpdater(e,i,c,n,t.notifier(),function(){return a.__chart});$.each(h.BlueGrassChannels,function(e,t){r.push({channel:t.ChannelName,callback:function(e){m.messageHandler(m,e)}})})}c.seriesOptions&&$.extend(!0,d,c.seriesOptions);var f=new Michelangelo.DataPointBuilder(h,n.TimeInfo,i.tzData,o,c.id);d.data=f.build(c.fieldNames);var y={ticker:h.Ticker,countryCode:h.CountryCode,commonName:h.CommonName,instrumentType:h.InstrumentType,dataPoints:c.fieldNames,isIndicator:c.isIndicator,extraData:{}};h.ExtraData&&$.each(h.ExtraData,function(e,t){"PriorClose"===t.Name&&(y.extraData.priorClose=t.Value)}),o.setCustomData(c.id,c.customToolTipData),o.setSeriesData(c.id,y),h.FormatHints&&$.each(c.fieldNames,function(e,t){o.setFormatHints(c.id,t,{decimals:h.FormatHints.DecimalPlaces,suffix:h.FormatHints.Suffix,unitSymbol:h.FormatHints.UnitSymbol})}),h.ToolTipDataPoints&&$.each(h.ToolTipDataPoints,function(e,t){"PercentChange"===t&&o.setFormatHints(c.id,t,{decimals:3,suffix:!0,unitSymbol:"%"})}),h.ExtraToolTips&&$.each(h.ExtraToolTips,function(e,t){o.addPoint(t.DateUtc,c.id,t.Name,t.Value)});var _="line"===c.chartType||"area"===c.chartType||"spline"===c.chartType;if(_&&1===d.data.length&&h.ExtraData&&n.TimeInfo.IsIntraday){var g=h.ExtraData.filter(function(e){return"MostRecentOpen"===e.Name})[0],v=h.ExtraData.filter(function(e){return"MostRecentLast"===e.Name})[0];g&&v&&g.Date&&v.Date&&g.Value&&v.Value&&(d.data=[[i.tzData.utcToLocal(g.Date),g.Value],[i.tzData.utcToLocal(v.Date),v.Value]])}s.series.push(d)}}),$.each(c.events,function(e,t){var i=Michelangelo.ServerResponseHelpers.findEventByResponseId(n,t.responseId);if(i){var r={id:t.id,type:t.chartType,name:t.seriesName,yAxis:u,data:[],tooltip:{valueDecimals:3}},a={ticker:i.Ticker,countryCode:i.CountryCode,dataPoints:["Value"],isEvent:!0};o.setSeriesData(t.id,a),$.each(i.DataPoints,function(e,n){if(n.Value){var i=null;t.eventStyle&&(i=t.eventStyle.unchangedImageUrl,n.Change&&(n.Change>0?i=t.eventStyle.upImageUrl:n.Change<0&&(i=t.eventStyle.downImageUrl)));var o={x:n.EventDate,y:n.Value};i&&(o.marker={symbol:"url("+i+")"}),r.data.push(o)}}),s.series.push(r)}}),c.plotLines&&n&&n.TimeInfo&&!i.isCompare&&a.__addPlotLines(n,s,i,c,h,u)})}),i.applyHighStockCandleHack&&a.__addNullSeries(s,i.tzData,n.TimeInfo),s):s},n.prototype.__addNullSeries=function(e,t,n){if(n&&n.Ticks){for(var i={id:"$$candle-hack",type:"line",name:"$$candle-hack",yAxis:0,data:[],showInLegend:!1},o=0;o<n.Ticks.length;o++){var r=+n.Ticks[o];r=t.utcToLocal(r),i.data.push([r,null])}e.series.push(i)}},n.prototype.__addPlotLines=function(e,t,n,i,o,r){if(e&&e.TimeInfo&&e.TimeInfo.Ticks){var a=[],s=Math.floor(e.TimeInfo.Ticks.length/2),l=n.tzData.utcToLocal(e.TimeInfo.Ticks[s]);if($.each(i.plotLines,function(e,t){var n=t.value;o.plotLines.push(t),a.push([l,n])}),a.length>0){var c={id:"pl-"+r,type:"scatter",yAxis:r,data:a,marker:{enabled:!1},showInLegend:!1};t.series.push(c)}}},n.prototype.__buildSkeletonChartConfig=function(e,t){var n,i=+e.animationSpeed;n=0===i?!1:{duration:i,easing:e.animationEasing};var o={},r={chart:{renderTo:t.host()},credits:{enabled:!1,text:e.credit},exporting:{enabled:e.showExporting},legend:{enabled:!1},loading:{labelStyle:{color:"white"},style:{backgroundColor:"gray"}},navigator:{enabled:e.showNavigator},plotOptions:{series:{compare:void 0,animation:t.immediate()?!1:n,enableMouseTracking:e.showTooltips&&!this.__isEditing()}},rangeSelector:{enabled:e.showRangeSelector,buttons:void 0},scrollbar:{enabled:!1},subtitle:void 0,title:void 0,tooltip:{enabled:e.showTooltips&&!this.__isEditing(),crosshairs:[!0,!0]},xAxis:o,yAxis:[],series:[]};return r},n.prototype.__detectDataGroupingChanges=function(e,t){var n=_.map(e.def().series,function(e){return e.seriesId}),i=_(t.series).filter(function(e){return 0===e.options.id.indexOf("rs-")&&_.contains(n,e.options.sourceId)}).map(function(e){return _.assign({seriesId:e.options.sourceId,dataGrouping:_.isObject(e.currentDataGrouping)?_.pick(e.currentDataGrouping,["unitName","unitRange"]):null})}).valueOf(),o={hasAnyDataGrouping:_.some(i,function(e){return _.isObject(e.dataGrouping)}),series:i},r=!_.isEqual(this.__lastDataGrouping,o);r&&e.notify("chart.dataGroupingChanged",o,this),this.__lastDataGrouping=o}});Michelangelo.HighstockRenderer=HighstockRenderer;var BlueGrassChannelEntry=__base(function(e){var t=e(function(e){this.channelName=e,this.handlers={};var t=this;this.callback=function(e){$.each(t.handlers,function(t,n){n.callback(e)})}});t.prototype.addHandler=function(e,t){return e in this.handlers?void Logger.debug("Duplicate call to addHandler, channel='"+this.channelName+"', id='"+e+"'"):void(this.handlers[e]=t)},t.prototype.removeHandler=function(e){delete this.handlers[e]},t.prototype.hasHandlers=function(){for(var e in this.handlers)if(this.handlers.hasOwnProperty(e))return!0;return!1},t.prototype.subscribe=function(e){var t=e.getConnection();t&&(t.subscribe(this.channelName,this.callback),Logger.debug("...BG subscribed to channel '"+this.channelName+"'..."))},t.prototype.unsubscribe=function(e){var t=e.getConnection();t&&(t.unsubscribe(this.channelName,this.callback),Logger.debug("...BG unsubscribed from channel '"+this.channelName+"'..."))}});Michelangelo.BlueGrassChannelEntry=BlueGrassChannelEntry;var BlueGrassClient=__base(function(e){var t=e(function(e){this.bgRunTime=e,this.channels={},this.connected=!1,this.connectTimer=null,this.connectAttempts=0;var t=this;t.connectTimer=setInterval(function(){Logger.debug("...BG event timer..."),t.connectAttempts+=1;var e=t.bgRunTime.getConnection();e?(t.onConnectionEventEx(e,"init"),e.addCallback(function(e,n){t.onConnectionEventEx(e,n)}),clearInterval(t.connectTimer),t.connectTimer=null):t.connectAttempts>30&&clearInterval(t.connectTimer)},500)});t.prototype.onConnectionEvent=function(){},t.prototype.onConnectionEventEx=function(e,t){Logger.debug("...onConnectionEventEx, event='"+t+"'..."),this.connected=!0;var n=this;$.each(this.channels,function(e,t){t.subscribe(n.bgRunTime)})},t.prototype.unsubscribe=function(e){var t=this;$.each(t.channels,function(n,i){i.removeHandler(e),i.hasHandlers()||(t.connected&&i.unsubscribe(t.bgRunTime),delete t.channels[n])})},t.prototype.subscribe=function(e,t){var n=this;$.each(t,function(t,i){var o=n.channels[i.channel];o?o.addHandler(e,i):(o=new Michelangelo.BlueGrassChannelEntry(i.channel),n.channels[i.channel]=o,o.addHandler(e,i),n.connected&&o.subscribe(n.bgRunTime))})}});Michelangelo.BlueGrassClient=BlueGrassClient;var BlueGrassUpdater=__base(function(e){var t=e(function(e,t,n,i,o,r){return this.model=e,this.seriesId=n.id,this.enabled=!0,this.warned=!1,this.__notifier=o,this.__chartAccessor=r,this.tzData=t.tzData,this.lastTick=i.TimeInfo.LastTick,this.step=i.TimeInfo.Step,this.mockTickPointFactory=function(e,t){return{x:this.lastTick,y:t.l}},this.idayPointFactory=function(e,t,n){var i=n-e.lastTick;if(0>i)return null;var o=Math.round(i/e.step),r=this.tzData.utcToLocal(e.lastTick+o*e.step);return{x:r,y:t.l}},"ohlc"===n.chartType||"candlestick"===n.chartType?(Logger.debug("BGUpdater: Chart type '"+n.chartType+"' is not yet handled."),void(this.enabled=!1)):1===n.fieldNames.length&&"Last"!==n.fieldNames[0]?(Logger.debug("BGUpdater: only charts for 'Last' data point can be updated."),void(this.enabled=!1)):i.TimeInfo.IsIntraday?(this.enabled=!0,this.handler=new BlueGrassIdayLineHandler(i.TimeInfo,t.tzData),void(this.factory=this.idayPointFactory)):i.TimeInfo.IsIntraday||e.includeMockTick?!i.TimeInfo.IsIntraday&&e.includeMockTick?(this.enabled=!0,this.factory=this.mockTickPointFactory,void(this.handler=new BlueGrassEodMockTickHandler)):void Logger.debug("BGUpdater: unknown case."):(Logger.debug("BGUpdater: EOD charts w/o mock tick are not yet implemented."),void(this.enabled=!1))});t.prototype.messageHandler=function(e,t){if(e.enabled&&e.handler){var i=t.b;if(i&&i.z&&0!==i.z.length){var o=n(i.z);if(!(e.lastQuoteDate&&o<=e.lastQuoteDate)){e.lastQuoteDate=o;var r=e.__chartAccessor();if(!r)return void(e.warned||(Logger.debug("BGUpdater: Chart was not found."),e.warned=!0));var a=r.get(e.seriesId);if(!a)return void(e.warned||(Logger.debug("BGUpdater: Series '"+e.seriesId+"' not found."),e.warned=!0));var s=e.factory(e,i,o);s&&(e.__notifier.notify("bg.tick",{x:s.x,y:s.y},e),e.handler.handleQuote(e.handler,a,i,o))}}}};var n=function(e){var t=parseInt(e);return isNaN(t)&&(e=e.indexOf("-")>=0||e.indexOf("+")>=0?e.substring(6,e.length-7):e.substring(6,e.length-2),t=parseInt(e)),t}});Michelangelo.BlueGrassUpdater=BlueGrassUpdater;var BlueGrassEodMockTickHandler=__base(function(e){var t=e(function(){});t.prototype.handleQuote=function(e,t,n){var i=t.data[t.data.length-1],o=n.l;i.update(o)}}),BlueGrassIdayLineHandler=__base(function(e){var t=e(function(e,t){this.tzData=t,this.lastTick=e.LastTick,this.step=e.Step});t.prototype.handleQuote=function(e,t,n,i){var o=i-e.lastTick;if(!(0>o)){var r=Math.round(o/e.step),a=this.tzData.utcToLocal(e.lastTick+r*e.step),s=n.l;if(t.data.length>0){var l=t.data[t.data.length-1];if(l.x===a)return void l.update(s)}else if(t.xData.length>0){var c=t.xData[t.xData.length-1];if(c===a)return}var h=[a,s];t.addPoint(h,!0,!1,!0)}}}),PresentationManager=__base(function(e){var t=__base(function(e){var t=1,n=function(e,t){if($.isNumeric(e)){if(e>0)return e}else switch(e){case"host":return Michelangelo.Logger.warn("'host' size is deprecated; use 'fill' instead."),"fill";case"fill":case"auto":return e}return t},i=function(e,t){return"auto"===e?"auto":"fill"===e?t:e},o=function(e,t){return{width:i(e.width,t.width),height:i(e.height,t.height)}},r=e(function(e,n,i){var o=this;this.__version=0,this.__hostElement=e,this.__id="michelangelo-presentation-"+t++,this.__config=$.extend(!0,{entitlement:null,environment:null,dataFetcher:null,bluegrassClient:null,eventWrapper:null,promiseWrapper:null},n||{}),this.__def=null,this.__template=null,this.__style=null,this.__tooltipFormatter=null,this.__renderSize={},this.__measuredSize={},this.__hostWatchId=null,this.__decorator=i,this.__eventManager=new DirectEventManager(this.__config.eventWrapper),this.__notifier=this.__eventManager.createNotifier(i),this.__dataFetcher=Fetcher.select(this.__config.dataFetcher,this.__config.environment,this.__config.entitlement),this.__promiseWrapper=this.__config.promiseWrapper||function(e){return e},this.__renderer=new HighstockRenderer(this.__id,this.__notifier,this.__config.eventWrapper),this.size({width:"fill",height:"auto"}),this.__config.bluegrassClient&&(this.__eventManager.on("bluegrass.subscribe",function(e){o.__config.bluegrassClient.subscribe(o.__id,e)}),this.__eventManager.on("bluegrass.unsubscribe",function(){o.__config.bluegrassClient.unsubscribe(o.__id)})),this.__eventManager.on("edit.started",function(){o.render(!0)}),this.__eventManager.on("edit.ended",function(){o.render(!0)}),this.__eventManager.on("tooltip.info",function(e){o.__tooltipFormatter&&o.__tooltipFormatter.tooltipRepo&&o.__tooltipFormatter.tooltipRepo(e)})});r.prototype.id=function(){return this.__id},r.prototype.hostElement=function(){return this.__hostElement},r.prototype.version=function(){return this.__version},r.prototype.remove=function(){null!==this.__hostWatchId&&clearInterval(this.__hostWatchId),this.__renderer.unrender(this.__notifier),$(this.__hostElement).html(""),delete this.__hostElement.__michelangeloPresentationManager__,this.__fire("presentationManager.removed")},r.prototype.size=function(e){var t=this.__renderSize;if(0===arguments.length)return $.extend({},t);if(!$.isPlainObject(e))return Logger.error("Could not set presentation render size from '"+e+"'"),this;var i={width:n(e.width,t.width),height:n(e.height,t.height)};return i.width===t.width&&i.height===t.height||(this.__renderSize=i,this.__renderedParentSize=null,this.__version++,this.__manageHostWatch()),this},r.prototype.load=function(e){var t=this;return Repo.select(t.__config.repo).getDefinition(e).then(function(e){return t.def(e),t.__decorator})},r.prototype.render=function(e){if(!this.__def)return this.__promiseWrapper($.Deferred().reject());try{var t,n,i=this,r=this.__version,a=new Michelangelo.Notifier(function(e,t){switch(e){case"dataFetch.started":i.__fire("refresh.started");break;case"dataFetch.complete":i.__fire("refresh.complete");break;default:i.__fire(e,t)}}),s=i.__parentSize(),l=o(i.__renderSize,s);if("function"==typeof this.__style){var c=this.__style(this.__def,l);c instanceof ChartDefinition?t=new ChartDefinition(c):(t=new ChartDefinition(c.def),n=c.executor)}else t=new ChartDefinition(this.__def),t.style=this.__style||t.style;if(this.__tooltipFormatter&&this.__tooltipFormatter.formatter){var h={highchartsStyles:{tooltip:{useHTML:!0,shared:!0,formatter:this.__tooltipFormatter.formatter
}}};$.extend(!0,t.style,h)}!n&&this.__def instanceof ChartDefinition&&(n=new ChartDefinitionEditExecutor(this.__def));var u=this.__dataFetcher.fetch(t,this.__config.debugModel,a).then(function(o){if(r===i.__version){var a=new RenderContext(i.__hostElement,t,l,i.__notifier,e),c=i.__renderer.measure(a,o);c.width=isNaN(c.width)?s.width:c.width,c.height=isNaN(c.height)?s.height:c.height,i.__measuredSize={width:c.width,height:c.height},$(i.__hostElement).css(c),i.__renderedParentSize=i.__parentSize();var h=new RenderContext(i.__hostElement,t,c,i.__notifier,e,n);return i.__renderer.render(h,o)}}).then(function(){return i.__decorator},function(e){return $.Deferred().reject(e,i.__decorator)});return this.__promiseWrapper(u)}catch(d){return this.__fire("presentation.error",d),this.__promiseWrapper($.Deferred().reject(d))}},r.prototype.getConfig=function(){return this.__config},r.prototype.getMeasuredSize=function(){return this.__measuredSize},r.prototype.def=function(e){return 0===arguments.length?this.__def:(this.__def!==e&&(this.__def=e||{}),this.__version++,this)},r.prototype.style=function(e){return arguments.length?(this.__style=e,this):this.__style},r.prototype.tooltipFormatter=function(e){return arguments.length?(this.__tooltipFormatter=e,this):this.__tooltipFormatter},r.prototype.editor=function(){return this.__renderer.editor()},r.prototype.edit=function(e){return this.__renderer.edit(e),this},r.prototype.canEdit=function(e){return this.__renderer.canEdit(e)},r.prototype.__fire=function(e,t){this.__notifier.notify(e,t,this)},r.prototype.on=function(e,t){return this.__eventManager.on(e,t)},r.prototype.__manageHostWatch=function(){var e=this,t=this.__renderSize,n="fill"===t.width||"fill"===t.height;n||null===this.__hostWatchId?n&&null===this.__hostWatchId&&(this.__hostWatchId=setInterval(function(){var t=e.__parentSize();!e.__renderedParentSize||t.width===e.__renderedParentSize.width&&t.height===e.__renderedParentSize.height||(e.__version++,e.render(!0))},100)):(clearInterval(this.__hostWatchId),this.__hostWatchId=null)},r.prototype.__parentSize=function(){var e=$(this.__hostElement.parentNode);return{width:e.width(),height:e.height()}}}),n=e(function(e,n){var i=new t(e,n,this);this.__impl=function(){return i},i.__fire("presentationManager.created")});n.prototype.id=function(){return this.__impl().id()},n.prototype.hostElement=function(){return this.__impl().hostElement()},n.prototype.version=function(){return this.__impl().version()},n.prototype.remove=function(){this.__impl().remove()},n.prototype.size=function(){var e=this.__impl();return e.size.apply(e,arguments)},n.prototype.getMeasuredSize=function(){var e=this.__impl();return e.getMeasuredSize.apply(e,arguments)},n.prototype.style=function(){var e=this.__impl();return e.style.apply(e,arguments)},n.prototype.tooltipFormatter=function(){var e=this.__impl();return e.tooltipFormatter.apply(e,arguments)},n.prototype.load=function(e){return this.__impl().load(e)},n.prototype.render=function(){var e=this.__impl();return e.render.apply(e,arguments)},n.prototype.getConfig=function(){return this.__impl().getConfig()},n.prototype.def=function(){var e=this.__impl();return e.def.apply(e,arguments)},n.prototype.editor=function(){return this.__impl().editor()},n.prototype.edit=function(){var e=this.__impl();return e.edit.apply(e,arguments)},n.prototype.canEdit=function(){var e=this.__impl();return e.canEdit.apply(e,arguments)},n.prototype.on=function(e,t){return this.__impl().on(e,t)},n.getFrom=function(e){var t=e.__michelangeloPresentationManager__;return t instanceof n?t:null},n.createIn=function(e,t){n.removeFrom(e);var i=new PresentationManager(e,t);return e.__michelangeloPresentationManager__=i,i},n.getFromOrCreateIn=function(e,t){return n.getFrom(e)||n.createIn(e,t)},n.removeFrom=function(e){var t=n.getFrom(e);t&&t.remove()},n.prototype.extensionFactories=function(){return Logger.warn("extensionFactories are no longer required and will be deprecated."),this}}),DebugViewModel=__base(function(e){var t=e(function(){this.showMikeModel=!1,this.showDemoModel=!1,this.showServerRequest=!1,this.showServerResponse=!1,this.showChartConfig=!1,this.showRenderModel=!1,this.showInternalRequest=!1,this.showInternalGuts=!1,this.showInternalStore=!1,this.showInternalResponse=!1,this.showServerPerf=!1,this.showBlueGrass=!1,this.sendAkamaiDebugHeaders=!1,this.useDebugNow=!1});return t.prototype.wireUpDebug=function(e){var t=this;e.on("request.built",function(e){t.serverRequest=e}),e.on("response.received",function(e){t.serverResponse=e}),e.on("renderModel.built",function(e){t.renderModel=$.extend(!0,{},e),delete t.renderModel.serverResponse,delete t.renderModel.model}),e.on("chartConfig.built",function(e){var n=$.extend(!0,{},e);n.chart&&n.chart.renderTo&&"string"!==$.type(n.chart.renderTo)&&(n.chart.renderTo=n.chart.renderTo.toString()),t.chartConfig=n}),e.on("perf.received",function(e){t.showPerfGraph(e)}),e.on("internalRequest.received",function(e){t.internalRequest=e}),e.on("internalGuts.received",function(e){t.internalGuts=e}),e.on("internalStore.received",function(e){t.internalStore=e}),e.on("internalResponse.received",function(e){t.internalResponse=e}),e.on("internalStitched.received",function(e){t.internalStitchedResponse=e}),e.on("stitched.received",function(e){t.stitchedResponse=e})},t.prototype.wrapText=function(e){if(!e)return"";for(var t="",n=0,i=0;i<e.length;i++)n>50&&(n=0,t+="<br/>"),t+=e.charAt(i),n+=1;return t},t.prototype.showPerfGraph=function(e){if(this.showServerPerf&&"#serverPerfChartDiv".length&&e&&0!==e.length){var t=this,n={chart:{type:"columnrange",renderTo:"serverPerfChartDiv",inverted:!0},credits:{enabled:!1},exporting:{enabled:!1},title:{text:"Server Performance Measures"},xAxis:{categories:[]},yAxis:{title:{text:"Time (ticks)"},endOnTick:!1,minPadding:0,maxPadding:0,startOnTick:!1},tooltip:{crosshairs:[!0,!0],useHTML:!0,formatter:function(){return'<table><tr><th colspan="2" style="font-weight: bold">'+this.point.name+'</th></tr><tr><td>URL:</td><td><a href="'+this.point.url+'">'+t.wrapText(this.point.url)+"</a></td></tr><tr><td>Start:</td><td>"+this.point.startTime+"</td></tr><tr><td>Elapsed:</td><td>"+Highcharts.numberFormat(this.point.elapsed,4)+" ms</td></tr></table>"}},legend:{enabled:!1},series:[{name:"Times",data:[]}]},i=e[0].StartTicks,o=90;$.each(e,function(e,t){n.xAxis.categories.push(t.Name);var r=t.StartTicks-i,a=t.ElapsedTicks,s={low:r,high:r+a,name:t.Name,url:t.Url,startTime:t.StartTime,elapsed:t.ElapsedMilliseconds};n.series[0].data.push(s),o+=18}),$("#serverPerfChartDiv").height(o),t.perfChart=new Highcharts.Chart(n)}},t});Michelangelo.DebugViewModel=DebugViewModel;var PresentationHook=__base(function(e){var t=function(e,t,n){var i=e.id().replace(/-/g,"_"),o=window||{},r=o.mike||(o.mike={}),a=r[i]||(r[i]={pm:e});a.def=e.def(),a[t]=n},n=e(function(){});n.hook=function(e){e.on("request.built",function(n){t(e,"serverRequest",n)}),e.on("response.received",function(n){t(e,"serverResponse",n)}),e.on("renderModel.built",function(n){t(e,"renderModel",n)}),e.on("chartConfig.built",function(n){t(e,"chartConfig",$.extend(!0,{},n))}),e.on("tooltip.info",function(n){t(e,"tooltipRepo",n)})}}),DebugCookieWrangler=__base(function(e){var t=e(function(){}),n="letsGetMikey";t.isEnabled=function(){return-1!==document.cookie.indexOf(n+"=enabled;")},t.clearCookie=function(){document.cookie=n+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"},t.setCookie=function(){document.cookie=n+"=enabled; expires=Tue, 19 Jan 2038 03:14:07 GMT"}});Michelangelo.isDebugEnabled=function(){return DebugCookieWrangler.isEnabled()},Michelangelo.disableDebug=function(){return DebugCookieWrangler.clearCookie(),DebugCookieWrangler.isEnabled()},Michelangelo.enableDebug=function(){return DebugCookieWrangler.setCookie(),DebugCookieWrangler.isEnabled()},EventManager.on("presentationManager.created",function(e,t){Michelangelo.isDebugEnabled()&&PresentationHook.hook(t)});var IFrameComm=__base(function(e){var t=e(function(){this.__secret="dwh:"});t.prototype.buildMessage=function(e){var t=JSON.stringify(e);return this.__secret+t},t.prototype.parseMessage=function(e){if(!e||0!==e.indexOf(this.__secret))return null;var t=e.substr(this.__secret.length);return JSON.parse(t)}});Michelangelo.IFrameComm=IFrameComm;var IFrameLoader=__base(function(e){var t=e(function(e,t){var n={hostElement:e,hostId:$(e).attr("id"),parentId:t};this.__state=function(){return n},this.__comm=new Michelangelo.IFrameComm});t.loadIn=function(e,t){var n=new IFrameLoader(e,t);return window.addEventListener("message",function(e){n.receiveMessage.call(n,e)},!1),n.getAmbience(),n},t.prototype.receiveMessage=function(e){var t=this.__state(),n=this.__comm.parseMessage(e.data);if(n)switch(n.kind){case"ambient":Michelangelo.ambience(n.environment,n.entitlementToken),t.chartId=n.chartId,t.containerSize=n.containerSize,t.renderSize=n.renderSize,t.callbacks=Michelangelo.Marshal.objectify(n.callbacks),t.style=JSON.parse(n.style),t.defOverride=JSON.parse(n.defOverride),t.cssUrls=JSON.parse(n.cssUrls),t.cssText=JSON.parse(n.cssText),this.doLoad()}};var n=function(e){if(e&&0!==e.length)for(var t=document.getElementsByTagName("head")[0],n=0;n<e.length;n++){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.href=e[n],i.media="all",t.appendChild(i)}},i=function(e){if(e&&0!==e.length)for(var t=document.getElementsByTagName("head")[0],n=0;n<e.length;n++){var i=document.createElement("style");i.type="text/css",i.appendChild(document.createTextNode(e[n])),t.appendChild(i)}};t.prototype.getAmbience=function(){var e=this.__state(),t={kind:"getAmbience",hostId:e.parentId};parent.postMessage(this.__comm.buildMessage(t),"*")},t.prototype.doLoad=function(){var e=this.__state(),t=this;return n(e.cssUrls),i(e.cssText),Repo.ambient().get(e.chartId).then(function(n){e.model=n.definition,$.extend(!0,e.model,e.defOverride);var i=$(e.hostElement).presentation({}).def(e.model).tooltipFormatter(new Michelangelo.ToolTipFormatter).style(e.style).size(e.renderSize);if(e.callbacks)for(var o in e.callbacks)if(e.callbacks.hasOwnProperty(o)){var r=e.callbacks[o];"function"==typeof r&&i.on(o,r)}i.render().then(function(){var n={kind:"chartRendered",hostId:e.parentId,renderSize:e.renderSize,containerSize:e.containerSize,measuredSize:i.getMeasuredSize()};parent.postMessage(t.__comm.buildMessage(n),"*")})})}});$.fn.extend({presentation:function(e){return this.length?e?PresentationManager.createIn(this[0],e):PresentationManager.getFrom(this[0]):null}}),$.fn.extend({loadFramed:function(e){return this.length?IFrameLoader.loadIn(this[0],e):null}})}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){var t=function(){function e(e,o,r,a,s){this.build=function(l){l&&0!==l.length||(l=e.DesiredDataPoints);var c=[],h=n(l,e);if(!h||0===h.length)return c;for(var u=i(e),d=0;d<e.DataPoints.length;d++){var p=e.DataPoints[d],m=+o.Ticks[d];m=r.utcToLocal(m);var f=[m];if(t(p,h,f),u)for(var y=0;y<u.length;y++){var _=u[y];a.addPoint(m,s,_.name,p[_.index])}c.push(f)}return c}}var t=function(e,t,n){for(var i=0;i<t.length;i++){var o,r=t[i].index;-1===r?o=null:(o=e[r],"NaN"===o&&(o=null)),n.push(o)}},n=function(e,t){for(var n=[],i=0;i<e.length;i++){var o=e[i];if(o)for(var r=0;r<t.DesiredDataPoints.length;r++){var a=t.DesiredDataPoints[r];o===a&&n.push({name:o,index:r})}else n.push({name:"null",index:-1})}return n},i=function(e){if(!e||!e.ToolTipDataPoints||0===e.ToolTipDataPoints.length)return null;var t=e.DesiredDataPoints.length,n=[];return $.each(e.ToolTipDataPoints,function(e,i){n.push({name:i,index:t+e})}),n};return e}();e.DataPointBuilder=t}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){var t=function(){function e(e,t){var n={tzData:e,timeInfo:{step:t.Step,isIntraday:t.IsIntraday}},i=function(e){return n[e]||(n[e]={}),n[e]};this.getData=function(){return n},this.addPoint=function(e,t,n,o){var r=i(t);r.points||(r.points=[]),r.points[e]||(r.points[e]=[]),r.points[e].push({name:n,value:o})},this.setFormatHints=function(e,t,n){var o=i(e);o.hints||(o.hints={}),o.hints[t]=n},this.setCustomData=function(e,t){var n=i(e);n.customData=t},this.setSeriesData=function(e,t){var n=i(e);n.seriesData=t},this.getTzData=function(){return n.tzData},this.getTimeInfo=function(){return n.timeInfo},this.getPoints=function(e,t){var n=i(t);return n&&n.points&&n.points[e]&&n.points[e].length>0?n.points[e]:null},this.getCustomData=function(e){var t=i(e);return t.customData||{}},this.getSeriesData=function(e){var t=i(e);return t.seriesData||{}},this.getFormatHints=function(e,t){var n=i(e);return n.hints?n.hints[t]:null}}return e}(),n=function(){function e(){}return e}(),i=function(){function t(t){var n=this;this.showDateRange=!0,t&&t.showDateRange===!1&&(this.showDateRange=!1);var o=null;this.tooltipRepo=function(e){o=e};var r={iday:{main:"%m/%d/%Y %I:%M %p",group:"%I:%M %p"},eod:{main:"%m/%d/%Y",group:"%m/%d/%Y"}};t&&t.dateFormats&&$.extend(!0,r,t.dateFormats);var a=[{unit:"millisecond",factor:1},{unit:"second",factor:1e3},{unit:"minute",factor:6e4},{unit:"hour",factor:36e5},{unit:"day",factor:864e5},{unit:"week",factor:6048e5},{unit:"month",factor:26784e5},{unit:"year",factor:31556952e3}],s=function(t,n,i){var o,r;for(o=0;o<a.length;o++)if(r=a[o],r.unit===n)return t+r.factor*i;return e.Logger.log("Time unit "+n+" is not yet handled!"),t};this._formatHeader=function(e){var t=[];if(!o)return t;var i=o.getTimeInfo(),a=o.getTzData(),l=r.eod;i.isIntraday&&(l=r.iday);var c=Highcharts.dateFormat(l.main,e.x);if(n.showDateRange&&e.series.currentDataGrouping){var h=e.series.currentDataGrouping,u=s(e.x,h.unitName,h.count);c+=" to "+Highcharts.dateFormat(l.group,u)}return i.isIntraday&&(c+=" "+a.getAbbreviation(e.x)),t.push('<div class="mike-tip">'),t.push('<span class="mike-tip-date">'+c+"</span>"),t};var l=function(e,t,n){var i=Highcharts.numberFormat(e,t.decimals);t.unitSymbol&&(t.suffix?i+=t.unitSymbol:i=t.unitSymbol+i);var o="";return $.isNumeric(n)&&(o=e>n?" mike-tip-up":n>e?" mike-tip-down":" mike-tip-unchanged"),'<span class="mike-tip-val'+o+'">'+i+"</span>"},c=function(e,t,n,i){if("string"==typeof t)return t;var r=null;return o&&n&&(r=o.getFormatHints(e,n)),r||(r={decimals:3,unitSymbol:null}),l(t,r,i)},h=function(e,t){var n=t.charAt(0).toLowerCase()+t.slice(1);return"last"===n&&(n="close"),e[n]};this.formatter=function(){var e,t,r,a,s,u,d,p,m,f,y,_=this.points||i(this),g={decimals:3,unitSymbol:"%",suffix:!0};return u=n._formatHeader(_[0]),d=_[0].x,$.each(_,function(n,i){e=i.series,s=e.userOptions.id,p=[],m=!1,y=null,o&&(r=o.getCustomData(s),a=o.getSeriesData(s),a&&(p=a.dataPoints,m=a.isIndicator,a.extraData&&(y=a.extraData.priorClose))),f="mike-tip-name",f+=m?" mike-tip-indi":" mike-tip-series",u.push('<span class="'+f+'" style="color: '+e.color+'">'),u.push('<span class="mike-tip-bullet">●</span>'),u.push('<span class="mike-tip-label">'+e.name+"</span>"),0===p.length?u.push(c(s,i.y,null,y)):1===p.length&&u.push(c(s,i.y,p[0],y)),u.push("</span>"),p.length>1&&$.each(p,function(e,t){u.push('<span class="mike-tip-data"><span class="mike-tip-label">'+t+"</span>"+c(s,h(i.point,t),t,y)+"</span>")}),(i.point.change||0===i.point.change)&&u.push('<span class="mike-tip-data"><span class="mike-tip-label">Compare Percent</span>'+l(i.point.change,g,0)+"</span></span>"),o&&(t=o.getPoints(d,s),t&&$.each(t,function(e,t){u.push('<span class="mike-tip-data"><span class="mike-tip-label">'+t.name+"</span>"+c(s,t.value,t.name,"PercentChange"===t.name?0:null)+"</span>")})),r&&a&&(r.showTicker&&u.push('<span class="mike-tip-data"><span class="mike-tip-label">Ticker</span>'+a.ticker+"</span>"),r.showCountryCode&&u.push('<span class="mike-tip-data"><span class="mike-tip-label">Country Code</span>'+a.countryCode+"</span>"),r.showCommonName&&u.push('<span class="mike-tip-data"><span class="mike-tip-label">Common Name</span>'+a.commonName+"</span>"),r.showInstrumentType&&u.push('<span class="mike-tip-data"><span class="mike-tip-label">Instrument Type</span>'+a.instrumentType+"</span>"))}),u.push("</div>"),u.join("")}}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return n(e)?e:[e]}return t}();e.ToolTipRepository=t,e.ToolTipHierarchy=n,e.ToolTipFormatter=i}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){var t=function(){function t(t,n,i,o){this.isCompare=!1,this.tzData=null,this.serverResponse=t,this.model=n,this.style=i,this.size=$.extend({width:"fill",height:"auto"},o),this.quotes=[],this.mainPane=new e.RenderPane,this.panes=[this.mainPane];var r={showLegend:!1,showCredits:!1,showTitle:!1,showSubtitle:!1};if(this.layoutContext=r,!this.shouldHide(this.style.mikeStyle.hideLegend))if("boolean"==typeof n.showLegend)r.showLegend=n.showLegend;else if("number"==typeof n.showLegend){var a=0;this.model.series&&(a=this.model.series.length),r.showLegend=n.showLegend<=a}r.showCredits=null!==n.credit&&n.credit.length>0&&!this.shouldHide(this.style.mikeStyle.hideCredits),this.shouldHide(this.style.mikeStyle.hideTitle)||(this.title=n.title,this.title&&(r.showTitle=!0)),this.shouldHide(this.style.mikeStyle.hideSubtitle)||(this.subtitle=n.subtitle,this.subtitle&&(r.showSubtitle=!0)),this.xAxis=new e.RenderXAxis,this.xAxis.showLabels=!this.shouldHide(this.style.mikeStyle.hideXAxisLabels),this.mainAxis=new e.RenderYAxis(i.highchartsYAxisStyle),this.mainPane.axes.push(this.mainAxis),this.scanSeries(),this.processSeries(),n.xAxisTitle&&!this.shouldHide(this.style.mikeStyle.hideXAxisTitle)&&(this.xAxis.title=n.xAxisTitle,n.addTimeZoneToXAxisTitle&&t&&t.TimeInfo&&t.TimeInfo.IsIntraday&&(this.xAxis.title=this.tzData.addTimeZoneToTitle(this.xAxis.title,t.TimeInfo.FirstTick,t.TimeInfo.LastTick)),this.xAxis.showTitle=!0),this.xAxis.compressed=n.xAxisCompressed;var s=new e.RenderLayout(this.model,this.panes,this.style,this.size,r);s.doLayout()}t.prototype.shouldHide=function(e){return e&&e.minChartWidth&&this.size.width<e.minChartWidth?!0:!!(e&&e.minChartHeight&&this.size.height<e.minChartHeight)},t.prototype.scanSeries=function(){var t=this,n=!1,i=!1,o=!1;t.serverResponse&&t.serverResponse.TimeInfo&&(o=t.serverResponse.TimeInfo.IsIntraday),$.each(this.model.series,function(r,a){if(null===t.tzData){var s=e.ServerResponseHelpers.findSeriesBySeriesId(t.serverResponse,a.seriesId);s&&s.length>0&&$.each(s,function(n,i){if(null===t.tzData)if(i.TimeZoneData)t.tzData=new e.TimeZoneData(i.TimeZoneData,o);else if(i.UtcOffset&&i.TimeZoneAbbreviation){var r={SwitchDateUtc:0,UtcOffsetBeforeSwitch:i.UtcOffset,UtcOffsetAfterSwitch:i.UtcOffset,IsDstBeforeSwitch:!1,IsDstAfterSwitch:!1,StandardAbbreviation:i.TimeZoneAbbreviation,DaylightAbbreviation:i.TimeZoneAbbreviation,ShortAbbreviation:i.TimeZoneAbbreviation};t.tzData=new e.TimeZoneData(r,o)}})}a.position===e.Position.compare&&(t.isCompare=!0),"TickerSeries"===a.seriesKind&&("candlestick"===a.chartType||"ohlc"===a.chartType?n=!0:i=!0)}),null===t.tzData&&(t.tzData=new e.TimeZoneData(null,o)),this.isCompare&&(this.mainAxis.labelUnitSymbol="%",this.mainAxis.labelSuffix=!0,this.mainAxis.addYAxisUnits="all"),!n||i||this.model.filterNullSlots||(t.applyHighStockCandleHack=!0)},t.prototype.processSeries=function(){var t=this,n=!1;t.serverResponse&&t.serverResponse.TimeInfo&&(n=t.serverResponse.TimeInfo.IsIntraday),$.each(this.model.series,function(i,o){var r=e.ServerResponseHelpers.findSeriesBySeriesId(t.serverResponse,o.seriesId);r&&0!==r.length&&$.each(r,function(r,a){if(0===i&&n){0===t.model.timeFrame.indexOf("D1")&&(t.xAxis.min=t.tzData.utcToLocal(t.serverResponse.TimeInfo.TimeFrameStart),t.xAxis.max=t.tzData.utcToLocal(t.serverResponse.TimeInfo.TimeFrameEnd));var s=t.model.showPreMarketBands||t.model.showAfterHoursBands||t.model.showClosedBands;s&&t.style&&t.style.mikeStyle&&a.MarketSessions&&a.MarketSessions.length>0&&$.each(a.MarketSessions,function(n,i){if("Trading"!==i.Kind&&("Closed"!==i.Kind||t.model.showClosedBands)&&("PreMarket"!==i.Kind||t.model.showPreMarketBands)&&("AfterMarket"!==i.Kind||t.model.showAfterHoursBands)){var o=i.Kind[0].toLowerCase()+i.Kind.slice(1),r=t.tzData.utcToLocal(i.Start),a=t.tzData.utcToLocal(i.End),s=t.style.mikeStyle.marketBands;if(s&&s.enabled){var l=new e.RenderPlotBand(r,a);if(l.name=i.Kind,l.color=s.color,l.labelStyle=s.labelStyle,s[o]){var c=s[o];c.color&&(l.color=c.color),c.name&&(l.name=c.name)}t.xAxis.plotBands.push(l)}var h=t.style.mikeStyle.marketLines;if(h){var u,d={},p={};$.extend(!0,d,h.left),$.extend(!0,p,h.right),h[o]&&(h[o].left&&$.extend(!0,d,h[o].left),h[o].right&&$.extend(!0,p,h[o].right)),d.enabled&&(u=new e.RenderPlotLine(r,d),t.xAxis.plotLines.push(u)),p.enabled&&(u=new e.RenderPlotLine(a,p),t.xAxis.plotLines.push(u))}}})}a.DjId&&(o.djid=a.DjId);var l=new e.RenderSeries(a.ResponseId,!1,o.seriesId,o.annotations);if(l.fieldNames=o.getFieldNames(a),l.customToolTipData=o.customToolTipData,l.chartType=o.chartType,l.seriesName=o.getName(a),t.style.seriesStyles&&t.style.seriesStyles[o.seriesKind]){var c=t.style.seriesStyles[o.seriesKind];"function"==typeof c?l.seriesOptions=c(o.chartType):l.seriesOptions=c}if(a.CurrentQuote){var h={ticker:a.Ticker,countryCode:a.CountryCode,commonName:a.CommonName,utcOffset:a.UtcOffset,timeZoneAbbreviation:a.TimeZoneAbbreviation,quoteDateUtc:a.CurrentQuote.DateUtc,quoteLast:a.CurrentQuote.Last,quoteNetChange:a.CurrentQuote.NetChange,quoteChangePercent:a.CurrentQuote.ChangePercent,hintUnitSymbol:a.CurrentQuote.UnitSymbol,hintSuffix:a.CurrentQuote.Suffix,hintDecimalPlaces:a.CurrentQuote.DecimalPlaces,seriesId:l.id};t.quotes.push(h)}a.BlueGrassChannels&&$.each(a.BlueGrassChannels,function(e,t){l.blueGrassChannels.push(t.ChannelName)});var u=0===i,d=t.determinePane(o,null,u),p=t.determineAxis(o,d,a,u,null);p.series.push(l),$.each(o.indicators,function(n,i){var o=e.ServerResponseHelpers.findSeriesBySeriesId(t.serverResponse,i.seriesId),r=null;if(o&&o.length>0&&(r=o[0]),null!==r)return void t.processIndicator(i,r,d,p);var s=e.ServerResponseHelpers.findEventBySeriesId(t.serverResponse,i.seriesId);if(null!==s)return void t.processEvent(i,s,d,p);var l=e.ServerResponseHelpers.findAggregateBySeriesId(t.serverResponse,i.seriesId);return null!==l?void t.processAggregate(i,l,p,a.ExtraData):void(i.metaData===e.MetaData.HorizontalLineIndicator&&t.processHorizontalLine(i,p))})})})};var n=function(e){if(!e||!e.length)return!1;if(1===e.length)return!0;for(var t=e[0].Value,n=1;n<e.length;n++)if(e[n].Value!==t)return!1;return!0};return t.prototype.processEvent=function(t,i,o,r){var a=this.determinePane(t,o,!1),s=this.determineAxis(t,a,i,!1,r),l=new e.RenderEvent(i.ResponseId);i.Ticker?l.seriesName=i.Ticker+" "+t.metaData.name:l.seriesName=t.metaData.name,s.events.push(l),l.eventStyle=this.style.eventStyles[t.metaData.serverKind];var c=t.parameters[0].value;if(c&&(s.isHidden=!0,$.extend(!0,s.axisStyle,{title:{text:null},labels:{enabled:!1}})),n(i.DataPoints)){var h=i.DataPoints[0].Value;s.axisStyle.min=h-1,s.axisStyle.max=h+1}},t.prototype.processAggregate=function(t,n,i,o){if(n.DataPoints){var r=n.DataPoints.slice();o&&$.each(o,function(e,t){"PriorClose"===t.Name&&r.push({Name:"priorClose",Value:t.Value})});var a=this.style.aggregateStyles[t.metaData.serverKind];$.each(r,function(t,n){if(n.Value){var o=new e.RenderPlotLine(n.Value,a[n.Name]||{});i.plotLines.push(o)}})}},t.prototype.processHorizontalLine=function(t,n){var i=parseFloat(t.parameters[0].value),o=new e.RenderPlotLine(i);n.plotLines.push(o)},t.prototype.processIndicator=function(e,t,n,i){var o=this.style.indicatorStyles[e.metaData.serverKind],r=this.determinePane(e,n,!1),a=this.determineAxis(e,r,t,!1,i);this.buildSeriesForIndicator(e,t,a,o),o&&o.axisStyle&&$.extend(!0,a.axisStyle,o.axisStyle)},t.prototype.determinePane=function(t,n,i){var o;return i||t.position===e.Position.compare?o=this.mainPane:t.position===e.Position.overlay||t.position===e.Position.onTop?o=null!==n?n:this.mainPane:(o=new e.RenderPane,t.position===e.Position.above?this.panes.unshift(o):this.panes.push(o)),o.height||(o.height=t.height),o},t.prototype.determineAxis=function(t,n,i,o,r){var a;return o?a=this.mainAxis:t.position===e.Position.overlay&&null!==r?a=r:(t.position===e.Position.overlay||t.position===e.Position.compare)&&n.axes.length>0?a=n.axes[0]:(a=new e.RenderYAxis(this.style.highchartsYAxisStyle),n.axes.push(a),n.axes.length>this.model.maxVisibleAxesPerPane&&(a.isHidden=!0,$.extend(!0,a.axisStyle,{title:{text:null},labels:{enabled:!1}}))),a.isHidden||(a.showLabels=!this.shouldHide(this.style.mikeStyle.hideYAxisLabels),a.setLabels(i,this.style),!a.title&&this.model.showYAxisTitle&&t.showAxisTitle&&!this.shouldHide(this.style.mikeStyle.hideYAxisTitle)&&(a.title=t.getAxisTitle(i))),a.type=t.axisType,a},t.prototype.buildSeriesForIndicator=function(t,n,i,o){if(n){var r;o&&(r=o.seriesStyles);var a=null;$.each(t.parameters,function(e,t){"chartType"===t.metaData.inputType&&(a=t.value)});var s,l=[];if("ohlc"===a||"candlestick"===a){s=new e.RenderSeries(n.ResponseId,!0,t.seriesId,t.annotations);var c,h,u=null,d=null;n.DesiredDataPoints.length>1?(c=n.DesiredDataPoints[0],h=n.DesiredDataPoints[1]):(c=n.DesiredDataPoints[0],h=c),"candlestick"===a&&(u=c,d=h),s.seriesName=t.metaData.name,s.fieldNames=[u,c,h,d],s.chartType=a,r&&(s.seriesOptions=r[0]),l.push(s)}else"arearange"===a?(s=new e.RenderSeries(n.ResponseId,!0,t.seriesId,t.annotations),s.seriesName=t.metaData.name,s.fieldNames=["Low","High"],s.chartType=a,r&&(s.seriesOptions=r[0]),l.push(s)):$.each(n.DesiredDataPoints,function(i,o){s=new e.RenderSeries(n.ResponseId,!0,t.seriesId,t.annotations),s.fieldNames=[o],s.seriesName=o,a&&(s.chartType=a),r&&(s.seriesOptions=r[i]),l.push(s)});if($.each(l,function(e,t){i.series.push(t)}),l.length&&!t.metaData.excludeFromLabel&&!t.metaData.isEvent){var p=t.metaData.name;t.metaData.abbreviation&&(p=t.metaData.abbreviation);var m=[];t.parameters&&$.each(t.parameters,function(e,t){if(t.metaData.includeInLabel){var n=t.value;t.metaData.isList&&(n=n.replace(/\s+/g,"")),m.push(n)}}),m.length>0&&(p+="("+m.join(",")+")"),i.labels.push(p)}}},t}();e.RenderModel=t;var n=function(){function e(){this.height=void 0,this.axes=[]}return e}();e.RenderPane=n;var i=function(){function e(){this.plotBands=[],this.plotLines=[],this.compressed=!0,this.showTitle=!1,this.title=void 0,this.showLabels=!0,this.min=void 0,this.max=void 0}return e}();e.RenderXAxis=i;var o=function(){function e(e){this.top=void 0,this.height=void 0,this.offset=void 0,this.onLeft=!1,this.title=void 0,this.labelUnitSymbol=void 0,this.labelSuffix=void 0,this.addYAxisUnits=void 0,this.maxLabelDecimals=void 0,this.isHidden=!1,this.showLabels=!0,this.type="linear",this.axisStyle={},$.extend(!0,this.axisStyle,e),this.axisStyle.__mikeId=t++,this.plotLines=[],this.series=[],this.events=[],this.labels=[]}var t=1;return e.prototype.setLabels=function(e,t){e&&e.FormatHints&&(null!==e.FormatHints.UnitSymbol&&!this.labelUnitSymbol&&t.mikeStyle.addYAxisUnits&&(this.labelUnitSymbol=e.FormatHints.UnitSymbol,this.labelSuffix=e.FormatHints.Suffix,this.addYAxisUnits=t.mikeStyle.addYAxisUnits),e.FormatHints.DecimalPlaces&&!this.maxLabelDecimals&&(this.maxLabelDecimals=e.FormatHints.DecimalPlaces))},e.prototype.getActualAxis=function(e){var t=this.axisStyle.__mikeId;return $.grep(e.yAxis,function(e){return e.options.__mikeId===t})[0]},e}();e.RenderYAxis=o;var r=function(){function e(e,t){this.width=1,this.dashStyle="Solid",this.color="Green",this.zIndex=4,$.extend(!0,this,t),this.value=e}return e}();e.RenderPlotLine=r;var a=function(){function e(e,t){this.from=e,this.to=t,this.color="#F0F0F0",this.labelStyle=void 0,this.name="Band",this.zIndex=2}return e}();e.RenderPlotBand=a;var s=function(){function t(n,i,o,r){t.nextId+=1,this.id="rs-"+e.RenderSeries.nextId,this.isIndicator=i,this.sourceId=o,this.annotations=r||[],this.responseId=n,this.seriesName=n,this.chartType="line",this.fieldNames=[],this.seriesOptions=void 0,this.dataParameter=void 0,this.blueGrassChannels=[]}return t.nextId=0,t}();e.RenderSeries=s;var l=function(){function e(t){e.nextId+=1,this.id="re-"+e.nextId,this.responseId=t,this.seriesName=t,this.chartType="scatter"}return e.nextId=0,e}();e.RenderEvent=l}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){var t=function(){function e(e,t,n,i,o){this.model=e,this.panes=t,this.style=n,this.size=i,this.context=o}e.prototype.__doHorizontalLayout=function(){var e=this;$.each(this.panes,function(t,n){var i=0;$.each(n.axes,function(t,n){var o=i%2===0;o?n.onLeft=e.model.firstAxisOnLeft:n.onLeft=!e.model.firstAxisOnLeft,n.isHidden?n.offset=-75:(n.offset=75*Math.floor(i/2),i+=1)})})},e.prototype.__getTitleHeight=function(){var e=0;return this.context.showTitle&&(e+=30),this.context.showSubtitle&&(e+=20),e},e.prototype.__getRangeSelectorHeight=function(){return this.model.showRangeSelector?35:0},e.prototype.__getNavigatorHeight=function(){return this.model.showNavigator?52:0},e.prototype.__getLegendHeight=function(){var e=0;if(this.context.showLegend){e=45;var t=this.style.highchartsStyles&&this.style.highchartsStyles.legend?this.style.highchartsStyles.legend:null;if(t){var n=!t.verticalAlign||"bottom"===t.verticalAlign;!t.floating&&n&&"left"!==t.align&&"right"!==t.align||(e=0)}}return e},e.prototype.determineHeight=function(){var e=53;e+=this.__getRangeSelectorHeight(),e+=this.__getTitleHeight(),e+=this.__getNavigatorHeight(),e+=this.__getLegendHeight();for(var t=0;t<this.panes.length;t++)e+=this.panes[t].height;return e};var t=function(e){return e=Math.floor(100*e),e+"%"};return e.prototype.__doVerticalLayout=function(){var e,n,i=20,o=0;for(e=0;e<this.panes.length;e++)o+=this.panes[e].height,e>0&&(o+=i);var r=i/o,a=0;for(e=0;e<this.panes.length;e++){var s=this.panes[e],l=s.height/o;for(e>0&&(a+=r),n=0;n<s.axes.length;n++){var c=s.axes[n];c.top=t(a),c.height=t(l)}a+=l}},e.prototype.doLayout=function(){this.__doHorizontalLayout(),this.__doVerticalLayout(),"auto"===this.size.height&&(this.size.height=this.determineHeight())},e}();e.RenderLayout=t}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){var t=function(){function e(){this.Step="P1D",this.TimeFrame="P6M",this.StartDate=void 0,this.EndDate=void 0,this.EntitlementToken="f9471dd374424d13bcc79e5ca933473e",this.IncludeMockTick=!0,this.FilterNullSlots=!0,this.FilterClosedPoints=!0,this.IncludeClosedSlots=!1,this.IncludeOfficialClose=!0,this.InjectOpen=!1,this.ShowPreMarket=!1,this.ShowAfterHours=!1,this.UseExtendedTimeFrame=!1,this.WantPriorClose=!1,this.IncludeCurrentQuotes=!1,this.Series=[]}return e}();e.ServerRequest=t;var n=function(){function e(){}return e.prototype.parseAndSetTicker=function(e,t){return e||t?(t?(this.Key=t,this.Dialect="DjId"):"vid:"===e.substring(0,4)?(this.Key=e.substring(4),this.Dialect="VarastoId"):(this.Key=e,/.*\/.*\/.*\/.*/.test(e)?this.Dialect="Charting":this.Dialect="Mktw"),!0):!1},e}();e.ServerRequestSeries=n;var i=function(){function e(){this.Parameters=[]}return e}();e.ServerRequestIndicator=i;var o=function(){function e(){}return e}();e.ServerRequestIndicatorParameter=o;var r=function(){function e(){}return e.findSeriesBySeriesId=function(e,t){var n=null;return e&&e.Series&&$.each(e.Series,function(e,i){i.SeriesId===t&&(n?n.push(i):n=[i])}),n},e.findSeriesByResponseId=function(e,t){var n=null;return e&&e.Series&&$.each(e.Series,function(e,i){return i.ResponseId===t?void(n=i):void 0}),n},e.findAggregateBySeriesId=function(e,t){var n=null;return e&&e.Aggregates&&$.each(e.Aggregates,function(e,i){return i.SeriesId===t?void(n=i):void 0}),n},e.findEventBySeriesId=function(e,t){var n=null;return e&&e.Events&&$.each(e.Events,function(e,i){return i.SeriesId===t?void(n=i):void 0}),n},e.findEventByResponseId=function(e,t){var n=null;return null!==e&&e.Events&&$.each(e.Events,function(e,i){return i.ResponseId===t?void(n=i):void 0}),n},e}();e.ServerResponseHelpers=r}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){var t=function(){function e(){}return e.instance=function(){return null===e._instance&&(e._instance={}),e._instance},e._instance=null,e}();e.EmptyStyle=t;var n=function(){
function e(){}return e.instance=function(){return null===e._instance&&(e._instance=e.makeInstance()),e._instance},e.makeInstance=function(){var e={highchartsStyles:{plotOptions:{area:{threshold:null},line:{connectNulls:!1},scatter:{tooltip:{headerFormat:"{point.x:%d-%b-%Y}",pointFormat:"<br /><b>{series.name}: {point.y:.2f}</b>"}}},xAxis:{dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e %b",week:"%e %b",month:"%b %y",year:"%Y"}}},mikeStyle:{yAxisLabelsOutside:!1,addYAxisUnits:"all",timestamp:{style:{fontSize:"10px",color:"#A0A0A0"}},indicatorLabels:{style:{fontSize:"10px",color:"#A0A0A0"}}},indicatorStyles:[],eventStyles:[],aggregateStyles:[],seriesStyles:[]};return e.mikeStyle.marketBands={enabled:!0,labelStyle:{rotation:-90,align:"center",verticalAlign:"top",textAlign:"right",style:{color:"#A0A0A0",fontSize:"6pt"}},color:"rgba(150, 150, 255, 0.1)",closed:{color:"#C0C0C0"},preMarket:{name:"Pre-Market"},afterMarket:{name:"After-Hours"}},e.mikeStyle.marketLines={left:{enabled:!1},right:{enabled:!1}},e.indicatorStyles.AroonIndicator={axisStyle:{endOnTick:!1,min:0,max:101},seriesStyles:[{color:"green"},{color:"red"}]},e.indicatorStyles.BollingerBands={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},e.indicatorStyles.CommodityChannelIndex={axisStyle:{gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:100,width:1,dashStyle:"Solid",color:"LightGray"},{value:0,width:1,dashStyle:"DashDot",color:"LightGray"},{value:-100,width:1,dashStyle:"Solid",color:"LightGray"}]}},e.indicatorStyles.CompetitorComparison={seriesStyles:[{lineWidth:0,fillColor:"rgba(80, 80, 80, 0.2)"}]},e.indicatorStyles.FundComparison={seriesStyles:[{lineWidth:0,fillColor:"rgba(80, 80, 80, 0.2)"}]},e.indicatorStyles.KeltnerChannels={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},e.indicatorStyles.MovingAverageConvergenceDivergence={seriesStyles:[{color:"blue"},{color:"red"},{color:"black",type:"column"}]},e.indicatorStyles.NewsDensity={seriesStyles:[{type:"column"}]},e.indicatorStyles.ParabolicSAR={seriesStyles:[{lineWidth:0,marker:{enabled:!0,symbol:"circle"}}]},e.indicatorStyles.PriceChannels={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},e.indicatorStyles.PriceToEarningsRanges={seriesStyles:[{color:"black"}]},e.indicatorStyles.RelativeStrengthIndex={axisStyle:{min:0,max:100,gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:70,width:1,dashStyle:"Solid",color:"LightGray"},{value:30,width:1,dashStyle:"Solid",color:"LightGray"}]}},e.indicatorStyles.RollingDividend={seriesStyles:[{connectNulls:!0}]},e.indicatorStyles.Volume={seriesStyles:[{color:"black"}]},e.indicatorStyles.VolumePlus={seriesStyles:[{color:"black",type:"column"},{color:"red",type:"column"},{color:"orange"}]},e.indicatorStyles.VortexIndicator={axisStyle:{gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:1.1,width:1,dashStyle:"Solid",color:"LightGray"},{value:1,width:1,dashStyle:"DashDot",color:"LightGray"},{value:.9,width:1,dashStyle:"Solid",color:"LightGray"}]},seriesStyles:[{color:"green"},{color:"red"}]},e.indicatorStyles.WilliamsPercentR={axisStyle:{min:-100,max:0,gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:-20,width:1,dashStyle:"Solid",color:"LightGray",label:{text:"Overbought"}},{value:-50,width:1,dashStyle:"DashDot",color:"LightGray"},{value:-80,width:1,dashStyle:"Solid",color:"LightGray",label:{text:"Oversold",y:12}}]}},e.aggregateStyles.OpenHighLowLines={open:{color:"Red"},high:{color:"Blue"},low:{color:"Blue"}},e.eventStyles.DividendEvents={upImageUrl:"../images/event-dividend-inc.svg",downImageUrl:"../images/event-dividend-dec.svg",unchangedImageUrl:"../images/event-dividend-nc.svg"},e.eventStyles.EarningsEvents={upImageUrl:"../images/event-earnings-inc.svg",downImageUrl:"../images/event-earnings-dec.svg",unchangedImageUrl:"../images/event-earnings-nc.svg"},e.eventStyles.SplitEvents={upImageUrl:"../images/event-split-inc.svg",downImageUrl:"../images/event-split-dec.svg",unchangedImageUrl:"../images/event-split-nc.svg"},e.eventStyles.InsiderTransactions={upImageUrl:"../images/green-bubble.png",downImageUrl:"../images/red-bubble.png",unchangedImageUrl:"../images/red-bubble.png"},e.seriesStyles.TickerSeries=function(e){return"column"===e?{dataGrouping:{approximation:"close"}}:null},e.seriesStyles.TextPhraseSeries={connectNulls:!0},e},e._instance=null,e}();e.DefaultStyle=n}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){var t=function(){function e(e,t){this.serverTzData=e,this.isIntraday=t}return e.prototype.isDst=function(e){return this.serverTzData?e<this.serverTzData.SwitchDateUtc?this.serverTzData.IsDstBeforeSwitch:this.serverTzData.IsDstAfterSwitch:!1},e.prototype.utcToLocal=function(e){return this.isIntraday&&this.serverTzData?e<this.serverTzData.SwitchDateUtc?e+6e4*this.serverTzData.UtcOffsetBeforeSwitch:e+6e4*this.serverTzData.UtcOffsetAfterSwitch:e},e.prototype.getAbbreviation=function(e){return this.serverTzData?this.isDst(e)?this.serverTzData.DaylightAbbreviation:this.serverTzData.StandardAbbreviation:null},e.prototype.addTimeZoneToTitle=function(e,t,n){var i=this.getAbbreviation(t),o=this.getAbbreviation(n);return i&&o?i===o?e+" ("+i+")":e+" ("+i+"/"+o+")":e},e}();e.TimeZoneData=t}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){"function"==typeof define&&define("vendor.asset.michelangelo/michelangelo",["vendor.asset.highstock/highstock","vendor.asset.jquery/jquery.ie.cors"],function(){return e})}(Michelangelo||(Michelangelo={}));var Michelangelo;!function(e){!function(e){e.core="2.0.1605"}(e.versions||(e.versions={}))}(Michelangelo||(Michelangelo={}));
"undefined"==typeof HTMLTemplateElement&&!function(){function e(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case" ":return"&nbsp;"}}function t(t){return t.replace(c,e)}var n="template",o=document.implementation.createHTMLDocument("template"),r=!0;HTMLTemplateElement=function(){},HTMLTemplateElement.prototype=Object.create(HTMLElement.prototype),HTMLTemplateElement.decorate=function(e){if(!e.content){e.content=o.createDocumentFragment();for(var n;n=e.firstChild;)e.content.appendChild(n);if(r)try{Object.defineProperty(e,"innerHTML",{get:function(){for(var e="",n=this.content.firstChild;n;n=n.nextSibling)e+=n.outerHTML||t(n.data);return e},set:function(e){for(o.body.innerHTML=e,HTMLTemplateElement.bootstrap(o);this.content.firstChild;)this.content.removeChild(this.content.firstChild);for(;o.body.firstChild;)this.content.appendChild(o.body.firstChild)},configurable:!0})}catch(a){r=!1}HTMLTemplateElement.bootstrap(e.content)}},HTMLTemplateElement.bootstrap=function(e){for(var t,o=e.querySelectorAll(n),r=0,a=o.length;a>r&&(t=o[r]);r++)HTMLTemplateElement.decorate(t)},document.addEventListener("DOMContentLoaded",function(){HTMLTemplateElement.bootstrap(document)});var a=document.createElement;document.createElement=function(){"use strict";var e=a.apply(document,arguments);return"template"==e.localName&&HTMLTemplateElement.decorate(e),e};var c=/[&\u00A0<>]/g}();
!function(){var n={};!function(n,t){function r(n){return String(null===n||void 0===n?"":n)}function e(n){return n=r(n),s.test(n)?n.replace(i,"&amp;").replace(o,"&lt;").replace(u,"&gt;").replace(c,"&#39;").replace(f,"&quot;"):n}n.Template=function(n,r,e,i){this.r=n||this.r,this.c=e,this.options=i,this.text=r||"",this.buf=t?[]:""},n.Template.prototype={r:function(n,t,r){return""},v:e,t:r,render:function(n,t,r){return this.ri([n],t||{},r)},ri:function(n,t,r){return this.r(n,t,r)},rp:function(n,t,r,e){var i=r[n];return i?(this.c&&"string"==typeof i&&(i=this.c.compile(i,this.options)),i.ri(t,r,e)):""},rs:function(n,t,r){var e=n[n.length-1];if(!h(e))return void r(n,t,this);for(var i=0;i<e.length;i++)n.push(e[i]),r(n,t,this),n.pop()},s:function(n,t,r,e,i,o,u){var c;return h(n)&&0===n.length?!1:("function"==typeof n&&(n=this.ls(n,t,r,e,i,o,u)),c=""===n||!!n,!e&&c&&t&&t.push("object"==typeof n?n:t[t.length-1]),c)},d:function(n,t,r,e){var i=n.split("."),o=this.f(i[0],t,r,e),u=null;if("."===n&&h(t[t.length-2]))return t[t.length-1];for(var c=1;c<i.length;c++)o&&"object"==typeof o&&i[c]in o?(u=o,o=o[i[c]]):o="";return e&&!o?!1:(e||"function"!=typeof o||(t.push(u),o=this.lv(o,t,r),t.pop()),o)},f:function(n,t,r,e){for(var i=!1,o=null,u=!1,c=t.length-1;c>=0;c--)if(o=t[c],o&&"object"==typeof o&&n in o){i=o[n],u=!0;break}return u?(e||"function"!=typeof i||(i=this.lv(i,t,r)),i):e?!1:""},ho:function(n,t,r,e,i){var o=this.c,u=this.options;u.delimiters=i;var e=n.call(t,e);return e=null==e?String(e):e.toString(),this.b(o.compile(e,u).render(t,r)),!1},b:t?function(n){this.buf.push(n)}:function(n){this.buf+=n},fl:t?function(){var n=this.buf.join("");return this.buf=[],n}:function(){var n=this.buf;return this.buf="",n},ls:function(n,t,r,e,i,o,u){var c=t[t.length-1],f=null;if(!e&&this.c&&n.length>0)return this.ho(n,c,r,this.text.substring(i,o),u);if(f=n.call(c),"function"==typeof f){if(e)return!0;if(this.c)return this.ho(f,c,r,this.text.substring(i,o),u)}return f},lv:function(n,t,e){var i=t[t.length-1],o=n.call(i);return"function"==typeof o&&(o=r(o.call(i)),this.c&&~o.indexOf("{{"))?this.c.compile(o,this.options).render(i,e):r(o)}};var i=/&/g,o=/</g,u=/>/g,c=/\'/g,f=/\"/g,s=/[&<>\"\']/,h=Array.isArray||function(n){return"[object Array]"===Object.prototype.toString.call(n)}}("undefined"!=typeof exports?exports:n),function(n){function t(n){"}"===n.n.substr(n.n.length-1)&&(n.n=n.n.substring(0,n.n.length-1))}function r(n){return n.trim?n.trim():n.replace(/^\s*|\s*$/g,"")}function e(n,t,r){if(t.charAt(r)!=n.charAt(0))return!1;for(var e=1,i=n.length;i>e;e++)if(t.charAt(r+e)!=n.charAt(e))return!1;return!0}function i(n,t,r,e){for(var c=[],f=null,s=null;n.length>0;)if(s=n.shift(),"#"==s.tag||"^"==s.tag||o(s,e))r.push(s),s.nodes=i(n,s.tag,r,e),c.push(s);else{if("/"==s.tag){if(0===r.length)throw new Error("Closing tag without opener: /"+s.n);if(f=r.pop(),s.n!=f.n&&!u(s.n,f.n,e))throw new Error("Nesting error: "+f.n+" vs. "+s.n);return f.end=s.i,c}c.push(s)}if(r.length>0)throw new Error("missing closing tag: "+r.pop().n);return c}function o(n,t){for(var r=0,e=t.length;e>r;r++)if(t[r].o==n.n)return n.tag="#",!0}function u(n,t,r){for(var e=0,i=r.length;i>e;e++)if(r[e].c==n&&r[e].o==t)return!0}function c(n){return n.replace(m,"\\\\").replace(b,'\\"').replace(_,"\\n").replace(y,"\\r")}function f(n){return~n.indexOf(".")?"d":"f"}function s(n){for(var t="",r=0,e=n.length;e>r;r++){var i=n[r].tag;"#"==i?t+=h(n[r].nodes,n[r].n,f(n[r].n),n[r].i,n[r].end,n[r].otag+" "+n[r].ctag):"^"==i?t+=a(n[r].nodes,n[r].n,f(n[r].n)):"<"==i||">"==i?t+=l(n[r]):"{"==i||"&"==i?t+=g(n[r].n,f(n[r].n)):"\n"==i?t+=v('"\\n"'+(n.length-1==r?"":" + i")):"_v"==i?t+=p(n[r].n,f(n[r].n)):void 0===i&&(t+=v('"'+c(n[r])+'"'))}return t}function h(n,t,r,e,i,o){return"if(_.s(_."+r+'("'+c(t)+'",c,p,1),c,p,0,'+e+","+i+',"'+o+'")){_.rs(c,p,function(c,p,_){'+s(n)+"});c.pop();}"}function a(n,t,r){return"if(!_.s(_."+r+'("'+c(t)+'",c,p,1),c,p,1,0,0,"")){'+s(n)+"};"}function l(n){return'_.b(_.rp("'+c(n.n)+'",c,p,"'+(n.indent||"")+'"));'}function g(n,t){return"_.b(_.t(_."+t+'("'+c(n)+'",c,p,0)));'}function p(n,t){return"_.b(_.v(_."+t+'("'+c(n)+'",c,p,0)));'}function v(n){return"_.b("+n+");"}var d=/\S/,b=/\"/g,_=/\n/g,y=/\r/g,m=/\\/g,A={"#":1,"^":2,"/":3,"!":4,">":5,"<":6,"=":7,_v:8,"{":9,"&":10};n.scan=function(n,i){function o(){b.length>0&&(_.push(new String(b)),b="")}function u(){for(var n=!0,t=x;t<_.length;t++)if(n=_[t].tag&&A[_[t].tag]<A._v||!_[t].tag&&null===_[t].match(d),!n)return!1;return n}function c(n,t){if(o(),n&&u())for(var r,e=x;e<_.length;e++)_[e].tag||((r=_[e+1])&&">"==r.tag&&(r.indent=_[e].toString()),_.splice(e,1));else t||_.push({tag:"\n"});y=!1,x=_.length}function f(n,t){var e="="+S,i=n.indexOf(e,t),o=r(n.substring(n.indexOf("=",t)+1,i)).split(" ");return w=o[0],S=o[1],i+e.length-1}var s=n.length,h=0,a=1,l=2,g=h,p=null,v=null,b="",_=[],y=!1,m=0,x=0,w="{{",S="}}";for(i&&(i=i.split(" "),w=i[0],S=i[1]),m=0;s>m;m++)g==h?e(w,n,m)?(--m,o(),g=a):"\n"==n.charAt(m)?c(y):b+=n.charAt(m):g==a?(m+=w.length-1,v=A[n.charAt(m+1)],p=v?n.charAt(m+1):"_v","="==p?(m=f(n,m),g=h):(v&&m++,g=l),y=m):e(S,n,m)?(_.push({tag:p,n:r(b),otag:w,ctag:S,i:"/"==p?y-S.length:m+w.length}),b="",m+=S.length-1,g=h,"{"==p&&("}}"==S?m++:t(_[_.length-1]))):b+=n.charAt(m);return c(y,!0),_},n.generate=function(t,r,e){var i='var _=this;_.b(i=i||"");'+s(t)+"return _.fl();";return e.asString?"function(c,p,i){"+i+";}":new n.Template(new Function("c","p","i",i),r,n,e)},n.parse=function(n,t,r){return r=r||{},i(n,"",[],r.sectionTags||[])},n.cache={},n.compile=function(n,t){t=t||{};var r=n+"||"+!!t.asString,e=this.cache[r];return e?e:(e=this.generate(this.parse(this.scan(n,t.delimiters),n,t),n,t),this.cache[r]=e)}}("undefined"!=typeof exports?exports:n),"function"==typeof define&&define.amd&&define("vendor.asset.hogan/hogan",[],function(){return n})}();
!function(){var t=function(){this.attrs={},this.actions={},this._postMsg=function(t,i){t.postMessage(JSON.stringify(i),"*")};var t="0.0.1",i=1,n={};this._postErrorMsg=function(t,i,n){var s={id:i,type:"error",error:n};this._postMsg(t,s)},this._postMsgWithCallback=function(t,s,e){var r=i++,o="msg"+r.toString();s.id=o;n[o]=function(t,i){e(t,i),delete n[o]},this._postMsg(t,s),setTimeout(function(){o in n&&n[o]("Timedout")},this.opt.timeout)},this._postVerMsg=function(t,i){var n={type:"ver"};this._postMsgWithCallback(t,n,i)},this._postGetMsg=function(t,i,n){var s={type:"get",name:i};this._postMsgWithCallback(t,s,n)},this._postAttrMsg=function(t,i,n){var s={id:i,type:"attr",attr:n};this._postMsg(t,s)},this._postActionMsg=function(t,i,n){var s={type:"action",name:i,param:n};this._postMsg(t,s)},this.myVersion=function(){return t},this.handleVer=function(t,i){this._postAttrMsg(t,i,this.myVersion())},this.handleGet=function(t,i,n){if(n instanceof Array){for(var s={},e=0;e<n.length;e++){var r=this.getAttribute(n);"undefined"!=typeof r&&(s[n]=r)}this._postAttrMsg(t,i,s)}else{var o=this.getAttribute(n);"undefined"!=typeof o?this._postAttrMsg(t,i,o):this._postErrorMsg(t,i,"Attribute '"+n+"' not supported")}},this.handleAttr=function(t,i){n[t]&&n[t](null,i)},this.handleError=function(t,i){n[t]&&n[t](i)},this.handleAction=function(t,i,n){this.performAction(t,i,n)},this._allowOrigin=function(t){if(this.opt.origin&&"*"!==this.opt.origin){for(var i=0;i<this.opt.origin.length;i++)if(t==this.opt.origin[i])return!0;return!1}return!0},this._listener=function(t){if(this._allowOrigin(t.origin))try{var i=JSON.parse(t.data);i.type&&("get"==i.type?this.handleGet(t.source,i.id,i.name):"attr"==i.type&&i.id?this.handleAttr(i.id,i.attr):"error"==i.type&&i.id?this.handleError(i.id,i.error):"action"==i.type?this.handleAction(t.source,i.name,i.param):"ver"==i.type&&this.handleVer(t.source,i.id))}catch(n){return}},this._init=function(t){this.opt={origin:"*",timeout:1e3};var i=t||{};for(var n in i)this.opt[n]=i[n];"*"===this.opt.origin||this.opt.origin instanceof Array||(this.opt.origin=[this.opt.origin]);var s=this;window.addEventListener?window.addEventListener("message",function(t){s._listener.apply(s,[t])},!1):window.attachEvent("onmessage",function(t){s._listener.apply(s,[t])},!1)}};t.prototype.getAttribute=function(t){var i;return t in this.attrs&&(i=this.attrs[t],"function"==typeof i&&(i=i.call(this,t))),i},t.prototype.performAction=function(t,i,n){i in this.actions&&this.actions[i].apply(window,[t,n])},t.prototype.setAttributes=function(t){return this.attrs=t,this},t.prototype.setActions=function(t){return this.actions=t,this},t.prototype.getVersion=function(t,i){return t.window!=t&&[].unshift.call(arguments,window.parent),this._postVerMsg.apply(this,arguments),this},t.prototype.get=function(t,i,n){return t.window!=t&&[].unshift.call(arguments,window.parent),this._postGetMsg.apply(this,arguments),this},t.prototype.act=function(t,i,n){return t.window!=t&&[].unshift.call(arguments,window.parent),this._postActionMsg.apply(this,arguments),this},t.parent=function(i){return this.instance||(this.instance=new t,i=i||{},this.instance._init(i)),this.instance},t.child=function(i,n){return this.instance||(this.instance=new t,this.instance.name=i,n=n||{},this.instance._init(n)),this.instance},window.FrameMessenger={parent:t.parent,child:t.child,util:{isIFramed:function(){try{return window.self!==window.top}catch(t){return!0}},hasFrames:function(){return document.getElementsByTagName("iframe").length>0}}},"function"==typeof define&&define.amd&&define("dj.framemessenger.resources/framemessenger",[],function(){return window.FrameMessenger})}();
//# sourceMappingURL=maps/vendor.min-66e6eb83d3.js.map